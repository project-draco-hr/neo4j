{
  populator=newPopulator();
  List<NodePropertyUpdate> updates=Arrays.asList(NodePropertyUpdate.add(1,1,"foo",new long[]{1}),NodePropertyUpdate.add(2,1,"bar",new long[]{1}),NodePropertyUpdate.add(3,1,"foo",new long[]{1}));
  populator.add(updates);
  Register.DoubleLongRegister register=Registers.newDoubleLongRegister();
  long indexSize=populator.sampleResult(register);
  long uniqueElements=register.readFirst();
  long sampleSize=register.readSecond();
  assertEquals(3,indexSize);
  assertEquals(2,uniqueElements);
  assertEquals(3,sampleSize);
}
