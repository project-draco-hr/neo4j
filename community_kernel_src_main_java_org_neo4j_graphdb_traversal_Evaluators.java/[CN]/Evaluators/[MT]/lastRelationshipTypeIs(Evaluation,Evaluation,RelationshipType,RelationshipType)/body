{
  final Set<String> expectedTypes=new HashSet<String>();
  expectedTypes.add(type.name());
  for (  RelationshipType otherType : orAnyOfTheseTypes) {
    expectedTypes.add(otherType.name());
  }
  return new Evaluator(){
    @Override public Evaluation evaluate(    Path path){
      Relationship lastRelationship=path.lastRelationship();
      if (lastRelationship == null) {
        return evaluationIfNoMatch;
      }
      return expectedTypes.contains(lastRelationship.getType().name()) ? evaluationIfMatch : evaluationIfNoMatch;
    }
  }
;
}
