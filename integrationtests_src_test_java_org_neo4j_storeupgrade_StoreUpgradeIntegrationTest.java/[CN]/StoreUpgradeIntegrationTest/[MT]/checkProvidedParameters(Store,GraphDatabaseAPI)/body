{
  try (Transaction ignored=db.beginTx()){
    long nodeCount=count(db.getAllNodes());
    assertThat(nodeCount,is(store.expectedNodeCount));
    long indexCount=count(db.schema().getIndexes());
    assertThat(indexCount,is(store.indexes()));
    NeoStores neoStores=db.getDependencyResolver().resolveDependency(NeoStoreDataSource.class).getNeoStores();
    long lastCommittedTxId=neoStores.getMetaDataStore().getLastCommittedTransactionId();
    CountsTracker counts=neoStores.getCounts();
    assertEquals(lastCommittedTxId,counts.txId());
    assertThat(lastCommittedTxId,is(store.lastTxId));
  }
 }
