{
  DependencyResolver resolver=graphdb.getDependencyResolver();
  this.stores=new StoreAccess(graphdb);
  this.dataSource=resolver.resolveDependency(DataSourceManager.class).getDataSource();
  this.storeApplier=resolver.resolveDependency(TransactionRepresentationStoreApplier.class).withLegacyIndexTransactionOrdering(IdOrderingQueue.BYPASS);
  KernelHealth kernelHealth=resolver.resolveDependency(KernelHealth.class);
  PropertyLoader propertyLoader=new PropertyLoader(stores.getRawNeoStores());
  this.indexingService=resolver.resolveDependency(IndexingService.class);
  this.indexUpdatesValidator=new OnlineIndexUpdatesValidator(stores.getRawNeoStores(),kernelHealth,propertyLoader,indexingService,IndexUpdateMode.BATCHED);
}
