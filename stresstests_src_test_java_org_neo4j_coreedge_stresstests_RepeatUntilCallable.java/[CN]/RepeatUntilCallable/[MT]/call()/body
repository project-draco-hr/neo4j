{
  try {
    boolean success=true;
    while (keepGoing.getAsBoolean()) {
      success&=doWork();
      if (!success) {
        onFailure.run();
      }
    }
    return success;
  }
 catch (  Throwable t) {
    t.printStackTrace();
    onFailure.run();
    return false;
  }
}
