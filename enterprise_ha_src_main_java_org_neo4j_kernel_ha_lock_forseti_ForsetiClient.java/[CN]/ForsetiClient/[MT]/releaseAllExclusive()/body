{
  for (int i=0; i < exclusiveLockCounts.length; i++) {
    Map<Long,Integer> localLocks=exclusiveLockCounts[i];
    if (localLocks != null) {
      ConcurrentMap<Long,ForsetiLockManager.Lock> lockMap=lockMaps[i];
      for (      Long resourceId : localLocks.keySet()) {
        if (sharedLockCounts[i].containsKey(resourceId)) {
          lockMap.put(resourceId,new SharedLock(this));
        }
 else {
          releaseGlobalLock(lockMap,resourceId);
        }
      }
      localLocks.clear();
    }
  }
}
