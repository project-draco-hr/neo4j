{
  for (int i=0; i < exclusiveLockCounts.length; i++) {
    PrimitiveLongIntMap localLocks=exclusiveLockCounts[i];
    if (localLocks != null) {
      int size=localLocks.size();
      localLocks.visitKeys(releaseExclusiveLockVisitor.initialize(sharedLockCounts[i],lockMaps[i]));
      if (size <= 32) {
        localLocks.clear();
      }
 else {
        exclusiveLockCounts[i]=Primitive.longIntMap();
      }
    }
  }
}
