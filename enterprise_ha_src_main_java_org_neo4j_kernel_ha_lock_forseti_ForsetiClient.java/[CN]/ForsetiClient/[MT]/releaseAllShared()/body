{
  for (int i=0; i < sharedLockCounts.length; i++) {
    PrimitiveLongIntMap localLocks=sharedLockCounts[i];
    if (localLocks != null) {
      int size=localLocks.size();
      localLocks.visitKeys(releaseSharedLockVisitor.initialize(exclusiveLockCounts[i],lockMaps[i]));
      if (size <= 32) {
        localLocks.clear();
      }
 else {
        sharedLockCounts[i]=Primitive.longIntMap();
      }
    }
  }
}
