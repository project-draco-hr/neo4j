{
  for (  Map<Long,Integer>[] lockCounts : new Map[][]{exclusiveLockCounts,sharedLockCounts}) {
    for (int i=0; i < lockCounts.length; i++) {
      Map<Long,Integer> localLocks=lockCounts[i];
      if (localLocks != null) {
        ConcurrentMap<Long,ForsetiLockManager.Lock> lockMap=lockMaps[i];
        for (        Long resourceId : localLocks.keySet()) {
          releaseGlobalLock(lockMap,resourceId);
        }
        localLocks.clear();
      }
    }
  }
}
