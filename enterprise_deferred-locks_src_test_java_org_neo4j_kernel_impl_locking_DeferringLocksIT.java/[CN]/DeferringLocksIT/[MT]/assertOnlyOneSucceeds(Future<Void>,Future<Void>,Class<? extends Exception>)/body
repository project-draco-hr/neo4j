{
  try {
    if (get(action1) == null) {
      try {
        get(action2);
        fail("Second action should fail if first one succeeds");
      }
 catch (      ExecutionException e) {
        assertThat(e.getCause(),instanceOf(expectedFailure));
      }
    }
 else {
      fail("First action should either return null or throw");
    }
  }
 catch (  ExecutionException e) {
    assertThat(e.getCause(),instanceOf(expectedFailure));
    assertNull(get(action2));
  }
}
