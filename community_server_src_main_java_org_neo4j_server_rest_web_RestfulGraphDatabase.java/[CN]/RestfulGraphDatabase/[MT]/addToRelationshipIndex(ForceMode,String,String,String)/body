{
  try {
    if (unique(unique)) {
      Map<String,Object> entityBody=input.readMap(postBody,"key","value");
      Pair<IndexedEntityRepresentation,Boolean> result=actions(force).getOrCreateIndexedRelationship(indexName,String.valueOf(entityBody.get("key")),String.valueOf(entityBody.get("value")),extractRelationshipIdOrNull(getStringOrNull(entityBody,"uri")),extractNodeIdOrNull(getStringOrNull(entityBody,"start")),getStringOrNull(entityBody,"type"),extractNodeIdOrNull(getStringOrNull(entityBody,"end")),getMapOrNull(entityBody,"properties"));
      return result.other().booleanValue() ? output.created(result.first()) : output.ok(result.first());
    }
 else {
      Map<String,Object> entityBody=input.readMap(postBody,"key","value","uri");
      return output.created(actions(force).addToRelationshipIndex(indexName,String.valueOf(entityBody.get("key")),String.valueOf(entityBody.get("value")),extractRelationshipId(entityBody.get("uri").toString())));
    }
  }
 catch (  UnsupportedOperationException e) {
    return output.methodNotAllowed(e);
  }
catch (  BadInputException e) {
    return output.badRequest(e);
  }
catch (  Exception e) {
    return output.serverError(e);
  }
}
