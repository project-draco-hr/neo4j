{
  long transactionId, ticket;
synchronized (this) {
    logFile.checkRotation();
    transactionId=txIdGenerator.generate(transaction);
    append(transaction,transactionId);
    ticket=getCurrentTicket();
  }
  force(ticket);
  return FutureAdapter.present(transactionId);
}
