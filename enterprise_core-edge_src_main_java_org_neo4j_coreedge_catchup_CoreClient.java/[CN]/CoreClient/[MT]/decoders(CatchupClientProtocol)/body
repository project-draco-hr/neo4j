{
  RequestDecoderDispatcher<NextMessage> decoderDispatcher=new RequestDecoderDispatcher<>(protocol,logProvider);
  decoderDispatcher.register(NextMessage.STORE_ID,new GetStoreIdResponseDecoder());
  decoderDispatcher.register(NextMessage.TX_PULL_RESPONSE,new TxPullResponseDecoder());
  decoderDispatcher.register(NextMessage.CORE_SNAPSHOT,new CoreSnapshotDecoder());
  decoderDispatcher.register(NextMessage.STORE_COPY_FINISHED,new StoreCopyFinishedResponseDecoder());
  decoderDispatcher.register(NextMessage.TX_STREAM_FINISHED,new TxStreamFinishedResponseDecoder());
  decoderDispatcher.register(NextMessage.FILE_HEADER,new FileHeaderDecoder());
  decoderDispatcher.register(NextMessage.FILE_CONTENTS,new FileContentDecoder());
  return decoderDispatcher;
}
