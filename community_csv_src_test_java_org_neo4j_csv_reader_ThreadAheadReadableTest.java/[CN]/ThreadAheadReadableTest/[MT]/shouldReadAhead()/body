{
  MockedReader actual=new MockedReader(20);
  int bufferSize=10;
  CharReadable aheadReader=ThreadAheadReadable.threadAhead(actual,bufferSize);
  assertEquals(bufferSize,actual.awaitCompletedReadAttempts(1));
  assertEquals(7,aheadReader.read(new char[7],0,7));
  assertEquals(bufferSize + 7,actual.awaitCompletedReadAttempts(2));
  assertEquals(10,aheadReader.read(new char[10],0,10));
  assertEquals(20,actual.awaitCompletedReadAttempts(3));
  assertEquals(3,aheadReader.read(new char[5],0,5));
  assertEquals(20,actual.awaitCompletedReadAttempts(4));
  assertEquals(-1,aheadReader.read(new char[2],0,2));
}
