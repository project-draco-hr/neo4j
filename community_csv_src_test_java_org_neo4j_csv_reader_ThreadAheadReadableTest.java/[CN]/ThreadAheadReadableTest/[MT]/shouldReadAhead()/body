{
  TrackingReader actual=new TrackingReader(23);
  int bufferSize=5;
  CharReadable aheadReader=ThreadAheadReadable.threadAhead(actual,bufferSize);
  SectionedCharBuffer buffer=new SectionedCharBuffer(bufferSize);
  assertEquals(bufferSize,actual.awaitCompletedReadAttempts(1));
  int read=0;
  buffer=aheadReader.read(buffer,buffer.front());
  assertBuffer(chars(read,bufferSize),buffer,0,bufferSize);
  read+=buffer.available();
  buffer=aheadReader.read(buffer,buffer.front());
  assertBuffer(chars(read,bufferSize),buffer,0,bufferSize);
  read+=buffer.available();
  int keep=2;
  buffer=aheadReader.read(buffer,buffer.front() - keep);
  assertBuffer(chars(read - keep,bufferSize + keep),buffer,keep,bufferSize);
  read+=buffer.available();
  keep=3;
  buffer=aheadReader.read(buffer,buffer.front() - keep);
  assertBuffer(chars(read - keep,bufferSize + keep),buffer,keep,bufferSize);
  read+=buffer.available();
  keep=1;
  buffer=aheadReader.read(buffer,buffer.front() - keep);
  assertEquals(3,buffer.available());
  assertBuffer(chars(read - keep,buffer.available() + keep),buffer,keep,3);
  read+=buffer.available();
  assertEquals(23,read);
}
