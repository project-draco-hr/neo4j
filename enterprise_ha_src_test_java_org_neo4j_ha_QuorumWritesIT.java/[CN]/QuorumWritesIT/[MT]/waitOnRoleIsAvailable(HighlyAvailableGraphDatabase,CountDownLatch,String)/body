{
  final ClusterMemberEvents events=master.getDependencyResolver().resolveDependency(ClusterMemberEvents.class);
  events.addClusterMemberListener(new ClusterMemberListener.Adapter(){
    @Override public void memberIsAvailable(    String role,    InstanceId availableId,    URI atUri,    StoreId storeId){
      if (role.equals(roleToWaitFor)) {
        latch.countDown();
        events.removeClusterMemberListener(this);
      }
    }
  }
);
}
