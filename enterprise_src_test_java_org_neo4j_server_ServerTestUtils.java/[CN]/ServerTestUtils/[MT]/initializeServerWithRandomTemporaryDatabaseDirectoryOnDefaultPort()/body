{
  try {
    File temporaryConfigFile=createTempPropertyFile();
    writePropertyToFile("org.neo4j.database.location",createTempDir().getAbsolutePath(),temporaryConfigFile);
    writePropertyToFile("org.neo4j.server.webservice.packages","org.neo4j.server.rest.web",temporaryConfigFile);
    writePropertyToFile(NeoServer.WEBADMIN_NAMESPACE_PROPERTY_KEY + "rrdb.location",createTempDir().getAbsolutePath(),temporaryConfigFile);
    writePropertyToFile(NeoServer.WEBADMIN_NAMESPACE_PROPERTY_KEY + "neo4j-servers",constructWebadminServerConfig(),temporaryConfigFile);
    writePropertyToFile(NeoServer.OSGI_BUNDLE_DIR_PROPERTY_KEY,"../",temporaryConfigFile);
    System.setProperty(NeoServer.NEO_CONFIG_FILE_KEY,temporaryConfigFile.getAbsolutePath());
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  NeoServer.main(null);
}
