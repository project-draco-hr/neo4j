{
  try {
    File temporaryConfigFile=createTempPropertyFile();
    writePropertyToFile("org.neo4j.server.database.location",createTempDir().getAbsolutePath(),temporaryConfigFile);
    writePropertyToFile("org.neo4j.server.webserver.port",TEST_PORT,temporaryConfigFile);
    writePropertyToFile("org.neo4j.server.webservice.packages","org.neo4j.server.rest.web",temporaryConfigFile);
    writePropertyToFile(NeoServer.WEBADMIN_NAMESPACE_PROPERTY_KEY + "rrdb.location",createTempDir().getAbsolutePath(),temporaryConfigFile);
    writePropertyToFile(NeoServer.WEBADMIN_NAMESPACE_PROPERTY_KEY + "neo4j-servers",constructWebadminServerConfig(),temporaryConfigFile);
    System.setProperty(NeoServer.NEO_CONFIG_FILE_KEY,temporaryConfigFile.getAbsolutePath());
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  NeoServer.main(null);
  return NeoServer.getServer_FOR_TESTS_ONLY_KITTENS_DIE_WHEN_YOU_USE_THIS();
}
