{
  releaseConnections(tx);
  if (param == Status.STATUS_COMMITTED) {
    state.commit();
  }
 else {
    state.rollback();
  }
  try {
    resourceHolder.resource.kernelTransaction().release();
  }
 catch (  ReleaseLocksFailedKernelException e) {
    msgLog.error("Error releasing resources for " + tx,e);
  }
}
