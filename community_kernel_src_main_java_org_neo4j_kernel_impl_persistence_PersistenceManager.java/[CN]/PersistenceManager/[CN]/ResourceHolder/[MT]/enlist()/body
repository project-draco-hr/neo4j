{
  try {
    XAResource xaResource=connection.getXaResource();
    if (!tx.enlistResource(xaResource)) {
      throw new ResourceAcquisitionFailedException(xaResource);
    }
  }
 catch (  RollbackException|SystemException re) {
    throw new ResourceAcquisitionFailedException(re);
  }
}
