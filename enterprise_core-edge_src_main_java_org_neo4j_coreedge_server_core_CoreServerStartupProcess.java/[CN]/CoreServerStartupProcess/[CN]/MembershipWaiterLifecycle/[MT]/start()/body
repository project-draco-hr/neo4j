{
  CompletableFuture<Boolean> caughtUp=membershipWaiter.waitUntilCaughtUpMember(raft.state());
  try {
    caughtUp.get(joinCatchupTimeout,MILLISECONDS);
  }
 catch (  InterruptedException|ExecutionException|TimeoutException e) {
    throw new RuntimeException(format("Server failed to join cluster within catchup time limit [%d ms]",joinCatchupTimeout),e);
  }
 finally {
    caughtUp.cancel(true);
  }
}
