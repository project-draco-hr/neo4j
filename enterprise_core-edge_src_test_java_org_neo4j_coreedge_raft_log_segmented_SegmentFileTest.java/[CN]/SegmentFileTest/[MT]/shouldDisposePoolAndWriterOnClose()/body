{
  SegmentFile segment=create(fsRule.get(),raftLogFile,contentMarshal,logProvider,segmentHeader);
  segment.close();
  try {
    segment.getReader(0);
    fail("should have thrown");
  }
 catch (  RuntimeException ex) {
    assertEquals(StoreChannelPool.CLOSED_ERROR_MESSAGE,ex.getMessage());
  }
  try {
    segment.writer();
    fail("should have thrown");
  }
 catch (  RuntimeException ex) {
    assertEquals(format(SegmentFile.CLOSED_ERROR_MESSAGE,raftLogFile),ex.getMessage());
  }
}
