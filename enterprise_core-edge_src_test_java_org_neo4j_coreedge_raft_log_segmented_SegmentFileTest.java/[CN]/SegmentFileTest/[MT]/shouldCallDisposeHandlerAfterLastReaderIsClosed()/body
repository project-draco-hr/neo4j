{
  try (SegmentFile segment=create(fsRule.get(),fileNames.getForVersion(0),readerPool,0,contentMarshal,logProvider,segmentHeader)){
    IOCursor<EntryRecord> reader0=segment.getReader(0);
    IOCursor<EntryRecord> reader1=segment.getReader(1);
    segment.closeWriter();
    reader0.close();
    assertFalse(segment.tryClose());
    reader1.close();
    assertTrue(segment.tryClose());
  }
 }
