{
  final CharReadable firstSource=wrap(new StringReader("id:ID\tname:String\tbirth_date:long"));
  final CharReadable secondSource=wrap(new StringReader("0\tThe node\t123456789"));
  DataFactory<InputNode> dataFactory=data(Functions.<InputNode>identity(),new Factory<CharReadable>(){
    @Override public CharReadable newInstance(){
      return multipleSources(firstSource,secondSource);
    }
  }
);
  Header.Factory headerFactory=defaultFormatNodeFileHeader();
  Extractors extractors=new Extractors(';');
  CharSeeker seeker=dataFactory.create(TABS).stream();
  Header header=headerFactory.create(seeker,TABS,IdType.ACTUAL);
  assertArrayEquals(array(entry("id",Type.ID,extractors.long_()),entry("name",Type.PROPERTY,extractors.string()),entry("birth_date",Type.PROPERTY,extractors.long_())),header.entries());
  seeker.close();
}
