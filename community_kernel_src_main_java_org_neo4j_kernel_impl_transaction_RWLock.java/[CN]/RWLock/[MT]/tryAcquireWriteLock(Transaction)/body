{
  tx=getCurrentTransaction(tx);
  TxLockElement tle=getOrCreateLockElement(tx);
  try {
    tle.movedOn=false;
    if (totalWriteCount > tle.writeCount || totalReadCount > tle.readCount) {
      return false;
    }
    registerWriteLockAcquired(tx,tle);
    return true;
  }
  finally {
    tle.movedOn=true;
    marked--;
  }
}
