{
  Map<TxLockElement,LockingTransaction> transactions=new HashMap<TxLockElement,LockingTransaction>();
  for (  TxLockElement tle : txLockElementMap.values()) {
    transactions.put(tle,new LockingTransaction(tle.tx.toString(),tle.readCount,tle.writeCount));
  }
  for (  WaitElement thread : waitingThreadList) {
    transactions.put(thread.element,WaitingThread.create(thread.element.tx.toString(),thread.element.readCount,thread.element.writeCount,thread.waitingThread,thread.since,thread.lockType == LockType.WRITE));
  }
  ResourceType type;
  String id;
  if (resource instanceof Node) {
    type=ResourceType.NODE;
    id=Long.toString(((Node)resource).getId());
  }
 else   if (resource instanceof Relationship) {
    type=ResourceType.NODE;
    id=Long.toString(((Relationship)resource).getId());
  }
 else {
    type=ResourceType.OTHER;
    id=resource.toString();
  }
  return new LockInfo(type,id,readCount,writeCount,transactions.values());
}
