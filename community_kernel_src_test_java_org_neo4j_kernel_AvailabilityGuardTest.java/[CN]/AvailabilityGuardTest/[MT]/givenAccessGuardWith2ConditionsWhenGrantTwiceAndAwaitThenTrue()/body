{
  TickingClock clock=new TickingClock(0,100);
  AvailabilityGuard availabilityGuard=new AvailabilityGuard(clock,2);
  availabilityGuard.grant();
  availabilityGuard.grant();
  long start=clock.currentTimeMillis();
  boolean result=availabilityGuard.isAvailable(1000);
  long end=clock.currentTimeMillis();
  long waitTime=end - start;
  assertThat(result,equalTo(true));
  assertThat(waitTime,equalTo(100L));
}
