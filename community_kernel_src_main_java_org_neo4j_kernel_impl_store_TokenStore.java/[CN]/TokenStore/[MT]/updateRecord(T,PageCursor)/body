{
  int id=record.getId();
  cursor.setOffset(offsetForId(id));
  if (record.inUse()) {
    cursor.putByte(Record.IN_USE.byteValue());
    writeRecord(record,cursor);
  }
 else {
    cursor.putByte(Record.NOT_IN_USE.byteValue());
    if (!isInRecoveryMode()) {
      freeId(id);
    }
  }
}
