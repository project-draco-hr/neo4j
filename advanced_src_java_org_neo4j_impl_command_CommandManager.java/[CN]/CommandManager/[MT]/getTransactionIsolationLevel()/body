{
  try {
    if (TransactionFactory.getTransactionManager().getTransaction() == null) {
      throw new NotInTransactionException();
    }
  }
 catch (  javax.transaction.SystemException e) {
    throw new NotInTransactionException(e);
  }
  Thread currentThread=Thread.currentThread();
  CommandStackElement cse=commandStack.get(currentThread);
  if (cse != null) {
    return cse.isolationLevel;
  }
 else {
    return DEFAULT_ISOLATION_LEVEL;
  }
}
