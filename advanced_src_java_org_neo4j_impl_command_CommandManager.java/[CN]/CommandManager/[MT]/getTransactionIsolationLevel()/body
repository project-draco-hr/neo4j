{
  try {
    if (TransactionFactory.getTransactionManager().getTransaction() == null) {
      throw new NotInTransactionException();
    }
  }
 catch (  javax.transaction.SystemException e) {
    throw new NotInTransactionException(e);
  }
  Thread currentThread=Thread.currentThread();
  if (commandStack.containsKey(currentThread)) {
    return commandStack.get(currentThread).isolationLevel;
  }
 else {
    return DEFAULT_ISOLATION_LEVEL;
  }
}
