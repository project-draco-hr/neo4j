{
  final File confDir=testDirectory.directory("confdir");
  final File unwritableLogDir=createUnwritableDirectory();
  final File configFile=HTTPLoggingPreparednessRuleTest.createConfigFile(HTTPLoggingPreparednessRuleTest.createLogbackConfigXml(unwritableLogDir),confDir);
  Config config=new Config(MapUtil.stringMap(ServerSettings.http_logging_enabled.name(),"true",ServerSettings.http_log_config_file.name(),configFile.getPath()));
  exception.expect(InvalidSettingException.class);
  NeoServer server=CommunityServerBuilder.server().withDefaultDatabaseTuning().withPreflightTasks(new EnsurePreparedForHttpLogging(config)).withProperty(ServerSettings.http_logging_enabled.name(),"true").withProperty(ServerSettings.http_log_config_file.name(),configFile.getPath()).usingDatabaseDir(confDir.getAbsolutePath()).build();
}
