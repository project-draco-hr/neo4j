{
  Configuration mockConfig=mock(Configuration.class);
  String managementUri="/management";
  when(mockConfig.getString(Configurator.MANAGEMENT_PATH_PROPERTY_KEY,Configurator.DEFAULT_MANAGEMENT_API_PATH)).thenReturn(managementUri);
  String dataUri="/data";
  when(mockConfig.getString(Configurator.REST_API_PATH_PROPERTY_KEY,Configurator.DEFAULT_DATA_API_PATH)).thenReturn(dataUri);
  String baseUri="http://www.example.com";
  DiscoveryService ds=new DiscoveryService(mockConfig,new EntityOutputFormat(new JsonFormat(),new URI(baseUri),null));
  Response response=ds.getDiscoveryDocument();
  String json=new String((byte[])response.getEntity());
  assertNotNull(json);
  assertThat(json.length(),is(greaterThan(0)));
  assertThat(json,is(not("\"\"")));
  assertThat(json,is(not("null")));
  assertThat(json,containsString("\"management\" : \"" + baseUri + managementUri+ "\""));
  assertThat(json,containsString("\"data\" : \"" + baseUri + dataUri+ "\""));
}
