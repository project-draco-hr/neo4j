{
  IndexDescriptor idx=delegate.getIndexDescriptor(indexId);
  DiffSets<Long> diff=state.getNodesWithChangedProperty(idx.getPropertyKeyId(),value);
  diff.removeAll(state.getDeletedNodes());
  diff=diff.filterAdded(new HasLabelFilter(idx.getLabelId()));
  Iterable<Long> addedNodesWithLabel=state.getAddedNodesWithLabel(idx.getLabelId());
  diff.addAll(Iterables.filter(new HasPropertyFilter(idx.getPropertyKeyId(),value),addedNodesWithLabel));
  return diff.apply(delegate.exactIndexLookup(indexId,value));
}
