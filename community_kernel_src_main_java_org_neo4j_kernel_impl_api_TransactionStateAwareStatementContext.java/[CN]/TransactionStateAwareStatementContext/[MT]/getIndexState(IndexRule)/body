{
  DiffSets<IndexRule> diffSet=state.getIndexRuleDiffSetsByLabel(indexRule.getLabel());
  if (diffSet.isAdded(indexRule)) {
    return InternalIndexState.POPULATING;
  }
  if (diffSet.isRemoved(indexRule)) {
    throw new IndexNotFoundKernelException(String.format("Index for label id %d on property id %d has been " + "dropped in this transaction.",indexRule.getLabel(),indexRule.getPropertyKey()));
  }
  return delegate.getIndexState(indexRule);
}
