{
  Iterable<Long> committedLabels=delegate.getLabelsForNode(nodeId);
  if (!state.hasChanges())   return committedLabels;
  Set<Long> result=addToCollection(committedLabels,new HashSet<Long>());
  result.addAll(state.getAddedLabels(nodeId,false));
  result.removeAll(state.getRemovedLabels(nodeId,false));
  return result;
}
