{
  fileChannel=fs.open(fileName,"r");
  long fileSize=fileChannel.size();
  String expectedVersion=fromVersion;
  byte version[]=new byte[UTF8.encode(expectedVersion).length];
  ByteBuffer buffer=ByteBuffer.wrap(version);
  fileChannel.position(fileSize - version.length);
  fileChannel.read(buffer);
  buffer=ByteBuffer.allocate(4);
  fileChannel.position(0);
  fileChannel.read(buffer);
  buffer.flip();
  blockSize=buffer.getInt();
  blockBuffer=ByteBuffer.allocate(blockSize);
  chainBuffer=ByteBuffer.wrap(new byte[blockSize * 3]);
}
