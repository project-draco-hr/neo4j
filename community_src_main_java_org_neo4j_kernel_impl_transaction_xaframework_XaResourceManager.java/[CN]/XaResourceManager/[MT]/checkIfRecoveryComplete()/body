{
  msgLog.logMessage("XaResourceManager[" + name + "] checkRecoveryComplete "+ xidMap.size()+ " xids");
  if (log.scanIsComplete() && recoveredTxCount == 0) {
    tf.recoveryComplete();
    try {
      for (      int identifier : recoveredDoneRecords) {
        log.doneInternal(identifier);
      }
      recoveredDoneRecords.clear();
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
    msgLog.logMessage("XaResourceManager[" + name + "] recovery completed.");
  }
 else {
    msgLog.logMessage("XaResourceManager[" + name + "] recovery not completed, xidCount="+ recoveredTxCount+ " waiting for global tm");
  }
}
