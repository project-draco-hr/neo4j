{
  String indexName=parser.arguments().get(0);
  Class<? extends PropertyContainer> entityType=getEntityType(parser);
  if (getIndex(indexName,entityType,null) != null) {
    out.println(entityType.getClass().getSimpleName() + " index '" + indexName+ "' already exists");
    return;
  }
  Map config;
  try {
    config=parser.arguments().size() >= 2 ? parseJSONMap(parser.arguments().get(1)) : null;
  }
 catch (  JSONException e) {
    throw ShellException.wrapCause(e);
  }
  if (entityType.equals(Node.class)) {
    Index<Node> index=config != null ? getServer().getDb().index().forNodes(indexName,config) : getServer().getDb().index().forNodes(indexName);
  }
 else {
    Index<Relationship> index=config != null ? getServer().getDb().index().forRelationships(indexName,config) : getServer().getDb().index().forRelationships(indexName);
  }
}
