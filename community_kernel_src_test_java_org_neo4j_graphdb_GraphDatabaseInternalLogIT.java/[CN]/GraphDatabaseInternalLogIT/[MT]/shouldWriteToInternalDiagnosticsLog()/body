{
  new TestGraphDatabaseFactory().newEmbeddedDatabase(testDir.graphDbDir()).shutdown();
  final File internalLog=new File(testDir.graphDbDir(),StoreLogService.INTERNAL_LOG_NAME);
  assertThat(internalLog.isFile(),is(true));
  assertThat(internalLog.length(),greaterThan(0L));
  assertThat(IteratorUtil.count(asIterable(internalLog,StandardCharsets.UTF_8),new Predicate<String>(){
    @Override public boolean test(    String line){
      return line.contains("Database is now ready");
    }
  }
),is(1));
  assertThat(IteratorUtil.count(asIterable(internalLog,StandardCharsets.UTF_8),new Predicate<String>(){
    @Override public boolean test(    String line){
      return line.contains("Database is now unavailable");
    }
  }
),is(1));
}
