{
  final IndexHits<Node> userHits=usersIndex.get("name",username);
  Node firstUser=null;
  Set<Node> duplicates=new HashSet<Node>();
  try {
    for (    Node user : userHits) {
      if (firstUser == null) {
        firstUser=user;
      }
 else {
        duplicates.add(user);
      }
    }
  }
  finally {
    userHits.close();
  }
  if (!duplicates.isEmpty()) {
    try {
      deleteNodes(username,graphDb,usersIndex,duplicates);
    }
 catch (    Exception e) {
    }
  }
  return firstUser;
}
