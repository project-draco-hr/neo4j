{
  final TransactionMetrics transactionMetrics=new TransactionMetrics(registry,config,dataSourceManager,transactionCounters);
  final PageCacheMetrics pageCacheMetrics=new PageCacheMetrics(registry,config,pageCacheCounters);
  final CheckPointingMetrics checkPointingMetrics=new CheckPointingMetrics(registry,config,checkPointerMonitor,logRotationMonitor);
  final EntityCountMetrics entityCountMetrics=new EntityCountMetrics(registry,config,idGeneratorFactory);
  final NetworkMetrics networkMetrics=new NetworkMetrics(config,monitors,registry);
  final ClusterMetrics clusterMetrics=new ClusterMetrics(config,monitors,registry,dependencyResolver,logService);
  final CypherMetrics cypherMetrics=new CypherMetrics(config,monitors,registry);
  final JvmMetrics jvmMetrics=new JvmMetrics(config,registry);
  return new LifecycleAdapter(){
    @Override public void start() throws Throwable {
      transactionMetrics.start();
      pageCacheMetrics.start();
      checkPointingMetrics.start();
      entityCountMetrics.start();
      networkMetrics.start();
      clusterMetrics.start();
      jvmMetrics.start();
      cypherMetrics.start();
    }
    @Override public void stop() throws IOException {
      transactionMetrics.stop();
      pageCacheMetrics.stop();
      checkPointingMetrics.stop();
      entityCountMetrics.stop();
      networkMetrics.stop();
      clusterMetrics.stop();
      jvmMetrics.stop();
      cypherMetrics.stop();
    }
  }
;
}
