{
  final DBMetrics dbMetrics=new DBMetrics(registry,config,transactionCounters,pageCacheCounters,checkPointerMonitor,logRotationMonitor,idGeneratorFactory);
  final NetworkMetrics networkMetrics=new NetworkMetrics(config,monitors,registry);
  final JvmMetrics jvmMetrics=new JvmMetrics(config,registry);
  final ClusterMetrics clusterMetrics=new ClusterMetrics(config,monitors,registry);
  return new LifecycleAdapter(){
    @Override public void start() throws Throwable {
      dbMetrics.start();
      networkMetrics.start();
      clusterMetrics.start();
      jvmMetrics.start();
    }
    @Override public void stop() throws IOException {
      dbMetrics.stop();
      networkMetrics.stop();
      clusterMetrics.stop();
      jvmMetrics.stop();
    }
  }
;
}
