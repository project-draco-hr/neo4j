{
  final DBMetrics dbMetrics=new DBMetrics(registry,config,transactionCounters,pageCacheCounters,idGeneratorFactory);
  final NetworkMetrics networkMetrics=new NetworkMetrics(config,monitors,registry);
  final JvmMetrics jvmMetrics=new JvmMetrics(logService,config,registry);
  final CypherMetrics cypherMetrics=new CypherMetrics(config,monitors,registry);
  return new LifecycleAdapter(){
    @Override public void start() throws Throwable {
      dbMetrics.start();
      networkMetrics.start();
      jvmMetrics.start();
      cypherMetrics.start();
    }
    @Override public void stop() throws IOException {
      dbMetrics.stop();
      networkMetrics.stop();
      jvmMetrics.stop();
      cypherMetrics.stop();
    }
  }
;
}
