def run(self):
    if (self.options.format == ''):
        self.options.format = 'png'
    if (self.options.infile == '-'):
        if (self.options.outfile is None):
            sys.stderr.write('OUTFILE must be specified')
            sys.exit(1)
        infile = (os.path.splitext(self.options.outfile)[0] + '.txt')
        lines = sys.stdin.readlines()
        open(infile, 'w').writelines(lines)
    if (not os.path.isfile(infile)):
        raise EApp, ('input file does not exist: %s' % infile)
    if (self.options.outfile is None):
        outfile = (os.path.splitext(infile)[0] + '.png')
    else:
        outfile = self.options.outfile
    self.graphviz2png(infile, outfile)
    if (self.options.infile == '-'):
        sys.stdout.write(' ')
