{
  Transaction tx=baseDb.beginTx();
  baseDb.getNodeById(nodeId).removeProperty("propName");
  tx.success();
  tx.finish();
  final CountDownLatch localLatch=new CountDownLatch(1);
  Thread updatePuller=new Thread(new Runnable(){
    public void run(){
      try {
        Pair<Long,ReadableByteChannel> lastTx=getLatestCommitedTx(baseDb);
        NeoStoreXaDataSource targetNeoDatasource=targetDb.getXaDataSourceManager().getNeoStoreDataSource();
        localLatch.countDown();
        targetNeoDatasource.applyCommittedTransaction(lastTx.first(),lastTx.other());
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
,"writer");
  updatePuller.start();
  Thread.sleep(100);
  localLatch.await();
  waitForSuspend();
  Transaction tx2=targetDb.beginTx();
  try {
    targetDb.getNodeById(nodeId).getProperty("propName");
    tx2.success();
  }
  finally {
    tx2.finish();
  }
  resumeAll();
  updatePuller.join();
}
