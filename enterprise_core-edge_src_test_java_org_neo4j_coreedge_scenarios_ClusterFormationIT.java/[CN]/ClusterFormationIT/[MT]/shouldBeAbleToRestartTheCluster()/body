{
  final DiscoveryServiceFactory discoveryServiceFactory=new SharedDiscoveryService();
  cluster=Cluster.start(dir.directory(),3,0,discoveryServiceFactory);
  assertEquals(3,cluster.numberOfCoreServers());
  cluster.shutdown();
  cluster=Cluster.start(dir.directory(),3,0,discoveryServiceFactory);
  assertEquals(3,cluster.numberOfCoreServers());
  cluster.removeCoreServerWithServerId(1);
  cluster.addCoreServerWithServerId(3,3);
  cluster.shutdown();
  cluster=Cluster.start(dir.directory(),3,0,discoveryServiceFactory);
  assertEquals(3,cluster.numberOfCoreServers());
}
