{
  T entity1=creator.create();
  T entity2=creator.create();
  String key="name";
  index.add(entity1,key,"The quick brown fox");
  index.add(entity2,key,"brown fox jumped over");
  assertCollection(index.get(key,"The quick brown fox"),entity1);
  assertCollection(index.get(key,"brown fox jumped over"),entity2);
  assertQueryNotPossible(index);
  restartTx();
  assertCollection(index.get(key,"The quick brown fox"),entity1);
  assertCollection(index.get(key,"brown fox jumped over"),entity2);
  assertCollection(index.query(key,"quick"),entity1);
  assertCollection(index.query(key,"brown"),entity1,entity2);
  assertCollection(index.query(key,"quick OR jumped"),entity1,entity2);
  assertCollection(index.query(key,"brown AND fox"),entity1,entity2);
  index.clear();
}
