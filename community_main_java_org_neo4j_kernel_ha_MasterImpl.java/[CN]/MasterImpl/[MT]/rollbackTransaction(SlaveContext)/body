{
  Transaction otherTx=suspendOtherAndResumeThis(context);
  try {
    Transaction tx=transactions.remove(context);
    if (tx == null) {
      throw new RuntimeException("Shouldn't happen");
    }
    graphDbConfig.getTxModule().getTxManager().rollback();
    System.out.println(Thread.currentThread() + " rolled back " + context);
    return packResponse(context,null,ALL);
  }
 catch (  IllegalStateException e) {
    throw new RuntimeException(e);
  }
catch (  SecurityException e) {
    throw new RuntimeException(e);
  }
catch (  SystemException e) {
    throw new RuntimeException(e);
  }
 finally {
    suspendThisAndResumeOther(otherTx,context);
  }
}
