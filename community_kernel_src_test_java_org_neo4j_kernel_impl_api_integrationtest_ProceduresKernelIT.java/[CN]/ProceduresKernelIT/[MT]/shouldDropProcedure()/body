{
  SchemaWriteOperations ops=schemaWriteOperationsInNewTransaction();
  ops.procedureCreate(signature,"javascript","emit(1);");
  commit();
  ops=schemaWriteOperationsInNewTransaction();
  ops.procedureDrop(signature.name());
  Iterator<ProcedureSignature> all=ops.proceduresGetAll();
  assertThat(asCollection(all),Matchers.<Collection<ProcedureSignature>>equalTo(Collections.<ProcedureSignature>emptyList()));
  commit();
  assertThat(asCollection(readOperationsInNewTransaction().proceduresGetAll()),Matchers.<Collection<ProcedureSignature>>equalTo(Collections.<ProcedureSignature>emptyList()));
}
