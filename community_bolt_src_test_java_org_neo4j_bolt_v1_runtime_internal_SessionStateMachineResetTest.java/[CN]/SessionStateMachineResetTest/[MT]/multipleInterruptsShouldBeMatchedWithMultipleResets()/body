{
  RecordingCallback recorder=new RecordingCallback();
  SessionStateMachine ssm=new SessionStateMachine(mock(SessionStateMachine.SPI.class));
  ssm.init("bob/1.0",map(),null,noOp());
  ssm.interrupt();
  ssm.interrupt();
  ssm.run("hello",map(),null,recorder);
  ssm.reset(null,recorder);
  ssm.run("hello",map(),null,recorder);
  assertThat(recorder,recorded(ignored(),ignored(),ignored()));
  recorder=new RecordingCallback();
  ssm.reset(null,recorder);
  ssm.run("hello",map(),null,recorder);
  assertThat(recorder,recorded(success(),success()));
}
