{
  String jsonString=new PrettyJSON().array().object().key("method").value("POST").key("to").value("/node").key("body").object().key("age").value("1").endObject().endObject().object().key("method").value("POST").key("to").value("/node").key("body").array().value("a_list").value("this_makes_no_sense").endArray().endObject().endArray().toString();
  int originalNodeCount=countNodes();
  JaxRsResponse response=RestRequest.req().accept(APPLICATION_JSON_TYPE).header(StreamingFormat.STREAM_HEADER,"true").post(batchUri(),jsonString);
  assertEquals(200,response.getStatus());
  Map<String,String> body=(Map)singleResult(response,1).get("body");
  assertEquals(BadInputException.class.getSimpleName(),body.get("exception"));
  assertThat(body.get("message"),containsString("java.util.ArrayList"));
  assertThat(body.get("message"),containsString("java.util.Map"));
  assertEquals(400,singleResult(response,1).get("status"));
  assertEquals(originalNodeCount,countNodes());
}
