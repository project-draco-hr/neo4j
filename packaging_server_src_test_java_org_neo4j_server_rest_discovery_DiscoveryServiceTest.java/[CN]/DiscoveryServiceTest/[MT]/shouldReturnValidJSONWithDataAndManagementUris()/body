{
  Configuration mockConfig=mock(Configuration.class);
  String managementUri="http://localhost:9999/management";
  when(mockConfig.getString(Configurator.WEB_ADMIN_PATH_PROPERTY_KEY)).thenReturn(managementUri);
  String dataUri="http://localhost:8888/data";
  when(mockConfig.getString(Configurator.REST_API_PATH_PROPERTY_KEY)).thenReturn(dataUri);
  DiscoveryService ds=new DiscoveryService(mockConfig,new EntityOutputFormat(new JsonFormat(),new URI("http://localhost:5555"),null));
  Response response=ds.getDiscoveryDocument();
  String json=new String((byte[])response.getEntity());
  assertNotNull(json);
  assertThat(json.length(),is(greaterThan(0)));
  assertThat(json,is(not("\"\"")));
  assertThat(json,is(not("null")));
  assertThat(json,containsString("\"management\" : \"" + managementUri + "\""));
  assertThat(json,containsString("\"data\" : \"" + dataUri + "\""));
}
