{
  try (ServerControls server=TestServerBuilders.newInProcessBuilder().withProcedure(MyProceduresUsingMyCoreAPI.class).newServer()){
    assertQueryGetsValue(server,"CALL makeNode(\\'Test\\')",0L);
    assertQueryGetsValue(server,"CALL makeNode(\\'Test\\')",1L);
    assertQueryGetsValue(server,"CALL makeNode(\\'Test\\')",2L);
    assertQueryGetsValue(server,"CALL countNodes",3L);
    assertQueryGetsError(server,"CALL willFail","Write operations are not allowed");
  }
 }
