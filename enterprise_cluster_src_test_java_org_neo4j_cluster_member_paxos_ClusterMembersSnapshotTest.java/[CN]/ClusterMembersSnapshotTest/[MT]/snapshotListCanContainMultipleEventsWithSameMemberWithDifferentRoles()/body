{
  ClusterMembersSnapshot snapshot=new ClusterMembersSnapshot(null);
  URI clusterUri=new URI(URI);
  InstanceId instanceId=new InstanceId(1);
  MemberIsAvailable event1=new MemberIsAvailable(ROLE_1,instanceId,clusterUri,new URI(URI + "?something"),StoreId.DEFAULT);
  snapshot.availableMember(event1);
  MemberIsAvailable event2=new MemberIsAvailable(ROLE_2,instanceId,clusterUri,new URI(URI + "?something"),StoreId.DEFAULT);
  snapshot.availableMember(event2);
  assertEquals(2,count(snapshot.getCurrentAvailable(instanceId)));
  assertThat(snapshot.getCurrentAvailable(instanceId),hasItems(memberIsAvailable(event1),memberIsAvailable(event2)));
  assertEquals(2,count(snapshot.getCurrentAvailableMembers()));
  assertThat(snapshot.getCurrentAvailableMembers(),hasItems(memberIsAvailable(event1),memberIsAvailable(event2)));
}
