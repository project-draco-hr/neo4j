{
  ClusterMembersSnapshot snapshot=new ClusterMembersSnapshot();
  URI clusterUri=new URI(URI);
  MemberIsAvailable event=new MemberIsAvailable(ROLE_1,clusterUri,new URI(URI + "?something1"));
  snapshot.availableMember(event);
  URI otherClusterUri=new URI(URI);
  MemberIsAvailable otherEvent=new MemberIsAvailable(ROLE_1,otherClusterUri,new URI(URI + "?something2"));
  snapshot.availableMember(otherEvent);
  assertEquals(1,count(snapshot.getCurrentAvailable(clusterUri)));
  assertThat(snapshot.getCurrentAvailable(clusterUri),CoreMatchers.<MemberIsAvailable>hasItems(memberIsAvailable(otherEvent)));
  assertEquals(1,count(snapshot.getCurrentAvailableMembers()));
  assertThat(snapshot.getCurrentAvailableMembers(),CoreMatchers.<MemberIsAvailable>hasItems(memberIsAvailable(otherEvent)));
}
