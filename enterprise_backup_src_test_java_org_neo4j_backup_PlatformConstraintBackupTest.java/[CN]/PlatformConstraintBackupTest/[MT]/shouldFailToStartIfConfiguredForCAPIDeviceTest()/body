{
  GraphDatabaseFactory graphDatabaseFactory=new GraphDatabaseFactory();
  GraphDatabaseBuilder gdBuilder=graphDatabaseFactory.newEmbeddedDatabaseBuilder(storeDir.graphDbDir());
  gdBuilder.setConfig(OnlineBackupSettings.online_backup_enabled,Settings.TRUE).setConfig(GraphDatabaseSettings.pagecache_swapper,"custom");
  try {
    gdBuilder.newGraphDatabase();
    fail("Should not have created database with custom IO configuration and Online Backup.");
  }
 catch (  RuntimeException ex) {
    assertEquals("Online Backup not allowed with custom IO integration",ex.getMessage());
  }
}
