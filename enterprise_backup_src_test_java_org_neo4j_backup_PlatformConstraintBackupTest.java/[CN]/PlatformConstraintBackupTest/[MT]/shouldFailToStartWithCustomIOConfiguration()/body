{
  try {
    GraphDatabaseBuilder builder=new TestGraphDatabaseFactory().newEmbeddedDatabaseBuilder(workingDir);
    builder.setConfig(OnlineBackupSettings.online_backup_enabled,Settings.TRUE);
    builder.setConfig(GraphDatabaseSettings.pagecache_swapper,"custom");
    builder.newGraphDatabase();
    fail("Should not have created database with custom IO configuration and online backup.");
  }
 catch (  RuntimeException ex) {
    assertEquals(OnlineBackupKernelExtension.CUSTOM_IO_EXCEPTION_MESSAGE,ex.getCause().getCause().getMessage());
  }
}
