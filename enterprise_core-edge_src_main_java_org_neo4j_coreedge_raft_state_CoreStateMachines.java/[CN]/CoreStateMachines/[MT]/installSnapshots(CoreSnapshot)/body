{
  idAllocationStateMachine.installSnapshot(coreSnapshot.get(CoreStateType.ID_ALLOCATION));
  replicatedLockTokenStateMachine.installSnapshot(coreSnapshot.get(CoreStateType.LOCK_TOKEN));
  long snapshotPrevIndex=coreSnapshot.prevIndex();
  try {
    if (snapshotPrevIndex > 1) {
      raftLog.skip(snapshotPrevIndex,coreSnapshot.prevTerm());
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  coreState.skip(snapshotPrevIndex);
}
