{
  replicatedTxStateMachine.ensuredApplied();
switch (tokenRequest.type()) {
case PROPERTY:
    propertyKeyTokenStateMachine.applyCommand(tokenRequest,commandIndex,callback);
  break;
case RELATIONSHIP:
relationshipTypeTokenStateMachine.applyCommand(tokenRequest,commandIndex,callback);
break;
case LABEL:
labelTokenStateMachine.applyCommand(tokenRequest,commandIndex,callback);
break;
default :
throw new IllegalStateException();
}
}
