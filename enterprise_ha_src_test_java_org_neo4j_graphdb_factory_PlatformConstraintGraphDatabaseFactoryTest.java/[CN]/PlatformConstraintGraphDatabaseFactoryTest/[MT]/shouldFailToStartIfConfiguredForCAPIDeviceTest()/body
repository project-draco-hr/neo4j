{
  GraphDatabaseBuilder graphDatabaseBuilder=new HighlyAvailableGraphDatabaseFactory().newEmbeddedDatabaseBuilder(storeDir.graphDbDir()).setConfig(GraphDatabaseSettings.pagecache_swapper,"custom").setConfig(ClusterSettings.initial_hosts,"127.0.0.1:5001").setConfig(ClusterSettings.server_id,"1");
  try {
    graphDatabaseBuilder.newGraphDatabase();
    fail("Should not have created database with custom IO configuration and HA mode.");
  }
 catch (  RuntimeException ex) {
    assertEquals("HA mode not allowed with custom IO integrations",ex.getMessage());
  }
}
