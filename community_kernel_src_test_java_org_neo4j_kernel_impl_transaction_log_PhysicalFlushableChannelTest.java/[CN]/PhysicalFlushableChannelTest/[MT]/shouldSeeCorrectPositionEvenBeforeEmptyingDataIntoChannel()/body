{
  final File file=new File(directory.directory(),"file");
  StoreChannel storeChannel=fs.open(file,"rw");
  PhysicalLogVersionedStoreChannel versionedStoreChannel=new PhysicalLogVersionedStoreChannel(storeChannel,1,(byte)-1);
  PositionAwarePhysicalFlushableChannel channel=new PositionAwarePhysicalFlushableChannel(versionedStoreChannel);
  LogPositionMarker positionMarker=new LogPositionMarker();
  LogPosition initialPosition=channel.getCurrentPosition(positionMarker).newPosition();
  channel.putLong(67);
  channel.putInt(1234);
  LogPosition positionAfterSomeData=channel.getCurrentPosition(positionMarker).newPosition();
  assertEquals(12,positionAfterSomeData.getByteOffset() - initialPosition.getByteOffset());
  channel.close();
}
