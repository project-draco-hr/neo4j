{
  if (neo instanceof EmbeddedGraphDatabase) {
    return ((EmbeddedGraphDatabase)neo).getConfig().getTxModule().getTxManager();
  }
 else {
    throw new IllegalArgumentException("Cannot get transaction manager from neo instance of class=" + neo.getClass());
  }
}
