{
  dir=TargetDirectory.forTest(getClass()).cleanDirectory("db");
  Map<String,String> configParams=MapUtil.stringMap();
  Config config=new Config(configParams);
  DefaultIdGeneratorFactory idGeneratorFactory=new DefaultIdGeneratorFactory();
  DefaultFileSystemAbstraction fs=new DefaultFileSystemAbstraction();
  Monitors monitors=new Monitors();
  PageCache pageCache=pageCacheRule.getPageCache(fs,config);
  StoreFactory factory=new StoreFactory(config,idGeneratorFactory,pageCache,fs,StringLogger.DEV_NULL,new DefaultTxHook(),monitors);
  File fileName=new File(dir,"arraystore");
  factory.createDynamicArrayStore(fileName,120);
  arrayStore=new DynamicArrayStore(fileName,config,IdType.ARRAY_BLOCK,idGeneratorFactory,pageCache,fs,StringLogger.DEV_NULL,StoreVersionMismatchHandler.THROW_EXCEPTION,monitors);
}
