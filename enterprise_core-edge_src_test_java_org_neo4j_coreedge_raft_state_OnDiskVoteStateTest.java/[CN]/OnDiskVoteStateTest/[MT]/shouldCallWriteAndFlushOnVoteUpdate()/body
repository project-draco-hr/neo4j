{
  StoreFileChannel channel=newFileChannelMock();
  FileSystemAbstraction fsa=newFileSystemMock(channel);
  AdvertisedSocketAddress localhost=new AdvertisedSocketAddress("localhost:" + 1234);
  CoreMember member=new CoreMember(localhost,localhost);
  OnDiskVoteState<CoreMember> state=new OnDiskVoteState<>(fsa,new File(testDir.directory(),"on.disk.state"),100,mock(Supplier.class),new CoreMemberMarshal(),NullLogProvider.getInstance());
  state.votedFor(member,0);
  verify(channel).writeAll(any(ByteBuffer.class));
  verify(channel).flush();
}
