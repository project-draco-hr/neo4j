{
  StoreFileChannel channel=mock(StoreFileChannel.class);
  when(channel.read(any(ByteBuffer.class))).thenReturn(-1);
  FileSystemAbstraction fsa=mock(FileSystemAbstraction.class);
  when(fsa.open(any(File.class),anyString())).thenReturn(channel);
  AdvertisedSocketAddress localhost=new AdvertisedSocketAddress("localhost:" + 1234);
  CoreMember member=new CoreMember(localhost,localhost);
  OnDiskVoteState<CoreMember> state=new OnDiskVoteState<>(fsa,new File(testDir.directory(),"on.disk.state"),100,mock(Supplier.class),new CoreMemberMarshal());
  state.votedFor(member,0);
  verify(channel).writeAll(any(ByteBuffer.class));
  verify(channel).flush();
}
