{
  StoreFileChannel channel=mock(StoreFileChannel.class);
  when(channel.read(any(ByteBuffer.class))).thenReturn(-1);
  FileSystemAbstraction fsa=mock(FileSystemAbstraction.class);
  when(fsa.open(any(File.class),anyString())).thenReturn(channel);
  OnDiskVoteState<CoreMember> state=new OnDiskVoteState<>(fsa,new File(testDir.directory(),"on.disk.state"),100,mock(Supplier.class),new CoreMemberMarshal());
  state.shutdown();
  verify(channel).flush();
  verify(channel).close();
}
