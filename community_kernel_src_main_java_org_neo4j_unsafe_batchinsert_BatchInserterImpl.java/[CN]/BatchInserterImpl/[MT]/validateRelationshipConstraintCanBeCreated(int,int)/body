{
  for (  SchemaRule rule : schemaCache.schemaRulesForRelationshipType(typeId)) {
    int otherPropertyKeyId;
switch (rule.getKind()) {
case MANDATORY_RELATIONSHIP_PROPERTY_CONSTRAINT:
      otherPropertyKeyId=((MandatoryRelationshipPropertyConstraintRule)rule).getPropertyKey();
    break;
default :
  throw new IllegalStateException("Case not handled for " + rule.getKind());
}
if (otherPropertyKeyId == propertyKeyId) {
throw new ConstraintViolationException("It is not allowed to create schema constraints and " + "indexes on the same {relationshipType;property}.");
}
}
}
