{
  LabelTokenStore labelTokenStore=neoStore.getLabelTokenStore();
  int keyId=(int)labelTokenStore.nextId();
  LabelTokenRecord record=new LabelTokenRecord(keyId);
  record.setInUse(true);
  record.setCreated();
  Collection<DynamicRecord> keyRecords=labelTokenStore.allocateNameRecords(encodeString(stringKey));
  record.setNameId((int)first(keyRecords).getId());
  for (  DynamicRecord keyRecord : keyRecords) {
    record.addNameRecord(keyRecord);
  }
  labelTokenStore.updateRecord(record);
  labelTokens.addToken(stringKey,keyId);
  return keyId;
}
