{
  SchemaStore schemaStore=getSchemaStore();
  IndexRule schemaRule=IndexRule.indexRule(schemaStore.nextId(),getOrCreateLabelId(label.name()),getOrCreatePropertyKeyId(propertyKey),this.schemaIndexProviders.getDefaultProvider().getProviderDescriptor());
  for (  DynamicRecord record : schemaStore.allocateFrom(schemaRule)) {
    schemaStore.updateRecord(record);
  }
  schemaCache.addSchemaRule(schemaRule);
  labelsTouched=true;
  recordAccess.commit();
}
