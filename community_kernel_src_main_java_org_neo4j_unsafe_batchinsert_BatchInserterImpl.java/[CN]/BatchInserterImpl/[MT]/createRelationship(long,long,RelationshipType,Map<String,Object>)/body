{
  long id=neoStore.getRelationshipStore().nextId();
  int typeId=getOrCreateRelationshipTypeToken(type);
  relationshipCreator.relationshipCreate(id,typeId,node1,node2,recordAccess);
  if (properties != null && !properties.isEmpty()) {
    RelationshipRecord record=recordAccess.getRelRecords().getOrLoad(id,null).forChangingData();
    record.setNextProp(propertyCreator.createPropertyChain(record,propertiesIterator(properties),recordAccess.getPropertyRecords()));
  }
  recordAccess.commit();
  return id;
}
