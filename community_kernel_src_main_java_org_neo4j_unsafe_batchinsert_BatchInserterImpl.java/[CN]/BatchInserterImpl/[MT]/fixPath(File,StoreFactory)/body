{
  if (!fileSystem.fileExists(dir)) {
    if (!fileSystem.mkdirs(dir)) {
      throw new UnderlyingStorageException("Unable to create directory path[" + storeDir + "] for Neo4j kernel store.");
    }
  }
  File store=new File(dir,NeoStore.DEFAULT_NAME);
  if (!fileSystem.fileExists(store)) {
    sf.createNeoStore(store).close();
  }
  return store;
}
