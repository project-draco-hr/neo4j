{
  if (node.getNextRel() != Record.NO_NEXT_RELATIONSHIP.intValue()) {
    RelationshipRecord nextRel=getRelationshipStore().getRecord(node.getNextRel());
    boolean changed=false;
    if (nextRel.getFirstNode() == node.getId()) {
      nextRel.setFirstPrevRel(rel.getId());
      changed=true;
    }
    if (nextRel.getSecondNode() == node.getId()) {
      nextRel.setSecondPrevRel(rel.getId());
      changed=true;
    }
    if (!changed) {
      throw new InvalidRecordException(node + " dont match " + nextRel);
    }
    getRelationshipStore().updateRecord(nextRel);
  }
}
