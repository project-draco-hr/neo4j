{
  RelationshipTypeTokenStore typeStore=getRelationshipTypeStore();
  int id=(int)typeStore.nextId();
  RelationshipTypeTokenRecord record=new RelationshipTypeTokenRecord(id);
  record.setInUse(true);
  record.setCreated();
  Collection<DynamicRecord> nameRecords=typeStore.allocateNameRecords(encodeString(name));
  record.setNameId((int)first(nameRecords).getId());
  record.addNameRecords(nameRecords);
  typeStore.updateRecord(record);
  relationshipTypeTokens.addToken(new RelationshipTypeToken(name,id));
  return id;
}
