{
  long record;
  try {
    record=getRecord(pageCache,storageFileName,Position.STORE_VERSION);
  }
 catch (  IOException e) {
    throw new UnderlyingStorageException(e);
  }
  if (record == -1) {
    return;
  }
  String foundVersion=versionLongToString(record);
  if (!ALL_STORES_VERSION.equals(foundVersion)) {
    throw new IllegalStateException(format("Mismatching store version found (%s while expecting %s). The store cannot be " + "automatically upgraded since it isn't cleanly shutdown." + " Recover by starting the database using the previous Neo4j version, "+ "followed by a clean shutdown. Then start with this version again.",foundVersion,ALL_STORES_VERSION));
  }
}
