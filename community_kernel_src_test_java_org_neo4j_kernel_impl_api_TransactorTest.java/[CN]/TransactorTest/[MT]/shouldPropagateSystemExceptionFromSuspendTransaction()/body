{
  AbstractTransactionManager txManager=mock(AbstractTransactionManager.class);
  SystemException exception=new SystemException();
  doThrow(exception).when(txManager).suspend();
  @SuppressWarnings("unchecked") Transactor.Statement<Object,KernelException> statement=mock(Transactor.Statement.class);
  Transactor transactor=new Transactor(txManager);
  try {
    transactor.execute(statement);
    fail("expected exception");
  }
 catch (  TransactionFailureException e) {
    assertSame(exception,e.getCause());
  }
  verifyZeroInteractions(statement);
  verify(txManager).suspend();
  verifyNoMoreInteractions(txManager);
}
