{
  when(txManager.suspend()).thenReturn(null);
  when(pm.currentKernelTransactionForWriting()).thenReturn(kernelTransaction);
  when(kernelTransaction.acquireStatement()).thenReturn(statement);
  Object expectedResult=new Object();
  when(work.perform(statement)).thenReturn(expectedResult);
  Object result=transactor.execute(work);
  assertEquals(expectedResult,result);
  InOrder order=inOrder(txManager,pm,kernelTransaction,work);
  order.verify(txManager).suspend();
  order.verify(txManager).begin();
  order.verify(pm).currentKernelTransactionForWriting();
  order.verify(work).perform(statement);
  order.verify(txManager).commit();
  order.verifyNoMoreInteractions();
}
