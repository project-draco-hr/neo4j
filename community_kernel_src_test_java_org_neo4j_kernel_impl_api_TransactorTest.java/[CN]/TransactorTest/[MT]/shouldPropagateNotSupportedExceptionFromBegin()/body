{
  when(txManager.suspend()).thenReturn(mock(javax.transaction.Transaction.class));
  NotSupportedException exception=new NotSupportedException();
  doThrow(exception).when(txManager).begin();
  try {
    transactor.execute(work);
    fail("expected exception");
  }
 catch (  TransactionFailureException e) {
    assertSame(exception,e.getCause().getCause());
  }
  verifyZeroInteractions(work);
  verify(txManager).suspend();
  verify(txManager).begin();
  verifyNoMoreInteractions(txManager);
}
