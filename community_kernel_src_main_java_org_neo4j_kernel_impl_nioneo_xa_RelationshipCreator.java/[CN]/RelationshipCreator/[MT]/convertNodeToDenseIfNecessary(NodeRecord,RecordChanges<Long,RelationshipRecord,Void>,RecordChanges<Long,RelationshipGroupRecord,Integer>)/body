{
  if (node.isDense()) {
    return;
  }
  long relId=node.getNextRel();
  if (relId != Record.NO_NEXT_RELATIONSHIP.intValue()) {
    RecordChanges.RecordChange<Long,RelationshipRecord,Void> relChange=relRecords.getOrLoad(relId,null);
    RelationshipRecord rel=relChange.forReadingLinkage();
    if (RelationshipCounter.relCount(node.getId(),rel) >= neoStore.getDenseNodeThreshold()) {
      convertNodeToDenseNode(node,relChange.forChangingLinkage(),relRecords,relGroupRecords);
    }
  }
}
