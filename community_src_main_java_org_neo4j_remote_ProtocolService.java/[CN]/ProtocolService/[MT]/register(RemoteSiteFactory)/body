{
  if (factory == null) {
    throw new IllegalArgumentException("the RemoteSiteFactory may not be null.");
  }
  for (  String protocol : factory.protocols) {
    Set<RemoteSiteFactory> factories=implementations.get(protocol);
    if (factories == null) {
      factories=new HashSet<RemoteSiteFactory>();
      implementations.put(protocol,factories);
    }
    factories.add(factory);
  }
}
