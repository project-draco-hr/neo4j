{
  if (type == null) {
    return new NullFormat(formats.keySet());
  }
  RepresentationFormat format=formats.get(type);
  if (format != null) {
    return format;
  }
  format=formats.get(new MediaType(type.getType(),type.getSubtype()));
  if (format != null) {
    return format;
  }
  return new NullFormat(formats.keySet(),type);
}
