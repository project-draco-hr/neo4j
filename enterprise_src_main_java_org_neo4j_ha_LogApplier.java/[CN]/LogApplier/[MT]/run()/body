{
  try {
    while (run) {
      Long logVersion=queue.poll();
      if (logVersion != null) {
        if (logVersion == xaDs.getCurrentLogVersion()) {
          ReadableByteChannel logChannel=xaDs.getLogicalLog(logVersion);
          xaDs.applyLog(logChannel);
        }
      }
 else {
synchronized (this) {
          try {
            this.wait(250);
          }
 catch (          InterruptedException e) {
            interrupted();
          }
        }
      }
    }
  }
 catch (  IOException e) {
    System.err.println("Failed to apply log: " + e);
    e.printStackTrace();
  }
 finally {
    run=false;
  }
}
