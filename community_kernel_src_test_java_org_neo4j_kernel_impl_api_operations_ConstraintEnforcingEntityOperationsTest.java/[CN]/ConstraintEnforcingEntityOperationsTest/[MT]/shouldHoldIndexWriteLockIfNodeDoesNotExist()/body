{
  Mockito.when(readOps.nodeGetUniqueFromIndexLookup(state,indexDescriptor,value)).thenReturn(NO_SUCH_NODE);
  LockAnswer readLocks=new LockAnswer(), writeLocks=new LockAnswer();
  Mockito.when(locks.getReleasableIndexEntryReadLock(labelId,propertyKeyId,value)).then(readLocks);
  Mockito.when(locks.getReleasableIndexEntryWriteLock(labelId,propertyKeyId,value)).then(writeLocks);
  long nodeId=ops.nodeGetUniqueFromIndexLookup(state,indexDescriptor,value);
  Assert.assertEquals(NO_SUCH_NODE,nodeId);
  Assert.assertEquals(0,readLocks.held());
  Assert.assertEquals(1,writeLocks.held());
}
