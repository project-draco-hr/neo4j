{
  long expectedNodeId=15;
  Mockito.when(readOps.nodeGetUniqueFromIndexLookup(state,indexDescriptor,value)).thenReturn(expectedNodeId);
  LockAnswer readLocks=new LockAnswer(), writeLocks=new LockAnswer();
  Mockito.when(locks.getReleasableIndexEntryReadLock(labelId,propertyKeyId,value)).then(readLocks);
  Mockito.when(locks.getReleasableIndexEntryWriteLock(labelId,propertyKeyId,value)).then(writeLocks);
  long nodeId=ops.nodeGetUniqueFromIndexLookup(state,indexDescriptor,value);
  Assert.assertEquals(expectedNodeId,nodeId);
  Assert.assertEquals(1,readLocks.held());
  Assert.assertEquals(0,writeLocks.held());
}
