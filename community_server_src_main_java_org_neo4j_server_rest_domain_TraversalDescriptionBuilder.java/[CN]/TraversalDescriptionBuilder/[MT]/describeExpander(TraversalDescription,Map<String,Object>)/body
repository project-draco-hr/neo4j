{
  Object relationshipsDescription=description.get("relationships");
  if (relationshipsDescription != null) {
    Collection<Object> pairDescriptions;
    if (relationshipsDescription instanceof Collection) {
      pairDescriptions=(Collection<Object>)relationshipsDescription;
    }
 else {
      pairDescriptions=Arrays.asList(relationshipsDescription);
    }
    PathExpanderBuilder builder=createExpander(description);
    for (    Object pairDescription : pairDescriptions) {
      Map map=(Map)pairDescription;
      String name=(String)map.get("type");
      RelationshipType type=RelationshipType.withName(name);
      String directionName=(String)map.get("direction");
      builder=directionName == null ? builder.add(type) : builder.add(type,stringToEnum(directionName,RelationshipDirection.class,true).internal);
    }
    PathExpander<Object> expander=builder.build();
    result=result.expand(expander);
  }
  return result;
}
