{
  if (record.inUse()) {
    int requiredLength=HEADER_BYTE + requiredDataLength(record);
    boolean requiresSecondaryUnit=requiredLength > recordSize;
    record.setRequiresSecondaryUnit(requiresSecondaryUnit);
    if (record.requiresSecondaryUnit() && !record.hasSecondaryUnitId()) {
      record.setSecondaryUnitId(idSequence.nextId());
    }
  }
}
