{
  FileSystemAbstraction fileSystem=fs.get();
  File storeDir=new File("target/test-data/set-version").getAbsoluteFile();
  new TestGraphDatabaseFactory().setFileSystem(fileSystem).newImpermanentDatabase(storeDir).shutdown();
  assertEquals(0,MetaDataStore.setRecord(pageCache,new File(storeDir,MetaDataStore.DEFAULT_NAME).getAbsoluteFile(),Position.LOG_VERSION,(long)10));
  assertEquals(10,MetaDataStore.setRecord(pageCache,new File(storeDir,MetaDataStore.DEFAULT_NAME).getAbsoluteFile(),Position.LOG_VERSION,(long)12));
  Monitors monitors=new Monitors();
  Config config=new Config(new HashMap<String,String>(),GraphDatabaseSettings.class);
  StoreFactory sf=new StoreFactory(storeDir,config,new DefaultIdGeneratorFactory(fileSystem),pageCache,fileSystem,NullLogProvider.getInstance());
  NeoStores neoStores=sf.openNeoStores(false);
  assertEquals(12,neoStores.getMetaDataStore().getCurrentLogVersion());
  neoStores.close();
}
