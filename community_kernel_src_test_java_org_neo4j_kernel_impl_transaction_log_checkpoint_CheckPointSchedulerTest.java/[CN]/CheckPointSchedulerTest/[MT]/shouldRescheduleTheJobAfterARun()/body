{
  CheckPointScheduler scheduler=new CheckPointScheduler(checkPointer,jobScheduler,20l);
  assertNull(jobScheduler.getJob());
  scheduler.start();
  Runnable scheduledJob=jobScheduler.getJob();
  assertNotNull(scheduledJob);
  jobScheduler.runJob();
  verify(jobScheduler,times(2)).schedule(eq(checkPoint),any(Runnable.class),eq(20l),eq(TimeUnit.MILLISECONDS));
  verify(checkPointer,times(1)).checkPointIfNeeded(any(TriggerInfo.class));
  assertEquals(scheduledJob,jobScheduler.getJob());
}
