{
  Iterable<RemoteSiteFactory> result;
  try {
    Class<?> serviceLoaderClass=Class.forName("java.util.ServiceLoader");
    Method loadMethod=serviceLoaderClass.getMethod("load",Class.class);
    @SuppressWarnings("unchecked") final Iterable<RemoteSiteFactory> iter=((Iterable<RemoteSiteFactory>)loadMethod.invoke(null,RemoteSiteFactory.class));
    result=new CheckingIterable(){
      @Override Iterator<?> provideIterator(){
        return iter.iterator();
      }
    }
;
  }
 catch (  Exception ex) {
    Iterable<RemoteSiteFactory> empty=Arrays.asList(new RemoteSiteFactory[0]);
    try {
      Class<?> serviceClass=Class.forName("sun.misc.Service");
      final Method providersMethod=serviceClass.getMethod("providers",Class.class);
      result=new CheckingIterable(){
        @Override Iterator<?> provideIterator() throws Exception {
          return (Iterator<?>)providersMethod.invoke(null,RemoteSiteFactory.class);
        }
      }
;
    }
 catch (    Exception e) {
      result=empty;
    }
  }
  factories=result;
}
