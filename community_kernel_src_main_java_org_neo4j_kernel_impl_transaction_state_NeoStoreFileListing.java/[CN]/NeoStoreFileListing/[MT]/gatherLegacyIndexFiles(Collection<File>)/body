{
  final Collection<ResourceIterator<File>> snapshots=new ArrayList<>();
  for (  IndexImplementation indexProvider : legacyIndexProviders.providers()) {
    ResourceIterator<File> snapshot=indexProvider.listStoreFiles();
    snapshots.add(snapshot);
    IteratorUtil.addToCollection(snapshot,files);
  }
  return new MultiResource(snapshots);
}
