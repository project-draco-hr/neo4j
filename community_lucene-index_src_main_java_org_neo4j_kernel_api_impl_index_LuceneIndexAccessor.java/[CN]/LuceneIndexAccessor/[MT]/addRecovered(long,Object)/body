{
  IndexSearcher searcher=searcherManager.acquire();
  try {
    TopDocs hits=searcher.search(new TermQuery(documentStructure.newQueryForChangeOrRemove(nodeId)),1);
    if (hits.totalHits > 0) {
      writer.updateDocument(documentStructure.newQueryForChangeOrRemove(nodeId),documentStructure.newDocument(nodeId,value));
    }
 else {
      add(nodeId,value);
    }
  }
  finally {
    searcherManager.release(searcher);
  }
}
