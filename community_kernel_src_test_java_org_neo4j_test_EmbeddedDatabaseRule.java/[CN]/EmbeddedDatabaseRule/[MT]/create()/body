{
  temp.create();
  try {
    GraphDatabaseBuilder builder=new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(temp.getRoot().getAbsolutePath());
    configure(builder);
    database=(GraphDatabaseAPI)builder.newGraphDatabase();
  }
 catch (  RuntimeException e) {
    temp.delete();
    throw e;
  }
}
