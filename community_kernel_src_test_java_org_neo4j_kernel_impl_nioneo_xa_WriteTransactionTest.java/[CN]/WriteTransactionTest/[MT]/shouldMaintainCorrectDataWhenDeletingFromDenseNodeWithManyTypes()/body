{
  instantiateNeoStore(1);
  Pair<NeoStoreTransaction,NeoStoreTransactionContext> transactionAndContextPair=newWriteTransaction();
  NeoStoreTransaction tx=transactionAndContextPair.first();
  NeoStoreTransactionContext txCtx=transactionAndContextPair.other();
  int nodeId=(int)nextId(NODE), typeA=0, typeB=12, typeC=600;
  tx.nodeCreate(nodeId);
  tx.createRelationshipTypeToken(typeA,"A");
  long[] relationshipsCreatedAIncoming=createRelationships(tx,nodeId,typeA,INCOMING,1);
  long[] relationshipsCreatedAOutgoing=createRelationships(tx,nodeId,typeA,OUTGOING,1);
  tx.createRelationshipTypeToken(typeB,"B");
  long[] relationshipsCreatedBIncoming=createRelationships(tx,nodeId,typeB,INCOMING,1);
  long[] relationshipsCreatedBOutgoing=createRelationships(tx,nodeId,typeB,OUTGOING,1);
  tx.createRelationshipTypeToken(typeC,"C");
  long[] relationshipsCreatedCIncoming=createRelationships(tx,nodeId,typeC,INCOMING,1);
  long[] relationshipsCreatedCOutgoing=createRelationships(tx,nodeId,typeC,OUTGOING,1);
  deleteRelationship(tx,relationshipsCreatedAIncoming[0]);
  assertDenseRelationshipCounts(tx,txCtx,nodeId,typeA,1,0);
  assertDenseRelationshipCounts(tx,txCtx,nodeId,typeB,1,1);
  assertDenseRelationshipCounts(tx,txCtx,nodeId,typeC,1,1);
  deleteRelationship(tx,relationshipsCreatedAOutgoing[0]);
  assertRelationshipGroupDoesNotExist(txCtx,tx.nodeLoadLight(nodeId),typeA);
  assertDenseRelationshipCounts(tx,txCtx,nodeId,typeB,1,1);
  assertDenseRelationshipCounts(tx,txCtx,nodeId,typeC,1,1);
  deleteRelationship(tx,relationshipsCreatedBIncoming[0]);
  assertRelationshipGroupDoesNotExist(txCtx,tx.nodeLoadLight(nodeId),typeA);
  assertDenseRelationshipCounts(tx,txCtx,nodeId,typeB,1,0);
  assertDenseRelationshipCounts(tx,txCtx,nodeId,typeC,1,1);
  deleteRelationship(tx,relationshipsCreatedBOutgoing[0]);
  assertRelationshipGroupDoesNotExist(txCtx,tx.nodeLoadLight(nodeId),typeA);
  assertRelationshipGroupDoesNotExist(txCtx,tx.nodeLoadLight(nodeId),typeB);
  assertDenseRelationshipCounts(tx,txCtx,nodeId,typeC,1,1);
  deleteRelationship(tx,relationshipsCreatedCIncoming[0]);
  assertRelationshipGroupDoesNotExist(txCtx,tx.nodeLoadLight(nodeId),typeA);
  assertRelationshipGroupDoesNotExist(txCtx,tx.nodeLoadLight(nodeId),typeB);
  assertDenseRelationshipCounts(tx,txCtx,nodeId,typeC,1,0);
  deleteRelationship(tx,relationshipsCreatedCOutgoing[0]);
  assertRelationshipGroupDoesNotExist(txCtx,tx.nodeLoadLight(nodeId),typeA);
  assertRelationshipGroupDoesNotExist(txCtx,tx.nodeLoadLight(nodeId),typeB);
  assertRelationshipGroupDoesNotExist(txCtx,tx.nodeLoadLight(nodeId),typeC);
}
