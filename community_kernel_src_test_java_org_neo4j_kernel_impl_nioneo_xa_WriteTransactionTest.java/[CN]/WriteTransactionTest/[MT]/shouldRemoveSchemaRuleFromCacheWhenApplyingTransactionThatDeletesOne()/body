{
  long ruleId=schemaStore.nextId(), labelId=10;
  long propertyKey=10;
  IndexRule rule=new IndexRule(ruleId,labelId,new long[]{propertyKey});
  for (  DynamicRecord record : schemaStore.allocateFrom(ruleId,rule))   schemaStore.updateRecord(record);
  WriteTransaction writeTransaction=new WriteTransaction(0,log,transactionState,neoStore,cacheAccessBackDoor);
  writeTransaction.setCommitTxId(1);
  writeTransaction.deleteSchemaRule(ruleId);
  writeTransaction.prepare();
  writeTransaction.commit();
  verify(cacheAccessBackDoor).removeSchemaRuleFromCache(ruleId);
}
