{
  long labelId=10, propertyKey=10;
  IndexRule rule=new IndexRule(schemaStore.nextId(),labelId,POPULATING,new long[]{propertyKey});
  Collection<DynamicRecord> records=schemaStore.allocateFrom(rule);
  for (  DynamicRecord record : records)   schemaStore.updateRecord(record);
  long ruleId=first(records).getId();
  WriteTransaction writeTransaction=new WriteTransaction(0,log,transactionState,neoStore,cacheAccessBackDoor,null);
  writeTransaction.setCommitTxId(1);
  writeTransaction.dropSchemaRule(ruleId);
  writeTransaction.prepare();
  writeTransaction.commit();
  verify(cacheAccessBackDoor).removeSchemaRuleFromCache(ruleId);
}
