{
  long ruleId=schemaStore.nextId(), labelId=10;
  String propertyKey="key";
  for (  DynamicRecord record : schemaStore.allocateFrom(ruleId,new IndexRule(ruleId,labelId,propertyKey)))   schemaStore.updateRecord(record);
  WriteTransaction writeTransaction=new WriteTransaction(0,log,transactionState,neoStore,cacheAccessBackDoor);
  writeTransaction.setCommitTxId(1);
  writeTransaction.deleteSchemaRule(ruleId);
  writeTransaction.prepare();
  writeTransaction.commit();
  verify(cacheAccessBackDoor).removeSchemaRuleFromCache(ruleId);
}
