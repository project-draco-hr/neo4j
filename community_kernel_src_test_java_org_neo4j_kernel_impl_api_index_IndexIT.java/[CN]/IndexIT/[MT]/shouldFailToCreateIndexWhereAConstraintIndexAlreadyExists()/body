{
  newTransaction();
  statement.addConstraintIndex(labelId,propertyKey);
  commit();
  try {
    newTransaction();
    statement.addIndex(labelId,propertyKey);
    commit();
    fail("expected exception");
  }
 catch (  DataIntegrityKernelException e) {
    assertEquals(String.format("Property %d is already indexed for label %d through a constraint.",propertyKey,labelId),e.getMessage());
  }
}
