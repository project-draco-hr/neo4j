{
{
    SchemaWriteOperations statement=schemaWriteOperationsInNewTransaction();
    statement.uniquePropertyConstraintCreate(labelId,propertyKeyId);
    commit();
  }
  try {
    SchemaWriteOperations statement=schemaWriteOperationsInNewTransaction();
    statement.indexCreate(labelId,propertyKeyId);
    commit();
    fail("expected exception");
  }
 catch (  SchemaKernelException e) {
    assertEquals("Label '" + LABEL + "' and property '"+ PROPERTY_KEY+ "' have a unique constraint defined"+ " on them, so an index is already created that matches this.",e.getMessage());
  }
}
