{
  DefaultFileSystemAbstraction fs=new DefaultFileSystemAbstraction();
  LifeSupport life=new LifeSupport();
  life.start();
  PageCache pageCache=createPageCache(fs,getClass().getName(),life);
  StoreFactory storeFactory=new StoreFactory(fs,storeDir,pageCache,StringLogger.DEV_NULL,new Monitors());
  NeoStore neoStore=storeFactory.newNeoStore(true);
  PropertyKeyTokenStore store=neoStore.getPropertyKeyTokenStore();
  for (int i=0; i < propertyKeyCount; i++) {
    PropertyKeyTokenRecord record=new PropertyKeyTokenRecord((int)store.nextId());
    record.setInUse(true);
    Collection<DynamicRecord> nameRecords=store.allocateNameRecords(PropertyStore.encodeString(key(i)));
    record.addNameRecords(nameRecords);
    record.setNameId((int)first(nameRecords).getId());
    store.updateRecord(record);
  }
  neoStore.close();
  pageCache.close();
  life.shutdown();
  return database();
}
