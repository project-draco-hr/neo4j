{
  GraphDatabaseAPI db=(GraphDatabaseAPI)new TestGraphDatabaseFactory().newImpermanentDatabase();
  OtherThreadExecutor<WorkerState> worker1=new OtherThreadExecutor<>("w1",new WorkerState(db));
  OtherThreadExecutor<WorkerState> worker2=new OtherThreadExecutor<>("w2",new WorkerState(db));
  worker1.execute(new BeginTx());
  worker2.execute(new BeginTx());
  String key="mykey";
  worker1.execute(new CreateNodeAndSetProperty(key));
  worker2.execute(new CreateNodeAndSetProperty(key));
  worker1.execute(new FinishTx());
  worker2.execute(new FinishTx());
  worker1.shutdown();
  worker2.shutdown();
  assertEquals(1,propertyKeyCount(db));
  db.shutdown();
}
