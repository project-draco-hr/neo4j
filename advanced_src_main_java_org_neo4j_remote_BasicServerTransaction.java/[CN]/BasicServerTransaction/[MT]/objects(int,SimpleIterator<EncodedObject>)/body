{
  EncodedObject[] result=consume(token,objIter,iterator,server.objectsBatchSize(iterator.count())).toArray(new EncodedObject[0]);
  if (iterator.hasNext()) {
    return response().buildPartialObjectResponse(token,result);
  }
 else {
    return response().buildFinalObjectResponse(result);
  }
}
