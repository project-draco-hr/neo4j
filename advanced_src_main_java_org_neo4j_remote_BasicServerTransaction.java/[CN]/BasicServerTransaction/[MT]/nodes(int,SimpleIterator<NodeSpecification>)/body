{
  NodeSpecification[] result=consume(token,nodIter,iterator,server.nodesBatchSize(iterator.count())).toArray(new NodeSpecification[0]);
  if (iterator.hasNext()) {
    return response().buildPartialNodeResponse(token,result);
  }
 else {
    return response().buildFinalNodeResponse(result);
  }
}
