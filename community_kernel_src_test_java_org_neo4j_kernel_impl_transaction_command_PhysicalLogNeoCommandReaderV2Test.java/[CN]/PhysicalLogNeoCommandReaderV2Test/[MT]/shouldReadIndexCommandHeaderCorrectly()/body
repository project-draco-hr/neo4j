{
  PhysicalLogCommandReaderV2_2_4 reader=new PhysicalLogCommandReaderV2_2_4();
  InMemoryLogChannel data=new InMemoryLogChannel();
  CommandWriter writer=new CommandWriter(data);
  AddRelationshipCommand command=new AddRelationshipCommand();
  byte indexNameId=(byte)12;
  long entityId=123;
  byte keyId=(byte)1;
  Object value="test value";
  long startNode=14;
  long endNode=15;
  command.init(indexNameId,entityId,keyId,value,startNode,endNode);
  writer.visitIndexAddRelationshipCommand(command);
  AddRelationshipCommand readCommand=(AddRelationshipCommand)reader.read(data);
  assertEquals(indexNameId,readCommand.getIndexNameId());
  assertEquals(entityId,readCommand.getEntityId());
  assertEquals(keyId,readCommand.getKeyId());
  assertEquals(value,readCommand.getValue());
  assertEquals(startNode,readCommand.getStartNode());
  assertEquals(endNode,readCommand.getEndNode());
}
