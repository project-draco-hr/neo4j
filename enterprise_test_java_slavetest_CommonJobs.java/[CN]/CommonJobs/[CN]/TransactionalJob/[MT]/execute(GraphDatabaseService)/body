{
  Transaction tx=db.beginTx();
  try {
    return executeInTransaction(db,tx);
  }
  finally {
    beforeFinish();
    tx.finish();
  }
}
