{
  String entity=format(representation);
  byte[] entityAsBytes;
  try {
    entityAsBytes=entity.getBytes(UTF8);
  }
 catch (  UnsupportedEncodingException e) {
    throw new RuntimeException("Could not encode string as UTF-8",e);
  }
  return response.entity(entityAsBytes).header(HttpHeaders.CONTENT_ENCODING,UTF8).type(getMediaType()).build();
}
