{
  ReadOnlyTransactionImpl tx=txThreadMap.get();
  if (tx == null) {
    throw new IllegalStateException("Not in transaction");
  }
  tx.setRollbackOnly();
}
