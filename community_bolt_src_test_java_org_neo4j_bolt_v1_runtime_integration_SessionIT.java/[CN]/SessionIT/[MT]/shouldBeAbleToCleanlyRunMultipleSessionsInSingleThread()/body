{
  Session firstSession=env.newSession("<test>");
  firstSession.init("TestClient/1.0",emptyMap(),-1,null);
  Session secondSession=env.newSession("<test>");
  secondSession.init("TestClient/1.0",emptyMap(),-1,null);
  runAndPull(firstSession,"BEGIN");
  Object[] stream=runAndPull(secondSession,"CREATE (a:Person) RETURN id(a)");
  long id=(long)((Record)stream[0]).fields()[0];
  runAndPull(firstSession,"ROLLBACK");
  stream=runAndPull(secondSession,"MATCH (a:Person) WHERE id(a) = " + id + " RETURN COUNT(*)");
  assertThat(((Record)stream[0]).fields()[0],equalTo((Object)1L));
}
