{
  Session session=env.newSession("bolt-test");
  session.init("TestClient/1.0",emptyMap(),-1,null);
  session.run("BEGIN",EMPTY_PARAMS,noOp());
  session.discardAll(noOp());
  session.run("CREATE (n:Victim)-[:REL]->()",EMPTY_PARAMS,noOp());
  session.discardAll(noOp());
  session.run("this is not valid syntax",EMPTY_PARAMS,responses);
  assertThat(responses.next(),failed());
  session.ackFailure(responses);
  session.run("ROLLBACK",EMPTY_PARAMS,responses);
  assertThat(responses,recorded(success(),success()));
}
