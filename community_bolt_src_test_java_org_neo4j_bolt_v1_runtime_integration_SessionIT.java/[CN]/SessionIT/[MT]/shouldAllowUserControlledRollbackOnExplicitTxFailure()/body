{
  Session session=env.newSession("bolt-test");
  session.init("TestClient/1.0",emptyMap(),-1,null,null);
  session.run("BEGIN",EMPTY_PARAMS,null,noOp());
  session.discardAll(null,noOp());
  session.run("CREATE (n:Victim)-[:REL]->()",EMPTY_PARAMS,null,noOp());
  session.discardAll(null,noOp());
  session.run("this is not valid syntax",EMPTY_PARAMS,null,responses);
  assertThat(responses.next(),failed());
  session.ackFailure(null,responses);
  session.run("ROLLBACK",EMPTY_PARAMS,null,responses);
  assertThat(responses,recorded(success(),success()));
}
