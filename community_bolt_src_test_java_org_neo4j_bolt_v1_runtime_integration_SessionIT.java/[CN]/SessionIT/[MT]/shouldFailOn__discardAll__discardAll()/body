{
  Session session=env.newSession("<test>");
  session.init("TestClient/1.0",emptyMap(),null,null);
  session.run("RETURN 1",EMPTY_PARAMS,null,Session.Callbacks.<StatementMetadata,Object>noop());
  session.discardAll(null,Session.Callbacks.<Void,Object>noop());
  session.discardAll(null,discarding);
  assertThat(discarding.next(),failedWith(Status.Request.Invalid));
}
