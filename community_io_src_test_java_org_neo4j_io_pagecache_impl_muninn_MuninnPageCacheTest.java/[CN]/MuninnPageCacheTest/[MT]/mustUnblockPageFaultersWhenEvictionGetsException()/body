{
  writeInitialDataTo(file("a"));
  FileSystemAbstraction fs=new DelegatingFileSystemAbstraction(this.fs){
    @Override public StoreChannel open(    File fileName,    String mode) throws IOException {
      return new DelegatingStoreChannel(super.open(fileName,mode)){
        @Override public void writeAll(        ByteBuffer src,        long position) throws IOException {
          throw new IOException("uh-oh...");
        }
      }
;
    }
  }
;
  MuninnPageCache pageCache=createPageCache(fs,2,8,PageCacheTracer.NULL);
  final PagedFile pagedFile=pageCache.map(file("a"),8);
  try (PageCursor cursor=pagedFile.io(0,PF_EXCLUSIVE_LOCK)){
    for (int i=0; i < 1000; i++) {
      assertTrue(cursor.next());
    }
    fail("Expected an exception at this point");
  }
 catch (  IOException ignore) {
  }
}
