{
  int txLockSessionId=Locks.Client.NO_LOCK_SESSION_ID;
  int currentLockSessionId=24;
  ReplicatedTransaction tx=ReplicatedTransactionFactory.createImmutableReplicatedTransaction(physicalTx(txLockSessionId));
  TransactionCommitProcess localCommitProcess=mock(TransactionCommitProcess.class);
  ReplicatedTransactionStateMachine<RaftStateMachine> stateMachine=new ReplicatedTransactionStateMachine<>(lockState(currentLockSessionId),NullLogProvider.getInstance());
  stateMachine.installCommitProcess(localCommitProcess,-1L);
  Optional<Result> result=stateMachine.applyCommand(tx,0);
  assertTrue(result.isPresent());
  assertEquals(0L,(long)result.get().consume());
}
