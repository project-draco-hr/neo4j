{
  int lockSessionId=23;
  ReplicatedTransaction tx=ReplicatedTransactionFactory.createImmutableReplicatedTransaction(physicalTx(lockSessionId));
  TransactionCommitProcess localCommitProcess=mock(TransactionCommitProcess.class);
  ReplicatedTransactionStateMachine stateMachine=new ReplicatedTransactionStateMachine<>(lockState(lockSessionId),NullLogProvider.getInstance());
  stateMachine.installCommitProcess(localCommitProcess,-1L);
  stateMachine.applyCommand(tx,0);
  verify(localCommitProcess,times(1)).commit(any(TransactionToApply.class),any(CommitEvent.class),any(TransactionApplicationMode.class));
}
