{
  final File storeDirNeoStore=new File(storeDir,MetaDataStore.DEFAULT_NAME);
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.UPGRADE_TRANSACTION_ID,MetaDataStore.getRecord(pageCache,storeDirNeoStore,Position.LAST_TRANSACTION_ID));
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.UPGRADE_TIME,System.currentTimeMillis());
  long lastTxChecksum=readLastTxChecksum(fileSystem,migrationDir);
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.LAST_TRANSACTION_CHECKSUM,lastTxChecksum);
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.UPGRADE_TRANSACTION_CHECKSUM,lastTxChecksum);
  LogPosition logPosition=readLastTxLogPosition(fileSystem,migrationDir);
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.LAST_CLOSED_TRANSACTION_LOG_VERSION,logPosition.getLogVersion());
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.LAST_CLOSED_TRANSACTION_LOG_BYTE_OFFSET,logPosition.getByteOffset());
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.STORE_VERSION,MetaDataStore.versionStringToLong(Current.STORE_VERSION));
}
