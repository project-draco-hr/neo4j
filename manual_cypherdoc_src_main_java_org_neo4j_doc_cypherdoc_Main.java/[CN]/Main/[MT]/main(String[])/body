{
  if (args.length < 2) {
    throw new IllegalArgumentException("Destination directory and at least one source must be specified.");
  }
  File destination=null;
  for (  String name : args) {
    File file=FileUtils.getFile(name);
    if (destination == null) {
      if (file.exists() && !file.isDirectory()) {
        throw new IllegalArgumentException("Destination directory must either not exist or be a directory.");
      }
      destination=file;
    }
 else {
      if (file.isFile()) {
        executeFile(file,file.getName(),destination);
      }
 else       if (file.isDirectory()) {
        for (        File fileInDir : FileUtils.listFiles(file,EXTENSIONS,true)) {
          String fileInDirName=fileInDir.getAbsolutePath().substring(file.getAbsolutePath().length() + 1).replace('/','-').replace('\\','-');
          executeFile(fileInDir,fileInDirName,destination);
        }
      }
    }
  }
}
