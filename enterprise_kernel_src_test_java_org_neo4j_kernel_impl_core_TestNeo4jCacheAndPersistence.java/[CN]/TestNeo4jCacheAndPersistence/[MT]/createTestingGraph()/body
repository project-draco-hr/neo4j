{
  Node node1=getGraphDb().createNode();
  Node node2=getGraphDb().createNode();
  Relationship rel=node1.createRelationshipTo(node2,MyRelTypes.TEST);
  node1Id=node1.getId();
  node2Id=node2.getId();
  node1.setProperty(key1,int1);
  node1.setProperty(key2,string1);
  node2.setProperty(key1,int2);
  node2.setProperty(key2,string2);
  rel.setProperty(key1,int1);
  rel.setProperty(key2,string1);
  node1.setProperty(arrayKey,array);
  node2.setProperty(arrayKey,array);
  rel.setProperty(arrayKey,array);
  Transaction tx=getTransaction();
  tx.success();
  tx.finish();
  NodeManager nodeManager=((EmbeddedGraphDatabase)getGraphDb()).getConfig().getGraphDbModule().getNodeManager();
  nodeManager.clearCache();
  tx=getGraphDb().beginTx();
  setTransaction(tx);
}
