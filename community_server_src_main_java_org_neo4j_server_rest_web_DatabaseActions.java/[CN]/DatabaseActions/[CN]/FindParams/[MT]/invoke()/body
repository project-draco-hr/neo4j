{
  startNode=graphDb.getNodeById(startId);
  endNode=graphDb.getNodeById(endId);
  Integer maxDepthObj=(Integer)map.get("max_depth");
  int maxDepth=(maxDepthObj != null) ? maxDepthObj : 1;
  PathExpander expander=RelationshipExpanderBuilder.describeRelationships(map);
  String algorithm=(String)map.get("algorithm");
  algorithm=(algorithm != null) ? algorithm : "shortestPath";
  finder=getAlgorithm(algorithm,expander,maxDepth);
  return this;
}
