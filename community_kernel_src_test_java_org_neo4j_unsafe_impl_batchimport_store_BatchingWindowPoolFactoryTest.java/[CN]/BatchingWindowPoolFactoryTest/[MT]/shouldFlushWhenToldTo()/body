{
  Monitor monitor=mock(Monitor.class);
  WindowPool pool=pool(monitor,Mode.APPEND_ONLY);
  PersistenceWindow window=pool.acquire(0,OperationType.WRITE);
  try {
    Buffer buffer=window.getOffsettedBuffer(0);
    buffer.putInt(1234);
  }
  finally {
    pool.release(window);
  }
  pool.flushAll();
  verify(monitor).dataWritten(windowSize);
}
