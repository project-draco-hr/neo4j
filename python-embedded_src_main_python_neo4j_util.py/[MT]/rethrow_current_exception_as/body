def rethrow_current_exception_as(ErrorClass):
    (t, e, trace) = exc_info()
    if (isinstance(e, tuple) and (len(e) > 1) and isinstance(e[1], Exception)):
        e = e[1]
    if hasattr(e, 'message'):
        msg = (e.message() if hasattr(e.message, '__call__') else e.message)
    else:
        msg = str(e)
    raise ErrorClass(msg), None, trace
