{
  if (state.appendIndex < fromIndex) {
    throw new IllegalArgumentException("Cannot truncate at index " + fromIndex + " when append index is "+ state.appendIndex);
  }
  invalidateCache();
  long newAppendIndex=fromIndex - 1;
  long newTerm=readEntryTerm(newAppendIndex);
  truncateSegment(state.appendIndex,newAppendIndex,newTerm);
  state.appendIndex=newAppendIndex;
  state.currentTerm=newTerm;
}
