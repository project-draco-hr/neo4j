{
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put("string","value");
  properties.put("integer",17);
  long relId=actions.createRelationship("LOVES",graphdbHelper.createNode(),graphdbHelper.createNode(),new PropertiesMap(properties)).getId();
  Transaction tx=database.db.beginTx();
  try {
    Relationship rel=database.db.getRelationshipById(relId);
    for (    String key : rel.getPropertyKeys()) {
      assertTrue("extra property stored",properties.containsKey(key));
    }
    for (    Map.Entry<String,Object> entry : properties.entrySet()) {
      assertEquals(entry.getValue(),rel.getProperty(entry.getKey()));
    }
  }
  finally {
    tx.finish();
  }
}
