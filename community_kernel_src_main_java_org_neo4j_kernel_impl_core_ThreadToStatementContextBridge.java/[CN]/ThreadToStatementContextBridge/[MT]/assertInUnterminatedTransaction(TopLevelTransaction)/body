{
  if (transaction == null) {
    throw new NotInTransactionException();
  }
  Status terminationReason=transaction.getTransaction().shouldBeTerminated();
  if (terminationReason != null) {
    throwCorrectExceptionBasedOnTerminationReason(terminationReason);
  }
}
