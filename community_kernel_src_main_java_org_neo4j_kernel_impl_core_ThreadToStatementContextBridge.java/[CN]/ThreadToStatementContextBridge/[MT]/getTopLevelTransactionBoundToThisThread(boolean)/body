{
  TopLevelTransaction transaction=threadToTransactionMap.get();
  if (strict) {
    assertInTransaction(transaction);
  }
  return transaction;
}
