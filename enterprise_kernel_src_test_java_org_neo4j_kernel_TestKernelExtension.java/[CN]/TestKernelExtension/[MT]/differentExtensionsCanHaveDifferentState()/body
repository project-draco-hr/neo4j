{
  EmbeddedGraphDatabase graphdb=graphdb("graphdb",true,0);
  try {
    KernelData kernel=getExtensions(graphdb);
    DummyExtension.State state=new DummyExtension().getState(kernel), other=new OtherExtension().getState(kernel);
    assertNotNull(state);
    assertNotNull(other);
    assertNotSame(state,other);
  }
  finally {
    graphdb.shutdown();
  }
}
