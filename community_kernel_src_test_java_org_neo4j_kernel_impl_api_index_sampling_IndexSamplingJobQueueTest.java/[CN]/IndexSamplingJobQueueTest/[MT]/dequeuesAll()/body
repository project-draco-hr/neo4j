{
  IndexSamplingJobQueue queue=new IndexSamplingJobQueue();
  IndexDescriptor anotherDescriptor=new IndexDescriptor(3,4);
  queue.sampleIndex(descriptor);
  queue.sampleIndex(anotherDescriptor);
  Iterable<IndexDescriptor> descriptors=queue.pollAll();
  assertArrayEquals(new IndexDescriptor[]{descriptor,anotherDescriptor},toArray(IndexDescriptor.class,descriptors));
  assertNull(queue.poll());
}
