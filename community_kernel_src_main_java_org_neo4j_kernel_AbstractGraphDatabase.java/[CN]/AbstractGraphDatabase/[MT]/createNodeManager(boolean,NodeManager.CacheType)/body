{
  final NodeManager.Configuration config=ConfigProxy.config(params,NodeManager.Configuration.class);
  if (readOnly) {
    return new ReadOnlyNodeManager(config,this,lockManager,lockReleaser,txManager,persistenceManager,persistenceSource,relationshipTypeHolder,cacheType,propertyIndexManager,createNodeLookup(),createRelationshipLookups(),msgLog,diagnosticsManager);
  }
  return new NodeManager(config,this,lockManager,lockReleaser,txManager,persistenceManager,persistenceSource,relationshipTypeHolder,cacheType,propertyIndexManager,createNodeLookup(),createRelationshipLookups(),msgLog,diagnosticsManager);
}
