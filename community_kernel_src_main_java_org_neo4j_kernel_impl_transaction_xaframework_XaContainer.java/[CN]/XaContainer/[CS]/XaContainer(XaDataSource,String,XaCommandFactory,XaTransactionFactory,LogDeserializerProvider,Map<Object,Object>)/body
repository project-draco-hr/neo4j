{
  this.cf=cf;
  this.tf=tf;
  TxIdGenerator txIdFactory=config != null ? (TxIdGenerator)config.get(TxIdGenerator.class) : TxIdGenerator.DEFAULT;
  txIdFactory=txIdFactory != null ? txIdFactory : TxIdGenerator.DEFAULT;
  rm=new XaResourceManager(dataSource,tf,txIdFactory,logicalLog);
  log=new XaLogicalLog(logicalLog,rm,cf,tf,deserializerProvider,config);
  rm.setLogicalLog(log);
  tf.setLogicalLog(log);
}
