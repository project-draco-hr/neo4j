{
  File outputDir=new File("target/var/" + StoreVersionTest.class.getSimpleName());
  fs.get().mkdirs(outputDir);
  File storeFileName=new File(outputDir,NeoStore.DEFAULT_NAME);
  Map<String,String> params=new HashMap<String,String>();
  params.put(GraphDatabaseSettings.store_dir.name(),outputDir.getPath());
  params.put("neo_store",storeFileName.getPath());
  Monitors monitors=new Monitors();
  Config config=new Config(params,GraphDatabaseSettings.class);
  StoreFactory sf=new StoreFactory(config,new DefaultIdGeneratorFactory(),new DefaultWindowPoolFactory(monitors,config),fs.get(),StringLogger.DEV_NULL,null,monitors);
  NeoStore neoStore=sf.createNeoStore(storeFileName);
  CommonAbstractStore[] stores={neoStore.getNodeStore(),neoStore.getRelationshipStore(),neoStore.getRelationshipTypeStore(),neoStore.getPropertyStore(),neoStore.getPropertyKeyTokenStore()};
  for (  CommonAbstractStore store : stores) {
    assertThat(store.getTypeAndVersionDescriptor(),containsString(CommonAbstractStore.ALL_STORES_VERSION));
  }
  neoStore.close();
}
