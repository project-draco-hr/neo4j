{
  File outputDir=new File("target/var/" + StoreVersionTest.class.getSimpleName());
  assertTrue(fs.get().mkdirs(outputDir));
  File storeFileName=new File(outputDir,NeoStore.DEFAULT_NAME);
  Map<String,String> config=new HashMap<String,String>();
  config.put(GraphDatabaseSettings.store_dir.name(),outputDir.getPath());
  config.put("neo_store",storeFileName.getPath());
  StoreFactory sf=new StoreFactory(new Config(config,GraphDatabaseSettings.class),new DefaultIdGeneratorFactory(),new DefaultWindowPoolFactory(),fs.get(),StringLogger.SYSTEM,null);
  NeoStore neoStore=sf.createNeoStore(storeFileName);
  CommonAbstractStore[] stores={neoStore.getNodeStore(),neoStore.getRelationshipStore(),neoStore.getRelationshipTypeStore(),neoStore.getPropertyStore(),neoStore.getPropertyStore().getIndexStore()};
  for (  CommonAbstractStore store : stores) {
    assertThat(store.getTypeAndVersionDescriptor(),containsString(CommonAbstractStore.ALL_STORES_VERSION));
  }
  neoStore.close();
}
