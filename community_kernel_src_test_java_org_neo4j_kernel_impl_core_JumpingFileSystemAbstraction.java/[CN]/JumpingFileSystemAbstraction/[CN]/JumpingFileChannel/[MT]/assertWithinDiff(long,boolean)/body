{
  if (diff < -sizePerJump / 2 || diff > sizePerJump / 2) {
    if (allowFix) {
      if (diff < -sizePerJump / 2) {
        return -sizePerJump / 2;
      }
 else {
        return sizePerJump / 2;
      }
    }
    throw new IllegalArgumentException("" + diff);
  }
  return diff;
}
