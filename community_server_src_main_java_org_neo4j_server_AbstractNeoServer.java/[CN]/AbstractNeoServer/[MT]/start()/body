{
  interruptStartupTimer=createInterruptStartupTimer();
  try {
    runPreflightTasks();
    interruptStartupTimer.startCountdown();
    try {
      database.start();
      databaseActions=createDatabaseActions();
      cypherExecutor=new CypherExecutor(database,logging.getMessagesLog(CypherExecutor.class));
      configureWebServer();
      cypherExecutor.start();
      DiagnosticsManager diagnosticsManager=database.getGraph().getDiagnosticsManager();
      StringLogger logger=diagnosticsManager.getTargetLog();
      logger.logMessage("--- SERVER STARTED START ---");
      diagnosticsManager.register(Configurator.DIAGNOSTICS,configurator);
      startModules();
      startWebServer();
      logger.logMessage("--- SERVER STARTED END ---",true);
    }
  finally {
      interruptStartupTimer.stopCountdown();
    }
  }
 catch (  Throwable t) {
    Thread.interrupted();
    if (interruptStartupTimer.wasTriggered()) {
      throw new ServerStartupException("Startup took longer than " + interruptStartupTimer.getTimeoutMillis() + "ms, "+ "and was stopped. You can disable this behavior by setting '"+ Configurator.STARTUP_TIMEOUT+ "' to 0.",1);
    }
    throw new ServerStartupException(String.format("Starting Neo4j Server failed: %s",t.getMessage()),t);
  }
}
