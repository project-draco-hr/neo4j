{
  interruptStartupTimer=createInterruptStartupTimer();
  try {
    runPreflightTasks();
    interruptStartupTimer.startCountdown();
    configureWebServer();
    database.start();
    cypherExecutor.start();
    DiagnosticsManager diagnosticsManager=database.getGraph().getDiagnosticsManager();
    StringLogger logger=diagnosticsManager.getTargetLog();
    logger.logMessage("--- SERVER STARTUP START ---");
    diagnosticsManager.register(Configurator.DIAGNOSTICS,configurator);
    startModules(logger);
    startWebServer(logger);
    logger.logMessage("--- SERVER STARTUP END ---",true);
    interruptStartupTimer.stopCountdown();
  }
 catch (  Throwable t) {
    interruptStartupTimer.stopCountdown();
    Thread.interrupted();
    if (interruptStartupTimer.wasTriggered()) {
      throw new ServerStartupException("Startup took longer than " + interruptStartupTimer.getTimeoutMillis() + "ms, and was stopped. You can disable this behavior by setting '"+ Configurator.STARTUP_TIMEOUT+ "' to 0.",1);
    }
    if (t instanceof RuntimeException) {
      throw (RuntimeException)t;
    }
 else {
      throw new ServerStartupException("Starting neo server failed, see nested exception.",t);
    }
  }
}
