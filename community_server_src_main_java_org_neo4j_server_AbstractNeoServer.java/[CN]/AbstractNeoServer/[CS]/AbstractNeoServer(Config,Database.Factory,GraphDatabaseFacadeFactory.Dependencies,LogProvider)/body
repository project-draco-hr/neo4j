{
  this.config=config;
  this.logProvider=logProvider;
  this.log=logProvider.getLog(getClass());
  this.database=life.add(dependencyResolver.satisfyDependency(dbFactory.newDatabase(config,dependencies)));
  FileUserRepository users=life.add(new FileUserRepository(config.get(ServerInternalSettings.auth_store).toPath(),logProvider));
  this.authManager=life.add(new AuthManager(users,Clock.SYSTEM_CLOCK,config.get(ServerSettings.auth_enabled)));
  this.webServer=createWebServer();
  this.keyStoreInfo=createKeyStore();
  for (  ServerModule moduleClass : createServerModules()) {
    registerModule(moduleClass);
  }
}
