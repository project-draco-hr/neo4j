{
  this.configurator=configurator;
  this.dependencies=dependencies;
  this.dbConfig=new Config();
  this.log=dependencies.logging().getConsoleLog(getClass());
  this.database=life.add(dependencyResolver.satisfyDependency(dbFactory.newDatabase(dbConfig,dependencies)));
  FileUserRepository users=life.add(new FileUserRepository(configurator.configuration().get(ServerInternalSettings.auth_store).toPath(),dependencies.logging()));
  this.authManager=life.add(new AuthManager(Clock.SYSTEM_CLOCK,users));
  this.preFlight=dependencyResolver.satisfyDependency(createPreflightTasks());
  this.webServer=createWebServer();
  for (  ServerModule moduleClass : createServerModules()) {
    registerModule(moduleClass);
  }
}
