{
  long endTime=System.currentTimeMillis() + maxSeconds * 1000;
  while (System.currentTimeMillis() < endTime) {
    try {
      return process.exitValue();
    }
 catch (    IllegalThreadStateException e) {
      Thread.sleep(100);
    }
  }
  throw new RuntimeException("Process didn't exit on its own");
}
