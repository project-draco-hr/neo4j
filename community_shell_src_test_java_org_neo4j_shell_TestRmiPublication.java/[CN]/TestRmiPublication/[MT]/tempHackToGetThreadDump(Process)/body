{
  try {
    Field pidField=process.getClass().getDeclaredField("pid");
    pidField.setAccessible(true);
    int pid=(int)pidField.get(process);
    ProcessBuilder processBuilder=new ProcessBuilder("/bin/sh","-c","kill -3 " + pid);
    processBuilder.redirectErrorStream(true);
    Process dumpProc=processBuilder.start();
    ProcessStreamHandler streamHandler=new ProcessStreamHandler(dumpProc,false);
    streamHandler.launch();
    try {
      process.waitFor();
    }
  finally {
      streamHandler.cancel();
    }
  }
 catch (  Throwable e) {
    e.printStackTrace();
  }
}
