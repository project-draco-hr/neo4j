{
  ExecutionException executionException=null;
  for (int i=0; i < 20; i++) {
    try {
      lockAcquisition.get(50,TimeUnit.MILLISECONDS);
      fail("Transaction termination expected");
    }
 catch (    ExecutionException e) {
      executionException=e;
    }
catch (    TimeoutException ignore) {
    }
  }
  assertNotNull("execution should fail",executionException);
  assertThat(executionException.getCause(),instanceOf(TransactionTerminatedException.class));
  assertTrue("locking thread seem to be still in progress",lockAcquisition.isDone());
}
