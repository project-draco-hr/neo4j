{
  acquireExclusiveLockInThisThread();
  TxTerminationImpl txTermination=new TxTerminationImpl();
  Future<?> exclusiveLockAcquisition1=acquireExclusiveLockInAnotherThread(txTermination);
  assertThreadIsWaitingForLock(exclusiveLockAcquisition1);
  txTermination.markForTermination();
  assertLockAcquisitionFailed(exclusiveLockAcquisition1);
  releaseAllLocksInThisThread();
  Future<?> exclusiveLockAcquisition2=acquireExclusiveLockInAnotherThread(txTermination);
  assertLockAcquisitionSucceeded(exclusiveLockAcquisition2);
}
