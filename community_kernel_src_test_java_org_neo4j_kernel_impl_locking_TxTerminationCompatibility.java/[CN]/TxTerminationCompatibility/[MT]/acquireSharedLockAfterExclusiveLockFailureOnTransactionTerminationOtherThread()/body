{
  acquireExclusiveLockInThisThread();
  TxTerminationImpl txTermination=new TxTerminationImpl();
  Future<?> exclusiveLockAcquisition=acquireExclusiveLockInAnotherThread(txTermination);
  assertThreadIsWaitingForLock(exclusiveLockAcquisition);
  txTermination.markForTermination();
  assertLockAcquisitionFailed(exclusiveLockAcquisition);
  releaseAllLocksInThisThread();
  Future<?> sharedLockAcquisition=acquireSharedLockInAnotherThread(txTermination);
  assertLockAcquisitionSucceeded(sharedLockAcquisition);
}
