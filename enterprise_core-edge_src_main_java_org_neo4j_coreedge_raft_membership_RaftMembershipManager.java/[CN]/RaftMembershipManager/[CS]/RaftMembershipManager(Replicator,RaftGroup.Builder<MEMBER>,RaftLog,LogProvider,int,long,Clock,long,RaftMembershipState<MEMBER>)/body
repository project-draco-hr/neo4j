{
  this.replicator=replicator;
  this.memberSetBuilder=memberSetBuilder;
  this.entryLog=entryLog;
  this.expectedClusterSize=expectedClusterSize;
  this.raftMembershipState=raftMembershipState;
  this.log=logProvider.getLog(getClass());
  this.membershipStateMachine=new RaftMembershipStateMachine<>(entryLog,clock,electionTimeout,this,logProvider,catchupTimeout,raftMembershipState);
  entryLog.registerListener(this);
}
