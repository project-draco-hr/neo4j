{
  super(management);
  XaDataSourceManager xaDataSourceManager=management.getKernelData().graphDatabase().getDependencyResolver().resolveDependency(XaDataSourceManager.class);
  xaDataSourceManager.addDataSourceRegistrationListener(new DataSourceRegistrationListener(){
    @Override public void registeredDataSource(    XaDataSource ds){
      if (ds instanceof NeoStoreXaDataSource) {
        NeoStoreXaDataSource nioneodb=(NeoStoreXaDataSource)ds;
        File path;
        try {
          path=new File(nioneodb.getStoreDir()).getCanonicalFile().getAbsoluteFile();
        }
 catch (        IOException e) {
          path=new File(nioneodb.getStoreDir()).getAbsoluteFile();
        }
        storePath=path;
      }
    }
    @Override public void unregisteredDataSource(    XaDataSource ds){
      if (ds instanceof NeoStoreXaDataSource) {
        storePath=null;
      }
    }
  }
);
}
