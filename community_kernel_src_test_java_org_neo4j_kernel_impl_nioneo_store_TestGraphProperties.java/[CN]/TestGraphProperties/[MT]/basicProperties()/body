{
  GraphDatabaseAPI db=(GraphDatabaseAPI)factory.newImpermanentDatabase();
  assertNull(properties(db).getProperty("test",null));
  Transaction tx=db.beginTx();
  properties(db).setProperty("test","yo");
  assertEquals("yo",properties(db).getProperty("test"));
  tx.success();
  tx.finish();
  assertEquals("yo",properties(db).getProperty("test"));
  tx=db.beginTx();
  assertNull(properties(db).removeProperty("something non existent"));
  assertEquals("yo",properties(db).removeProperty("test"));
  assertNull(properties(db).getProperty("test",null));
  properties(db).setProperty("other",10);
  assertEquals(10,properties(db).getProperty("other"));
  properties(db).setProperty("new","third");
  tx.success();
  tx.finish();
  assertNull(properties(db).getProperty("test",null));
  assertEquals(10,properties(db).getProperty("other"));
  assertEquals(asSet(asCollection(properties(db).getPropertyKeys())),asSet(asList("other","new")));
  tx=db.beginTx();
  properties(db).setProperty("rollback",true);
  assertEquals(true,properties(db).getProperty("rollback"));
  tx.finish();
  assertNull(properties(db).getProperty("rollback",null));
}
