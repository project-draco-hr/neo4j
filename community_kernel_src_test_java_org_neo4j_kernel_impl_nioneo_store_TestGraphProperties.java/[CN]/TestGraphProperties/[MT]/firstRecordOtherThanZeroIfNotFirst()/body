{
  GraphDatabaseAPI db=(GraphDatabaseAPI)new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(forTest(getClass()).directory("zero",true).getAbsolutePath()).newGraphDatabase();
  String storeDir=db.getStoreDir();
  Transaction tx=db.beginTx();
  Node node=db.createNode();
  node.setProperty("name","Yo");
  tx.success();
  tx.finish();
  db.shutdown();
  db=(GraphDatabaseAPI)new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(forTest(getClass()).directory("zero",false).getAbsolutePath()).newGraphDatabase();
  tx=db.beginTx();
  db.getNodeManager().getGraphProperties().setProperty("test","something");
  tx.success();
  tx.finish();
  db.shutdown();
  FileSystemAbstraction fileSystem=new DefaultFileSystemAbstraction();
  NeoStore neoStore=new StoreFactory(new Config(StringLogger.DEV_NULL,fileSystem,Collections.<String,String>emptyMap()),new DefaultIdGeneratorFactory(),fileSystem,null,StringLogger.DEV_NULL,null).newNeoStore(new File(storeDir,NeoStore.DEFAULT_NAME).getAbsolutePath());
  long prop=neoStore.getGraphNextProp();
  assertTrue(prop != 0);
  neoStore.close();
}
