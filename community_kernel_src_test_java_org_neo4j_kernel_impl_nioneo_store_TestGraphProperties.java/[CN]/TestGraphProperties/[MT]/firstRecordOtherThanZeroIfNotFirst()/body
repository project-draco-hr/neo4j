{
  GraphDatabaseAPI db=(GraphDatabaseAPI)new GraphDatabaseFactory().newEmbeddedDatabase(forTest(getClass()).directory("zero",true).getAbsolutePath());
  String storeDir=db.getStoreDir();
  Transaction tx=db.beginTx();
  Node node=db.createNode();
  node.setProperty("name","Yo");
  tx.success();
  tx.finish();
  db.shutdown();
  db=(GraphDatabaseAPI)new GraphDatabaseFactory().newEmbeddedDatabase(forTest(getClass()).directory("zero",false).getAbsolutePath());
  tx=db.beginTx();
  db.getNodeManager().getGraphProperties().setProperty("test","something");
  tx.success();
  tx.finish();
  db.shutdown();
  FileSystemAbstraction fileSystem=new DefaultFileSystemAbstraction();
  NeoStore neoStore=new StoreFactory(new Config(Collections.<String,String>emptyMap(),GraphDatabaseSettings.class),new DefaultIdGeneratorFactory(),new DefaultWindowPoolFactory(),fileSystem,StringLogger.DEV_NULL,null).newNeoStore(new File(storeDir,NeoStore.DEFAULT_NAME));
  long prop=neoStore.getGraphNextProp();
  assertTrue(prop != 0);
  neoStore.close();
}
