{
  int sizeLimit=100;
  ByteBuf buffer=Unpooled.buffer();
  int padding=Long.BYTES;
  buffer.writeLong(0);
  NetworkFlushableChannelNetty4 channel=new NetworkFlushableChannelNetty4(buffer,sizeLimit);
  for (int i=0; i < sizeLimit - padding; i++) {
    channel.put((byte)0);
  }
  for (int i=0; i < padding; i++) {
    channel.put((byte)0);
  }
  try {
    channel.put((byte)0);
    fail("Should not allow more bytes than what the limit dictates");
  }
 catch (  MessageTooBigException e) {
  }
}
