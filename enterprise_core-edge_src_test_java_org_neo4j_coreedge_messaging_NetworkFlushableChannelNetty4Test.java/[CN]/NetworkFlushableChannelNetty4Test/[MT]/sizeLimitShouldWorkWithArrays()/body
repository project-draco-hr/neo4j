{
  int sizeLimit=100;
  NetworkFlushableChannelNetty4 channel=new NetworkFlushableChannelNetty4(Unpooled.buffer(),sizeLimit);
  int padding=10;
  for (int i=0; i < sizeLimit - padding; i++) {
    channel.put((byte)0);
  }
  try {
    channel.put(new byte[padding * 2],padding * 2);
    fail("Should not allow more bytes than what the limit dictates");
  }
 catch (  MessageTooBigException e) {
  }
}
