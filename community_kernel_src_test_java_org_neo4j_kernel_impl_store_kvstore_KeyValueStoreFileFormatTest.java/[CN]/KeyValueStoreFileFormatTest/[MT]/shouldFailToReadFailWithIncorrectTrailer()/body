{
  String[] headerNames={"abc","xyz"};
  Format expectedFormat=new Format(headerNames);
  IncorrectTrailerFormat incorrectTrailerFormat=new IncorrectTrailerFormat(headerNames);
  Map<String,byte[]> headers=new HashMap<>();
  headers.put("abc",new byte[]{'h','e','l','l','o',0,0,0,0,0,0,0,0,0,0,0});
  headers.put("xyz",new byte[]{0,0,0,0,0,0,0,0,0,0,0,'w','o','r','l','d'});
  Data data=data(entry(new byte[]{'o','n','e'},new byte[]{'a','l','p','h','a'}),entry(new byte[]{'t','w','o'},new byte[]{'b','e','t','a'}),entry(new byte[]{'z','e','d'},new byte[]{'o','m','e','g','a'}));
  try (KeyValueStoreFile originalValidFile=incorrectTrailerFormat.create(headers,data)){
    assertEquals("number of entries",3,data.index);
    assertEntries(3,originalValidFile);
  }
   try {
    expectedFormat.open();
    fail("It should not be possible to open count store file with incorrect trailer.");
  }
 catch (  IOException e) {
    assertEquals("Invalid file trailer. Expected trailer not found.",e.getMessage());
  }
}
