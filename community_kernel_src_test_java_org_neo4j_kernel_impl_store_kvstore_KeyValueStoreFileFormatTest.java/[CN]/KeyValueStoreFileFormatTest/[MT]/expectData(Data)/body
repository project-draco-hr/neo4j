{
  expected.index=0;
  return new KeyValueVisitor(){
    @Override public boolean visit(    ReadableBuffer key,    ReadableBuffer value){
      byte[] expectedKey=new byte[key.size()];
      byte[] expectedValue=new byte[value.size()];
      if (!expected.visit(new BigEndianByteArrayBuffer(expectedKey),new BigEndianByteArrayBuffer(expectedValue))) {
        return false;
      }
      assertEqualContent(expectedKey,key);
      return true;
    }
  }
;
}
