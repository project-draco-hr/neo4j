{
  final String coordinatorRole="coordinator";
  HeartbeatContext heartbeatContext=mock(HeartbeatContext.class);
  when(heartbeatContext.getFailed()).thenReturn(Collections.<InstanceId>emptySet());
  Logging logging=Mockito.mock(Logging.class);
  when(logging.getMessagesLog(Matchers.<Class>any())).thenReturn(mock(StringLogger.class));
  ElectionContext context=new MultiPaxosContext(new InstanceId(1),Iterables.<ElectionRole,ElectionRole>iterable(new ElectionRole(coordinatorRole)),mock(ClusterConfiguration.class),Mockito.mock(Executor.class),logging,Mockito.mock(ObjectInputStreamFactory.class),Mockito.mock(ObjectOutputStreamFactory.class),Mockito.mock(AcceptorInstanceStore.class),Mockito.mock(Timeouts.class)).getElectionContext();
  ElectionContext.VoteRequest voteRequestBefore=context.voteRequestForRole(new ElectionRole(coordinatorRole));
  context.forgetElection(coordinatorRole);
  assertFalse(context.voted(coordinatorRole,new InstanceId(2),null,voteRequestBefore.getVersion() - 1));
}
