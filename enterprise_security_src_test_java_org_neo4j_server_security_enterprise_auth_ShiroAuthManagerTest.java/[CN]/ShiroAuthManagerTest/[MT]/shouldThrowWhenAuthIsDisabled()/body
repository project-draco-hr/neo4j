{
  manager=new ShiroAuthManager(users,passwordPolicy,authStrategy,false);
  manager.start();
  try {
    manager.login("foo","bar");
    fail("exception expected");
  }
 catch (  IllegalStateException e) {
  }
  try {
    manager.newUser("foo","bar",true);
    fail("exception expected");
  }
 catch (  IllegalStateException e) {
  }
  try {
    manager.deleteUser("foo");
    fail("exception expected");
  }
 catch (  IllegalStateException e) {
  }
  try {
    manager.getUser("foo");
    fail("exception expected");
  }
 catch (  IllegalStateException e) {
  }
  try {
    manager.setUserPassword("foo","bar");
    fail("exception expected");
  }
 catch (  IllegalStateException e) {
  }
  assertTrue(users.numberOfUsers() == 0);
}
