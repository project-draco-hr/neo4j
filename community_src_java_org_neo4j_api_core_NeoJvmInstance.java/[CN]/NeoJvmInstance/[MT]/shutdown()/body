{
  if (started) {
    timer.cancel();
    String sendPing=(String)config.getParams().get("send_udp_ping");
    if (sendPing == null || !sendPing.toLowerCase().equals("no")) {
      sendUdpPingShutdown();
    }
    config.getNeoModule().stop();
    config.getIdGeneratorModule().stop();
    persistenceSource.stop();
    config.getPersistenceModule().stop();
    config.getTxModule().stop();
    config.getEventModule().stop();
    config.getNeoModule().destroy();
    config.getIdGeneratorModule().destroy();
    persistenceSource.destroy();
    config.getPersistenceModule().destroy();
    config.getTxModule().destroy();
    config.getEventModule().destroy();
  }
  started=false;
}
