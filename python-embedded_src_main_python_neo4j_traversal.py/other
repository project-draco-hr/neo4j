from _backend import extends, implements, rel_type, TraverserImpl, Traversal, TraversalDescriptionImpl, strings, Evaluation, Evaluator, Uniqueness, TraversalBranchImpl, BidirectionalTraversalBranchPath, ExtendedPath, SingleNodePath, FinalTraversalBranch, AsOneStartBranch, StartNodeTraversalBranch, WrappedPath
from util import PythonicIterator
from core import Direction, DirectionalType
INCLUDE_AND_CONTINUE = Evaluation.INCLUDE_AND_CONTINUE
INCLUDE_AND_PRUNE = Evaluation.INCLUDE_AND_PRUNE
EXCLUDE_AND_CONTINUE = Evaluation.EXCLUDE_AND_CONTINUE
EXCLUDE_AND_PRUNE = Evaluation.EXCLUDE_AND_PRUNE
for PathClass in [TraversalBranchImpl, BidirectionalTraversalBranchPath, ExtendedPath, SingleNodePath, FinalTraversalBranch, AsOneStartBranch, StartNodeTraversalBranch, WrappedPath]:


    class IrrelevantClassName(extends(PathClass)):

        @property
        def start(self):
            return self.startNode()

        @property
        def end(self):
            return self.endNode()

        @property
        def last_relationship(self):
            return self.lastRelationship()

        @property
        def nodes(self):
            it = self._super__nodes().iterator()
            while it.hasNext():
                yield it.next()

        @property
        def relationships(self):
            it = self._super__relationships().iterator()
            while it.hasNext():
                yield it.next()

        def __str__(self):
            out = []
            current = self.start
            for rel in self.relationships:
                out.append('({0})'.format(current.id))
                if (rel.start == current):
                    out.append('-[{0},{1}]->'.format(rel.type, rel.id))
                else:
                    out.append('<-[{0},{1}]-'.format(rel.type, rel.id))
                current = rel.other_node(current)
            out.append('({0})'.format(current.id))
            return ''.join(out)

        def __repr__(self):
            return self.toString()

        def __len__(self):
            return self.length()

        def __iter__(self):
            it = self.iterator()
            while it.hasNext():
                yield it.next()
del IrrelevantClassName
