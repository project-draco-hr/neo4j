def evaluate(self, path):
    rel = path.last_relationship
    if (matches_direction(path, self.direction) and matches_reltypes(rel, self.types) and matches_properties(rel, self.relprops) and matches_properties(path.end, self.nodeprops)):
        return True
    return False
