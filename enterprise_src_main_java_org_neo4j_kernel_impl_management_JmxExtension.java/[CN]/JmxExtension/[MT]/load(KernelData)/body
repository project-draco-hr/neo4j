{
  final NodeManager nodeManager=kernel.getConfig().getGraphDbModule().getNodeManager();
  kernel.setState(this,Neo4jMBean.initMBeans(new Neo4jMBean.Creator(kernel.instanceId(),kernel.version(),(NeoStoreXaDataSource)kernel.getConfig().getTxModule().getXaDataSourceManager().getXaDataSource("nioneodb")){
    @Override protected void create(    Neo4jMBean.Factory jmx){
      jmx.createDynamicConfigurationMBean(kernel.getConfigParams());
      jmx.createPrimitiveMBean(nodeManager);
      jmx.createStoreFileMBean();
      jmx.createCacheMBean(nodeManager);
      jmx.createLockManagerMBean(kernel.getConfig().getLockManager());
      jmx.createTransactionManagerMBean(kernel.getConfig().getTxModule());
      jmx.createMemoryMappingMBean(kernel.getConfig().getTxModule().getXaDataSourceManager());
      jmx.createXaManagerMBean(kernel.getConfig().getTxModule().getXaDataSourceManager());
    }
  }
));
}
