{
  List<File> files=new ArrayList<>();
  try {
    DirectoryStream.Filter<Path> dirfilter=new DirectoryStream.Filter<Path>(){
      @Override public boolean accept(      Path entry) throws IOException {
        return filter.accept(entry.getParent().toFile(),entry.getFileName().toString());
      }
    }
;
    for (    Path path : Files.newDirectoryStream(path(directory),dirfilter)) {
      files.add(path.toFile());
    }
  }
 catch (  IOException e) {
    return null;
  }
  return files.toArray(new File[files.size()]);
}
