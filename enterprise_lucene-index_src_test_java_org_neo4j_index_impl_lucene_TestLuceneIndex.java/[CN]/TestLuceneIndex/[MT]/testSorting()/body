{
  Index<Node> index=nodeIndex("sort",LuceneIndexImplementation.EXACT_CONFIG);
  String name="name";
  String title="title";
  String other="other";
  String sex="sex";
  Node adam=graphDb.createNode();
  Node adam2=graphDb.createNode();
  Node jack=graphDb.createNode();
  Node eva=graphDb.createNode();
  index.add(adam,name,"Adam");
  index.add(adam,title,"Software developer");
  index.add(adam,sex,"male");
  index.add(adam,other,"aaa");
  index.add(adam2,name,"Adam");
  index.add(adam2,title,"Blabla");
  index.add(adam2,sex,"male");
  index.add(adam2,other,"bbb");
  index.add(jack,name,"Jack");
  index.add(jack,title,"Apple sales guy");
  index.add(jack,sex,"male");
  index.add(jack,other,"ccc");
  index.add(eva,name,"Eva");
  index.add(eva,title,"Secretary");
  index.add(eva,sex,"female");
  index.add(eva,other,"ddd");
  for (int i=0; i < 2; i++) {
    assertContainsInOrder(index.query(new QueryContext("name:*").sort(name,title)),adam2,adam,eva,jack);
    assertContainsInOrder(index.query(new QueryContext("name:*").sort(name,other)),adam,adam2,eva,jack);
    assertContainsInOrder(index.query(new QueryContext("name:*").sort(sex,title)),eva,jack,adam2,adam);
    assertContainsInOrder(index.query(name,new QueryContext("*").sort(sex,title)),eva,jack,adam2,adam);
    assertContainsInOrder(index.query(new QueryContext("name:*").sort(name,title).topDocs(2)),adam2,adam);
    restartTx();
  }
}
