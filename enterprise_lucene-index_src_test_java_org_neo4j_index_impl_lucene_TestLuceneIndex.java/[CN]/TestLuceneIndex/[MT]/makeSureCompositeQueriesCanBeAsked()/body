{
  Index<Node> index=nodeIndex("index",LuceneIndexImplementation.EXACT_CONFIG);
  Node neo=graphDb.createNode();
  Node trinity=graphDb.createNode();
  index.add(neo,"username","neo@matrix");
  index.add(neo,"sex","male");
  index.add(trinity,"username","trinity@matrix");
  index.add(trinity,"sex","female");
  for (int i=0; i < 2; i++) {
    assertThat(index.query("username:*@matrix AND sex:male"),contains(neo));
    assertThat(index.query(new QueryContext("username:*@matrix sex:male").defaultOperator(Operator.AND)),contains(neo));
    assertThat(index.query("username:*@matrix OR sex:male"),contains(neo,trinity));
    assertThat(index.query(new QueryContext("username:*@matrix sex:male").defaultOperator(Operator.OR)),contains(neo,trinity));
    restartTx();
  }
  index.delete();
}
