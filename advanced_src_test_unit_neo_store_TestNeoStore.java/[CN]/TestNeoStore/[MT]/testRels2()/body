{
  try {
    initializeStores();
    startTx();
    int relType1=ds.nextId(RelationshipType.class);
    relTypeStore.addRelationshipType(relType1,"relationshiptype1");
    int nodeIds[]=new int[3];
    for (int i=0; i < 3; i++) {
      nodeIds[i]=ds.nextId(Node.class);
      nStore.createNode(nodeIds[i]);
      nStore.addProperty(nodeIds[i],pStore.nextId(),"nisse",new Integer(10 - i));
    }
    for (int i=0; i < 2; i++) {
      rStore.createRelationship(ds.nextId(Relationship.class),nodeIds[i],nodeIds[i + 1],relType1);
    }
    rStore.createRelationship(ds.nextId(Relationship.class),nodeIds[0],nodeIds[2],relType1);
    commitTx();
    startTx();
    for (int i=0; i < 3; i++) {
      RelationshipData rels[]=nStore.getRelationships(nodeIds[i]);
      for (int j=0; j < rels.length; j++) {
        rStore.deleteRelationship(rels[j].getId());
      }
      nStore.deleteNode(nodeIds[i]);
    }
    commitTx();
    ds.close();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("" + e);
  }
}
