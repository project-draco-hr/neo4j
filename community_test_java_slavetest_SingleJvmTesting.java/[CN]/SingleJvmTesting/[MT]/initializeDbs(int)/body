{
  try {
    initDeadMasterAndSlaveDbs(numSlaves);
    haDbs=new ArrayList<GraphDatabaseService>();
    startUpMaster();
    FakeBroker broker=new FakeBroker(master);
    for (int i=0; i < numSlaves; i++) {
      File slavePath=slavePath(i);
      GraphDatabaseService db=new HighlyAvailableGraphDatabase(slavePath.getAbsolutePath(),MapUtil.stringMap("ha.machine_id","" + i),broker);
      haDbs.add(db);
      broker.setDb(db);
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
