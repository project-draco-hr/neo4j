{
  Transaction tx=db.beginTx();
  try {
    return executeInTransaction(db,tx);
  }
 catch (  RuntimeException e) {
    e.printStackTrace(System.out);
    throw e;
  }
 finally {
    beforeFinish();
    tx.finish();
  }
}
