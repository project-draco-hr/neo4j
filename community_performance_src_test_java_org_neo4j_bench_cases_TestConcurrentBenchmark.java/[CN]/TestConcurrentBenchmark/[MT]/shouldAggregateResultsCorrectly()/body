{
  Benchmark bench=new ConcurrentBenchmark(8){
    @Override public BenchWorker createWorker(){
      return new BenchWorker(){
        @Override public WorkerMetric[] doWork(        WorkerContext ctx){
          return new WorkerMetric[]{new WorkerMetric(WorkerMetric.TOTAL,"The metric",1.0,OPERATION.per(SECOND)),new WorkerMetric(WorkerMetric.AVERAGE,"Avg metric",53.0,MILLISECOND.per(OPERATION))};
        }
      }
;
    }
  }
;
  CaseResult result=bench.run();
  assertThat(result.getMetric("The metric").getValue(),is(8.0));
  assertThat(result.getMetric("Avg metric").getValue(),is(53.0));
}
