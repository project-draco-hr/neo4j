{
  final CypherStatementRunner statementRunner=new CypherStatementRunner(queryExecutionEngine,txBridge,queryService);
  TransactionStateMachine.SPI transactionSPI=new TransactionStateMachineSPI(gds,txBridge,queryExecutionEngine,statementRunner,transactionIdStore);
  BoltStateMachine.SPI boltSPI=new BoltStateMachineSPI(connectionDescriptor,usageData,logging,authentication,connectionTracker,transactionSPI);
  return new BoltStateMachine(boltSPI,onClose,Clock.systemUTC());
}
