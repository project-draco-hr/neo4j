{
  if (lhs == null || rhs == null) {
    return null;
  }
  if (lhs instanceof String || rhs instanceof String) {
    return String.valueOf(lhs) + String.valueOf(rhs);
  }
  Class<?> lhsClass=lhs.getClass();
  Class<?> rhsClass=rhs.getClass();
  if (lhsClass.isArray() && rhsClass.isArray()) {
    return addArrays(lhs,rhs);
  }
 else   if (lhsClass.isArray()) {
    return addArrayWithObject(lhs,rhs);
  }
 else   if (rhsClass.isArray()) {
    return addObjectWithArray(lhs,rhs);
  }
  if (lhs instanceof Number && rhs instanceof Number) {
    if (lhs instanceof Double || rhs instanceof Double || lhs instanceof Float|| rhs instanceof Float) {
      return ((Number)lhs).doubleValue() + ((Number)rhs).doubleValue();
    }
    if (lhs instanceof Long || rhs instanceof Long || lhs instanceof Integer|| rhs instanceof Integer|| lhs instanceof Short|| rhs instanceof Short|| lhs instanceof Byte|| rhs instanceof Byte) {
      return ((Number)lhs).longValue() + ((Number)rhs).longValue();
    }
  }
  throw new CypherTypeException("Cannot add " + lhs.getClass().getSimpleName() + " and "+ rhs.getClass().getSimpleName(),null);
}
