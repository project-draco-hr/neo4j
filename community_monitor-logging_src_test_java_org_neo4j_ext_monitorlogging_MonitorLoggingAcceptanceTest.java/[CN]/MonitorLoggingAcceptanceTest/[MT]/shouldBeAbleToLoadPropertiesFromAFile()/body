{
  AssertableLogProvider logProvider=new AssertableLogProvider();
  GraphDatabaseAPI dbAPI=(GraphDatabaseAPI)new TestGraphDatabaseFactory().setInternalLogProvider(logProvider).newImpermanentDatabase();
  Monitors monitors=dbAPI.getDependencyResolver().resolveDependency(Monitors.class);
  AMonitor aMonitor=monitors.newMonitor(AMonitor.class);
  aMonitor.doStuff();
  logProvider.assertAtLeastOnce(inLog(AMonitor.class).warn("doStuff()"));
}
