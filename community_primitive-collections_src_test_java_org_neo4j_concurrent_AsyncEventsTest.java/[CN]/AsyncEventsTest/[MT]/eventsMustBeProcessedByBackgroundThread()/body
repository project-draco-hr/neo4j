{
  EventConsumer consumer=new EventConsumer();
  AsyncEvents<Event> asyncEvents=new AsyncEvents<>(consumer,AsyncEvents.Monitor.NONE);
  executor.submit(asyncEvents);
  Event firstSentEvent=new Event();
  asyncEvents.send(firstSentEvent);
  Event firstProcessedEvent=consumer.poll(10,TimeUnit.SECONDS);
  Event secondSentEvent=new Event();
  asyncEvents.send(secondSentEvent);
  Event secondProcessedEvent=consumer.poll(10,TimeUnit.SECONDS);
  asyncEvents.shutdown();
  assertThat(firstProcessedEvent,is(firstSentEvent));
  assertThat(secondProcessedEvent,is(secondSentEvent));
}
