{
  EventConsumer consumer=new EventConsumer();
  AsyncEvents<Event> asyncEvents=new AsyncEvents<>(consumer,AsyncEvents.Monitor.NONE);
  executor.submit(asyncEvents);
  asyncEvents.send(new Event());
  Thread threadForFirstEvent=consumer.poll(10,TimeUnit.SECONDS).processedBy;
  asyncEvents.shutdown();
  assertThat(threadForFirstEvent,is(not(Thread.currentThread())));
  Thread threadForSubsequentEvents;
  do {
    asyncEvents.send(new Event());
    threadForSubsequentEvents=consumer.poll(10,TimeUnit.SECONDS).processedBy;
  }
 while (threadForSubsequentEvents != Thread.currentThread());
}
