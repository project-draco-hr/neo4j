{
  final byte size;
  final Object snapshot;
  if (useThreadSafeMap) {
synchronized (this) {
      size=arrayCount;
      snapshot=this.data;
    }
  }
 else {
    size=arrayCount;
    snapshot=this.data;
  }
  if (size != -1) {
    StringBuilder result=new StringBuilder();
    String sep="[";
    for (int i=0; i < size; i++) {
      result.append(sep).append(((ArrayEntry[])snapshot)[i]);
      sep=", ";
    }
    return result.append("]").toString();
  }
 else {
    return snapshot.toString();
  }
}
