{
  CompositeEventReporter reporter=new CompositeEventReporter();
  final String prefix=createMetricsPrefix(config);
  if (config.get(csvEnabled)) {
    CsvOutput csvOutput=new CsvOutput(config,registry,logger,kernelContext);
    reporter.add(csvOutput);
    life.add(csvOutput);
  }
  if (config.get(graphiteEnabled)) {
    HostnamePort server=config.get(graphiteServer);
    long period=config.get(graphiteInterval);
    GraphiteOutput graphiteOutput=new GraphiteOutput(server,period,registry,logger,prefix);
    reporter.add(graphiteOutput);
    life.add(graphiteOutput);
  }
  if (config.get(gangliaEnabled)) {
    HostnamePort server=config.get(gangliaServer);
    long period=config.get(gangliaInterval);
    GangliaOutput gangliaOutput=new GangliaOutput(server,period,registry,logger,prefix);
    reporter.add(gangliaOutput);
    life.add(gangliaOutput);
  }
  return reporter.isEmpty() ? null : reporter;
}
