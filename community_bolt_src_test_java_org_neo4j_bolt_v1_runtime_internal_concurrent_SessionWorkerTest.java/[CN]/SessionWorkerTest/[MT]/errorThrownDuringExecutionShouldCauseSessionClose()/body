{
  Session session=Mockito.mock(Session.class);
  SessionWorker worker=new SessionWorker(session,NullLogService.getInstance());
  worker.handle(new Consumer<Session>(){
    @Override public void accept(    Session session){
      throw new RuntimeException("It didn't work out.");
    }
  }
);
  worker.run();
  Mockito.verify(session).close();
}
