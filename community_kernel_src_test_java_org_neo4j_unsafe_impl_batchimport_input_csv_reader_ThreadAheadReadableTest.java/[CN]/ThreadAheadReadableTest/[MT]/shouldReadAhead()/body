{
  MockedReader actual=new MockedReader(20);
  int bufferSize=10;
  Readable aheadReader=ThreadAheadReadable.threadAhead(actual,bufferSize);
  assertEquals(bufferSize,actual.awaitCompletedReadAttempts(1));
  assertEquals(7,aheadReader.read(CharBuffer.allocate(7)));
  assertEquals(bufferSize + 7,actual.awaitCompletedReadAttempts(2));
  assertEquals(10,aheadReader.read(CharBuffer.allocate(10)));
  assertEquals(20,actual.awaitCompletedReadAttempts(3));
  assertEquals(3,aheadReader.read(CharBuffer.allocate(5)));
  assertEquals(20,actual.awaitCompletedReadAttempts(4));
  assertEquals(0,aheadReader.read(CharBuffer.allocate(2)));
}
