{
  UriInfo uriInfo=mock(UriInfo.class);
  URI uri=new URI("http://example.org:7474/");
  when(uriInfo.getBaseUri()).thenReturn(uri);
  RootService svc=new RootService(new CommunityNeoServer(mock(ConfigurationBuilder.class),GraphDatabaseDependencies.newDependencies().logging(DevNullLoggingService.DEV_NULL).monitors(new Monitors())));
  EntityOutputFormat output=new EntityOutputFormat(new JsonFormat(),null,null);
  Response serviceDefinition=svc.getServiceDefinition(uriInfo,output);
  assertEquals(200,serviceDefinition.getStatus());
  Map<String,Object> result=(Map<String,Object>)output.getResultAsMap().get("services");
  assertThat(result.get("console").toString(),containsString(String.format("%sserver/console",uri.toString())));
  assertThat(result.get("jmx").toString(),containsString(String.format("%sserver/jmx",uri.toString())));
  assertThat(result.get("monitor").toString(),containsString(String.format("%sserver/monitor",uri.toString())));
}
