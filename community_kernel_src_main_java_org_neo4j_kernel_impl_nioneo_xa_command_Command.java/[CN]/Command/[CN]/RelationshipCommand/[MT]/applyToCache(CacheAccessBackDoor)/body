{
  cacheAccess.removeRelationshipFromCache(getKey());
  if (!record.inUse()) {
    if (beforeUpdate.getFirstNode() != -1 || beforeUpdate.getSecondNode() != -1) {
      cacheAccess.patchDeletedRelationshipNodes(getKey(),beforeUpdate.getType(),beforeUpdate.getFirstNode(),beforeUpdate.getFirstNextRel(),beforeUpdate.getSecondNode(),beforeUpdate.getSecondNextRel());
    }
    if (before != null) {
      cacheAccess.removeNodeFromCache(before.getFirstNode());
      cacheAccess.removeNodeFromCache(before.getSecondNode());
    }
 else {
      cacheAccess.removeNodeFromCache(record.getFirstNode());
      cacheAccess.removeNodeFromCache(record.getSecondNode());
    }
  }
}
