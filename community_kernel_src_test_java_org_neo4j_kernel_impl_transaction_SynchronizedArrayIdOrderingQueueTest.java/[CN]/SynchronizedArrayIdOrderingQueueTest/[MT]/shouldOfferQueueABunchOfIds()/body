{
  IdOrderingQueue queue=new SynchronizedArrayIdOrderingQueue(5);
  for (int i=0; i < 7; i++) {
    queue.offer(i);
  }
  for (int i=0; i < 7; i++) {
    assertFalse(queue.isEmpty());
    queue.waitFor(i);
    queue.removeChecked(i);
  }
  assertTrue(queue.isEmpty());
}
