{
  Path archive=testDirectory.file("the-archive.dump").toPath();
  Path destination=testDirectory.directory("subdir/the-destination").toPath();
  Files.write(destination.getParent(),new byte[0]);
  try {
    new Loader().load(archive,destination);
    fail("Expected an exception");
  }
 catch (  FileSystemException e) {
    assertEquals(destination.getParent().toString() + ": Not a directory",e.getMessage());
  }
}
