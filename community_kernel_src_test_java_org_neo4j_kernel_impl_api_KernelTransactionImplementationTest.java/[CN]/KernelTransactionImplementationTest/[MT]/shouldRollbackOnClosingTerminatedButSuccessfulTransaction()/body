{
  KernelTransaction transaction=newInitializedTransaction();
  transaction.markForTermination(Status.General.UnknownFailure);
  transaction.success();
  assertEquals(Status.General.UnknownFailure,transaction.terminationReason());
  try {
    transaction.close();
    fail("Exception expected");
  }
 catch (  Exception e) {
    assertThat(e,instanceOf(TransactionTerminatedException.class));
  }
  verify(transactionMonitor,times(1)).transactionFinished(false);
  verify(transactionMonitor,times(1)).transactionTerminated();
  verifyNoMoreInteractions(transactionMonitor);
}
