{
  boolean exceptionReceived=false;
  try (KernelTransaction transaction=newTransaction(accessMode())){
    transactionConsumer.accept(transaction);
    transaction.success();
    transaction.markForTermination();
  }
 catch (  TransactionFailureException e) {
    exceptionReceived=true;
  }
  assertTrue(exceptionReceived);
  verify(transactionMonitor,times(1)).transactionFinished(false,isWriteTx);
  verify(transactionMonitor,times(1)).transactionTerminated(isWriteTx);
  verifyExtraInteractionWithTheMonitor(transactionMonitor,isWriteTx);
}
