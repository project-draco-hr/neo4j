{
  Locks.Client locksClient=mock(Locks.Client.class);
  KernelTransactionImplementation tx=newTransaction(accessMode(),locksClient,true);
  tx.markForTermination();
  assertTrue(tx.shouldBeTerminated());
  verify(locksClient).stop();
}
