{
  try {
    GlobalGraphOperations operations=GlobalGraphOperations.at(database.getGraph());
    Iterable<RelationshipType> relationshipTypes=inUse ? operations.getAllRelationshipTypesInUse() : operations.getAllRelationshipTypes();
    return Response.ok().type(MediaType.APPLICATION_JSON).entity(generateJsonRepresentation(relationshipTypes)).build();
  }
  finally {
    representationWriteHandler.onRepresentationFinal();
  }
}
