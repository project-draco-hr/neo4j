{
  BufferingLogger logger=new BufferingLogger();
  Logging logging=mock(Logging.class);
  when(logging.getMessagesLog(any(Class.class))).thenReturn(logger);
  KernelHealth kernelHealth=new KernelHealth(mock(KernelPanicEventGenerator.class),logging);
  kernelHealth.healed();
  String message="Listen everybody... panic!";
  kernelHealth.panic(new Exception(message));
  assertThat(logger.toString(),containsString(message));
}
