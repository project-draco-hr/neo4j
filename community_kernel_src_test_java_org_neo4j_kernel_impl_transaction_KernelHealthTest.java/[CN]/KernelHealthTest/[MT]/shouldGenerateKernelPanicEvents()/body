{
  KernelPanicEventGenerator generator=mock(KernelPanicEventGenerator.class);
  KernelHealth kernelHealth=new KernelHealth(generator,new SingleLoggingService(DEV_NULL));
  kernelHealth.healed();
  Exception cause=new Exception("My own fault");
  kernelHealth.panic(cause);
  kernelHealth.panic(cause);
  verify(generator,times(1)).generateEvent(TX_MANAGER_NOT_OK,cause);
}
