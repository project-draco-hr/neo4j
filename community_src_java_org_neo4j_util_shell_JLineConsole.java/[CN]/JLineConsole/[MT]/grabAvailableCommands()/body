{
  Class<?> completorClass=Class.forName("jline.Completor");
  if (completor != null) {
    consoleReader.getClass().getMethod("removeCompletor",completorClass).invoke(consoleReader,completor);
    completor=null;
  }
  ArrayList<String> commandList=new ArrayList<String>();
  for (  String command : client.getServer().getAllAvailableCommands()) {
    commandList.add(command);
  }
  Object commandsArray=Array.newInstance(String.class,commandList.size());
  int counter=0;
  for (  String command : commandList) {
    Array.set(commandsArray,counter++,command);
  }
  completor=Class.forName("jline.SimpleCompletor").getConstructor(commandsArray.getClass()).newInstance(commandsArray);
  consoleReader.getClass().getMethod("addCompletor",completorClass).invoke(consoleReader,completor);
}
