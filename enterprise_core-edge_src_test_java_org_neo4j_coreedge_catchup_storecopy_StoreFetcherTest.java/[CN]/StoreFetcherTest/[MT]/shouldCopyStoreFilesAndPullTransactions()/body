{
  StoreId storeId=new StoreId(1,2,3,4);
  StoreCopyClient storeCopyClient=mock(StoreCopyClient.class);
  TxPullClient txPullClient=mock(TxPullClient.class);
  when(txPullClient.pullTransactions(any(),any(),anyLong(),any())).thenReturn(SUCCESS);
  TransactionLogCatchUpWriter writer=mock(TransactionLogCatchUpWriter.class);
  StoreFetcher fetcher=new StoreFetcher(NullLogProvider.getInstance(),mock(FileSystemAbstraction.class),null,storeCopyClient,txPullClient,factory(writer));
  MemberId localhost=new MemberId(UUID.randomUUID());
  fetcher.copyStore(localhost,storeId,new File("destination"));
  verify(storeCopyClient).copyStoreFiles(eq(localhost),eq(storeId),any(StoreFileStreams.class));
  verify(txPullClient).pullTransactions(eq(localhost),eq(storeId),anyLong(),any(TxPullResponseListener.class));
}
