{
  this.userManager=userManager;
  this.realms=realms;
  securityManager=new DefaultSecurityManager(realms);
  securityManager.setSubjectFactory(new ShiroSubjectFactory());
  ((ModularRealmAuthenticator)securityManager.getAuthenticator()).setAuthenticationStrategy(new ShiroAuthenticationStrategy());
  cacheManager=new MemoryConstrainedCacheManager();
}
