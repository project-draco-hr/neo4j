{
  if (files.containsKey(directory)) {
    return null;
  }
  List<String> directoryPathItems=splitPath(directory);
  List<File> found=new ArrayList<>();
  for (  Map.Entry<File,EphemeralFileData> file : files.entrySet()) {
    File fileName=file.getKey();
    List<String> fileNamePathItems=splitPath(fileName);
    if (directoryMatches(directoryPathItems,fileNamePathItems)) {
      found.add(constructPath(fileNamePathItems,directoryPathItems.size() + 1));
    }
  }
  return found.toArray(new File[found.size()]);
}
