{
  List<HighlyAvailableGraphDatabase> slaves=new ArrayList<HighlyAvailableGraphDatabase>();
  for (int i=0; i < cluster.size() - 1; i++)   slaves.add(cluster.getAnySlave(slaves.toArray(new HighlyAvailableGraphDatabase[0])));
  for (int i=0; i < 10; i++) {
    final String key="Key" + i;
    final CountDownLatch latch=new CountDownLatch(1);
    List<Thread> threads=new ArrayList<Thread>();
    for (    HighlyAvailableGraphDatabase slave : slaves) {
      final GraphDatabaseAPI db=slave;
      Thread thread=new Thread(){
        @Override public void run(){
          try {
            latch.await();
          }
 catch (          InterruptedException e) {
            throw new RuntimeException(e);
          }
          Transaction tx=db.beginTx();
          try {
            db.createNode().setProperty(key,"yes");
            tx.success();
          }
  finally {
            tx.finish();
          }
        }
      }
;
      thread.start();
      threads.add(thread);
    }
    latch.countDown();
    for (    Thread thread : threads) {
      thread.join();
    }
    int highestId=0;
    for (    GraphDatabaseAPI db : cluster.getAllMembers()) {
      System.err.println(db);
      TokenHolder<PropertyKeyToken> holder=db.getDependencyResolver().resolveDependency(PropertyKeyTokenHolder.class);
      highestId=highestIdOf(holder,highestId);
      Set<String> types=new HashSet<String>();
      for (int j=0; j <= highestId; j++) {
        PropertyKeyToken type=holder.getTokenById(j);
        if (type != null) {
          assertTrue(type.getKey() + " already existed for " + db,types.add(type.getKey()));
        }
      }
    }
  }
}
