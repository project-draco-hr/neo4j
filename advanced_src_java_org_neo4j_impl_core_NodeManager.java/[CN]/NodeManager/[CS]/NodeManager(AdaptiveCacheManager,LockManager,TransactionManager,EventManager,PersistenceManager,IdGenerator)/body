{
  this.cacheManager=cacheManager;
  this.lockManager=lockManager;
  this.transactionManager=transactionManager;
  this.lockReleaser=new LockReleaser(lockManager,transactionManager,this);
  this.eventManager=eventManager;
  this.persistenceManager=persistenceManager;
  this.idGenerator=idGenerator;
  this.propertyIndexManager=new PropertyIndexManager(transactionManager,persistenceManager,idGenerator);
  this.traverserFactory=new InternalTraverserFactory();
  this.relTypeHolder=new RelationshipTypeHolder(transactionManager,persistenceManager,idGenerator);
  this.purgeEventListener=new PurgeEventListener();
  nodeCache=new LruCache<Integer,NodeImpl>("NodeCache",1500,this.cacheManager);
  relCache=new LruCache<Integer,RelationshipImpl>("RelationshipCache",3500,this.cacheManager);
  for (int i=0; i < loadLocks.length; i++) {
    loadLocks[i]=new ReentrantLock();
  }
}
