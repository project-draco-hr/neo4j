{
  buffer.put(type);
  buffer.put(indexClass());
  char[] indexName=indexId.indexName.toCharArray();
  buffer.putInt(indexName.length);
  buffer.putLong(entityId);
  char[] key=this.key.toCharArray();
  buffer.putInt(key.length);
  byte valueType=0;
  BufferNumberPutter putter=null;
  if (value instanceof Number) {
    if (value instanceof Float) {
      valueType=VALUE_TYPE_FLOAT;
      putter=BufferNumberPutter.FLOAT;
    }
 else     if (value instanceof Double) {
      valueType=VALUE_TYPE_DOUBLE;
      putter=BufferNumberPutter.DOUBLE;
    }
 else     if (value instanceof Long) {
      valueType=VALUE_TYPE_LONG;
      putter=BufferNumberPutter.LONG;
    }
 else {
      valueType=VALUE_TYPE_INT;
      putter=BufferNumberPutter.INT;
    }
  }
 else {
    valueType=VALUE_TYPE_STRING;
  }
  buffer.put(valueType);
  buffer.put(indexName);
  buffer.put(key);
  if (valueType == VALUE_TYPE_STRING) {
    char[] charValue=value.toString().toCharArray();
    buffer.putInt(charValue.length);
    buffer.put(charValue);
  }
 else {
    putter.put(buffer,(Number)value);
  }
}
