{
  WrappingNeoServerBootstrapper srv=new WrappingNeoServerBootstrapper(myDb);
  srv.start();
  long originalNodeNumber=myDb.getDependencyResolver().resolveDependency(JmxKernelExtension.class).getSingleManagementBean(Primitives.class).getNumberOfNodeIdsInUse();
  FunctionalTestHelper helper=new FunctionalTestHelper(srv.getServer());
  JaxRsResponse response=new RestRequest().get(helper.dataUri());
  assertEquals(200,response.getStatus());
  String nodeData="{\"age\":12}";
  response=new RestRequest().post(helper.dataUri() + "node",nodeData);
  assertEquals(201,response.getStatus());
  long newNodeNumber=myDb.getDependencyResolver().resolveDependency(JmxKernelExtension.class).getSingleManagementBean(Primitives.class).getNumberOfNodeIdsInUse();
  assertEquals(originalNodeNumber + 1,newNodeNumber);
  srv.stop();
  try (Transaction tx=myDb.beginTx()){
    assertTrue(myDb.createNode() != null);
  }
 }
