{
  final int hash=hash(key.hashCode());
  final int bucket=hash & bitwiseModByBuckets;
  Record<K,V> prev=null;
  for (Record<K,V> record=buckets[bucket]; record != null; record=record.next) {
    if (record.hashCode == hash && ((record.key == key) || record.key.equals(key))) {
      V old=record.value;
      if (prev == null) {
        buckets[bucket]=record.next;
      }
 else {
        prev.next=record.next;
      }
      record.remove();
      size--;
      return old;
    }
    prev=record;
  }
  return null;
}
