{
  if (start >= stop || (stop - start) > MAX_TIMESPAN) {
    String message=String.format("Start time must be before stop time, and the total time span can be no bigger than %dms. Time span was %dms.",MAX_TIMESPAN,(stop - start));
    return output.badRequest(new IllegalArgumentException(message));
  }
  try {
    FetchRequest request=rrdDb.createFetchRequest(ConsolFun.AVERAGE,start,stop,getResolutionFor(stop - start));
    return output.ok(new RrdDataRepresentation(request.fetchData()));
  }
 catch (  Exception e) {
    return output.serverError(e);
  }
}
