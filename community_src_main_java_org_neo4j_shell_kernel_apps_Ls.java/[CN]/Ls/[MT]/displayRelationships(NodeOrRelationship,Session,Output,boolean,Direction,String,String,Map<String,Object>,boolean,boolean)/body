{
  for (  Relationship rel : sortRelationships(thing.getRelationships(direction))) {
    String type=rel.getType().name();
    boolean matches=filterMap.isEmpty();
    for (    String filter : filterMap.keySet()) {
      if (matches(newPattern(filter,caseInsensitiveFilters),type,caseInsensitiveFilters,looseFilters)) {
        matches=true;
        break;
      }
    }
    if (!matches) {
      continue;
    }
    StringBuffer buf=new StringBuffer(getDisplayName(getServer(),session,thing,true));
    buf.append(" " + prefixString).append(getDisplayName(getServer(),session,rel,verbose,true));
    buf.append(postfixString + " ");
    buf.append(getDisplayName(getServer(),session,direction == Direction.OUTGOING ? rel.getEndNode() : rel.getStartNode(),true));
    out.println(buf);
  }
}
