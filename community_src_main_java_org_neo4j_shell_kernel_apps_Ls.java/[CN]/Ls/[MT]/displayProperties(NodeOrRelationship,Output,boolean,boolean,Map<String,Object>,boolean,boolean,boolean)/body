{
  int longestKey=findLongestKey(thing);
  int count=0;
  for (  String key : sortKeys(thing.getPropertyKeys())) {
    boolean matches=filterMap == null || filterMap.isEmpty();
    Object value=thing.getProperty(key);
    if (!matches) {
      for (      Map.Entry<String,Object> filter : filterMap.entrySet()) {
        if (matches(newPattern(filter.getKey(),caseInsensitiveFilters),key,caseInsensitiveFilters,looseFilters)) {
          String filterValue=filter.getValue() != null ? filter.getValue().toString() : null;
          if (matches(newPattern(filterValue,caseInsensitiveFilters),value.toString(),caseInsensitiveFilters,looseFilters)) {
            matches=true;
            break;
          }
        }
      }
    }
    if (!matches) {
      continue;
    }
    count++;
    if (!brief) {
      StringBuilder builder=new StringBuilder();
      builder.append("*" + key);
      if (!quiet) {
        builder.append(multiply(" ",longestKey - key.length() + 1));
        builder.append("=" + format(value,true));
        if (verbose) {
          builder.append(" (" + getNiceType(value) + ")");
        }
      }
      out.println(builder.toString());
    }
  }
  if (brief) {
    out.println("Property count: " + count);
  }
}
