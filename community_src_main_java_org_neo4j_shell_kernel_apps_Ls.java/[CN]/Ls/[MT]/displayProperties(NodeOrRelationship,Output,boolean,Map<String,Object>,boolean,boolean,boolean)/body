{
  int longestKey=findLongestKey(thing);
  int count=0;
  for (  String key : sortKeys(thing.getPropertyKeys())) {
    boolean matches=filterMap.isEmpty();
    Object value=thing.getProperty(key);
    for (    Map.Entry<String,Object> filter : filterMap.entrySet()) {
      if (matches(newPattern(filter.getKey(),caseInsensitiveFilters),key,caseInsensitiveFilters,looseFilters)) {
        String filterValue=filter.getValue() != null ? filter.getValue().toString() : null;
        if (matches(newPattern(filterValue,caseInsensitiveFilters),value.toString(),caseInsensitiveFilters,looseFilters)) {
          matches=true;
          break;
        }
      }
    }
    if (!matches) {
      continue;
    }
    count++;
    if (!brief) {
      out.print("*" + key);
      this.printMany(out," ",longestKey - key.length() + 1);
      out.print("=" + format(value,true));
      if (verbose) {
        out.print(" (" + getNiceType(value) + ")");
      }
      out.println("");
    }
  }
  if (brief) {
    out.println("Property count: " + count);
  }
}
