{
  ManagedCluster cluster=startCluster(4,2,HaSettings.TxPushStrategy.fixed);
  createTransactionOn(cluster,new InstanceId(FIRST_SLAVE));
  assertLastTransactions(cluster,lastTx(MASTER,BASE_TX_ID + 1),lastTx(FIRST_SLAVE,BASE_TX_ID + 1),lastTx(SECOND_SLAVE,BASE_TX_ID),lastTx(THIRD_SLAVE,BASE_TX_ID + 1));
  createTransactionOn(cluster,new InstanceId(SECOND_SLAVE));
  assertLastTransactions(cluster,lastTx(MASTER,BASE_TX_ID + 2),lastTx(FIRST_SLAVE,BASE_TX_ID + 1),lastTx(SECOND_SLAVE,BASE_TX_ID + 2),lastTx(THIRD_SLAVE,BASE_TX_ID + 2));
  createTransactionOn(cluster,new InstanceId(THIRD_SLAVE));
  assertLastTransactions(cluster,lastTx(MASTER,BASE_TX_ID + 3),lastTx(FIRST_SLAVE,BASE_TX_ID + 1),lastTx(SECOND_SLAVE,BASE_TX_ID + 3),lastTx(THIRD_SLAVE,BASE_TX_ID + 3));
}
