{
  TransactionTemplate template=new TransactionTemplate().with(db).retries(10).backoff(1,TimeUnit.SECONDS).monitor(new TransactionTemplate.Monitor.Adapter(){
    @Override public void failure(    Throwable ex){
      cluster.await(allSeesAllAsAvailable());
      mapMachineIds(cluster);
    }
  }
);
  template.execute(new Consumer<Transaction>(){
    @Override public void accept(    Transaction transaction){
      db.createNode();
    }
  }
);
}
