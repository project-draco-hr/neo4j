{
  String dir=produceNonCleanDbWhichWillRecover2PCsOnStartup("fail",2);
  RecoveryVerifier failingVerifier=new RecoveryVerifier(){
    @Override public boolean isValid(    TransactionInfo txInfo){
      return false;
    }
  }
;
  try {
    new TestGraphDatabase(dir,failingVerifier);
    fail("Was expecting recovery exception");
  }
 catch (  LifecycleException e) {
    assertEquals(RecoveryVerificationException.class,e.getCause().getClass());
  }
}
