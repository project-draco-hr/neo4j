{
  StoreFileChannel channel=mock(StoreFileChannel.class);
  when(channel.read(any(ByteBuffer.class))).thenReturn(-1);
  FileSystemAbstraction fsa=mock(FileSystemAbstraction.class);
  when(fsa.open(any(File.class),anyString())).thenReturn(channel);
  OnDiskTermState store=new OnDiskTermState(fsa,testDir.directory(),100,mock(Supplier.class));
  store.shutdown();
  verify(channel).flush();
  verify(channel).close();
}
