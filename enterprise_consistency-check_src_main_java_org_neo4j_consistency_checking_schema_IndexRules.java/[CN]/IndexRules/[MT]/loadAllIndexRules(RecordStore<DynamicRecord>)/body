{
  final List<IndexRule> indexRules=new ArrayList<>();
  new RecordStore.Processor<MalformedSchemaRuleException>(){
    @Override public void processSchema(    RecordStore<DynamicRecord> store,    DynamicRecord record) throws MalformedSchemaRuleException {
      if (record.inUse() && record.isStartRecord()) {
        SchemaRule schemaRule=((SchemaStore)schemaStore).loadSingleSchemaRule(record.getId());
        if (schemaRule instanceof IndexRule) {
          indexRules.add((IndexRule)schemaRule);
        }
      }
    }
  }
.applyFiltered(schemaStore);
  return indexRules;
}
