{
  state.locks().acquireShared(ResourceTypes.SCHEMA,schemaResource());
  long startNodeId=startNode.id();
  long endNodeId=endNode.id();
  if (startNodeId < endNodeId) {
    state.locks().acquireExclusive(ResourceTypes.NODE,startNodeId);
    state.locks().acquireExclusive(ResourceTypes.NODE,endNodeId);
  }
 else {
    state.locks().acquireExclusive(ResourceTypes.NODE,endNodeId);
    state.locks().acquireExclusive(ResourceTypes.NODE,startNodeId);
  }
  state.assertOpen();
  return entityWriteDelegate.relationshipCreate(state,relationshipTypeId,startNode,endNode);
}
