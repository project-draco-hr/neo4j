{
  StampedLock lock=new StampedLock();
  assertFalse(lock.isWriteLocked());
  assertFalse(lock.isReadLocked());
  assertEquals(lock.getReadLockCount(),0);
  long s=lock.writeLock();
  assertTrue(lock.isWriteLocked());
  assertFalse(lock.isReadLocked());
  assertEquals(lock.getReadLockCount(),0);
  assertFalse(lock.tryUnlockRead());
  assertTrue(lock.tryUnlockWrite());
  assertFalse(lock.tryUnlockWrite());
  assertFalse(lock.tryUnlockRead());
  assertFalse(lock.isWriteLocked());
  assertFalse(lock.isReadLocked());
  assertEquals(lock.getReadLockCount(),0);
  long rs=lock.readLock();
  assertFalse(lock.isWriteLocked());
  assertTrue(lock.isReadLocked());
  assertEquals(lock.getReadLockCount(),1);
  assertFalse(lock.tryUnlockWrite());
  assertTrue(lock.tryUnlockRead());
  assertFalse(lock.tryUnlockRead());
  assertFalse(lock.tryUnlockWrite());
  assertFalse(lock.isWriteLocked());
  assertFalse(lock.isReadLocked());
  assertEquals(lock.getReadLockCount(),0);
}
