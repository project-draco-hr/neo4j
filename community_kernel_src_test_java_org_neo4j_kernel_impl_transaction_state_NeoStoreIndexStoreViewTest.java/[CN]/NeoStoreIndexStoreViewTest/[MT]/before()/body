{
  graphDb=dbRule.getGraphDatabaseAPI();
  createAlistairAndStefanNodes();
  getOrCreateIds();
  neoStore=new StoreAccess(graphDb).getRawNeoStore();
  counts=neoStore.getCounts();
  locks=mock(LockService.class,new Answer(){
    @Override public Object answer(    InvocationOnMock invocation) throws Throwable {
      Long nodeId=(Long)invocation.getArguments()[0];
      Lock lock=lockMocks.get(nodeId);
      if (lock == null) {
        lockMocks.put(nodeId,lock=mock(Lock.class));
      }
      return lock;
    }
  }
);
  storeView=new NeoStoreIndexStoreView(locks,neoStore);
}
