{
  try {
    resetOutputWriter();
    Transaction tx=database.graph.beginTx();
    List<Object> resultLines=(List<Object>)scriptEngine.eval(script);
    tx.success();
    tx.finish();
    List<String> outputLines=new ArrayList<String>();
    String[] printLines=outputWriter.toString().split("\n");
    if (printLines.length > 0 && printLines[0].length() > 0) {
      for (      String printLine : printLines) {
        outputLines.add(printLine);
      }
    }
    if (resultLines == null || resultLines.size() == 0 || (resultLines.size() == 1 && (resultLines.get(0) == null || resultLines.get(0).toString().length() == 0))) {
      if (outputLines.size() == 0) {
        outputLines.add("");
      }
    }
 else {
      for (      Object resultLine : resultLines) {
        outputLines.add(resultLine.toString());
      }
    }
    return outputLines;
  }
 catch (  ScriptException e) {
    return exceptionToResultList(e);
  }
catch (  RuntimeException e) {
    e.printStackTrace();
    return exceptionToResultList(e);
  }
}
