{
  machine.init("FunClient/1.2",emptyMap(),-1,null,Session.Callback.NO_OP);
  machine.beginTransaction();
  machine.close();
  assertThat(machine.state(),CoreMatchers.equalTo(SessionStateMachine.State.STOPPED));
  verify(spi).beginTransaction(any(KernelTransaction.Type.class),any(AccessMode.class),any(SessionStateMachine.SPI.TransactionIdTracker.class));
  verify(ktx).close();
}
