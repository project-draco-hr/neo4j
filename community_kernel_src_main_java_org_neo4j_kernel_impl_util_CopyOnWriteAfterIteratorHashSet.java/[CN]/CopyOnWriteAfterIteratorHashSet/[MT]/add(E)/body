{
  if (map == null) {
    map=new HashMap<>();
  }
  if (readOnly) {
    if (map.containsKey(e)) {
      return false;
    }
    map=new HashMap<>(map);
    readOnly=false;
  }
  return map.put(e,PRESENT) == null;
}
