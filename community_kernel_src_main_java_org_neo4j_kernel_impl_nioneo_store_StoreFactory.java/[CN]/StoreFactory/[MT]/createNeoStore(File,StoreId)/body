{
  createEmptyStore(fileName,buildTypeDescriptorAndVersion(NeoStore.TYPE_DESCRIPTOR));
  createNodeStore(new File(fileName.getPath() + NODE_STORE_NAME));
  createRelationshipStore(new File(fileName.getPath() + RELATIONSHIP_STORE_NAME));
  createPropertyStore(new File(fileName.getPath() + PROPERTY_STORE_NAME));
  createRelationshipTypeStore(new File(fileName.getPath() + RELATIONSHIP_TYPE_TOKEN_STORE_NAME));
  createLabelTokenStore(new File(fileName.getPath() + LABEL_TOKEN_STORE_NAME));
  createSchemaStore(new File(fileName.getPath() + SCHEMA_STORE_NAME));
  createRelationshipGroupStore(new File(fileName.getPath() + RELATIONSHIP_GROUP_STORE_NAME),config.get(Configuration.dense_node_threshold));
  NeoStore neoStore=newNeoStore(fileName);
  for (int i=0; i < NeoStore.META_DATA_RECORD_COUNT; i++) {
    neoStore.nextId();
  }
  neoStore.setCreationTime(storeId.getCreationTime());
  neoStore.setRandomNumber(storeId.getRandomId());
  neoStore.setUpgradeTime(storeId.getCreationTime());
  neoStore.setUpgradeId(storeId.getRandomId());
  neoStore.setVersion(0);
  neoStore.setLastCommittedTx(1);
  neoStore.setStoreVersion(NeoStore.versionStringToLong(CommonAbstractStore.ALL_STORES_VERSION));
  neoStore.setGraphNextProp(-1);
  return neoStore;
}
