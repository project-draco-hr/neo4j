{
  generateFileWithRecords(file("a"),recordsPerFilePage * 2,recordSize);
  getPageCache(fs,maxPages,pageCachePageSize,PageCacheTracer.NULL);
  try (PagedFile pf=pageCache.map(file("a"),filePageSize);PageCursor parentReader=pf.io(0,PF_SHARED_READ_LOCK);PageCursor writer=pf.io(1,PF_SHARED_WRITE_LOCK)){
    PageCursor linkedReader=parentReader.openLinkedCursor(1);
    assertTrue(parentReader.next());
    assertTrue(linkedReader.next());
    assertTrue(writer.next());
    assertTrue(writer.next());
    assertTrue(parentReader.shouldRetry());
  }
 }
