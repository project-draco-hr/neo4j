{
  List<TraversalBranch> level=new LinkedList<TraversalBranch>();
  Integer depth=null;
  for (  TraversalBranch source : queue) {
    if (depth == null) {
      depth=source.length();
    }
 else     if (source.length() != depth) {
      break;
    }
    while (true) {
      TraversalBranch next=source.next(expander,metadata);
      if (next == null) {
        break;
      }
      level.add(next);
    }
  }
  return level;
}
