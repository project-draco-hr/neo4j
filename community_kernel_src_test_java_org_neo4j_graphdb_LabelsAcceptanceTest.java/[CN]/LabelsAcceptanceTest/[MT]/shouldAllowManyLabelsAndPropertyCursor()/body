{
  GraphDatabaseService db=dbRule.getGraphDatabaseService();
  Node node;
  try (Transaction tx=db.beginTx()){
    node=db.createNode();
    node.setProperty("foo","bar");
    for (int i=0; i < 20; i++) {
      node.addLabel(DynamicLabel.label("label:" + i));
    }
    tx.success();
  }
   try (Transaction tx=db.beginTx()){
    try (Statement statement=((TopLevelTransaction)tx).getTransaction().acquireStatement()){
      try (Cursor<NodeItem> nodeCursor=statement.readOperations().nodeCursor(node.getId())){
        if (nodeCursor.next()) {
          try (Cursor<PropertyItem> properties=nodeCursor.get().properties()){
            while (properties.next()) {
              try (Cursor<LabelItem> labels=nodeCursor.get().labels()){
                while (labels.next()) {
                }
              }
             }
          }
         }
      }
     }
     tx.success();
  }
 }
