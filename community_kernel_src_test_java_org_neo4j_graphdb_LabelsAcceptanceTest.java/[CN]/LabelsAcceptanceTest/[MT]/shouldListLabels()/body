{
  GraphDatabaseService db=dbRule.getGraphDatabaseService();
  GlobalGraphOperations globalOps=GlobalGraphOperations.at(db);
  createNode(db,Labels.MY_LABEL,Labels.MY_OTHER_LABEL);
  List<Label> labels=null;
  Transaction tx=db.beginTx();
  try {
    labels=toList(globalOps.getAllLabels());
  }
  finally {
    tx.finish();
  }
  assertEquals(2,labels.size());
  assertThat(map(new Function<Label,String>(){
    @Override public String apply(    Label label){
      return label.name();
    }
  }
,labels),hasItems(Labels.MY_LABEL.name(),Labels.MY_OTHER_LABEL.name()));
}
