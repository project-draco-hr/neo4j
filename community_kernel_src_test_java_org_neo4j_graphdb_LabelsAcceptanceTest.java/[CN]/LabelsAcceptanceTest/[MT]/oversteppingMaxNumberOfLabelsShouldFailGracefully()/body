{
  GraphDatabaseService beansAPI=beansAPIWithNoMoreLabelIds();
  Exception caught=null;
  Transaction tx=beansAPI.beginTx();
  try {
    beansAPI.createNode().addLabel(Labels.MY_LABEL);
  }
 catch (  ConstraintViolationException ex) {
    caught=ex;
  }
 finally {
    tx.finish();
  }
  assertThat("IllegalLabelException should have been thrown.",caught,is(ConstraintViolationException.class));
}
