{
  int size=5 + array.length / 8;
  if (array.length % 8 > 0) {
    size++;
  }
  ByteBuffer buf=ByteBuffer.allocate(size);
  buf.put(ArrayType.BOOL.byteValue());
  buf.putInt(array.length);
  byte currentValue=0;
  int byteItr=0;
  for (  Boolean b : array) {
    if (b) {
      currentValue+=1 << byteItr;
    }
    byteItr++;
    if (byteItr == 8) {
      buf.put(currentValue);
      byteItr=0;
      currentValue=0;
    }
  }
  if (byteItr != 0) {
    buf.put(currentValue);
  }
  return allocateRecords(startBlock,buf.array());
}
