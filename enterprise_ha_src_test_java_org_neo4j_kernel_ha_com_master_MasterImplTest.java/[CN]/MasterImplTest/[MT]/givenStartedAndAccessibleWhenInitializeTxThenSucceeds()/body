{
  MasterImpl.SPI spi=mock(MasterImpl.SPI.class);
  Logging logging=new DevNullLoggingService();
  Config config=config(20);
  when(spi.isAccessible()).thenReturn(true);
  when(spi.beginTx()).thenReturn(mock(Transaction.class));
  when(spi.getMasterIdForCommittedTx(anyLong())).thenReturn(Pair.of(1,1L));
  MasterImpl instance=new MasterImpl(spi,logging,config);
  instance.start();
  HandshakeResult handshake=instance.handshake(1,new StoreId()).response();
  try {
    instance.initializeTx(new RequestContext(handshake.epoch(),1,2,new RequestContext.Tx[0],1,0));
  }
 catch (  Exception e) {
    fail(e.getMessage());
  }
}
