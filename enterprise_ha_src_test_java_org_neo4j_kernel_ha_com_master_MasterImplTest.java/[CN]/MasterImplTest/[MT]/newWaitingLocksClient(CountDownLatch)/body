{
  Client client=mock(Client.class);
  doAnswer(new Answer<Void>(){
    @Override public Void answer(    InvocationOnMock invocation) throws Throwable {
      latch.await();
      return null;
    }
  }
).when(client).acquireExclusive(any(ResourceType.class),anyLong());
  return client;
}
