{
  LockManager lockManager=getEmbeddedGraphDb().getLockManager();
  LockReleaser lockReleaser=getEmbeddedGraphDb().getLockReleaser();
  Map<String,String> config=MapUtil.stringMap("store_dir",path(),"neo_store",file("neo"),"logical_log",file("nioneo_logical.log"));
  StoreFactory sf=new StoreFactory(config,CommonFactories.defaultIdGeneratorFactory(),CommonFactories.defaultFileSystemAbstraction(),null,StringLogger.DEV_NULL,null);
  ds=new NeoStoreXaDataSource(ConfigProxy.config(config,NeoStoreXaDataSource.Configuration.class),CommonFactories.defaultFileSystemAbstraction(),sf,lockManager,lockReleaser,StringLogger.DEV_NULL,new XaFactory(Collections.<String,String>emptyMap(),TxIdGenerator.DEFAULT,new PlaceboTm(),CommonFactories.defaultLogBufferFactory(),CommonFactories.defaultFileSystemAbstraction(),StringLogger.DEV_NULL,CommonFactories.defaultRecoveryVerifier()),Collections.<Pair<TransactionInterceptorProvider,Object>>emptyList(),null);
  xaCon=ds.getXaConnection();
  pStore=xaCon.getPropertyStore();
  rtStore=xaCon.getRelationshipTypeStore();
}
