{
  try {
    LockManager lockManager=getEmbeddedGraphDb().getConfig().getLockManager();
    LockReleaser lockReleaser=getEmbeddedGraphDb().getConfig().getLockReleaser();
    ds=new NeoStoreXaDataSource(MapUtil.genericMap(LockManager.class,lockManager,LockReleaser.class,lockReleaser,IdGeneratorFactory.class,ID_GENERATOR_FACTORY,FileSystemAbstraction.class,CommonFactories.defaultFileSystemAbstraction(),LogBufferFactory.class,CommonFactories.defaultLogBufferFactory(),TxIdGenerator.class,TxIdGenerator.DEFAULT,"store_dir",path(),"neo_store",file("neo"),"logical_log",file("nioneo_logical.log")));
  }
 catch (  InstantiationException e) {
    throw new IOException("" + e);
  }
  xaCon=(NeoStoreXaConnection)ds.getXaConnection();
  pStore=xaCon.getPropertyStore();
  rtStore=xaCon.getRelationshipTypeStore();
}
