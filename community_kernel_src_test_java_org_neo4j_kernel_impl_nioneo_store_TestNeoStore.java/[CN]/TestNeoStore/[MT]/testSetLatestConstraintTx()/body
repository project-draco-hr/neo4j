{
  new GraphDatabaseFactory().newEmbeddedDatabase(testDir.absolutePath()).shutdown();
  StoreFactory sf=new StoreFactory(new Config(new HashMap<String,String>(),GraphDatabaseSettings.class),new DefaultIdGeneratorFactory(),new DefaultWindowPoolFactory(),new DefaultFileSystemAbstraction(),StringLogger.DEV_NULL,null,new Monitors());
  NeoStore neoStore=sf.newNeoStore(new File(testDir.absolutePath(),NeoStore.DEFAULT_NAME));
  assertEquals(0l,neoStore.getLatestConstraintIntroducingTx());
  neoStore.setLatestConstraintIntroducingTx(10l);
  assertEquals(10l,neoStore.getLatestConstraintIntroducingTx());
  neoStore.flushAll();
  neoStore.close();
  neoStore=sf.newNeoStore(new File(testDir.absolutePath(),NeoStore.DEFAULT_NAME));
  assertEquals(10l,neoStore.getLatestConstraintIntroducingTx());
  neoStore.close();
}
