{
  initializeStores();
  startTx();
  int relType1=ds.nextId(RelationshipType.class);
  relTypeStore.addRelationshipType(relType1,"relationshiptype1");
  int nodeIds[]=new int[3];
  for (int i=0; i < 3; i++) {
    nodeIds[i]=ds.nextId(Node.class);
    nStore.createNode(nodeIds[i]);
    nStore.addProperty(nodeIds[i],pStore.nextId(),index("nisse"),new Integer(10 - i));
  }
  for (int i=0; i < 2; i++) {
    rStore.createRelationship(ds.nextId(Relationship.class),nodeIds[i],nodeIds[i + 1],relType1);
  }
  rStore.createRelationship(ds.nextId(Relationship.class),nodeIds[0],nodeIds[2],relType1);
  commitTx();
  startTx();
  for (int i=0; i < 3; i++) {
    RelationshipChainPosition pos=rStore.getRelationshipChainPosition(nodeIds[i]);
    for (    RelationshipData rel : rStore.getMoreRelationships(nodeIds[i],pos)) {
      rStore.deleteRelationship(rel.getId());
    }
    nStore.deleteNode(nodeIds[i]);
  }
  commitTx();
  ds.close();
}
