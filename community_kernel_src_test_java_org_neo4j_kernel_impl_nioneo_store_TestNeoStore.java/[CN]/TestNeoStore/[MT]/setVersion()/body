{
  String storeDir="target/test-data/set-version";
  new TestGraphDatabaseFactory().setFileSystem(fs.get()).newImpermanentDatabase(storeDir).shutdown();
  assertEquals(1,NeoStore.setVersion(fs.get(),new File(storeDir,NeoStore.DEFAULT_NAME),10));
  assertEquals(10,NeoStore.setVersion(fs.get(),new File(storeDir,NeoStore.DEFAULT_NAME),12));
  Monitors monitors=new Monitors();
  Config config=new Config(new HashMap<String,String>(),GraphDatabaseSettings.class);
  StoreFactory sf=new StoreFactory(config,new DefaultIdGeneratorFactory(),new DefaultWindowPoolFactory(monitors,config),fs.get(),StringLogger.DEV_NULL,null,monitors);
  NeoStore neoStore=sf.newNeoStore(new File(storeDir,NeoStore.DEFAULT_NAME));
  assertEquals(12,neoStore.getVersion());
  neoStore.close();
}
