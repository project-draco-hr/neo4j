{
  String storeDir="target/test-data/set-version";
  FileUtils.deleteRecursively(new File(storeDir));
  new GraphDatabaseFactory().newEmbeddedDatabase(storeDir).shutdown();
  assertEquals(0,NeoStore.setVersion(storeDir,10));
  assertEquals(10,NeoStore.setVersion(storeDir,12));
  FileSystemAbstraction fileSystem=new DefaultFileSystemAbstraction();
  StoreFactory sf=new StoreFactory(new Config(StringLogger.DEV_NULL,fileSystem,new HashMap<String,String>(),Collections.<Class<?>>singletonList(GraphDatabaseSettings.class)),new DefaultIdGeneratorFactory(),fileSystem,null,StringLogger.DEV_NULL,null);
  NeoStore neoStore=sf.newNeoStore(new File(storeDir,NeoStore.DEFAULT_NAME).getAbsolutePath());
  assertEquals(12,neoStore.getVersion());
  neoStore.close();
}
