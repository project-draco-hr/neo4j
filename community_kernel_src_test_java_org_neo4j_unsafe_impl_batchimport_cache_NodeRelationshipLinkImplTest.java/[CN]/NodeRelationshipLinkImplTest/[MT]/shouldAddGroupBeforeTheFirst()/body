{
  long denseNode=0;
  NodeRelationshipLink link=new NodeRelationshipLinkImpl(NumberArrayFactory.AUTO,1);
  link.incrementCount(denseNode);
  link.getAndPutRelationship(denseNode,1,Direction.INCOMING,1,true);
  link.getAndPutRelationship(denseNode,0,Direction.OUTGOING,0,true);
  link.getAndPutRelationship(denseNode,0,Direction.INCOMING,2,true);
  link.getAndPutRelationship(denseNode,1,Direction.OUTGOING,3,true);
  GroupVisitor visitor=mock(GroupVisitor.class);
  assertEquals(0L,link.getFirstRel(denseNode,visitor));
  InOrder order=inOrder(visitor);
  order.verify(visitor).visit(denseNode,0,1L,0L,2L,-1L);
  order.verify(visitor).visit(denseNode,1,-1L,3L,1L,-1L);
  order.verifyNoMoreInteractions();
}
