{
  this.txLogDir=txLogDir;
  this.kpe=kpe;
  TransactionManagerProvider provider;
  if (serviceName == null) {
    provider=new DefaultTransactionManagerProvider();
  }
 else {
    provider=Service.load(TransactionManagerProvider.class,serviceName);
    if (provider == null) {
      throw new IllegalStateException("Unknown transaction manager implementation: " + serviceName);
    }
  }
  txManager=provider.loadTransactionManager(txLogDir,kpe,rollbackHook);
  this.xaDsManager=new XaDataSourceManager();
}
