{
  if (remove == null) {
    if (src == null) {
      return add;
    }
    if (add != null) {
      RelIdArray newArray=new RelIdArray();
      newArray.addAll(src);
      newArray.addAll(add);
      return newArray;
    }
    return src;
  }
 else {
    if (src == null && add == null) {
      return null;
    }
    RelIdArray newArray=new RelIdArray();
    newArray.addAll(src);
    Set<Long> removedSet=remove.asSet();
    evictExcluded(newArray,removedSet);
    if (add != null) {
      addOneDirection(add,newArray,removedSet,DirectionWrapper.OUTGOING);
      addOneDirection(add,newArray,removedSet,DirectionWrapper.INCOMING);
    }
    return newArray;
  }
}
