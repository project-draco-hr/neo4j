{
  IdBlock toBlock=direction.getLastBlock(this);
  IdBlock fromBlock=direction.getLastBlock(source);
  if (fromBlock != null) {
    if (toBlock == null) {
      direction.setLastBlock(this,fromBlock.copy());
    }
 else     if (toBlock.getHighBits() == fromBlock.getHighBits()) {
      toBlock.addAll(fromBlock);
      if (fromBlock.prev != null) {
        last(toBlock).prev=fromBlock.prev.copy();
      }
    }
 else {
      last(toBlock).prev=fromBlock.copy();
    }
  }
}
