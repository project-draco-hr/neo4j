{
  if (source == null) {
    return this;
  }
  if (source.getLastLoopBlock() != null) {
    return upgradeIfNeeded(source).addAll(source);
  }
  append(source,DirectionWrapper.OUTGOING);
  append(source,DirectionWrapper.INCOMING);
  append(source,DirectionWrapper.BOTH);
  return this;
}
