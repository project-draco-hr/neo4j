{
  this.ids=ids;
  this.directions=directions;
  this.states=new IteratorState[directions.length];
  IdBlock block=null;
  while (block == null && directionPosition + 1 < directions.length) {
    currentDirection=directions[++directionPosition];
    block=currentDirection.lastBlock(ids);
  }
  if (block != null) {
    currentState=new IteratorState(block,0);
    states[directionPosition]=currentState;
  }
}
