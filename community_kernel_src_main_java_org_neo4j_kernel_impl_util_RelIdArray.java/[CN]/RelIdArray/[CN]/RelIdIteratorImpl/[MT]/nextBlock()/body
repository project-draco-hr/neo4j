{
  while (directionPosition + 1 < directions.length) {
    currentDirection=directions[++directionPosition];
    IteratorState nextState=states[directionPosition];
    if (nextState != null) {
      currentState=nextState;
      return true;
    }
    IdBlock block=currentDirection.getBlock(ids);
    if (block != null) {
      currentState=new IteratorState(block,0);
      states[directionPosition]=currentState;
      return true;
    }
  }
  return false;
}
