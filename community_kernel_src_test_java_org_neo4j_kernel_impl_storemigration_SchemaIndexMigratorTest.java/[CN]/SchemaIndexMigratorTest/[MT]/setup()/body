{
  when(schemaIndexProvider.getProviderDescriptor()).thenReturn(new SchemaIndexProvider.Descriptor("key","version"));
  when(storeFactory.openNeoStores(StoreType.SCHEMA)).thenReturn(neoStores);
  when(storeFactory.openAllNeoStores(anyBoolean())).thenReturn(neoStores);
  when(neoStores.getSchemaStore()).thenReturn(schemaStore);
  Iterator<SchemaRule> iterator=Arrays.asList(schemaRule(indexRuleId,42,21)).iterator();
  when(schemaStore.loadAllSchemaRules()).thenReturn(iterator);
  when(schemaIndexProvider.getOnlineAccessor(indexRuleId,indexConfig,samplingConfig)).thenReturn(accessor);
  when(accessor.newReader()).thenReturn(indexReader);
}
