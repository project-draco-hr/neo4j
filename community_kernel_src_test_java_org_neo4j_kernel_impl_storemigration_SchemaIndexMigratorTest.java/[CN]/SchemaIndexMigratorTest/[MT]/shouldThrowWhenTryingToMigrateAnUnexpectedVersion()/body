{
  when(upgradableDatabase.checkUpgradeable(storeDir)).thenReturn(Legacy19Store.LEGACY_VERSION);
  try {
    migrator.migrate(storeDir,migrationDir,schemaIndexProvider);
    fail("should have thrown");
  }
 catch (  IllegalStateException ex) {
    assertEquals("Unknown version to upgrade from: " + Legacy19Store.LEGACY_VERSION,ex.getMessage());
  }
}
