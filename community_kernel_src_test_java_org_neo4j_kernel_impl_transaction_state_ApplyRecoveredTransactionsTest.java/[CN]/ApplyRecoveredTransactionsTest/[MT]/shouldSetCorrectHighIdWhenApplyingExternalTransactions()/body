{
  long nodeId=neoStores.getNodeStore().nextId();
  long relationshipId=neoStores.getRelationshipStore().nextId();
  int type=1;
  applyExternalTransaction(1,nodeCommand(node(nodeId),inUse(created(node(nodeId)))),relationshipCommand(inUse(created(with(relationship(relationshipId),nodeId,nodeId,type)))));
  applyExternalTransaction(2,nodeCommand(inUse(created(node(nodeId))),node(nodeId)),relationshipCommand(relationship(relationshipId)));
  assertEquals(nodeId + 1,neoStores.getNodeStore().getHighId());
  assertEquals(relationshipId + 1,neoStores.getRelationshipStore().getHighId());
}
