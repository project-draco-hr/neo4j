{
  String key="name";
  String value="Mattias";
  assertNull(index.get(key,value).getSingle());
  assertCollection(index.get(key,value));
  assertCollection(index.query(key,"*"));
  T entity1=entityCreator.create();
  T entity2=entityCreator.create();
  index.add(entity1,key,value);
  assertEquals(entity1,index.get(key,value).getSingle());
  assertCollection(index.get(key,value),entity1);
  assertCollection(index.query(key,"*"),entity1);
  assertCollection(index.query(key + ":*"),entity1);
  restartTx();
  assertEquals(entity1,index.get(key,value).getSingle());
  assertCollection(index.get(key,value),entity1);
  assertCollection(index.query(key,"*"),entity1);
  assertCollection(index.query(key + ":*"),entity1);
  index.add(entity2,key,value);
  assertCollection(index.get(key,value),entity1,entity2);
  restartTx();
  assertCollection(index.get(key,value),entity1,entity2);
  index.clear();
}
