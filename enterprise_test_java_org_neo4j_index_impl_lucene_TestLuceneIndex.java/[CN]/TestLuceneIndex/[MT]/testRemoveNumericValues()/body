{
  Index<Node> index=provider.nodeIndex("numeric2",LuceneIndexProvider.EXACT_CONFIG);
  Node node1=graphDb.createNode();
  Node node2=graphDb.createNode();
  String key="key";
  index.add(node1,key,new ValueContext(15).indexNumeric());
  index.add(node2,key,new ValueContext(5).indexNumeric());
  index.remove(node1,key,new ValueContext(15).indexNumeric());
  assertQueryNotPossible(index);
  index.remove(node2,key,new ValueContext(5).indexNumeric());
  assertQueryNotPossible(index);
  restartTx();
  assertCollection(index.query(NumericRangeQuery.newIntRange(key,0,20,false,false)));
  index.add(node1,key,new ValueContext(15).indexNumeric());
  index.add(node2,key,new ValueContext(5).indexNumeric());
  restartTx();
  assertCollection(index.query(NumericRangeQuery.newIntRange(key,0,20,false,false)),node1,node2);
  index.remove(node1,key,new ValueContext(15).indexNumeric());
  assertQueryNotPossible(index);
  restartTx();
  assertCollection(index.query(NumericRangeQuery.newIntRange(key,0,20,false,false)),node2);
}
