{
  long nodeId=command.getNodeId();
  if (nodeId != -1) {
    lockGroup.add(lockService.acquireNodeLock(nodeId,LockService.LockType.WRITE_LOCK));
  }
  PropertyStore propertyStore=neoStore.getPropertyStore();
  highIdTracker.track(propertyStore,command.getAfter().getId());
  if (recovery) {
    for (    PropertyBlock block : command.getAfter().getPropertyBlocks()) {
switch (block.getType()) {
case STRING:
        trackHighIds(propertyStore.getStringStore(),block.getValueRecords());
      break;
case ARRAY:
    trackHighIds(propertyStore.getArrayStore(),block.getValueRecords());
  break;
default :
break;
}
}
}
propertyStore.updateRecord(command.getAfter());
invalidateCache(command);
return true;
}
