{
  long available=Runtime.getRuntime().maxMemory();
  long defaultMem=(available / 4);
  long node=config.isSet(Configuration.node_cache_size) ? config.getSize(Configuration.node_cache_size) : defaultMem;
  long rel=config.isSet(Configuration.relationship_cache_size) ? config.getSize(Configuration.relationship_cache_size) : defaultMem;
  checkMemToUse(logger,node,rel,available);
  return new GCResistantCache<NodeImpl>(node,config.getFloat(Configuration.node_cache_array_fraction),config.getDuration(Configuration.array_cache_min_log_interval),NODE_CACHE_NAME,logger);
}
