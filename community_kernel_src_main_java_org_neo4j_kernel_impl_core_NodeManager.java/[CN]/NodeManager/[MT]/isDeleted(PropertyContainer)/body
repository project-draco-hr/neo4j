{
  Transaction transaction;
  try {
    transaction=transactionManager.getTransaction();
  }
 catch (  SystemException se) {
    log.log(Level.SEVERE,"Failed to retrieve transaction",se);
    return false;
  }
  if (transaction == null) {
    return false;
  }
  boolean dontCreateIfMissing=false;
  LockReleaser.PrimitiveElement primitiveElement=lockReleaser.getPrimitiveElement(transaction,dontCreateIfMissing);
  if (primitiveElement == null) {
    return false;
  }
  LockReleaser.CowEntityElement cowEntity;
  if (resource instanceof Node) {
    cowEntity=primitiveElement.nodeElement(((Node)resource).getId(),false);
  }
 else {
    cowEntity=primitiveElement.relationshipElement(((Relationship)resource).getId(),false);
  }
  return cowEntity != null && cowEntity.deleted;
}
