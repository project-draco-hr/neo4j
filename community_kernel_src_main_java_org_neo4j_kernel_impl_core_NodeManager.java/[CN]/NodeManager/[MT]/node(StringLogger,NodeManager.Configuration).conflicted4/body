{
  long available=Runtime.getRuntime().maxMemory();
  long defaultMem=(available / 4);
  String defaultMemStr="" + defaultMem;
  long node=memory(config.node_cache_size(defaultMemStr),Config.NODE_ARRAY_CACHE_SIZE);
  long rel=memory(config.relationship_cache_size(defaultMemStr),Config.RELATIONSHIP_ARRAY_CACHE_SIZE);
  checkMemToUse(logger,node,rel,available);
  return new AtomicArrayCache<NodeImpl>(node,fraction(config.node_cache_array_fraction("1"),Config.NODE_ARRAY_CACHE_ARRAY_FRACTION),minLogInterval(config.array_cache_min_log_interval("60000")),NODE_CACHE_NAME,logger);
}
