{
  assumeFalse(System.getProperty("os.name").toLowerCase().startsWith("win"));
  List<String> myQuery=Arrays.asList("[source, cypher]","----","LOAD CSV FROM \"my_file.csv\" AS line","RETURN line;","----");
  Block block=new Block(myQuery,BlockType.QUERY);
  QueryExecutionEngine engine=mock(QueryExecutionEngine.class);
  ArgumentCaptor<String> fileQuery=ArgumentCaptor.forClass(String.class);
  ArgumentCaptor<String> httpQuery=ArgumentCaptor.forClass(String.class);
  when(engine.profileQuery(fileQuery.capture(),anyMapOf(String.class,Object.class),any(QuerySession.class))).thenReturn(mock(org.neo4j.graphdb.Result.class));
  when(engine.prettify(httpQuery.capture())).thenReturn("apa");
  state=new State(engine,database,new File("/dev/null"),"http://myurl");
  state.knownFiles.add("my_file.csv");
  block.process(state);
  assertThat(fileQuery.getValue(),containsString("file:/dev/null/my_file.csv"));
  assertThat(httpQuery.getValue(),containsString("http://myurl/my_file.csv"));
}
