{
  PropertyIndexRecord record=new PropertyIndexRecord(propertyIndexStore.nextId());
  record.setInUse(true);
  record.setCreated();
  int keyBlockId=propertyIndexStore.nextKeyBlockId();
  record.setKeyBlockId(keyBlockId);
  int length=oldKey.length();
  char[] chars=new char[length];
  oldKey.getChars(0,length,chars,0);
  Collection<DynamicRecord> keyRecords=propertyIndexStore.allocateKeyRecords(keyBlockId,chars);
  for (  DynamicRecord keyRecord : keyRecords) {
    record.addKeyRecord(keyRecord);
  }
  propertyIndexStore.updateRecord(record);
  return record.getId();
}
