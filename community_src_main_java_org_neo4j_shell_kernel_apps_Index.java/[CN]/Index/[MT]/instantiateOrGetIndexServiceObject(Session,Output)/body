{
  try {
    Class.forName("org.neo4j.index.IndexService");
  }
 catch (  Exception e) {
    throw new ShellException("No indexing capabilities on the classpath");
  }
  String className=(String)safeGet(session,KEY_INDEX_CLASS_NAME);
  if (className == null) {
    return null;
  }
  Object indexService=null;
synchronized (this.indexServices) {
    indexService=this.indexServices.get(className);
    if (indexService == null) {
      indexService=Class.forName(className).getConstructor(GraphDatabaseService.class).newInstance(this.getServer().getDb());
      this.indexServices.put(className,indexService);
    }
  }
  return indexService;
}
