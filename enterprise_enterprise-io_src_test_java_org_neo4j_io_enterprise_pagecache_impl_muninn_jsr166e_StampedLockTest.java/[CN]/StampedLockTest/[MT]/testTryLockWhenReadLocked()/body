{
  final StampedLock lock=new StampedLock();
  long s=lock.readLock();
  Thread t=newStartedThread(new CheckedRunnable(){
    public void realRun(){
      long rs=lock.tryReadLock();
      threadAssertTrue(rs != 0L);
      lock.unlockRead(rs);
    }
  }
);
  awaitTermination(t);
  lock.unlockRead(s);
}
