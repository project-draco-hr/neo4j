{
  long id=store.nextId();
  Collection<DynamicRecord> records=store.allocateFrom(id,rule);
  for (  DynamicRecord record : records)   store.updateRecord(record);
  return id;
}
