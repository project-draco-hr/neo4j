{
  long propertyKey=4;
  int labelId=0;
  ByteBuffer expected=wrap(new byte[4 + 1 + 2+ 8]);
  expected.putInt(labelId);
  expected.put(Kind.INDEX_RULE.id());
  expected.putShort((short)1);
  expected.putLong(propertyKey);
  long blockId=store.nextId();
  SchemaRule indexRule=new IndexRule(blockId,labelId,new long[]{propertyKey});
  Collection<DynamicRecord> records=store.allocateFrom(blockId,indexRule);
  for (  DynamicRecord record : records)   store.updateRecord(record);
  assertEquals(1,records.size());
  assertTrue(Arrays.equals(expected.array(),records.iterator().next().getData()));
  Collection<DynamicRecord> readRecords=store.getRecords(blockId);
  assertEquals(1,readRecords.size());
  assertTrue(Arrays.equals(expected.array(),readRecords.iterator().next().getData()));
}
