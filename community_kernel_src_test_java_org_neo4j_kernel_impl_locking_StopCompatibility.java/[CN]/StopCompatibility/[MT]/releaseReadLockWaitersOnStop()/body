{
  clientA.acquireExclusive(NODE,1L);
  clientB.acquireExclusive(NODE,2L);
  acquireShared(clientB,NODE,1L).callAndAssertWaiting();
  clientB.stop();
  clientA.stop();
  LockCountVisitor lockCountVisitor=new LockCountVisitor();
  locks.accept(lockCountVisitor);
  Assert.assertEquals(2,lockCountVisitor.getLockCount());
}
