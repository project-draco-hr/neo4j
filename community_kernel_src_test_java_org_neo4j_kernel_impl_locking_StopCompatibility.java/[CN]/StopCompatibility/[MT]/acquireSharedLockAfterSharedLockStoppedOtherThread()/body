{
  AcquiredLock thisThreadsExclusiveLock=acquireExclusiveLockInThisThread();
  LockAcquisition sharedLockAcquisition1=acquireSharedLockInAnotherThread();
  assertThreadIsWaitingForLock(sharedLockAcquisition1);
  sharedLockAcquisition1.stop();
  assertLockAcquisitionFailed(sharedLockAcquisition1);
  thisThreadsExclusiveLock.release();
  LockAcquisition sharedLockAcquisition2=acquireSharedLockInAnotherThread();
  assertLockAcquisitionSucceeded(sharedLockAcquisition2);
}
