{
  Node node=getGraphDb().createNode();
  Relationship relationship=node.createRelationshipTo(node,TEST);
  for (int i=0; i < 2; i++) {
    assertEquals(node,relationship.getOtherNode(node));
    assertEquals(asList(node,node),asList(relationship.getNodes()));
    try {
      relationship.getOtherNode(getGraphDb().getReferenceNode());
      fail("Should throw exception if another node is passed into loop.getOtherNode");
    }
 catch (    NotFoundException e) {
    }
    newTransaction();
  }
}
