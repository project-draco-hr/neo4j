{
  assertCorrectEpoch(context);
  if (context.getEventIdentifier() == -1) {
    try (Conversation conversation=conversationManager.startConversation(context)){
      return commit0(context,preparedTransaction,conversation.getLocks());
    }
   }
 else {
    try {
      Conversation conversation=conversationManager.acquire(context);
      Locks.Client locks=conversation.getLocks();
      try {
        return commit0(context,preparedTransaction,locks);
      }
  finally {
        conversationManager.release(context);
      }
    }
 catch (    NoSuchEntryException|ConcurrentAccessException e) {
      throw new TransactionNotPresentOnMasterException(context);
    }
  }
}
