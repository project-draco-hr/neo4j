{
  String path=args[0];
  final GraphDatabaseService db=new EmbeddedGraphDatabase(path);
  final Index<Node> index=db.index().forNodes("myIndex");
  final String[] keys=new String[]{"apoc","zion","morpheus"};
  final String[] values=new String[]{"hej","yo","something","just a value","anything"};
  for (int i=0; i < 5; i++) {
    new Thread(){
      @Override public void run(){
        while (true) {
          Transaction tx=db.beginTx();
          try {
            for (int i=0; i < 100; i++) {
              String key=keys[i % keys.length];
              String value=values[i % values.length] + i;
              Node node=db.createNode();
              node.setProperty(key,value);
              index.add(node,key,value);
            }
            tx.success();
          }
  finally {
            tx.finish();
          }
        }
      }
    }
.start();
  }
}
