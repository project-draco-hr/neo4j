{
  int minThreads=Math.max(2,jettyMaxThreads / 10);
  int maxCapacity=jettyMaxThreads * 1000 * 60;
  BlockingQueue<Runnable> queue=new BlockingArrayQueue<>(minThreads,minThreads,maxCapacity);
  int maxThreads=Math.max(jettyMaxThreads,minThreads);
  return new QueuedThreadPool(maxThreads,minThreads,60000,queue);
}
