{
  if (jetty == null) {
    JettyThreadCalculator jettyThreadCalculator=new JettyThreadCalculator(jettyMaxThreads);
    QueuedThreadPool pool=createQueuedThreadPool(jettyThreadCalculator);
    jetty=new Server(pool);
    jetty.addConnector(connectorFactory.createConnector(jetty,jettyAddr,jettyHttpPort,jettyThreadCalculator));
    if (httpsEnabled) {
      if (httpsCertificateInformation != null) {
        jetty.addConnector(sslSocketFactory.createConnector(jetty,httpsCertificateInformation,jettyAddr,jettyHttpsPort,jettyThreadCalculator));
      }
 else {
        throw new RuntimeException("HTTPS set to enabled, but no HTTPS configuration provided");
      }
    }
    if (jettyCreatedCallback != null) {
      jettyCreatedCallback.accept(jetty);
    }
  }
  handlers=new HandlerList();
  jetty.setHandler(handlers);
  MovedContextHandler redirector=new MovedContextHandler();
  handlers.addHandler(redirector);
  loadAllMounts();
  startJetty();
}
