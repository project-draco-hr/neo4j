{
  NodeRecord nodeRecord;
  long inUseByte=buffer.get();
  boolean inUse=(inUseByte & 0x1) == Record.IN_USE.intValue();
  if (inUse) {
    long nextRel=Legacy20Store.getUnsignedInt(buffer);
    long relModifier=(inUseByte & 0xEL) << 31;
    long nextProp=Legacy20Store.getUnsignedInt(buffer);
    long propModifier=(inUseByte & 0xF0L) << 28;
    long lsbLabels=Legacy20Store.getUnsignedInt(buffer);
    long hsbLabels=buffer.get() & 0xFF;
    long labels=lsbLabels | (hsbLabels << 32);
    nodeRecord=new NodeRecord(id,false,Legacy20Store.longFromIntAndMod(nextRel,relModifier),Legacy20Store.longFromIntAndMod(nextProp,propModifier));
    nodeRecord.setLabelField(labels,Collections.<DynamicRecord>emptyList());
  }
 else {
    nodeRecord=new NodeRecord(id,false,Record.NO_NEXT_RELATIONSHIP.intValue(),Record.NO_NEXT_PROPERTY.intValue());
  }
  nodeRecord.setInUse(inUse);
  return nodeRecord;
}
