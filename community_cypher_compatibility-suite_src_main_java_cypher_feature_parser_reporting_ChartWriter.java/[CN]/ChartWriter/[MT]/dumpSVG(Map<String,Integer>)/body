{
  JFreeChart chart=createBarChart(data);
  Document document=GenericDOMImplementation.getDOMImplementation().createDocument(null,"svg",null);
  SVGGraphics2D svgGenerator=new SVGGraphics2D(document);
  chart.draw(svgGenerator,new Rectangle(1500,500));
  try (OutputStreamWriter writer=new OutputStreamWriter(out)){
    svgGenerator.stream(writer,true);
  }
 catch (  IOException e) {
    throw new RuntimeException("Unexpected error during SVG file creation",e);
  }
}
