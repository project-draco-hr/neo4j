{
  GraphDatabaseService db=getGraphDb();
  Node node1=db.createNode();
  Node node2=db.createNode();
  Relationship relationship=node1.createRelationshipTo(node2,TEST);
  commit();
  Exception exceptionThrownBySecondDelete=null;
  try (Transaction tx=db.beginTx()){
    relationship.delete();
    try {
      relationship.delete();
    }
 catch (    IllegalStateException e) {
      exceptionThrownBySecondDelete=e;
    }
    tx.success();
  }
   assertNotNull(exceptionThrownBySecondDelete);
  try (Transaction tx=db.beginTx()){
    db.getRelationshipById(relationship.getId());
    tx.success();
  }
 }
