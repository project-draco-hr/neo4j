{
  if (resource == null) {
    throw new IllegalResourceException("Null parameter");
  }
  RWLock lock=null;
synchronized (resourceLockMap) {
    if (!resourceLockMap.containsKey(resource)) {
      throw new LockNotFoundException("Lock not found for: " + resource);
    }
    lock=resourceLockMap.get(resource);
    if (!lock.isMarked() && lock.getReadCount() == 0 && lock.getWriteCount() == 1 && lock.getWaitingThreadsCount() == 0) {
      resourceLockMap.remove(resource);
    }
    lock.releaseWriteLock();
  }
}
