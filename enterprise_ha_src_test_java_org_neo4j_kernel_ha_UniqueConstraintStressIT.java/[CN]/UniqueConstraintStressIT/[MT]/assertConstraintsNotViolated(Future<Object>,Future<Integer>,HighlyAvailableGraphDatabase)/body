{
  boolean constraintCreationFailed=false;
  try {
    constraintCreation.get();
  }
 catch (  ExecutionException e) {
    assertThat(e.getCause(),instanceOf(ConstraintViolationException.class));
    constraintCreationFailed=true;
  }
  int txSuccessCount=constraintViolation.get();
  if (constraintCreationFailed) {
    assertThat(txSuccessCount,greaterThan(0));
    assertThat(allPropertiesAreUnique(master,label,property),equalTo(false));
  }
 else {
    assertThat(txSuccessCount,equalTo(0));
    assertThat(allPropertiesAreUnique(master,label,property),equalTo(true));
  }
}
