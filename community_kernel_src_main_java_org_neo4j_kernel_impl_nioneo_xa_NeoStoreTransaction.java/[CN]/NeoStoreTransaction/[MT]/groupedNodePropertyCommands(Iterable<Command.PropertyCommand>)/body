{
  Map<Long,List<Command.PropertyCommand>> groups=new HashMap<>();
  for (  Command.PropertyCommand command : propCommands) {
    PropertyRecord record=command.getAfter();
    if (!record.isNodeSet()) {
      continue;
    }
    long nodeId=command.getAfter().getNodeId();
    List<Command.PropertyCommand> group=groups.get(nodeId);
    if (group == null) {
      groups.put(nodeId,group=new ArrayList<>());
    }
    group.add(command);
  }
  return groups.values();
}
