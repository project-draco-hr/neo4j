{
  Map<Long,List<PropertyCommand>> groups=new HashMap<>();
  for (  PropertyCommand command : propCommands) {
    PropertyRecord record=command.getAfter();
    if (!record.isNodeSet()) {
      continue;
    }
    long nodeId=command.getAfter().getNodeId();
    List<PropertyCommand> group=groups.get(nodeId);
    if (group == null) {
      groups.put(nodeId,group=new ArrayList<>());
    }
    group.add(command);
  }
  return groups.values();
}
