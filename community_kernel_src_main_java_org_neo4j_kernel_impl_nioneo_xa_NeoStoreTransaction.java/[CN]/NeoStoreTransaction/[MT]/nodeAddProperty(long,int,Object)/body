{
  RecordProxy<Long,NodeRecord,Void> node=context.getNodeRecords().getOrLoad(nodeId,null);
  NodeRecord nodeRecord=node.forReadingLinkage();
  if (!nodeRecord.inUse()) {
    throw new IllegalStateException("Property add on node[" + nodeId + "] illegal since it has been deleted.");
  }
  context.primitiveAddProperty(node,propertyKey,value);
  return Property.property(propertyKey,value);
}
