{
  try {
    File dbLocation=config.get(ServerInternalSettings.legacy_db_location);
    if (dbLocation.exists()) {
      StoreRecoverer recoverer=new StoreRecoverer();
      if (recoverer.recoveryNeededAt(dbLocation)) {
        log.warn("Detected incorrectly shut down database, performing recovery..");
        recoverer.recover(dbLocation,dbConfig,userLogProvider);
      }
    }
    return true;
  }
 catch (  IOException e) {
    log.error("Recovery startup task failed.",e);
    return false;
  }
}
