{
  try {
    File dbLocation=new File(config.getString(Configurator.DATABASE_LOCATION_PROPERTY_KEY));
    if (dbLocation.exists()) {
      StoreRecoverer recoverer=new StoreRecoverer();
      long logVersion=new File(dbLocation,NeoStore.DEFAULT_NAME).exists() ? new NeoStoreUtil(dbLocation).getLogVersion() : 0;
      if (recoverer.recoveryNeededAt(dbLocation,logVersion,dbConfig)) {
        out.println("Detected incorrectly shut down database, performing recovery..");
        recoverer.recover(dbLocation,dbConfig,logging);
      }
    }
    return true;
  }
 catch (  IOException e) {
    log.error("Recovery startup task failed.",e);
    return false;
  }
}
