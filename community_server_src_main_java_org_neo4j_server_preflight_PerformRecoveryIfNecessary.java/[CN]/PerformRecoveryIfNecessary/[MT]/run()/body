{
  try {
    File dbLocation=config.get(ServerInternalSettings.legacy_db_location);
    if (dbLocation.exists()) {
      FileSystemAbstraction fileSystem=new DefaultFileSystemAbstraction();
      try (PageCache pageCache=StandalonePageCacheFactory.createPageCache(fileSystem,config)){
        StoreRecoverer recoverer=new StoreRecoverer(fileSystem,pageCache);
        if (recoverer.recoveryNeededAt(dbLocation)) {
          log.warn("Detected incorrectly shut down database, performing recovery..");
          recoverer.recover(dbLocation,dbConfig,userLogProvider);
        }
      }
     }
    return true;
  }
 catch (  IOException e) {
    log.error("Recovery startup task failed.",e);
    return false;
  }
}
