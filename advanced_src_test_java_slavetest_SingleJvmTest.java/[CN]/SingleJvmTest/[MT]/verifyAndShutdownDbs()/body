{
  try {
    verify(master.getGraphDb(),haDbs.toArray(new GraphDatabaseService[haDbs.size()]));
  }
  finally {
    shutdownDbs();
  }
  GraphDatabaseService masterOfflineDb=new EmbeddedGraphDatabase(dbPath(0).getAbsolutePath());
  GraphDatabaseService[] slaveOfflineDbs=new GraphDatabaseService[haDbs.size()];
  for (int i=1; i <= haDbs.size(); i++) {
    slaveOfflineDbs[i - 1]=new EmbeddedGraphDatabase(dbPath(i).getAbsolutePath());
  }
  try {
    verify(masterOfflineDb,slaveOfflineDbs);
  }
  finally {
    masterOfflineDb.shutdown();
    for (    GraphDatabaseService db : slaveOfflineDbs) {
      db.shutdown();
    }
  }
}
