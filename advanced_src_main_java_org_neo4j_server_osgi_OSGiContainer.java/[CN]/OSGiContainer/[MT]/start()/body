{
  log.info("Starting OSGi container...");
  osgiFramework.init();
  Map<String,String> autoConfig=new HashMap<String,String>();
  log.info("Loading bundles from: " + new File(bundleDirectory).getAbsolutePath());
  autoConfig.put(AutoProcessor.AUTO_DEPLOY_DIR_PROPERY,bundleDirectory);
  autoConfig.put(AutoProcessor.AUTO_DEPLOY_ACTION_PROPERY,AutoProcessor.AUTO_DEPLOY_INSTALL_VALUE + "," + AutoProcessor.AUTO_DEPLOY_START_VALUE);
  AutoProcessor.process(autoConfig,osgiFramework.getBundleContext());
  osgiFramework.start();
  for (  Bundle b : osgiFramework.getBundleContext().getBundles()) {
    logBundleState(b);
  }
  log.info("OSGi is ready.");
}
