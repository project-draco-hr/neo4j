{
  FrozenClock clock=new FrozenClock(1000l,TimeUnit.MILLISECONDS);
  final TransactionTimespanThreshold threshold=new TransactionTimespanThreshold(clock,TimeUnit.MILLISECONDS,100);
  final IllegalLogFormatException ex=new IllegalLogFormatException(version,5);
  when(source.getFirstStartRecordTimestamp(version)).thenThrow(ex);
  threshold.init();
  try {
    threshold.reached(file,version,source);
    fail("should have thrown");
  }
 catch (  RuntimeException e) {
    assertEquals(ex,e.getCause());
  }
}
