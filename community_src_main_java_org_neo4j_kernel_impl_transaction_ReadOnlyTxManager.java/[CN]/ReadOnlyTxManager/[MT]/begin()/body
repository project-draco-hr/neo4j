{
  Thread thread=Thread.currentThread();
  ReadOnlyTransactionImpl tx=txThreadMap.get(thread);
  if (tx != null) {
    throw new NotSupportedException("Nested transactions not supported");
  }
  tx=new ReadOnlyTransactionImpl(this);
  txThreadMap.put(thread,tx);
}
