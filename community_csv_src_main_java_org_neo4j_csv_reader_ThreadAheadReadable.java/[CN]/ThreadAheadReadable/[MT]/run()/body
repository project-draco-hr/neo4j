{
  while (!closed) {
    if (hasReadAhead) {
      parkAWhile();
    }
 else {
      try {
        readAheadBuffer.compact();
        actual.read(readAheadBuffer);
        readAheadBuffer.flip();
        hasReadAhead=true;
        LockSupport.unpark(owner);
      }
 catch (      IOException e) {
        ioException=e;
        closed=true;
      }
    }
  }
}
