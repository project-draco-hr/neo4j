{
  CountCommittedTransactionThreshold committedTransactionThreshold=new CountCommittedTransactionThreshold(1);
  StorageEngine storageEngine=mock(StorageEngine.class);
  when(storageEngine.neoStores()).thenReturn(neoStores);
  when(storageEngine.indexingService()).thenReturn(mock(IndexingService.class));
  when(storageEngine.labelScanStore()).thenReturn(mock(LabelScanStore.class));
  final StoreFlusher storeFlusher=new StoreFlusher(storageEngine,Iterables.<IndexImplementation>empty());
  LogProvider logProvider=mock(LogProvider.class);
  when(logProvider.getLog(any(Class.class))).thenReturn(mock(Log.class));
  return new CheckPointerImpl(metaDataStore,committedTransactionThreshold,storeFlusher,mock(LogPruning.class),appender,kernelHealth,logProvider,mock(CheckPointTracer.class));
}
