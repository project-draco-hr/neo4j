{
  final TransactionInterceptor first=TransactionInterceptorProvider.resolveChain(providers,ds);
  LogDeserializer toReturn=new LogDeserializer(byteChannel){
    @Override protected void intercept(    List<LogEntry> entries){
      for (      LogEntry entry : entries) {
        if (entry instanceof LogEntry.Command) {
          LogEntry.Command commandEntry=(LogEntry.Command)entry;
          if (commandEntry.getXaCommand() instanceof Command) {
            ((Command)commandEntry.getXaCommand()).accept(first);
          }
        }
 else         if (entry instanceof LogEntry.Start) {
          first.setStartEntry((LogEntry.Start)entry);
        }
 else         if (entry instanceof LogEntry.Commit) {
          first.setCommitEntry((LogEntry.Commit)entry);
        }
      }
      first.complete();
    }
  }
;
  return toReturn;
}
