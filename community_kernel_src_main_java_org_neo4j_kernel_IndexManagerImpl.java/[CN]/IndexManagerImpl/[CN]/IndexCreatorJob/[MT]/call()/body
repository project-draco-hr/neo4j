{
  String provider=config.get(PROVIDER);
  String dataSourceName=getIndexProvider(provider).getDataSourceName();
  XaDataSource dataSource=xaDataSourceManager.getXaDataSource(dataSourceName);
  IndexXaConnection connection=(IndexXaConnection)dataSource.getXaConnection();
  Transaction tx=graphDatabaseSPI.tx().begin();
  try {
    javax.transaction.Transaction javaxTx=txManager.getTransaction();
    connection.enlistResource(javaxTx);
    connection.createIndex(cls,indexName,config);
    tx.success();
  }
  finally {
    tx.finish();
  }
  return null;
}
