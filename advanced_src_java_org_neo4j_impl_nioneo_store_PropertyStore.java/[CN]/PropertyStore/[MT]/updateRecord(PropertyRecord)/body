{
  PersistenceWindow window=acquireWindow(record.getId(),OperationType.WRITE);
  try {
    updateRecord(record,window.getBuffer());
    for (    DynamicRecord keyRecord : record.getKeyRecords()) {
      keyPropertyStore.updateRecord(keyRecord);
    }
    if (record.getType() == PropertyType.STRING) {
      for (      DynamicRecord valueRecord : record.getValueRecords()) {
        stringPropertyStore.updateRecord(valueRecord);
      }
    }
 else     if (record.getType() == PropertyType.ARRAY) {
      for (      DynamicRecord valueRecord : record.getValueRecords()) {
        arrayPropertyStore.updateRecord(valueRecord);
      }
    }
  }
  finally {
    releaseWindow(window);
  }
}
