{
  if (!str.contains("{"))   return str;
  Matcher matcher=PLACHOLDER_PATTERN.matcher(str);
  StringBuffer sb=new StringBuffer();
  while (matcher.find()) {
    String id=matcher.group(1);
    String replacement=locations.get(Integer.valueOf(id));
    if (replacement != null)     matcher.appendReplacement(sb,replacement);
 else     matcher.appendReplacement(sb,matcher.group());
  }
  matcher.appendTail(sb);
  return sb.toString();
}
