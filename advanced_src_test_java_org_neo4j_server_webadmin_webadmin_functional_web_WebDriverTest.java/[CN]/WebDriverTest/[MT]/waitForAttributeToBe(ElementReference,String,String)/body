{
  long end=System.currentTimeMillis() + 10000;
  while (System.currentTimeMillis() < end) {
    try {
      if (elRef.getElement().getAttribute(attributeName) == expectedValue) {
        return;
      }
    }
 catch (    StaleElementReferenceException e) {
    }
  }
  throw new RuntimeException("Element did not become visible within a reasonable time. Element was: " + elRef.getElement().toString());
}
