{
  int originalNodeCount=helper.getNumberOfNodes();
  ClientResponse response=Client.create().resource(functionalTestHelper.dataUri() + "batch").type(MediaType.APPLICATION_JSON).accept(MediaType.APPLICATION_JSON).entity(new JSONStringer().array().object().key("method").value("POST").key("to").value("/NODE").key("body").object().key("age").value(1).endObject().endObject().endArray().toString()).post(ClientResponse.class);
  assertEquals(200,response.getStatus());
  assertEquals(originalNodeCount + 1,helper.getNumberOfNodes());
  List<Map<String,Object>> results=JsonHelper.jsonToList(response.getEntity(String.class));
  assertEquals(1,results.size());
  Map<String,Object> result=results.get(0);
  assertTrue(((String)result.get("location")).length() > 0);
}
