{
  if (fileSystem == null) {
    fileSystem=new EphemeralFileSystemAbstraction();
  }
  File directory=new File("raft-log");
  fileSystem.mkdir(directory);
  PhysicalRaftLog newRaftLog=new PhysicalRaftLog(fileSystem,directory,1000000,cacheSize,10,new PhysicalLogFile.Monitor.Adapter(),new DummyRaftableContentSerializer(),mock(Supplier.class),NullLogProvider.getInstance());
  life.add(newRaftLog);
  life.init();
  life.start();
  return newRaftLog;
}
