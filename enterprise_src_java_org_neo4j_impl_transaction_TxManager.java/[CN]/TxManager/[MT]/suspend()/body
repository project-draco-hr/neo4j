{
  if (!tmOk) {
    throw new SystemException("TM has encountered some problem, " + "please perform neccesary action (tx recovery/restart)");
  }
  TransactionImpl tx=(TransactionImpl)txThreadMap.remove(Thread.currentThread());
  if (tx != null) {
  }
  return tx;
}
