{
  if (!iface.isInterface()) {
    throw new IllegalArgumentException("Illegal service interface: " + iface + " is not an interface.");
  }
synchronized (serviceStores) {
    ServiceStore store=serviceStores.get(iface);
    if (store == null) {
      store=new ServiceStore(iface);
      serviceStores.put(iface,store);
    }
    store.add(identifier,implementation);
  }
}
