{
  AtomicLong counter=recentItems.get(item);
  if (counter != null) {
    counter.incrementAndGet();
  }
 else {
    if (recentItems.size() >= maxItems) {
synchronized (recentItems) {
        while (recentItems.size() >= maxItems) {
          removeItemWithLowestCount();
        }
        halveCounts();
        recentItems.putIfAbsent(item,new AtomicLong(1));
      }
    }
 else {
      recentItems.putIfAbsent(item,new AtomicLong(1));
    }
  }
}
