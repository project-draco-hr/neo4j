{
  client.connect(address).send(TransportTestUtil.acceptedVersions(1,0,0,0)).send(TransportTestUtil.chunk(init("TestClient/1.1"),run("CREATE (n)"),pullAll()));
  assertThat(client,eventuallyRecieves(new byte[]{0,0,0,1}));
  assertThat(client,eventuallyRecieves(msgSuccess(),msgSuccess(),msgSuccess()));
  client.send(TransportTestUtil.chunk(run("RETURN 1"),pullAll()));
  assertThat(client,eventuallyRecieves(msgSuccess(),msgRecord(eqRecord(equalTo(1l))),msgSuccess(map("type","r"))));
}
