{
  FileUserRepository users=new FileUserRepository(authFile,NullLogProvider.getInstance());
  User user=new User.Builder("jake",Credential.INACCESSIBLE).withRequiredPasswordChange(true).build();
  users.create(user);
  User updatedUser=new User.Builder("john",Credential.INACCESSIBLE).withRequiredPasswordChange(true).build();
  try {
    users.update(user,updatedUser);
    fail("expected exception not thrown");
  }
 catch (  IllegalArgumentException e) {
  }
  assertThat(users.findByName(user.name()),equalTo(user));
}
