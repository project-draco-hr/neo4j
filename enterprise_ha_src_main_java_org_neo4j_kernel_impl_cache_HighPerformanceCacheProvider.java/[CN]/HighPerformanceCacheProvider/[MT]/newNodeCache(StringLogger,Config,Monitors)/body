{
  Long node=config.get(HighPerformanceCacheSettings.node_cache_size);
  if (node == null) {
    node=Runtime.getRuntime().maxMemory() / 4;
  }
  Long rel=config.get(HighPerformanceCacheSettings.relationship_cache_size);
  if (rel == null) {
    rel=Runtime.getRuntime().maxMemory() / 4;
  }
  checkMemToUse(logger,node,rel,Runtime.getRuntime().maxMemory());
  return new HighPerformanceCache<>(node,config.get(HighPerformanceCacheSettings.node_cache_array_fraction),config.get(HighPerformanceCacheSettings.log_interval),NODE_CACHE_NAME,logger,monitors.newMonitor(HighPerformanceCache.Monitor.class));
}
