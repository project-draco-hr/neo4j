{
  Integer previous=nameToId.putIfAbsent(token.name(),token.id());
  if (previous != null && previous != token.id()) {
    idToToken.remove(token.id(),token);
    throw new NonUniqueTokenException(tokenType,token.name(),token.id(),previous);
  }
}
