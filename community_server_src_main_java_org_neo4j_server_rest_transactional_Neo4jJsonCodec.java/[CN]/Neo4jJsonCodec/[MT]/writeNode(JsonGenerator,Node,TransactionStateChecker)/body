{
  out.writeStartObject();
  try {
    if (txStateChecker.isNodeDeletedInCurrentTx(node.getId())) {
      out.writeBooleanField("deleted",Boolean.TRUE);
    }
 else {
      for (      Map.Entry<String,Object> property : node.getAllProperties().entrySet()) {
        out.writeObjectField(property.getKey(),property.getValue());
      }
    }
  }
  finally {
    out.writeEndObject();
  }
}
