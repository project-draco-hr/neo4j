{
  if (direction == DirectionWrapper.BOTH) {
    for (    RelationshipLoadingPosition position : directions.values()) {
      if (position.hasMore(direction,types)) {
        currentPosition=position;
        return position.position(direction,types);
      }
    }
  }
 else {
    for (    DirectionWrapper dir : new DirectionWrapper[]{direction,DirectionWrapper.BOTH}) {
      RelationshipLoadingPosition position=directions.get(dir);
      if (position.hasMore(dir,types)) {
        currentPosition=position;
        return position.position(dir,types);
      }
    }
  }
  return Record.NO_NEXT_RELATIONSHIP.intValue();
}
