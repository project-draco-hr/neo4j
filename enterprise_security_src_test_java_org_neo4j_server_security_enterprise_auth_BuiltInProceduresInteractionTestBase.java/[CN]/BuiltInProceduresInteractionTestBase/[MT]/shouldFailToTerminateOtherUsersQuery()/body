{
  DoubleLatch latch=new DoubleLatch(3,true);
  ThreadedTransaction<S> read=new ThreadedTransaction<>(neo,latch);
  ThreadedTransaction<S> write=new ThreadedTransaction<>(neo,latch);
  String q1=read.execute(threading,readSubject,"UNWIND [1,2,3] AS x RETURN x");
  write.execute(threading,writeSubject,"UNWIND [4,5,6] AS y RETURN y");
  latch.startAndWaitForAllToStart();
  try {
    String id1=extractQueryId(q1);
    assertFail(writeSubject,"CALL dbms.killQuery('" + id1 + "') YIELD username RETURN *",PERMISSION_DENIED);
    latch.finishAndWaitForAllToFinish();
    read.closeAndAssertSuccess();
    write.closeAndAssertSuccess();
  }
 catch (  Throwable t) {
    latch.finishAndWaitForAllToFinish();
    throw t;
  }
  assertEmpty(adminSubject,"CALL dbms.listQueries() YIELD query WITH * WHERE NOT query CONTAINS 'listQueries' RETURN *");
}
