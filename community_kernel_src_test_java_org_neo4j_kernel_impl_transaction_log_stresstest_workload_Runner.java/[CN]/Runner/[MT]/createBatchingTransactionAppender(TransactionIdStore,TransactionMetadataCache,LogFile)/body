{
  Log log=NullLog.getInstance();
  KernelEventHandlers kernelEventHandlers=new KernelEventHandlers(log);
  KernelPanicEventGenerator kpe=new KernelPanicEventGenerator(kernelEventHandlers);
  KernelHealth kernelHealth=new KernelHealth(kpe,log);
  LogRotationImpl logRotation=new LogRotationImpl(NOOP_LOGROTATION_MONITOR,logFile,kernelHealth);
  return new BatchingTransactionAppender(logFile,logRotation,transactionMetadataCache,transactionIdStore,IdOrderingQueue.BYPASS,kernelHealth);
}
