{
  Iterator<Long> nodesWithLabel=delegate.getNodesWithLabel(labelId);
  return Iterables.filter(new Predicate<Long>(){
    @Override public boolean accept(    Long nodeId){
      return !oldTransactionState.nodeIsDeleted(nodeId.longValue());
    }
  }
,nodesWithLabel);
}
