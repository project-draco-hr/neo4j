{
  if (possibleEndNodes.length == 1) {
    final Node target=possibleEndNodes[0];
    return new PathEvaluator.Adapter<STATE>(){
      @Override public Evaluation evaluate(      Path path,      BranchState state){
        return target.equals(path.endNode()) ? evaluationIfMatch : evaluationIfNoMatch;
      }
    }
;
  }
  final Set<Node> endNodes=new HashSet<>(asList(possibleEndNodes));
  return new PathEvaluator.Adapter<STATE>(){
    @Override public Evaluation evaluate(    Path path,    BranchState state){
      return endNodes.contains(path.endNode()) ? evaluationIfMatch : evaluationIfNoMatch;
    }
  }
;
}
