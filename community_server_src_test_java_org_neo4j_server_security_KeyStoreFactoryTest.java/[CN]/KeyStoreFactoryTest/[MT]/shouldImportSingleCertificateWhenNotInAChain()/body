{
  File certificatePath=File.createTempFile("cert","test");
  File privateKeyPath=File.createTempFile("privatekey","test");
  File keyStorePath=File.createTempFile("keyStore","test");
  new SslCertificateFactory().createSelfSignedCertificate(certificatePath,privateKeyPath,"some-hostname");
  KeyStoreInformation keyStoreInformation=new KeyStoreFactory().createKeyStore(keyStorePath,privateKeyPath,certificatePath);
  KeyStore keyStore=KeyStore.getInstance("JKS");
  keyStore.load(new FileInputStream(keyStoreInformation.getKeyStorePath()),keyStoreInformation.getKeyStorePassword());
  Certificate[] chain=keyStore.getCertificateChain("key");
  assertEquals("Single certificate expected not a chain of [" + chain.length + "]",1,chain.length);
}
