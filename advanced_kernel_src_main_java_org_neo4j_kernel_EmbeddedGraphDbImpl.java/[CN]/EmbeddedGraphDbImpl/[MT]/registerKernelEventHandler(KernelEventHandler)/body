{
  if (this.kernelEventHandlers.contains(handler)) {
    return handler;
  }
  for (  KernelEventHandler registeredHandler : this.kernelEventHandlers) {
    KernelEventHandler.ExecutionOrder order=handler.orderComparedTo(registeredHandler);
    int index=this.kernelEventHandlers.indexOf(registeredHandler);
    if (order == KernelEventHandler.ExecutionOrder.BEFORE) {
      this.kernelEventHandlers.add(index,handler);
      return handler;
    }
 else     if (order == KernelEventHandler.ExecutionOrder.AFTER) {
      this.kernelEventHandlers.add(index + 1,handler);
      return handler;
    }
  }
  this.kernelEventHandlers.add(handler);
  return handler;
}
