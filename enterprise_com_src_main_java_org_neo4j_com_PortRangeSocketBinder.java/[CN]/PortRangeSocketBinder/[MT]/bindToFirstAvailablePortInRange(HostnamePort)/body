{
  int[] ports=serverAddress.getPorts();
  String host=serverAddress.getHost();
  Channel channel;
  InetSocketAddress socketAddress;
  ChannelException lastException=null;
  PortIterator portIterator=new PortIterator(ports);
  while (portIterator.hasNext()) {
    Integer port=portIterator.next();
    if (host == null || host.equals(ALL_INTERFACES_ADDRESS)) {
      socketAddress=new InetSocketAddress(port);
    }
 else {
      socketAddress=new InetSocketAddress(host,port);
    }
    try {
      channel=bootstrap.bind(socketAddress);
      return new Connection(socketAddress,channel);
    }
 catch (    ChannelException e) {
      if (lastException != null) {
        e.addSuppressed(lastException);
      }
      lastException=e;
    }
  }
  throw lastException;
}
