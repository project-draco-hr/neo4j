{
  String randomDbName="tmpdb-" + rnd.nextInt();
  File possibleDirectory=new File("target" + File.separator + randomDbName);
  if (possibleDirectory.exists()) {
    FileUtils.deleteDirectory(possibleDirectory);
  }
  GraphDatabaseBuilder graphDatabaseBuilder=new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(randomDbName);
  if (config != null) {
    graphDatabaseBuilder.setConfig(config);
  }
  return graphDatabaseBuilder.newGraphDatabase();
}
