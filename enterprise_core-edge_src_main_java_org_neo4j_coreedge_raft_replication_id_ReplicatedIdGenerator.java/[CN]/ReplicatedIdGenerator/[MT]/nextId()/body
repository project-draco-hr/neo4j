{
  long nextId=nextLocalId();
  if (nextId == VALUE_REPRESENTING_NULL) {
    IdAllocation allocation;
    try {
      allocation=acquirer.acquireIds(idType);
    }
 catch (    InterruptedException e) {
      throw new IdGenerationException(e);
    }
    log.debug("Received id allocation " + allocation + " for "+ idType);
    nextId=storeLocally(allocation);
  }
  highId=max(highId,nextId + 1);
  return nextId;
}
