{
  StoreProcessor processor=new StoreProcessor(CheckDecorator.NONE,mock(ConsistencyReport.Reporter.class),Stage.SEQUENTIAL_FORWARD,CacheAccess.EMPTY);
  RecordStore<NodeRecord> recordStore=mock(RecordStore.class);
  when(recordStore.getHighId()).thenReturn(3L);
  when(recordStore.forceGetRecord(any(Long.class))).thenReturn(new NodeRecord(0,false,0,0));
  processor.applyFiltered(recordStore);
  verify(recordStore).forceGetRecord(0);
  verify(recordStore).forceGetRecord(1);
  verify(recordStore).forceGetRecord(2);
  verify(recordStore,never()).forceGetRecord(3);
}
