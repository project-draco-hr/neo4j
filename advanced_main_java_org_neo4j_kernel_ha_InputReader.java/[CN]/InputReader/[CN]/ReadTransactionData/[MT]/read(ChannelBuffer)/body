{
  int toRead=Math.min(bytesLeft,buffer.readableBytes());
  buffer.readBytes(data,toRead);
  bytesLeft-=toRead;
  if (bytesLeft <= 0) {
    state=stream.txDone(txId,data);
    if (state == null) {
      return stream.product();
    }
  }
  return null;
}
