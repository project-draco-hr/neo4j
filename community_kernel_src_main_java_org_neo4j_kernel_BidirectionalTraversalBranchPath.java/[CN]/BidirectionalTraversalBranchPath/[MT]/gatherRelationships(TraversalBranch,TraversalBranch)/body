{
  LinkedList<Relationship> relationships=new LinkedList<Relationship>();
  TraversalBranch branch=first;
  while (branch.length() > 0) {
    relationships.addFirst(branch.lastRelationship());
    branch=branch.parent();
  }
  if (cachedStartNode == null && first == start)   cachedStartNode=branch.endNode();
  branch=then;
  while (branch.length() > 0) {
    relationships.add(branch.lastRelationship());
    branch=branch.parent();
  }
  if (cachedStartNode == null && then == start)   cachedStartNode=branch.endNode();
  return relationships;
}
