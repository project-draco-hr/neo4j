{
  Credential abc=Credential.forPassword("123abc");
  Credential fruit=Credential.forPassword("fruit");
  User u1=new User.Builder("Steve",abc).build();
  User u2=new User.Builder("Steve",fruit).withRequiredPasswordChange(true).withFlag("nice_guy").build();
  assertThat(u1,equalTo(u1));
  assertThat(u1,not(equalTo(u2)));
  User u1_as_u2=u1.augment().withCredentials(fruit).withRequiredPasswordChange(true).withFlag("nice_guy").build();
  assertThat(u1,not(equalTo(u1_as_u2)));
  assertThat(u2,equalTo(u1_as_u2));
  User u2_as_u1=u2.augment().withCredentials(abc).withRequiredPasswordChange(false).withoutFlag("nice_guy").build();
  assertThat(u2,not(equalTo(u2_as_u1)));
  assertThat(u1,equalTo(u2_as_u1));
  assertThat(u1,not(equalTo(u2)));
}
