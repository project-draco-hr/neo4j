{
  if (newBrickCount > brickCount) {
    BrickElement tmpArray[]=new BrickElement[newBrickCount];
    System.arraycopy(brickArray,0,tmpArray,0,brickArray.length);
    if (memUsed + brickSize >= availableMem) {
      freeWindows(1);
    }
    for (int i=brickArray.length; i < tmpArray.length; i++) {
      BrickElement be=new BrickElement(i);
      tmpArray[i]=be;
      if (memUsed + brickSize <= availableMem) {
        try {
          be.setWindow(allocateNewWindow(i));
          memUsed+=brickSize;
        }
 catch (        MappedMemException e) {
          ooe++;
          logWarn("Unable to memory map");
        }
catch (        OutOfMemoryError e) {
          ooe++;
          logWarn("Unable to allocate direct buffer");
        }
      }
    }
    brickArray=tmpArray;
    brickCount=tmpArray.length;
  }
}
