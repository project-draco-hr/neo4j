{
  if (newBrickCount > brickCount) {
    BrickElement tmpArray[]=new BrickElement[newBrickCount];
    System.arraycopy(brickArray,0,tmpArray,0,brickArray.length);
    if (memUsed + brickSize >= availableMem) {
      freeWindows(1);
    }
    for (int i=brickArray.length; i < tmpArray.length; i++) {
      BrickElement be=brickFactory.create(i);
      tmpArray[i]=be;
      if (memUsed + brickSize <= availableMem) {
        allocateNewWindow(be);
      }
    }
    brickArray=tmpArray;
    brickCount=tmpArray.length;
  }
}
