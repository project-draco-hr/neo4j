{
  Transaction tx=database.beginTx();
  final int count=1000;
  for (int i=0; i < count; i++) {
    Node node=database.createNode();
    node.setProperty("foo",0);
  }
  tx.success();
  tx.finish();
  ExecutorService executor=Executors.newFixedThreadPool(2);
  final AtomicBoolean done=new AtomicBoolean(false);
  executor.submit(new DataChecker(done,database){
    @Override protected Integer getSecondValue(){
      Node nodeById=database.getNodeById(1);
      this.tx.acquireReadLock(nodeById);
      return (Integer)nodeById.getProperty("foo");
    }
    @Override protected Integer getFirstValue(){
      Node nodeById=database.getNodeById(1000);
      this.tx.acquireReadLock(nodeById);
      return (Integer)nodeById.getProperty("foo");
    }
  }
);
  executor.shutdownNow();
  new DataChanger(database,count,done).call();
}
