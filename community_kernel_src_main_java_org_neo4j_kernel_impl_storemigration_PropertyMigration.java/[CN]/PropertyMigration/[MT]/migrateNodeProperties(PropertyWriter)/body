{
  Iterable<NodeRecord> records=legacyNodeStoreReader.readNodeStore();
  for (  NodeRecord nodeRecord : records) {
    if (nodeRecord.getNextProp() != Record.NO_NEXT_RELATIONSHIP.intValue()) {
      LegacyPropertyRecord propertyRecord=propertyStoreReader.readPropertyRecord(nodeRecord.getNextProp());
      List<Pair<Integer,Object>> properties=new ArrayList<Pair<Integer,Object>>();
      properties.add(extractValue(propertyRecord));
      propertyRecord.getPropBlock();
      while (propertyRecord.getNextProp() != Record.NO_NEXT_PROPERTY.intValue()) {
        properties.add(extractValue(propertyRecord));
        propertyRecord=propertyStoreReader.readPropertyRecord(propertyRecord.getNextProp());
      }
      propertyWriter.writeProperties(properties);
    }
  }
}
