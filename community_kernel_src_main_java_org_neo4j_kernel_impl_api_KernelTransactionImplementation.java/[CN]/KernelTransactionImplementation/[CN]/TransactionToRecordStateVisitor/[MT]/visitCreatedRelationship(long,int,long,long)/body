{
  try {
    for (PrimitiveIntIterator labels=labelsOf(startNode); labels.hasNext(); ) {
      int label=labels.next();
      counts.increment(label,ANY_RELATIONSHIP_TYPE,ANY_LABEL);
      counts.increment(label,type,ANY_LABEL);
    }
    for (PrimitiveIntIterator labels=labelsOf(endNode); labels.hasNext(); ) {
      int label=labels.next();
      counts.increment(ANY_LABEL,ANY_RELATIONSHIP_TYPE,label);
      counts.increment(ANY_LABEL,type,label);
    }
  }
 catch (  EntityNotFoundException e) {
    throw new IllegalStateException("Nodes with added relationships should exist.",e);
  }
  recordState.relCreate(id,type,startNode,endNode);
}
