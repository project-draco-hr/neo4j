{
  try {
    for (PrimitiveIntIterator labels=labelsOf(startNode); labels.hasNext(); ) {
      int label=labels.next();
      counts.incrementRelationshipCount(label,ANY_RELATIONSHIP_TYPE,ANY_LABEL,1);
      counts.incrementRelationshipCount(label,type,ANY_LABEL,1);
    }
    for (PrimitiveIntIterator labels=labelsOf(endNode); labels.hasNext(); ) {
      int label=labels.next();
      counts.incrementRelationshipCount(ANY_LABEL,ANY_RELATIONSHIP_TYPE,label,1);
      counts.incrementRelationshipCount(ANY_LABEL,type,label,1);
    }
  }
 catch (  EntityNotFoundException e) {
    throw new IllegalStateException("Nodes with added relationships should exist.",e);
  }
  recordState.relCreate(id,type,startNode,endNode);
}
