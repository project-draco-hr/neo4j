{
  try {
    storeLayer.relationshipVisit(id,relationshipData);
    for (PrimitiveIntIterator labels=labelsOf(relationshipData.startNode()); labels.hasNext(); ) {
      int label=labels.next();
      counts.decrement(label,ANY_RELATIONSHIP_TYPE,ANY_LABEL);
      counts.decrement(label,relationshipData.type(),ANY_LABEL);
    }
    for (PrimitiveIntIterator labels=labelsOf(relationshipData.endNode()); labels.hasNext(); ) {
      int label=labels.next();
      counts.decrement(ANY_LABEL,ANY_RELATIONSHIP_TYPE,label);
      counts.decrement(ANY_LABEL,relationshipData.type(),label);
    }
  }
 catch (  EntityNotFoundException e) {
    throw new IllegalStateException("Relationship being deleted should exist along with its nodes.",e);
  }
  recordState.relDelete(id);
}
