{
  if (success && terminated) {
    String terminationMessage=terminationReason == null ? "" : terminationReason.code().description();
    throw new TransactionTerminatedException(terminationMessage);
  }
  if (success) {
    throw new TransactionFailureException(Status.Transaction.MarkedAsFailed,"Transaction rolled back even if marked as successful");
  }
}
