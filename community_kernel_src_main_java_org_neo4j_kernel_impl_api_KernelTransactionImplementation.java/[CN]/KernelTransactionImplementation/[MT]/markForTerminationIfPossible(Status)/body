{
  if (canBeTerminated()) {
    failure=true;
    terminationReason=reason;
    if (locks != null) {
      locks.stop();
    }
    transactionMonitor.transactionTerminated(hasTxStateWithChanges());
  }
}
