{
  ReferenceCache<TestCacheTypes.Entity> cache=new ReferenceCache<>("MyCache!",spyFactory);
  final TestCacheTypes.Entity originalEntity=new TestCacheTypes.Entity(0);
  cache.put(originalEntity);
  when(spyFactory.weakValues.get(0).get()).thenAnswer(entityFirstTimeNullAfterThat(originalEntity));
  TestCacheTypes.Entity returnedEntity=cache.get(0);
  assertEquals(originalEntity,returnedEntity);
}
