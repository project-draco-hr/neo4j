{
  ReferenceCache<TestCacheTypes.Entity> cache=new ReferenceCache<TestCacheTypes.Entity>("MyCache!",spyFactory);
  TestCacheTypes.Entity originalEntity=new TestCacheTypes.Entity(0);
  cache.put(originalEntity);
  spyFactory.clearAndQueueReferenceNo(0);
  TestCacheTypes.Entity newEntity=new TestCacheTypes.Entity(0);
  TestCacheTypes.Entity returnedEntity=cache.put(newEntity);
  assertEquals(newEntity,returnedEntity);
  assertEquals(newEntity,cache.get(0));
}
