{
  Node startNode=graphDb.getNodeById(startId);
  Node endNode=graphDb.getNodeById(endId);
  Integer maxDepthObj=(Integer)map.get("max depth");
  int maxDepth=(maxDepthObj != null) ? maxDepthObj : 1;
  RelationshipExpander expander=RelationshipExpanderBuilder.describeRelationships(map);
  String algorithm=(String)map.get("algorithm");
  algorithm=(algorithm != null) ? algorithm : "shortestPath";
  PathFinder<Path> finder=getAlgorithm(algorithm,expander,maxDepth);
  Path path=finder.findSinglePath(startNode,endNode);
  return new PathRepresentation(path);
}
