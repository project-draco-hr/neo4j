{
  ensure(1);
  final byte markerByte=buffer.get();
  final byte markerHighNibble=(byte)(markerByte & 0xF0);
  final byte markerLowNibble=(byte)(markerByte & 0x0F);
  if (markerByte == NULL) {
    return NULL_VALUE;
  }
 else   if (markerByte == TRUE) {
    return PackValue.BooleanValue.TRUE;
  }
 else   if (markerByte == FALSE) {
    return PackValue.BooleanValue.FALSE;
  }
 else   if (markerByte == FLOAT_64) {
    ensure(8);
    return new PackValue.FloatValue(buffer.getDouble());
  }
 else   if (markerByte == INT_8) {
    ensure(1);
    return PackValue.IntegerValue.getInstance(buffer.get());
  }
 else   if (markerByte == INT_16) {
    ensure(2);
    return PackValue.IntegerValue.getInstance(buffer.getShort());
  }
 else   if (markerByte == INT_32) {
    ensure(4);
    return PackValue.IntegerValue.getInstance(buffer.getInt());
  }
 else   if (markerByte == INT_64) {
    ensure(8);
    return PackValue.IntegerValue.getInstance(buffer.getLong());
  }
 else   if (markerByte == BYTES_8) {
    return PackValue.BytesValue.getInstance(unpackBytes(unpackUINT8()));
  }
 else   if (markerByte == BYTES_16) {
    return PackValue.BytesValue.getInstance(unpackBytes(unpackUINT16()));
  }
 else   if (markerByte == BYTES_32) {
    long size=unpackUINT32();
    if (size <= Integer.MAX_VALUE) {
      return PackValue.BytesValue.getInstance(unpackBytes((int)size));
    }
 else {
      throw new Overflow("BYTES_32 too long for Java");
    }
  }
 else   if (markerHighNibble == TINY_TEXT) {
    return PackValue.TextValue.getInstance(unpackBytes(markerLowNibble));
  }
 else   if (markerByte == TEXT_8) {
    return PackValue.TextValue.getInstance(unpackBytes(unpackUINT8()));
  }
 else   if (markerByte == TEXT_16) {
    return PackValue.TextValue.getInstance(unpackBytes(unpackUINT16()));
  }
 else   if (markerByte == TEXT_32) {
    long size=unpackUINT32();
    if (size <= Integer.MAX_VALUE) {
      return PackValue.TextValue.getInstance(unpackBytes((int)size));
    }
 else {
      throw new Overflow("TEXT_32 too long for Java");
    }
  }
 else   if (markerHighNibble == TINY_LIST) {
    return PackValue.ListValue.getInstance(unpackList(markerLowNibble));
  }
 else   if (markerByte == LIST_8) {
    return PackValue.ListValue.getInstance(unpackList(unpackUINT8()));
  }
 else   if (markerByte == LIST_16) {
    return PackValue.ListValue.getInstance(unpackList(unpackUINT16()));
  }
 else   if (markerByte == LIST_32) {
    long size=unpackUINT32();
    if (size <= Integer.MAX_VALUE) {
      return PackValue.ListValue.getInstance(unpackList((int)size));
    }
 else {
      throw new Overflow("LIST_32 too long for Java");
    }
  }
 else   if (markerHighNibble == TINY_MAP) {
    return PackValue.MapValue.getInstance(unpackMap(markerLowNibble));
  }
 else   if (markerByte == MAP_8) {
    return PackValue.MapValue.getInstance(unpackMap(unpackUINT8()));
  }
 else   if (markerByte == MAP_16) {
    return PackValue.MapValue.getInstance(unpackMap(unpackUINT16()));
  }
 else   if (markerByte == MAP_32) {
    long size=unpackUINT32();
    if (size <= Integer.MAX_VALUE) {
      return PackValue.MapValue.getInstance(unpackMap((int)size));
    }
 else {
      throw new Overflow("MAP_32 too long for Java");
    }
  }
 else   if (markerHighNibble == TINY_STRUCT) {
    char signature=unpackStructSignature();
    return PackValue.StructValue.getInstance(signature,unpackList(markerLowNibble));
  }
 else   if (markerByte == STRUCT_8) {
    int size=unpackUINT8();
    char signature=unpackStructSignature();
    return PackValue.StructValue.getInstance(signature,unpackList(size));
  }
 else   if (markerByte == STRUCT_16) {
    int size=unpackUINT16();
    char signature=unpackStructSignature();
    return PackValue.StructValue.getInstance(signature,unpackList(size));
  }
 else {
    return PackValue.IntegerValue.getInstance(markerByte);
  }
}
