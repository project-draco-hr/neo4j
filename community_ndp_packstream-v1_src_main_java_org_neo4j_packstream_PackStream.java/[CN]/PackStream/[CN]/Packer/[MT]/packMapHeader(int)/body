{
  if (size < 0x10) {
    out.ensure(1).put((byte)(TINY_MAP | size));
  }
 else   if (size <= Byte.MAX_VALUE) {
    out.ensure(2).put(MAP_8).put((byte)size);
  }
 else   if (size <= Short.MAX_VALUE) {
    out.ensure(3).put(MAP_16).putShort((short)size);
  }
 else {
    out.ensure(5).put(MAP_32).putInt(size);
  }
}
