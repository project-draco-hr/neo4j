{
  if (size < 0x10) {
    ensure(1);
    buffer.put((byte)(TINY_MAP | size));
  }
 else   if (size <= Byte.MAX_VALUE) {
    ensure(2);
    buffer.put(MAP_8);
    buffer.put((byte)size);
  }
 else   if (size <= Short.MAX_VALUE) {
    ensure(3);
    buffer.put(MAP_16);
    buffer.putShort((short)size);
  }
 else {
    ensure(5);
    buffer.put(MAP_32);
    buffer.putInt(size);
  }
}
