{
  int index=0;
  while (index < data.length) {
    int amountToWrite=Math.min(out.remaining(),data.length - index);
    out.put(data,index,amountToWrite);
    index+=amountToWrite;
    if (out.remaining() == 0) {
      flush();
    }
  }
}
