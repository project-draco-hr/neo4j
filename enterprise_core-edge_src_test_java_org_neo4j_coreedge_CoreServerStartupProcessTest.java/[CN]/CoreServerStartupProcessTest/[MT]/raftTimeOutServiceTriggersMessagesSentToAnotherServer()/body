{
  DataSourceManager dataSourceManager=mock(DataSourceManager.class);
  ReplicatedIdGeneratorFactory idGeneratorFactory=mock(ReplicatedIdGeneratorFactory.class);
  RaftServer<CoreMember> raftServer=mock(RaftServer.class);
  CatchupServer catchupServer=mock(CatchupServer.class);
  ScheduledTimeoutService raftTimeoutService=mock(ScheduledTimeoutService.class);
  MembershipWaiter<CoreMember> membershipWaiter=mock(MembershipWaiter.class);
  RaftInstance raftInstance=mock(RaftInstance.class);
  DeleteStoreOnStartUp deleteStoreOnStartUp=mock(DeleteStoreOnStartUp.class);
  RaftLogReplay raftLogReplay=mock(RaftLogReplay.class);
  LifeSupport lifeSupport=CoreServerStartupProcess.createLifeSupport(dataSourceManager,idGeneratorFactory,raftInstance,raftServer,catchupServer,raftTimeoutService,membershipWaiter,0,deleteStoreOnStartUp,raftLogReplay);
  assertThat(lifeSupport,startsComponent(raftTimeoutService).after(raftServer).because("server need to be ready to handle responses generated by timeout events"));
  assertThat(lifeSupport,startsComponent(raftTimeoutService).after(raftLogReplay).because("elections which must request votes from the latest known voting members"));
  assertThat(lifeSupport,startsComponent(raftLogReplay).after(dataSourceManager).because("transactions are replayed from the RAFT log into the data source"));
  assertThat(lifeSupport,startsComponent(idGeneratorFactory).after(dataSourceManager).because("IDs are generated into the data source"));
}
