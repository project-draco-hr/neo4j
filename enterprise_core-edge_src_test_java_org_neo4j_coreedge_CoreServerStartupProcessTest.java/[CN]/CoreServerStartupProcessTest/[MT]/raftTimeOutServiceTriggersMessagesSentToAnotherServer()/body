{
  DataSourceManager dataSourceManager=mock(DataSourceManager.class);
  ReplicatedIdGeneratorFactory idGeneratorFactory=mock(ReplicatedIdGeneratorFactory.class);
  RaftServer<CoreMember> raftServer=mock(RaftServer.class);
  CatchupServer catchupServer=mock(CatchupServer.class);
  DelayedRenewableTimeoutService raftTimeoutService=mock(DelayedRenewableTimeoutService.class);
  MembershipWaiter<CoreMember> membershipWaiter=mock(MembershipWaiter.class);
  RaftInstance raftInstance=mock(RaftInstance.class);
  StateMachineApplier recoverableStateMachine=mock(StateMachineApplier.class);
  RecoverTransactionLogState recoverTransactionLogState=mock(RecoverTransactionLogState.class);
  Lifecycle tokenLife=mock(Lifecycle.class);
  LifeSupport lifeSupport=CoreServerStartupProcess.createLifeSupport(dataSourceManager,idGeneratorFactory,raftInstance,recoverableStateMachine,raftServer,catchupServer,raftTimeoutService,membershipWaiter,0,recoverTransactionLogState,tokenLife);
  assertThat(lifeSupport,startsComponent(raftTimeoutService).after(raftServer).because("server need to be ready to handle responses generated by timeout events"));
  assertThat(lifeSupport,startsComponent(raftTimeoutService).after(recoverableStateMachine).because("elections which must request votes from the latest known voting members"));
  assertThat(lifeSupport,startsComponent(recoverableStateMachine).after(dataSourceManager).because("transactions are replayed from the RAFT log into the data source"));
  assertThat(lifeSupport,startsComponent(idGeneratorFactory).after(dataSourceManager).because("IDs are generated into the data source"));
}
