{
  LocalDatabase localDatabase=mock(LocalDatabase.class);
  DataSourceManager dataSourceManager=mock(DataSourceManager.class);
  ReplicatedIdGeneratorFactory idGeneratorFactory=mock(ReplicatedIdGeneratorFactory.class);
  RaftLog raftLog=mock(RaftLog.class);
  RaftServer<CoreMember> raftServer=mock(RaftServer.class);
  CatchupServer catchupServer=mock(CatchupServer.class);
  ScheduledTimeoutService timeoutService=mock(ScheduledTimeoutService.class);
  MembershipWaiter<CoreMember> membershipListener=mock(MembershipWaiter.class);
  when(membershipListener.waitUntilCaughtUpMember(any(ReadableRaftState.class))).thenReturn(mock(CompletableFuture.class));
  CoreServerStartupProcess leaderProcess=new CoreServerStartupProcess(localDatabase,dataSourceManager,idGeneratorFactory,mock(RaftInstance.class),raftLog,raftServer,catchupServer,timeoutService,membershipListener,1000);
  leaderProcess.start();
  leaderProcess.stop();
  verify(dataSourceManager).stop();
  verify(idGeneratorFactory).stop();
}
