{
  return buttonWithText("Select database...",new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      JFileChooser jFileChooser=new JFileChooser();
      jFileChooser.setFileSelectionMode(DIRECTORIES_ONLY);
      String text=directoryDisplay.getText();
      jFileChooser.setCurrentDirectory(new File(text));
      while (true) {
switch (jFileChooser.showOpenDialog(selectionPanel)) {
default :
          return;
case APPROVE_OPTION:
        File selectedFile=jFileChooser.getSelectedFile();
      try {
        verifyGraphDirectory(selectedFile);
        directoryDisplay.setText(selectedFile.getAbsolutePath());
        return;
      }
 catch (      UnsuitableGraphDatabaseDirectory error) {
        int result=showConfirmDialog(frame,error.getMessage() + "\nPlease choose a different folder.","Invalid folder selected",JOptionPane.OK_CANCEL_OPTION);
switch (result) {
case CANCEL_OPTION:
          return;
default :
      }
    }
}
}
}
}
);
}
