{
  ByteBuf buffer=Unpooled.buffer();
  AdvertisedSocketAddress sent=new AdvertisedSocketAddress("test-hostname:1234");
  AdvertisedSocketAddress.AdvertisedSocketAddressByteBufferMarshal marshal=new AdvertisedSocketAddress.AdvertisedSocketAddressByteBufferMarshal();
  marshal.marshal(sent,buffer);
  buffer=buffer.slice(0,buffer.writerIndex() - 4);
  AdvertisedSocketAddress received=marshal.unmarshal(buffer);
  assertNull(received);
}
