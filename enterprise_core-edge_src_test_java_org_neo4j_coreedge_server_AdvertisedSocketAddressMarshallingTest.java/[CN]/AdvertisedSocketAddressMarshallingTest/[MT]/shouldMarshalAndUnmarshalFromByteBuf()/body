{
  ByteBuf buffer=Unpooled.buffer();
  AdvertisedSocketAddress sent=new AdvertisedSocketAddress("test-hostname:1234");
  AdvertisedSocketAddress.AdvertisedSocketAddressMarshal marshal=new AdvertisedSocketAddress.AdvertisedSocketAddressMarshal();
  marshal.marshal(sent,buffer);
  AdvertisedSocketAddress received=marshal.unmarshal(buffer);
  assertNotSame(sent,received);
  assertEquals(sent,received);
}
