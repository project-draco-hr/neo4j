{
  ManagedCluster cluster=clusterRule.startCluster();
  HighlyAvailableGraphDatabase master=cluster.getMaster();
  HighlyAvailableGraphDatabase slave=cluster.getAnySlave();
  long nodeId;
  try (Transaction tx=master.beginTx()){
    Node node=master.createNode();
    nodeId=node.getId();
    node.setProperty("foo","bar");
    tx.success();
  }
   cluster.sync();
  try (Transaction tx=slave.beginTx()){
    slave.getNodeById(nodeId).setProperty("foo","bar2");
    tx.success();
  }
   try (Transaction tx=master.beginTx()){
    assertEquals("bar2",master.getNodeById(nodeId).getProperty("foo"));
    tx.success();
  }
 }
