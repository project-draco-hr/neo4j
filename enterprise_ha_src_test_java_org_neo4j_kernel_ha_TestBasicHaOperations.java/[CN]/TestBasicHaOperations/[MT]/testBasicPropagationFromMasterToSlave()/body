{
  clusterManager=new ClusterManager(clusterOfSize(3),dir.directory("propagation",true),stringMap(tx_push_factor.name(),"2"));
  clusterManager.start();
  ClusterManager.ManagedCluster cluster=clusterManager.getDefaultCluster();
  cluster.await(ClusterManager.allSeesAllAsAvailable());
  long nodeId=0;
  Transaction tx=null;
  HighlyAvailableGraphDatabase master=cluster.getMaster();
  try {
    tx=master.beginTx();
    Node node=master.createNode();
    node.setProperty("Hello","World");
    nodeId=node.getId();
    tx.success();
  }
 catch (  Throwable ex) {
    ex.printStackTrace();
    Assert.fail();
  }
 finally {
    tx.finish();
  }
  HighlyAvailableGraphDatabase slave1=cluster.getAnySlave();
  String value=slave1.getNodeById(nodeId).getProperty("Hello").toString();
  logger.getLogger().info("Hello=" + value);
  assertEquals("World",value);
  HighlyAvailableGraphDatabase slave2=cluster.getAnySlave(slave1);
  value=slave2.getNodeById(nodeId).getProperty("Hello").toString();
  logger.getLogger().info("Hello=" + value);
  assertEquals("World",value);
}
