{
  nodeCommands.put(command.getKey(),command);
  NodeLabels labelFieldBefore=parseLabelsField(command.getBefore());
  NodeLabels labelFieldAfter=parseLabelsField(command.getAfter());
  if (!(labelFieldBefore.isInlined() && labelFieldAfter.isInlined() && command.getBefore().getLabelField() == command.getAfter().getLabelField())) {
    long[] labelsBefore=labelFieldBefore.getIfLoaded();
    long[] labelsAfter=labelFieldAfter.getIfLoaded();
    if (labelsBefore != null && labelsAfter != null) {
      labelUpdates.add(NodeLabelUpdate.labelChanges(command.getKey(),labelsBefore,labelsAfter));
    }
  }
  return true;
}
