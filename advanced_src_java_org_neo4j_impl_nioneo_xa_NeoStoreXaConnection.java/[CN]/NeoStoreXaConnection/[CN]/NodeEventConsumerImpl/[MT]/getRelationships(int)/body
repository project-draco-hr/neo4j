{
  validate();
  if (xaCon.getNeoTransaction().nodeDeleted(nodeId) || xaCon.getNeoTransaction().nodeCreated(nodeId)) {
    return new RelationshipData[0];
  }
  RelationshipData relData[]=nodeStore.getRelationships(nodeId);
  List<RelationshipData> relList=new ArrayList<RelationshipData>();
  for (int i=0; i < relData.length; i++) {
    if (!xaCon.getNeoTransaction().relationshipDeleted(relData[i].getId())) {
      relList.add(relData[i]);
    }
  }
  if (relList.size() == relData.length) {
    return relData;
  }
  return relList.toArray(new RelationshipData[relList.size()]);
}
