{
  db=(GraphDatabaseAPI)new TestGraphDatabaseFactory().newImpermanentDatabase();
  registerProcedures(db);
  manager=new EnterpriseAuthManager(new InMemoryUserRepository(),new InMemoryRoleRepository(),new BasicPasswordPolicy(),systemUTC(),true);
  manager.newUser("admin","abc",false);
  manager.newUser("schema","abc",false);
  manager.newUser("writer","abc",false);
  manager.newUser("reader","123",false);
  manager.newRole(PredefinedRolesBuilder.ADMIN,"admin");
  manager.newRole(PredefinedRolesBuilder.ARCHITECT,"architect");
  manager.newRole(PredefinedRolesBuilder.PUBLISHER,"publisher");
  manager.newRole(PredefinedRolesBuilder.READER,"reader");
  readSubject=manager.login("reader","123");
  writeSubject=manager.login("publisher","abc");
  schemaSubject=manager.login("architect","abc");
  adminSubject=manager.login("admin","abc");
  db.execute("UNWIND range(0,2) AS number CREATE (:Node {number:number})");
}
