{
  db=(GraphDatabaseAPI)new TestEnterpriseGraphDatabaseFactory().newImpermanentDatabase();
  manager=new EnterpriseAuthManager(new InMemoryUserRepository(),new InMemoryRoleRepository(),new BasicPasswordPolicy(),systemUTC(),true);
  manager.init();
  manager.start();
  manager.newUser("noneSubject","abc",false);
  manager.newUser("adminSubject","abc",false);
  manager.newUser("schemaSubject","abc",false);
  manager.newUser("readWriteSubject","abc",false);
  manager.newUser("readSubject","123",false);
  manager.addUserToRole("adminSubject",PredefinedRolesBuilder.ADMIN);
  manager.newRole(PredefinedRolesBuilder.ARCHITECT,"schemaSubject");
  manager.newRole(PredefinedRolesBuilder.PUBLISHER,"readWriteSubject");
  manager.newRole(PredefinedRolesBuilder.READER,"readSubject");
  noneSubject=manager.login("noneSubject","abc");
  readSubject=manager.login("readSubject","123");
  writeSubject=manager.login("readWriteSubject","abc");
  schemaSubject=manager.login("schemaSubject","abc");
  adminSubject=manager.login("adminSubject","abc");
  db.execute("UNWIND range(0,2) AS number CREATE (:Node {number:number})");
}
