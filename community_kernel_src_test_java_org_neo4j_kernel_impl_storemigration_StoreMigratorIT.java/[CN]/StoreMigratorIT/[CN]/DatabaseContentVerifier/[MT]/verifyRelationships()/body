{
  Node currentNode=database.getReferenceNode();
  int traversalCount=0;
  Transaction tx=database.beginTx();
  while (currentNode.hasRelationship(Direction.OUTGOING)) {
    traversalCount++;
    Relationship relationship=currentNode.getRelationships(Direction.OUTGOING).iterator().next();
    verifyProperties(relationship);
    currentNode=relationship.getEndNode();
  }
  tx.success();
  tx.finish();
  assertEquals(500,traversalCount);
}
