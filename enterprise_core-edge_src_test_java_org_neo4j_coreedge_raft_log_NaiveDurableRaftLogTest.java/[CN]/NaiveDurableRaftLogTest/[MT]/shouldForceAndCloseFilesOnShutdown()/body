{
  FileSystemAbstraction fsa=mock(FileSystemAbstraction.class);
  StoreFileChannel entriesChannel=mock(StoreFileChannel.class);
  StoreFileChannel contentChannel=mock(StoreFileChannel.class);
  StoreFileChannel commitChannel=mock(StoreFileChannel.class);
  File directory=new File(".");
  File entriesFile=new File(directory,"entries.log");
  File contentFile=new File(directory,"content.log");
  File commitFile=new File(directory,"commit.log");
  when(fsa.open(Matchers.eq(entriesFile),anyString())).thenReturn(entriesChannel);
  when(fsa.open(Matchers.eq(contentFile),anyString())).thenReturn(contentChannel);
  when(fsa.open(Matchers.eq(commitFile),anyString())).thenReturn(commitChannel);
  NaiveDurableRaftLog log=new NaiveDurableRaftLog(fsa,directory,new DummyRaftableContentSerializer());
  log.shutdown();
  verify(entriesChannel).force(anyBoolean());
  verify(entriesChannel).close();
  verify(contentChannel).force(anyBoolean());
  verify(contentChannel).close();
  verify(commitChannel).force(anyBoolean());
  verify(commitChannel).close();
}
