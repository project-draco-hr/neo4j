{
  GraphDatabaseAPI graphDatabaseAPI=getServer().getDb();
  ServerExecutionEngine engine=getEngine();
  if (engine.isAutoCommitQuery(query)) {
    TransactionManager manager=graphDatabaseAPI.getDependencyResolver().resolveDependency(TransactionManager.class);
    Transaction tx=manager.suspend();
    try {
      return super.getResult(query,parameters);
    }
  finally {
      manager.resume(tx);
    }
  }
 else {
    return super.getResult(query,parameters);
  }
}
