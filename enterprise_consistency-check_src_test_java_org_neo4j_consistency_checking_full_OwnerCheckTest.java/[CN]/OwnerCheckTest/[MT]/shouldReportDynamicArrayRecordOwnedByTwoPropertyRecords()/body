{
  RecordAccessStub records=new RecordAccessStub();
  OwnerCheck decorator=new OwnerCheck(true,DynamicStore.ARRAY);
  RecordCheck<PropertyRecord,ConsistencyReport.PropertyConsistencyReport> propChecker=decorator.decoratePropertyChecker(dummyPropertyChecker());
  DynamicRecord dynamic=records.add(inUse(array(new DynamicRecord(42))));
  PropertyRecord property1=records.add(inUse(new PropertyRecord(1)));
  PropertyRecord property2=records.add(inUse(new PropertyRecord(2)));
  PropertyKeyTokenRecord key=records.add(inUse(new PropertyKeyTokenRecord(10)));
  property1.addPropertyBlock(propertyBlock(key,PropertyType.ARRAY,dynamic.getId()));
  property2.addPropertyBlock(propertyBlock(key,PropertyType.ARRAY,dynamic.getId()));
  ConsistencyReport.PropertyConsistencyReport report1=check(ConsistencyReport.PropertyConsistencyReport.class,propChecker,property1,records);
  ConsistencyReport.PropertyConsistencyReport report2=check(ConsistencyReport.PropertyConsistencyReport.class,propChecker,property2,records);
  verifyOnlyReferenceDispatch(report1);
  verify(report2).arrayMultipleOwners(property1);
  verifyOnlyReferenceDispatch(report2);
}
