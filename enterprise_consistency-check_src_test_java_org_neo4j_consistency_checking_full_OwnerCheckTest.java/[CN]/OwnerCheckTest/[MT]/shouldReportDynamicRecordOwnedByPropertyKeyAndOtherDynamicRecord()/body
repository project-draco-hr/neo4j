{
  RecordAccessStub records=new RecordAccessStub();
  OwnerCheck decorator=new OwnerCheck(true,DynamicStore.PROPERTY_KEY);
  RecordCheck<DynamicRecord,ConsistencyReport.DynamicConsistencyReport> dynChecker=decorator.decorateDynamicChecker(RecordType.PROPERTY_KEY_NAME,dummyDynamicCheck(configureDynamicStore(50),DynamicStore.PROPERTY_KEY));
  RecordCheck<PropertyKeyTokenRecord,ConsistencyReport.PropertyKeyConsistencyReport> keyCheck=decorator.decoratePropertyKeyTokenChecker(dummyPropertyKeyCheck());
  DynamicRecord owned=records.addKeyName(inUse(string(new DynamicRecord(42))));
  DynamicRecord dynamic=records.addKeyName(inUse(string(new DynamicRecord(1))));
  PropertyKeyTokenRecord key=records.add(inUse(new PropertyKeyTokenRecord(1)));
  dynamic.setNextBlock(owned.getId());
  key.setNameId((int)owned.getId());
  ConsistencyReport.PropertyKeyConsistencyReport keyReport=check(ConsistencyReport.PropertyKeyConsistencyReport.class,keyCheck,key,records);
  ConsistencyReport.DynamicConsistencyReport dynReport=check(ConsistencyReport.DynamicConsistencyReport.class,dynChecker,dynamic,records);
  verifyOnlyReferenceDispatch(keyReport);
  verify(dynReport).nextMultipleOwners(key);
  verifyOnlyReferenceDispatch(dynReport);
}
