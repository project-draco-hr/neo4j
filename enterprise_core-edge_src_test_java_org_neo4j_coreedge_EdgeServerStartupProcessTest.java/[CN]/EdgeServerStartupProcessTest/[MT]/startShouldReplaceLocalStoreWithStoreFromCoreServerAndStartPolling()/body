{
  final Map<String,String> params=new HashMap<>();
  params.put(new GraphDatabaseSettings.BoltConnector("bolt").type.name(),"BOLT");
  params.put(new GraphDatabaseSettings.BoltConnector("bolt").enabled.name(),"true");
  params.put(new GraphDatabaseSettings.BoltConnector("bolt").address.name(),"127.0.0.1:" + 8001);
  Config config=new Config(params);
  StoreFetcher storeFetcher=mock(StoreFetcher.class);
  LocalDatabase localDatabase=mock(LocalDatabase.class);
  CoreMember coreMember=new CoreMember(UUID.randomUUID());
  EdgeTopologyService hazelcastTopology=mock(EdgeTopologyService.class);
  ClusterTopology clusterTopology=mock(ClusterTopology.class);
  when(hazelcastTopology.currentTopology()).thenReturn(clusterTopology);
  when(clusterTopology.coreMembers()).thenReturn(asSet(coreMember));
  when(localDatabase.isEmpty()).thenReturn(true);
  DataSourceManager dataSourceManager=mock(DataSourceManager.class);
  Lifecycle txPulling=mock(Lifecycle.class);
  EdgeServerStartupProcess edgeServerStartupProcess=new EdgeServerStartupProcess(storeFetcher,localDatabase,txPulling,dataSourceManager,new AlwaysChooseFirstServer(hazelcastTopology),new ConstantTimeRetryStrategy(1,MILLISECONDS),NullLogProvider.getInstance(),mock(EdgeTopologyService.class),config);
  edgeServerStartupProcess.start();
  verify(localDatabase).copyStoreFrom(coreMember,storeFetcher);
  verify(dataSourceManager).start();
  verify(txPulling).start();
}
