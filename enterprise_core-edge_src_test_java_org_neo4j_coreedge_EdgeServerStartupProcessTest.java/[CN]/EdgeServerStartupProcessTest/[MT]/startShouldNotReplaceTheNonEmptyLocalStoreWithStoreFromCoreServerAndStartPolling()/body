{
  StoreFetcher storeFetcher=mock(StoreFetcher.class);
  when(storeFetcher.storeId(any(CoreMember.class))).thenReturn(new StoreId(1,2,3,4));
  LocalDatabase localDatabase=mock(LocalDatabase.class);
  when(localDatabase.storeId()).thenReturn(new StoreId(5,6,7,8));
  CoreMember coreMember=new CoreMember(UUID.randomUUID());
  TopologyService hazelcastTopology=mock(TopologyService.class);
  ClusterTopology clusterTopology=mock(ClusterTopology.class);
  when(hazelcastTopology.currentTopology()).thenReturn(clusterTopology);
  when(clusterTopology.coreMembers()).thenReturn(asSet(coreMember));
  when(localDatabase.isEmpty()).thenReturn(false);
  DataSourceManager dataSourceManager=mock(DataSourceManager.class);
  Lifecycle txPulling=mock(Lifecycle.class);
  EdgeServerStartupProcess edgeServerStartupProcess=new EdgeServerStartupProcess(storeFetcher,localDatabase,txPulling,dataSourceManager,new AlwaysChooseFirstServer(hazelcastTopology),new ConstantTimeRetryStrategy(1,MILLISECONDS),NullLogProvider.getInstance(),mock(EdgeTopologyService.class),new Config(Collections.emptyMap()));
  try {
    edgeServerStartupProcess.start();
    fail("shoud have thrown");
  }
 catch (  IllegalStateException ex) {
  }
  verify(dataSourceManager).start();
  verify(storeFetcher).storeId(any());
  verify(localDatabase).isEmpty();
  verify(localDatabase).storeId();
  verifyNoMoreInteractions(localDatabase,dataSourceManager,storeFetcher);
  verifyZeroInteractions(txPulling);
}
