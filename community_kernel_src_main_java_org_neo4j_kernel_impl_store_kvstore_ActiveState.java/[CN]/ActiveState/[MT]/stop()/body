{
  if (hasChanges()) {
    throw new IllegalStateException("Cannot stop while there are changes.");
  }
  close();
  return new DeadState.Stopped<>(keyFormat(),factory());
}
