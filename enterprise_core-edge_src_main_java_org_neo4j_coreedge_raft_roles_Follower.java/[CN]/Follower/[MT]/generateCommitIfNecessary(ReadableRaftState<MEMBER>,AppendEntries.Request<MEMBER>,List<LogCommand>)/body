{
  long localCommit=ctx.entryLog().commitIndex();
  long newCommitIndex=min(req.leaderCommit(),req.prevLogIndex() + req.entries().length);
  if (newCommitIndex > localCommit) {
    commands.add(new CommitCommand(newCommitIndex));
    return true;
  }
  return false;
}
