{
  writer=mock(LuceneIndexWriter.class);
  snapshotPolicy=mock(SnapshotDeletionPolicy.class);
  luceneSnapshot=mock(IndexCommit.class);
  IndexWriterConfig config=new IndexWriterConfig(Version.LUCENE_36,null);
  when(writer.getIndexDeletionPolicy()).thenReturn(snapshotPolicy);
  when(snapshotPolicy.snapshot(anyString())).thenReturn(luceneSnapshot);
}
