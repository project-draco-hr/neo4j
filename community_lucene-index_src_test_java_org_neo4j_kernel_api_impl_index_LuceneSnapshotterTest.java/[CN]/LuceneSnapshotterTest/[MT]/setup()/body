{
  writer=mock(IndexWriter.class);
  snapshotPolicy=mock(SnapshotDeletionPolicy.class);
  luceneSnapshot=mock(IndexCommit.class);
  IndexWriterConfig config=new IndexWriterConfig(Version.LUCENE_36,null);
  config.setIndexDeletionPolicy(snapshotPolicy);
  when(writer.getConfig()).thenReturn(config);
  when(snapshotPolicy.snapshot(anyString())).thenReturn(luceneSnapshot);
}
