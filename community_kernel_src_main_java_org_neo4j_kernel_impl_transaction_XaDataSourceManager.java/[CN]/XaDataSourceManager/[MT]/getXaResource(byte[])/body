{
  XaDataSource dataSource=branchIdMapping.get(UTF8.decode(branchId));
  if (dataSource == null) {
    throw new TransactionFailureException("No mapping found for branchId[0x" + UTF8.decode(branchId) + "]");
  }
  return dataSource.getXaConnection().getXaResource();
}
