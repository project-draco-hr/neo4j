{
  ProcedureSignature signature=proc.signature();
  QualifiedName name=signature.name();
  String descriptiveName=signature.toString();
  validateSignature(descriptiveName,signature.inputSignature(),"input");
  validateSignature(descriptiveName,signature.outputSignature(),"output");
  CallableProcedure oldImplementation=procedures.get(name);
  if (oldImplementation == null) {
    procedures.put(name,proc);
  }
 else {
    if (overrideCurrentImplementation) {
      procedures.put(name,proc);
    }
 else {
      throw new ProcedureException(Status.Procedure.ProcedureRegistrationFailed,"Unable to register procedure, because the name `%s` is already in use.",name);
    }
  }
}
