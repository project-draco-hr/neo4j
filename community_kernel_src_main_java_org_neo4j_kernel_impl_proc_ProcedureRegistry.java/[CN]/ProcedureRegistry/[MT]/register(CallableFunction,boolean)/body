{
  FunctionSignature signature=function.signature();
  QualifiedName name=signature.name();
  String descriptiveName=signature.toString();
  validateSignature(descriptiveName,signature.inputSignature(),"input");
  validateSignature(descriptiveName,Collections.singletonList(signature.outputSignature()),"output");
  CallableFunction oldImplementation=functions.get(name);
  if (oldImplementation == null) {
    functions.put(name,function);
  }
 else {
    if (overrideCurrentImplementation) {
      functions.put(name,function);
    }
 else {
      throw new ProcedureException(Status.Procedure.ProcedureRegistrationFailed,"Unable to register function, because the name `%s` is already in use.",name);
    }
  }
}
