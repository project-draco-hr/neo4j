{
  MockedIdGeneratorFactory actual=new MockedIdGeneratorFactory();
  ControllableSnapshotSupplier boundaries=new ControllableSnapshotSupplier();
  BufferingIdGeneratorFactory bufferingIdGeneratorFactory=new BufferingIdGeneratorFactory(actual,boundaries,IdReuseEligibility.ALWAYS,new CommunityIdTypeConfigurationProvider());
  IdGenerator idGenerator=bufferingIdGeneratorFactory.open(new File("doesnt-matter"),10,IdType.STRING_BLOCK,0,Integer.MAX_VALUE);
  idGenerator.freeId(7);
  verifyNoMoreInteractions(actual.get(IdType.STRING_BLOCK));
  bufferingIdGeneratorFactory.maintenance();
  verifyNoMoreInteractions(actual.get(IdType.STRING_BLOCK));
  boundaries.setMostRecentlyReturnedSnapshotToAllClosed();
  bufferingIdGeneratorFactory.maintenance();
  verify(actual.get(IdType.STRING_BLOCK)).freeId(7);
}
