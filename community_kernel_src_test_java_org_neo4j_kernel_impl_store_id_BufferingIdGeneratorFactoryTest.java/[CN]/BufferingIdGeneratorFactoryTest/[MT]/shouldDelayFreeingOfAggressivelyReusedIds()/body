{
  MockedIdGeneratorFactory actual=new MockedIdGeneratorFactory();
  CommunityIdTypeConfigurationProvider idTypeConfigurationProvider=new CommunityIdTypeConfigurationProvider();
  BufferingIdGeneratorFactory bufferingIdGeneratorFactory=new BufferingIdGeneratorFactory(actual,idTypeConfigurationProvider);
  ControllableSnapshotSupplier boundaries=new ControllableSnapshotSupplier();
  IdGenerator idGenerator=bufferingIdGeneratorFactory.open(new File("doesnt-matter"),10,IdType.STRING_BLOCK,0);
  bufferingIdGeneratorFactory.initialize(boundaries,IdReuseEligibility.ALWAYS);
  idGenerator.freeId(7);
  verifyNoMoreInteractions(actual.get(IdType.STRING_BLOCK));
  bufferingIdGeneratorFactory.maintenance();
  verifyNoMoreInteractions(actual.get(IdType.STRING_BLOCK));
  boundaries.setMostRecentlyReturnedSnapshotToAllClosed();
  bufferingIdGeneratorFactory.maintenance();
  verify(actual.get(IdType.STRING_BLOCK)).freeId(7);
}
