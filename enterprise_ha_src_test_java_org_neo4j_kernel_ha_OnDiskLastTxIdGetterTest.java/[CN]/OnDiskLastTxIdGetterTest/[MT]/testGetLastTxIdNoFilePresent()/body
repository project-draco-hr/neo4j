{
  InternalAbstractGraphDatabase graphdb=mock(InternalAbstractGraphDatabase.class);
  DependencyResolver resolver=mock(DependencyResolver.class);
  NeoStoreProvider provider=mock(NeoStoreProvider.class);
  NeoStore neoStore=mock(NeoStore.class);
  when(graphdb.getDependencyResolver()).thenReturn(resolver);
  when(resolver.resolveDependency(NeoStoreProvider.class)).thenReturn(provider);
  when(provider.evaluate()).thenReturn(neoStore);
  when(neoStore.getLastCommittedTx()).thenReturn(13L);
  OnDiskLastTxIdGetter getter=new OnDiskLastTxIdGetter(graphdb);
  assertEquals(13L,getter.getLastTxId());
}
