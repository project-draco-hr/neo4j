{
  PropertyStore propStore=getPropertyStore();
  Map<String,Object> properties=new HashMap<String,Object>();
  while (nextProp != Record.NO_NEXT_PROPERTY.intValue()) {
    PropertyRecord propRecord=propStore.getRecord(nextProp);
    for (    PropertyBlock propBlock : propRecord.getPropertyBlocks()) {
      String key=indexHolder.getStringKey(propBlock.getKeyIndexId());
      PropertyData propertyData=propBlock.newPropertyData(propRecord);
      Object value=propertyData.getValue() != null ? propertyData.getValue() : propBlock.getType().getValue(propBlock,getPropertyStore());
      properties.put(key,value);
    }
    nextProp=propRecord.getNextProp();
  }
  return properties;
}
