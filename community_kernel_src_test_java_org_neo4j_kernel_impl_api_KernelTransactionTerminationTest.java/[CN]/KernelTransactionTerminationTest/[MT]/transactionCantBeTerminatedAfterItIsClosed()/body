{
  runTwoThreads(new Consumer<TestKernelTransaction>(){
    @Override public void accept(    TestKernelTransaction tx){
      tx.markForTermination(Status.Transaction.MarkedAsFailed);
    }
  }
,new Consumer<TestKernelTransaction>(){
    @Override public void accept(    TestKernelTransaction tx){
      close(tx);
      assertNull(tx.getReasonIfTerminated());
      tx.initialize();
    }
  }
);
}
