{
  Set<ReadWriteRouteEndPoint> writeEndpoints=emptySet();
  Set<ReadWriteRouteEndPoint> readEndpoints=emptySet();
  Set<ReadWriteRouteEndPoint> routeEndpoints=emptySet();
  try {
    readEndpoints=readEndpoints();
    routeEndpoints=routeEndpoints();
    AdvertisedSocketAddress leaderAddress=discoveryService.coreServers().find(leaderLocator.getLeader()).getBoltServer();
    writeEndpoints=writeEndpoints(leaderAddress);
  }
 catch (  NoLeaderFoundException|NoKnownAddressesException e) {
    log.debug("No write server found. This can happen during a leader switch.");
  }
  return wrapUpEndpoints(routeEndpoints,writeEndpoints,readEndpoints);
}
