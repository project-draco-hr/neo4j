{
  try {
    Class<?> beanClass=Thread.currentThread().getContextClassLoader().loadClass("com.sun.management.OperatingSystemMXBean");
    Method method=beanClass.getMethod("getTotalPhysicalMemorySize");
    return (long)method.invoke(ManagementFactory.getOperatingSystemMXBean());
  }
 catch (  Exception|LinkageError e) {
    return -1;
  }
}
