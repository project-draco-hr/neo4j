{
  Collection<DynamicRecord> beforeRecords=serialize(rule,id,true,true);
  Collection<DynamicRecord> afterRecords=serialize(rule,id,false,false);
  when(neoStores.getSchemaStore()).thenReturn(schemaStore);
  visitSchemaRuleCommand(storeApplier,new SchemaRuleCommand(beforeRecords,afterRecords,rule));
  verify(schemaStore).updateRecord(first(afterRecords));
}
