{
  Collection<DynamicRecord> beforeRecords=serialize(rule,id,false,false);
  Collection<DynamicRecord> afterRecords=serialize(rule,id,true,true);
  when(neoStore.getSchemaStore()).thenReturn(store);
  SchemaRuleCommand command=new SchemaRuleCommand();
  command.init(beforeRecords,afterRecords,rule);
  executor.visitSchemaRuleCommand(command);
  verify(store).updateRecord(first(afterRecords));
  verify(indexes).createIndex(rule);
}
