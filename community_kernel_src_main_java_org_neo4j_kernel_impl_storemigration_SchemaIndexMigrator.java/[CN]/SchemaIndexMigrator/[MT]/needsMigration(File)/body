{
  try {
    if (upgradableDatabase.hasCurrentVersion(pageCache,storeDir)) {
      return false;
    }
  }
 catch (  NoSuchFileException ignore) {
    return false;
  }
switch (versionToUpgradeFrom(storeDir)) {
case Legacy19Store.LEGACY_VERSION:
    return false;
case Legacy20Store.LEGACY_VERSION:
case Legacy21Store.LEGACY_VERSION:
  return true;
case Legacy22Store.LEGACY_VERSION:
return false;
default :
throw new IllegalStateException("Unknown version to upgrade from: " + versionToUpgradeFrom(storeDir));
}
}
