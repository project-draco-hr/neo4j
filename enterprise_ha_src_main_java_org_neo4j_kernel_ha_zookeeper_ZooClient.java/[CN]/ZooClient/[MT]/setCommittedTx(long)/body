{
  waitForSyncConnected();
  this.committedTx=tx;
  int master=getMasterForTx(tx);
  this.masterForCommittedTx=master;
  String root=getRoot();
  String path=root + "/" + machineId+ "_"+ sequenceNr;
  byte[] data=dataRepresentingMe(tx,master);
  try {
    zooKeeper.setData(path,data,-1);
  }
 catch (  KeeperException e) {
    throw new ZooKeeperException("Unable to set current tx",e);
  }
catch (  InterruptedException e) {
    Thread.interrupted();
    throw new ZooKeeperException("Interrupted...",e);
  }
}
