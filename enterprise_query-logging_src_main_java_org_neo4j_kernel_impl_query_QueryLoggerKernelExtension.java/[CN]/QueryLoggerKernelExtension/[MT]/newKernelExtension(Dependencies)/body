{
  Config config=the.config();
  if (config.get(GraphDatabaseSettings.log_queries)) {
    File logfile=config.get(GraphDatabaseSettings.log_queries_filename);
    long thresholdMillis=config.get(GraphDatabaseSettings.log_queries_threshold);
    LoggerFactory loggerFactory=new LoggerFactory(the.filesystem(),logfile);
    QueryLogger logger=new QueryLogger(Clock.SYSTEM_CLOCK,loggerFactory,thresholdMillis);
    the.monitoring().addMonitorListener(logger);
    return logger;
  }
  return null;
}
