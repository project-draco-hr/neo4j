{
  String query=session.remove(QUERY_STRING);
  Long startTime=session.remove(START_TIME);
  if (startTime != null) {
    long time=clock.currentTimeMillis() - startTime;
    Map<String,Object> params=session.remove(PARAMS);
    if (time >= thresholdMillis) {
      log.info("%d ms: %s - %s - %s",time,session.toString(),query == null ? "<unknown query>" : query,mapToString(params));
    }
  }
}
