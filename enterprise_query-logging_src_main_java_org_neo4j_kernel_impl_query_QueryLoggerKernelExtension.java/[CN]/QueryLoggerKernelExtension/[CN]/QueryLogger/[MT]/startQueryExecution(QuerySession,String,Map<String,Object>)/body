{
  long startTime=clock.currentTimeMillis();
  Object oldTime=session.put(START_TIME,startTime);
  Object oldQuery=session.put(QUERY_STRING,query);
  if (logQueryParameters) {
    session.put(PARAMS,parameters);
  }
  if (oldTime != null || oldQuery != null) {
    logger.warn(String.format("Concurrent queries for session %s: \"%s\" @ %s and \"%s\" @ %s",session,oldQuery,oldTime,query,startTime));
  }
}
