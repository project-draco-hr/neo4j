{
  long startTime=clock.millis();
  Object oldTime=session.put(START_TIME,startTime);
  Object oldQuery=session.put(QUERY_STRING,query);
  if (logQueryParameters) {
    session.put(PARAMS,parameters);
  }
  if (oldTime != null || oldQuery != null) {
    log.error("Concurrent stream for session %s: \"%s\" @ %s and \"%s\" @ %s",session.toString(),oldQuery,oldTime,query,startTime);
  }
}
