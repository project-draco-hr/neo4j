{
  String query=session.remove(QUERY_STRING);
  Long startTime=session.remove(START_TIME);
  Map<String,Object> params=session.remove(PARAMS);
  if (startTime != null) {
    long time=clock.currentTimeMillis() - startTime;
    log.error(String.format("%d ms: %s - %s - %s",time,session.toString(),query == null ? "<unknown query>" : query,mapToString(params)),failure);
  }
}
