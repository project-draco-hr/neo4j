{
  if (!(ds instanceof NeoStoreXaDataSource) || !(options instanceof String)) {
    return null;
  }
  String[] config=((String)options).split(";");
  String mode=config[0];
  Map<String,String> parameters=new HashMap<String,String>();
  for (int i=1; i < config.length; i++) {
    String[] parts=config[i].split("=");
    parameters.put(parts[0].toLowerCase(),parts.length == 1 ? "true" : parts[1]);
  }
  StringLogger logger=dependencyResolver.resolveDependency(StringLogger.class);
  DiffCheck check=createChecker(mode,logger);
  if (check == null) {
    return null;
  }
 else {
    String log=parameters.get("log");
    return new CheckingTransactionInterceptor(check,(NeoStoreXaDataSource)ds,logger,log);
  }
}
