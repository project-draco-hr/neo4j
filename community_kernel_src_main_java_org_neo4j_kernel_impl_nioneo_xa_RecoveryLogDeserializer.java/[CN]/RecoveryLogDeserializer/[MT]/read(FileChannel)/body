{
  handler.startLog();
  long position=channel.position();
  LogEntry entry;
  while ((entry=LogIoUtils.readEntry(scratch,channel,xaCommandReader)) != null) {
    if (entry instanceof LogEntry.Start) {
      ((LogEntry.Start)entry).setStartPosition(position);
    }
    entry.accept(handler);
    position=channel.position();
  }
  handler.endLog(true);
}
