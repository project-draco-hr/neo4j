def __init__(self, conffile):
    '\n        Parse configuration file.\n        '
    self.conffile = os.path.normpath(conffile)
    self.confdir = os.path.dirname(self.conffile)
    self.datadir = self.confdir
    self.tests = []
    self.globals = {}
    f = open(self.conffile)
    try:
        lines = Lines(f.readlines())
    finally:
        f.close()
    first = True
    while (not lines.eol()):
        s = lines.read_until('^%+$')
        s = [l for l in s if l]
        if (len(s) > 1):
            if (first and re.match('^%\\s*globals$', s[0])):
                self.globals = eval(' '.join(normalize_data(s[1:])))
                if ('datadir' in self.globals):
                    self.datadir = os.path.join(self.confdir, os.path.normpath(self.globals['datadir']))
            else:
                test = AsciiDocTest()
                test.parse(s[1:], self.confdir, self.datadir)
                self.tests.append(test)
                test.number = len(self.tests)
            first = False
