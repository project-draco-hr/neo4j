{
  WorkUnit<Material,W> result=stackEnd;
  while (batch != stackEnd) {
    WorkUnit<Material,W> tmp=batch.next;
    while (tmp == null) {
      Thread.yield();
      tmp=batch.next;
    }
    batch.next=result;
    result=batch;
    batch=tmp;
  }
  return result;
}
