{
  WorkUnit<Material,W> batch=reverse(stack.getAndSet(stackEnd));
  W combinedWork=combine(batch);
  if (combinedWork != null) {
    combinedWork.apply(material);
  }
  markAsDone(batch);
}
