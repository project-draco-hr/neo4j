{
  for (  User user : usersSnapshot.values) {
    assertValidUsername(user.name());
  }
synchronized (this) {
    clear();
    this.users.addAll(usersSnapshot.values);
    this.lastLoaded.set(usersSnapshot.timestamp);
    for (    User user : users) {
      usersByName.put(user.name(),user);
    }
  }
}
