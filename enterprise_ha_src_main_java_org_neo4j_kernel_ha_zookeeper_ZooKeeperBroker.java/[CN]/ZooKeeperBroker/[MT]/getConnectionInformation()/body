{
  Map<Integer,ZooKeeperMachine> machines=getZooClient().getAllMachines(false);
  Machine master=getZooClient().getMasterBasedOn(machines.values());
  ConnectionInformation[] result=new ConnectionInformation[machines.size()];
  int i=0;
  for (  Machine machine : machines.values()) {
    result[i++]=addJmxInfo(new ConnectionInformation(machine,master.equals(machine)));
  }
  return result;
}
