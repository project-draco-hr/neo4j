{
  Map<Integer,ZooKeeperMachine> machines=zooClient.getAllMachines(false);
  Machine master=zooClient.getMasterBasedOn(machines.values());
  ConnectionInformation[] result=new ConnectionInformation[machines.size()];
  int i=0;
  for (  Machine machine : machines.values()) {
    result[i++]=addJmxInfo(new ConnectionInformation(machine,master.equals(machine)));
  }
  return result;
}
