{
  StringBuilder result=new StringBuilder("ZooKeeper status: ").append(server).append(" ").append(command);
  String[] hostAndPort=server.split(":");
  if (hostAndPort.length != 2)   return result.append(" BAD SERVER STRING").toString();
  String host=hostAndPort[0];
  int port;
  try {
    port=Integer.parseInt(hostAndPort[1]);
  }
 catch (  NumberFormatException e) {
    return result.append(" BAD SERVER STRING").toString();
  }
  SocketAddress sockAddr=new InetSocketAddress(host,port);
  try {
    Socket soc=new Socket();
    soc.connect(sockAddr,FETCH_INFO_TIMEOUT);
    BufferedReader in=new BufferedReader(new InputStreamReader(soc.getInputStream()));
    try {
      PrintWriter out=new PrintWriter(soc.getOutputStream(),true);
      try {
        out.println(command);
        for (String line; (line=in.readLine()) != null; ) {
          result.append("\n  ").append(line);
        }
      }
  finally {
        out.close();
      }
    }
  finally {
      in.close();
    }
  }
 catch (  Exception e) {
    result.append(" FAILED: " + e);
  }
  return result.toString();
}
