{
  if (!connected) {
    wait(timeout);
    if (connected && executeOnSyncConnected != null) {
      keeper.sync("/",null,null);
      executeOnSyncConnected.run(keeper);
    }
  }
  if (!connected)   throw new RuntimeException("Connection not valid");
}
