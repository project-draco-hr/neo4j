def configuration(indata):
    config = {}
    for line in indata:
        line = line.strip()
        if (not line):
            continue
        try:
            (key, value) = line.split('=', 1)
        except:
            raise ValueError(('invalid config line: "%s"' % (line,)))
        config[key] = value
    return config
