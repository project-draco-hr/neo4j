{
  if (!relationshipExists(state,relationshipId)) {
    throw new EntityNotFoundException(EntityType.RELATIONSHIP,relationshipId);
  }
  legacyPropertyTrackers.relationshipDelete(relationshipId);
  final TxState txState=state.txState();
  if (txState.relationshipIsAddedInThisTx(relationshipId)) {
    txState.relationshipDoDeleteAddedInThisTx(relationshipId);
  }
 else {
    try {
      storeLayer.relationshipVisit(relationshipId,new RelationshipVisitor<RuntimeException>(){
        @Override public void visit(        long relId,        int type,        long startNode,        long endNode){
          txState.relationshipDoDelete(relId,type,startNode,endNode);
        }
      }
);
    }
 catch (    EntityNotFoundException e) {
      return;
    }
  }
}
