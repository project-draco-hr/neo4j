{
  if (state.hasTxStateWithChanges()) {
    DiffSets<Long> labelPropertyChanges=state.txState().indexUpdates(index,value);
    DiffSets<Long> nodes=state.txState().addedAndRemovedNodes();
    return nodes.augmentWithRemovals(labelPropertyChanges.augment(nodeIds));
  }
  return nodeIds;
}
