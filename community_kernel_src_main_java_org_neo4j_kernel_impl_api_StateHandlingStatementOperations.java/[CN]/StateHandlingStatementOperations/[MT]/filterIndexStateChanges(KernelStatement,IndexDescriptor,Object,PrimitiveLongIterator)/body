{
  if (state.hasTxStateWithChanges()) {
    DiffSets<Long> labelPropertyChanges=nodesWithLabelAndPropertyDiffSet(state,index,value);
    DiffSets<Long> nodes=state.txState().addedAndRemovedNodes();
    return nodes.augmentWithRemovals(labelPropertyChanges.augment(nodeIds));
  }
  return nodeIds;
}
