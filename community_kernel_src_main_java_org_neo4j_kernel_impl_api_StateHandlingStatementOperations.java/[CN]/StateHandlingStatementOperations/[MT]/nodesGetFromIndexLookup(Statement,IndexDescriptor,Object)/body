{
  if (state.hasTxStateWithChanges()) {
    TxState txState=state.txState();
    DiffSets<Long> diff=nodesWithLabelAndPropertyDiffSet(state,index,value);
    PrimitiveLongIterator committed=entityReadDelegate.nodesGetFromIndexLookup(state,index,value);
    return txState.nodesDeletedInTx().applyPrimitiveLongIterator(diff.applyPrimitiveLongIterator(committed));
  }
  return entityReadDelegate.nodesGetFromIndexLookup(state,index,value);
}
