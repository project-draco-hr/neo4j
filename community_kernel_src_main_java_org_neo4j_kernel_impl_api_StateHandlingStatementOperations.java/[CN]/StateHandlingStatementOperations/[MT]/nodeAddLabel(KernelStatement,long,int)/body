{
  if (nodeHasLabel(state,nodeId,labelId)) {
    return false;
  }
  state.txState().nodeDoAddLabel(labelId,nodeId);
  for (Iterator<DefinedProperty> properties=nodeGetAllProperties(state,nodeId); properties.hasNext(); ) {
    DefinedProperty property=properties.next();
    indexUpdateProperty(state,nodeId,labelId,property.propertyKeyId(),null,property.value());
  }
  return true;
}
