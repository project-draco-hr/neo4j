{
  try (NodeCursor node=nodeCursor(state,nodeId)){
    if (!node.next()) {
      throw new EntityNotFoundException(EntityType.NODE,nodeId);
    }
    try (LabelCursor labels=node.labels()){
      if (labels.seek(labelId)) {
        return false;
      }
    }
     state.txState().nodeDoAddLabel(labelId,nodeId);
    try (PropertyCursor properties=node.properties()){
      while (properties.next()) {
        DefinedProperty property=Property.property(properties.propertyKeyId(),properties.value());
        indexUpdateProperty(state,nodeId,labelId,property.propertyKeyId(),null,property);
      }
    }
     return true;
  }
 }
