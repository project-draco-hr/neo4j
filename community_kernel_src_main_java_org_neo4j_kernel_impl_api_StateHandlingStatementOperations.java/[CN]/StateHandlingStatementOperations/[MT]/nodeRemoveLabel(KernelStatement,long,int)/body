{
  if (!nodeHasLabel(state,nodeId,labelId)) {
    return false;
  }
  state.txState().nodeDoRemoveLabel(labelId,nodeId);
  for (Iterator<DefinedProperty> properties=nodeGetAllProperties(state,nodeId); properties.hasNext(); ) {
    DefinedProperty property=properties.next();
    indexUpdateProperty(state,nodeId,labelId,property.propertyKeyId(),property,null);
  }
  return true;
}
