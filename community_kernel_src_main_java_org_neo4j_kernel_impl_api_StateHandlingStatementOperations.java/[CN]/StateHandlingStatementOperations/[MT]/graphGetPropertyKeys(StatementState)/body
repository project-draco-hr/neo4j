{
  if (state.hasTxStateWithChanges()) {
    final Iterator<Property> properties=graphGetAllProperties(state);
    return new PrimitiveLongIterator(){
      @Override public long next(){
        return properties.next().propertyKeyId();
      }
      @Override public boolean hasNext(){
        return properties.hasNext();
      }
    }
;
  }
  return entityReadDelegate.graphGetPropertyKeys(state);
}
