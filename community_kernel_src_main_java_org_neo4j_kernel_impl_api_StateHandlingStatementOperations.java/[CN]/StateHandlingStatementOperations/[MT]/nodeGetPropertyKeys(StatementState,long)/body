{
  if (state.hasTxStateWithChanges()) {
    final Iterator<Property> properties=nodeGetAllProperties(state,nodeId);
    return new PrimitiveLongIterator(){
      @Override public long next(){
        return properties.next().propertyKeyId();
      }
      @Override public boolean hasNext(){
        return properties.hasNext();
      }
    }
;
  }
  return entityReadDelegate.nodeGetPropertyKeys(state,nodeId);
}
