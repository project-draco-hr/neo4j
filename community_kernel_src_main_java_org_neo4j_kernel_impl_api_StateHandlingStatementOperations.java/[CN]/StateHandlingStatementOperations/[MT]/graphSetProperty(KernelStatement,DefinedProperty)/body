{
  Property existingProperty=graphGetProperty(state,property.propertyKeyId());
  if (!existingProperty.isDefined()) {
    state.neoStoreTransaction.graphAddProperty(property.propertyKeyId(),property.value());
  }
 else {
    state.neoStoreTransaction.graphChangeProperty(property.propertyKeyId(),property.value());
  }
  state.txState().graphDoReplaceProperty(existingProperty,property);
  return existingProperty;
}
