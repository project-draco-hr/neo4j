{
  relTypes=deduplicate(relTypes);
  if (state.hasTxStateWithChanges()) {
    ReadableTxState txState=state.txState();
    RelationshipIterator stored;
    if (txState.nodeIsAddedInThisTx(nodeId)) {
      stored=RelationshipIterator.EMPTY;
    }
 else {
      stored=storeLayer.nodeListRelationships(state.getStoreStatement(),nodeId,direction,relTypes);
    }
    return txState.augmentRelationships(nodeId,direction,relTypes,stored);
  }
  return storeLayer.nodeListRelationships(state.getStoreStatement(),nodeId,direction,relTypes);
}
