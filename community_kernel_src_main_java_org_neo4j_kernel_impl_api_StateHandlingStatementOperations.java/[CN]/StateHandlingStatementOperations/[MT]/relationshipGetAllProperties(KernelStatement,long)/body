{
  if (state.hasTxStateWithChanges()) {
    if (state.txState().relationshipIsAddedInThisTx(relationshipId)) {
      return state.txState().addedAndChangedRelationshipProperties(relationshipId);
    }
    if (state.txState().relationshipIsDeletedInThisTx(relationshipId)) {
      throw new IllegalStateException("Relationship " + relationshipId + " has been deleted");
    }
    return state.txState().augmentRelationshipProperties(relationshipId,storeLayer.relationshipGetAllProperties(state.getStoreStatement(),relationshipId));
  }
 else {
    return storeLayer.relationshipGetAllProperties(state.getStoreStatement(),relationshipId);
  }
}
