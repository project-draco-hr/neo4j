{
  final RelationshipType R1=MyRelTypes.R1;
  final RelationshipType R2=MyRelTypes.R2;
  Node a1=createInstance("a1");
  Node b1=createInstance("b1");
  Relationship rel=a1.createRelationshipTo(b1,R1);
  rel=a1.createRelationshipTo(b1,R2);
  rel.setProperty("musthave",true);
  PatternNode pA=new PatternNode();
  PatternNode pB=new PatternNode();
  PatternRelationship pRel=pA.createRelationshipTo(pB);
  pRel.addPropertyExistConstraint("musthave");
  int count=0;
  for (  PatternMatch match : PatternMatcher.getMatcher().match(pA,a1)) {
    assertEquals(match.getNodeFor(pA),a1);
    assertEquals(match.getNodeFor(pB),b1);
    count++;
  }
  assertEquals(1,count);
}
