{
  boolean storeExists=storeExists();
  if (!storeExists && allowCreateEmpty) {
    return createNeoStore();
  }
  CountsTracker countsTracker=null;
  if (storeExists && countsStoreExists()) {
    countsTracker=newCountsStore();
  }
  return new NeoStore(neoStoreFileName,config,idGeneratorFactory,pageCache,fileSystemAbstraction,stringLogger,newRelationshipTypeTokenStore(),newLabelTokenStore(),newPropertyStore(),newRelationshipStore(),newNodeStore(),newSchemaStore(),newRelationshipGroupStore(),countsTracker,versionMismatchHandler,monitors);
}
