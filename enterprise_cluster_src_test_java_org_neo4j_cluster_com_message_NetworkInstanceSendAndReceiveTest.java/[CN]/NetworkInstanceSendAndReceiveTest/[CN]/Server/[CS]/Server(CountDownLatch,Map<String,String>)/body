{
  final Config conf=new Config(config,ClusterSettings.class);
  networkInstance=new NetworkInstance(new NetworkInstance.Configuration(){
    @Override public HostnamePort clusterServer(){
      return conf.get(ClusterSettings.cluster_server);
    }
    @Override public int defaultPort(){
      return 5001;
    }
  }
,new DevNullLoggingService());
  life.add(networkInstance);
  life.add(new LifecycleAdapter(){
    @Override public void start() throws Throwable {
      networkInstance.addMessageProcessor(new MessageProcessor(){
        @Override public boolean process(        Message<? extends MessageType> message){
          latch.countDown();
          processedMessage=true;
          return true;
        }
      }
);
    }
  }
);
}
