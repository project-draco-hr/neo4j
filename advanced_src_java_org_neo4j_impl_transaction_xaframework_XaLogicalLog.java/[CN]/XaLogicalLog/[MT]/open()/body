{
  fileChannel=new RandomAccessFile(fileName,"rw").getChannel();
  buffer=ByteBuffer.allocateDirect(9 + Xid.MAXGTRIDSIZE + Xid.MAXBQUALSIZE * 10);
  if (fileChannel.size() != 0) {
    doInternalRecovery();
  }
 else {
    scanIsComplete=true;
    logCreated=System.currentTimeMillis();
    buffer.clear();
    buffer.putLong(logCreated);
    buffer.flip();
    fileChannel.write(buffer);
  }
  buffer=null;
  writeBuffer=new LogBuffer(fileChannel);
}
