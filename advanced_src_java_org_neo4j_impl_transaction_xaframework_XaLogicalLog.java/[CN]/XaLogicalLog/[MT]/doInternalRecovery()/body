{
  log.info("Logical log is dirty, this means Neo hasn't been " + "shutdown properly. Recovering...");
  buffer.clear();
  buffer.limit(8);
  if (fileChannel.read(buffer) != 8) {
    log.info("Unable to read timestamp information, " + "asuming no records in logical log.");
    fileChannel.close();
    new File(fileName).renameTo(new File(fileName + "_unkown_timestamp_" + System.currentTimeMillis()+ ".log"));
    fileChannel=new RandomAccessFile(fileName,"rw").getChannel();
    return;
  }
  buffer.flip();
  logCreated=buffer.getLong();
  log.fine("Logical log created " + new java.util.Date(logCreated));
  long logEntriesFound=0;
  while (readEntry()) {
    logEntriesFound++;
  }
  scanIsComplete=true;
  log.fine("Internal recovery completed, scanned " + logEntriesFound + " log entries.");
  log.fine(xidIdentMap.size() + " uncompleted transactions found ");
  xaRm.checkXids();
  if (xidIdentMap.size() > 0) {
    log.info("Found " + xidIdentMap.size() + " prepared 2PC transactions.");
  }
  recoveredTxMap.clear();
}
