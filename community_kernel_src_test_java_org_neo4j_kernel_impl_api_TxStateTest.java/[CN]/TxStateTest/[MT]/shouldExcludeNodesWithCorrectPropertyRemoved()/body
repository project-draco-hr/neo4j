{
  long nodeId=1337l;
  int propertyKey=2;
  int propValue=42;
  DiffSets<Long> nodesWithChangedProp=new DiffSets<Long>(emptySet,asSet(nodeId));
  when(legacyState.getNodesWithChangedProperty(propertyKey,propValue)).thenReturn(nodesWithChangedProp);
  DiffSets<Long> diff=state.getNodesWithChangedProperty(propertyKey,propValue);
  assertThat(diff.getAdded(),equalTo(emptySet));
  assertThat(diff.getRemoved(),equalTo(asSet(nodeId)));
}
