{
  List<StoreMigrationParticipant> participantsNeedingUpgrade=new ArrayList<>();
  for (  StoreMigrationParticipant participant : participants) {
    try {
      if (participant.needsMigration(storeDirectory)) {
        participantsNeedingUpgrade.add(participant);
      }
    }
 catch (    IOException e) {
      throw new UnableToCheckForUpgradeException(participant.toString() + " for " + storeDirectory,e);
    }
  }
  return participantsNeedingUpgrade;
}
