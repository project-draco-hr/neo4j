{
  int currentState;
  do {
    currentState=clientState.get();
    if (isStopped(currentState)) {
      throw new LockClientStoppedException(client);
    }
  }
 while (!clientState.compareAndSet(currentState,incrementActiveClients(currentState)));
}
