{
  LevelData levelData=data.visitedNodes.get(hit.connectingNode);
  if (levelData.depth == 0) {
    Collection<LinkedList<Relationship>> result=new ArrayList<LinkedList<Relationship>>();
    result.add(new LinkedList<Relationship>());
    return result;
  }
  Collection<PathData> set=new ArrayList<PathData>();
  for (  Long rel : levelData.relsToHere) {
    set.add(new PathData(hit.connectingNode,new LinkedList<Relationship>(Arrays.asList(graphDb.getRelationshipById(rel)))));
  }
  for (int i=0; i < levelData.depth - 1; i++) {
    Collection<PathData> nextSet=new ArrayList<PathData>();
    for (    PathData entry : set) {
      int counter=0;
      Node otherNode=entry.rels.getFirst().getOtherNode(entry.node);
      LevelData otherLevelData=data.visitedNodes.get(otherNode);
      for (      Long rel : otherLevelData.relsToHere) {
        LinkedList<Relationship> rels=counter++ == 0 ? entry.rels : new LinkedList<Relationship>(entry.rels);
        rels.addFirst(graphDb.getRelationshipById(rel));
        nextSet.add(new PathData(otherNode,rels));
      }
    }
    set=nextSet;
  }
  return new CollectionWrapper<LinkedList<Relationship>,PathData>(set){
    @Override protected PathData objectToUnderlyingObject(    LinkedList<Relationship> list){
      throw new UnsupportedOperationException();
    }
    @Override protected LinkedList<Relationship> underlyingObjectToObject(    PathData object){
      return object.rels;
    }
  }
;
}
