{
  PrimitiveLongObjectMap<Factory<SocketProtocol>> availableVersions=longObjectMap();
  availableVersions.put(SocketProtocolV1.VERSION,new Factory<SocketProtocol>(){
    @Override public SocketProtocol newInstance(){
      return new SocketProtocolV1(NullLog.getInstance(),session);
    }
  }
);
  return new SocketTransportHandler.ProtocolChooser(availableVersions);
}
