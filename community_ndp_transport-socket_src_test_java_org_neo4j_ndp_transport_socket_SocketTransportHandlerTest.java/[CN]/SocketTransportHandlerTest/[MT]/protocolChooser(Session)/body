{
  PrimitiveLongObjectMap<Function<Channel,SocketProtocol>> availableVersions=longObjectMap();
  availableVersions.put(SocketProtocolV1.VERSION,new Function<Channel,SocketProtocol>(){
    @Override public SocketProtocol apply(    Channel channel){
      return new SocketProtocolV1(NullLogService.getInstance(),session,channel);
    }
  }
);
  return new SocketTransportHandler.ProtocolChooser(availableVersions);
}
