{
  PackedOutputArray output=new PackedOutputArray();
  Neo4jPack.Packer packer=new Neo4jPack.Packer(output);
  packer.packStructHeader(struct.size(),struct.signature());
  for (  DocStruct.Field field : struct) {
    packValueOf(field,packer);
  }
  packer.flush();
  byte[] bytes=output.bytes();
  PackedInputArray input=new PackedInputArray(bytes);
  Neo4jPack.Unpacker unpacker=new Neo4jPack.Unpacker(input);
  Object unpacked=unpacker.unpack();
  assertEquals(expectedClass.get(struct.name()),unpacked.getClass());
}
