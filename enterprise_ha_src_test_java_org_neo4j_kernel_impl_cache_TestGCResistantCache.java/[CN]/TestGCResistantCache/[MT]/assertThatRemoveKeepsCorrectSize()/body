{
  final int size=10;
  SneakyEntity entity=new SneakyEntity(0l,size){
    @Override void doThisBadStuffInSizeCall(){
      updateSize(size + 1);
      cache.updateSize(this,size + 1);
    }
  }
;
  cache.put(entity);
  entity.updateSize(size);
  cache.remove(entity.getId());
  assertEquals(0,cache.size());
}
