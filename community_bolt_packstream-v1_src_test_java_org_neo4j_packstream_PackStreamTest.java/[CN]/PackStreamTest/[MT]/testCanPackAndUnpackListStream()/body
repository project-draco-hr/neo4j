{
  Machine machine=new Machine();
  PackStream.Packer packer=machine.packer();
  packer.packListStreamHeader();
  packer.pack("eins");
  packer.pack("zwei");
  packer.pack("drei");
  packer.packEndOfStream();
  packer.flush();
  PackStream.Unpacker unpacker=newUnpacker(machine.output());
  assertThat(unpacker.unpackListHeader(),equalTo(PackStream.UNKNOWN_SIZE));
  assertThat(unpacker.unpackText(),equalTo("eins"));
  assertThat(unpacker.unpackText(),equalTo("zwei"));
  assertThat(unpacker.unpackText(),equalTo("drei"));
  unpacker.unpackEndOfStream();
}
