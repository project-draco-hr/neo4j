{
synchronized (resourceLockMap) {
    Iterator<RWLock> itr=resourceLockMap.values().iterator();
    int emptyLockCount=0;
    while (itr.hasNext()) {
      RWLock lock=itr.next();
      if (lock.getWriteCount() > 0 || lock.getReadCount() > 0) {
        lock.dumpStack();
      }
 else {
        if (lock.getWaitingThreadsCount() > 0) {
          lock.dumpStack();
        }
        emptyLockCount++;
      }
    }
    if (emptyLockCount > 0) {
      System.out.println("There are " + emptyLockCount + " empty locks");
    }
 else {
      System.out.println("There are no empty locks");
    }
  }
}
