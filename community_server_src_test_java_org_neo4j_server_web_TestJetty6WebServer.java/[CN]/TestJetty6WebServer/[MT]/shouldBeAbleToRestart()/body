{
  AbstractGraphDatabase db=mock(AbstractGraphDatabase.class);
  when(db.getDependencyResolver()).thenReturn(noLoggingDependencyResolver());
  WrappingNeoServer neoServer=new WrappingNeoServer(db);
  WebServer server=neoServer.getWebServer();
  try {
    server.setAddress("127.0.0.1");
    server.setPort(7878);
    server.addJAXRSPackages(Arrays.asList(new String[]{"org.neo4j.server.web"}),"/",null);
    server.start();
    server.stop();
    server.start();
  }
  finally {
    try {
      server.stop();
    }
 catch (    Throwable t) {
    }
  }
}
