{
  if (read == null) {
    if (buffer.readableBytes() >= bytesLeft) {
      read=buffer;
      bytesLeft=0;
    }
 else {
      read=ChannelBuffers.buffer(bytesLeft);
    }
  }
  if (bytesLeft > 0) {
    int toRead=Math.min(buffer.readableBytes(),bytesLeft);
    buffer.readBytes(read,toRead);
    bytesLeft-=toRead;
  }
  if (bytesLeft <= 0) {
    state=new ReadStreamsHeader(format.read(read));
  }
  return null;
}
