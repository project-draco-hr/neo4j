{
  if (!tmOk) {
    return;
  }
  if (cause == null) {
    throw new IllegalArgumentException("Must provide a cause for the kernel panic");
  }
  this.causeOfPanic=cause;
  this.tmOk=false;
  log.error("setting TM not OK. " + panicMessage,cause);
  kpe.generateEvent(ErrorState.TX_MANAGER_NOT_OK,causeOfPanic);
}
