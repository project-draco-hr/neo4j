{
  NamedThreadFactory threadFactory=new NamedThreadFactory("HTTP-Log-Rotator",true);
  ExecutorService rotationExecutor=Executors.newCachedThreadPool(threadFactory);
  Supplier<OutputStream> outputSupplier=new RotatingFileOutputStreamSupplier(fs,new File(logFile),rotationSize,0,rotationKeepNumber,rotationExecutor);
  FormattedLogProvider logProvider=FormattedLogProvider.withUTCTimeZone().toOutputStream(outputSupplier);
  asyncLogProcessingExecutor=Executors.newSingleThreadExecutor(new NamedThreadFactory("HTTP-Log-Writer"));
  asyncEventProcessor=new AsyncEvents<>(this,this);
  AsyncLogProvider asyncLogProvider=new AsyncLogProvider(asyncEventProcessor,logProvider);
  log=asyncLogProvider.getLog("REQUEST");
}
