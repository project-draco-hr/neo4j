{
  if (retries > 20) {
    close();
  }
  if (!acquireWriteBuffer()) {
    retries++;
    return false;
  }
  buffer.put(HeaderConstants.SLAVE_GREETING);
  buffer.putLong(xaDs.getRandomIdentifier());
  buffer.putLong(xaDs.getCreationTime());
  buffer.putLong(xaDs.getCurrentLogVersion());
  byte[] bytes=xaDsName.getBytes();
  buffer.putInt(bytes.length);
  buffer.put(bytes);
  buffer.flip();
  log("Setup greeting");
  setStatus(Status.SEND_GREETING);
  retries=0;
  return true;
}
