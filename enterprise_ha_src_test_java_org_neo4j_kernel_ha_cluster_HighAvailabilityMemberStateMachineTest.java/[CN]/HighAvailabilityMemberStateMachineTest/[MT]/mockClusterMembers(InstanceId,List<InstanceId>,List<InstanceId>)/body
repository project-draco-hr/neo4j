{
  ObservedClusterMembers members=mock(ObservedClusterMembers.class);
  List<ClusterMember> aliveMembers=new ArrayList<>(alive.size());
  List<ClusterMember> failedMembers=new ArrayList<>(failed.size());
  for (  InstanceId instanceId : alive) {
    ClusterMember otherMember=mock(ClusterMember.class);
    when(otherMember.getInstanceId()).thenReturn(instanceId);
    when(otherMember.isAlive()).thenReturn(true);
    aliveMembers.add(otherMember);
  }
  for (  InstanceId instanceId : failed) {
    ClusterMember otherMember=mock(ClusterMember.class);
    when(otherMember.getInstanceId()).thenReturn(instanceId);
    when(otherMember.isAlive()).thenReturn(false);
    failedMembers.add(otherMember);
  }
  ClusterMember thisMember=new ClusterMember(me);
  aliveMembers.add(thisMember);
  List<ClusterMember> allMembers=new ArrayList<>();
  allMembers.addAll(aliveMembers);
  allMembers.addAll(failedMembers);
  when(members.getMembers()).thenReturn(allMembers);
  when(members.getAliveMembers()).thenReturn(aliveMembers);
  return members;
}
