{
  long startNode=helper.createNode();
  long endNode=helper.createNode();
  String key="key_get";
  String value="value";
  String relationshipName1="related-to";
  String relationshipName2="dislikes";
  String jsonString=jsonRelationshipCreationSpecification(relationshipName1,endNode,key,value);
  ClientResponse createRelationshipResponse=httpPostCreateRelationship(startNode,jsonString);
  assertEquals(201,createRelationshipResponse.getStatus());
  String relationshipLocation1=createRelationshipResponse.getLocation().toString();
  jsonString=jsonRelationshipCreationSpecification(relationshipName2,endNode,key,value);
  createRelationshipResponse=httpPostCreateRelationship(startNode,jsonString);
  assertEquals(201,createRelationshipResponse.getStatus());
  String relationshipLocation2=createRelationshipResponse.getHeaders().get(HttpHeaders.LOCATION).get(0);
  String indexName="matrix";
  JaxRsResponse indexCreationResponse=httpPostIndexRelationshipRoot("{\"name\":\"" + indexName + "\"}");
  assertEquals(201,indexCreationResponse.getStatus());
  JaxRsResponse indexedRelationshipResponse=httpPostIndexRelationshipNameKeyValue(indexName,key,value,JsonHelper.createJsonFrom(relationshipLocation1),MediaType.APPLICATION_JSON_TYPE,MediaType.APPLICATION_JSON_TYPE);
  String indexLocation1=indexedRelationshipResponse.getHeaders().get(HttpHeaders.LOCATION).get(0);
  indexedRelationshipResponse=httpPostIndexRelationshipNameKeyValue(indexName,key,value,JsonHelper.createJsonFrom(relationshipLocation2),MediaType.APPLICATION_JSON_TYPE,MediaType.APPLICATION_JSON_TYPE);
  String indexLocation2=indexedRelationshipResponse.getHeaders().get(HttpHeaders.LOCATION).get(0);
  Map<String,String> uriToName=new HashMap<String,String>();
  uriToName.put(indexLocation1.toString(),relationshipName1);
  uriToName.put(indexLocation2.toString(),relationshipName2);
  ClientResponse response=Client.create().resource(functionalTestHelper.indexRelationshipUri(indexName,key,value)).accept(MediaType.APPLICATION_JSON).get(ClientResponse.class);
  assertEquals(200,response.getStatus());
  Collection<?> items=(Collection<?>)JsonHelper.jsonToSingleValue(response.getEntity(String.class));
  int counter=0;
  for (  Object item : items) {
    Map<?,?> map=(Map<?,?>)item;
    assertNotNull(map.get("self"));
    String indexedUri=(String)map.get("indexed");
    assertEquals(uriToName.get(indexedUri),map.get("type"));
    counter++;
  }
  assertEquals(2,counter);
}
