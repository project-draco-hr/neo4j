{
  RecordingCallback messages=new RecordingCallback();
  SessionStateMachine machine=new SessionStateMachine(new UsageData(),db,txBridge,runner,NullLogService.getInstance());
  machine.run("RETURN 1",null,null,messages);
  assertThat(messages.next(),failedWith(Status.Request.Invalid));
  assertThat(machine.state(),equalTo(SessionStateMachine.State.STOPPED));
}
