{
  IndexProxy actual=mockIndexProxy();
  IndexProxy failed=mockIndexProxy();
  IndexProxyFactory indexContextFactory=mock(IndexProxyFactory.class);
  FlippableIndexProxy delegate=new FlippableIndexProxy(actual);
  delegate.setFlipTarget(indexContextFactory);
  delegate.drop().get();
  try {
    delegate.flip(noOp(),singleFailedDelegate(failed));
    fail("Expected IndexProxyAlreadyClosedKernelException to be thrown");
  }
 catch (  IndexProxyAlreadyClosedKernelException e) {
  }
}
