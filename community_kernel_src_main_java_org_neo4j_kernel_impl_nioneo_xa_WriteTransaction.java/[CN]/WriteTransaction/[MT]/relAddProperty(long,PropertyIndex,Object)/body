{
  RelationshipRecord relRecord=getRelationshipRecord(relId);
  if (relRecord == null) {
    relRecord=getRelationshipStore().getRecord(relId);
    addRelationshipRecord(relRecord);
  }
  if (!relRecord.inUse()) {
    throw new IllegalStateException("Property add on relationship[" + relId + "] illegal since it has been deleted.");
  }
  PropertyBlock block=new PropertyBlock();
  block.setInUse(true);
  block.setCreated();
  getPropertyStore().encodeValue(block,index.getKeyId(),value);
  PropertyRecord host=addPropertyBlockToPrimitive(block,relRecord,false);
  return block.newPropertyData(host,value);
}
