{
  NodeRecord nodeRecord=getNodeRecord(nodeId);
  if (nodeRecord == null) {
    nodeRecord=getNodeStore().getRecord(nodeId);
    addNodeRecord(nodeRecord);
  }
  if (!nodeRecord.inUse()) {
    throw new IllegalStateException("Unable to delete Node[" + nodeId + "] since it has already been deleted.");
  }
  nodeRecord.setInUse(false);
  ArrayMap<Integer,PropertyData> propertyMap=getAndDeletePropertyChain(nodeRecord);
  return propertyMap;
}
