{
  RelationshipRecord record=getRelationshipRecord(id);
  if (record == null) {
    record=getRelationshipStore().getRecord(id);
    addRelationshipRecord(record);
  }
  if (!record.inUse()) {
    throw new IllegalStateException("Unable to delete relationship[" + id + "] since it is already deleted.");
  }
  long nextProp=record.getNextProp();
  ArrayMap<Integer,PropertyData> propertyMap=getAndDeletePropertyChain(nextProp);
  disconnectRelationship(record);
  updateNodes(record);
  record.setInUse(false);
  return propertyMap;
}
