{
  PagedFile storePagedFile=mock(PagedFile.class);
  when(pageCache.map(eq(storeFile),anyInt())).thenReturn(storePagedFile);
  IdGenerator idGenerator=mock(IdGenerator.class);
  when(idGeneratorFactory.open(any(File.class),anyInt(),eq(idType),anyInt(),anyInt())).thenReturn(idGenerator);
  RecordFormat recordFormat=Mockito.mock(RecordFormat.class);
  CommonAbstractStore store=new TheStore(storeFile,config,idType,idGeneratorFactory,pageCache,LOG,recordFormat);
  store.initialise(false);
  reset(storePagedFile,idGenerator);
  InOrder inOrder=inOrder(storePagedFile,idGenerator);
  store.close();
  inOrder.verify(storePagedFile,times(1)).close();
  inOrder.verify(idGenerator,times(1)).close();
}
