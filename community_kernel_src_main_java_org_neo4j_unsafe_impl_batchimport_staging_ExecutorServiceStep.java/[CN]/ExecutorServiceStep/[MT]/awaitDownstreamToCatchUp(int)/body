{
  if (receivedBatches.get() - doneBatches.get() > queueSizeThreshold) {
    long startTime=currentTimeMillis();
    while (receivedBatches.get() - doneBatches.get() > queueSizeThreshold) {
      waitSome();
    }
    return currentTimeMillis() - startTime;
  }
  return 0;
}
