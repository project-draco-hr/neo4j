{
  new Thread(){
    @Override public void run(){
      assertHealthy();
      try {
        try {
          lastProcessingTimestamp=currentTimeMillis();
          process();
        }
 catch (        Throwable e) {
          issuePanic(e);
        }
 finally {
          endOfUpstream();
        }
      }
 catch (      Throwable e) {
        if (!isPanic()) {
          issuePanic(e);
        }
 else {
          throw e;
        }
      }
    }
  }
.start();
  return 0;
}
