{
  List<Transaction> lockingTxList=resourceMap.get(resource);
  if (lockingTxList == null) {
    throw new RuntimeException(resource + " not found in resource map");
  }
  if (!lockingTxList.remove(tx)) {
    throw new RuntimeException(tx + "not found in locking tx list");
  }
  if (lockingTxList.size() == 0) {
    resourceMap.remove(resource);
  }
}
