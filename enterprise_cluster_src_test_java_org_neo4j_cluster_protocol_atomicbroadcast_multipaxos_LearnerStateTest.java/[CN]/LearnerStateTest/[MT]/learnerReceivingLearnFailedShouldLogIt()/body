{
  LearnerState state=LearnerState.learner;
  LearnerContext ctx=mock(LearnerContext.class);
  MessageHolder outgoing=mock(MessageHolder.class);
  InstanceId paxosInstanceIdIAskedFor=new InstanceId(4);
  Message<LearnerMessage> theLearnFailure=Message.to(LearnerMessage.learnFailed,URI.create("c:/1")).setHeader(Message.FROM,"c:/2").setHeader(InstanceId.INSTANCE,"4");
  when(ctx.getPaxosInstance(paxosInstanceIdIAskedFor)).thenReturn(new PaxosInstance(mock(PaxosInstanceStore.class),paxosInstanceIdIAskedFor));
  when(ctx.getMemberURIs()).thenReturn(Collections.singletonList(URI.create("c:/2")));
  state.handle(ctx,theLearnFailure,outgoing);
  verify(ctx,times(1)).notifyLearnMiss(paxosInstanceIdIAskedFor);
}
