{
  Collection<DynamicRecord> records=serialize(rule,id);
  SchemaRuleCommand command=new SchemaRuleCommand(store,records,rule);
  InMemoryLogBuffer buffer=new InMemoryLogBuffer();
  NeoStore neoStore=mock(NeoStore.class);
  when(neoStore.getSchemaStore()).thenReturn(store);
  command.writeToFile(buffer);
  Command readCommand=readCommand(neoStore,buffer,allocate(1000));
  assertThat(readCommand,instanceOf(SchemaRuleCommand.class));
}
