{
  Collection<DynamicRecord> beforeRecords=serialize(rule,id,false,false);
  Collection<DynamicRecord> afterRecords=serialize(rule,id,true,true);
  SchemaRuleCommand command=new SchemaRuleCommand(neoStore,store,indexes,beforeRecords,afterRecords,rule,txId);
  command.execute();
  verify(store).updateRecord(first(afterRecords));
  verify(indexes).createIndex(rule);
}
