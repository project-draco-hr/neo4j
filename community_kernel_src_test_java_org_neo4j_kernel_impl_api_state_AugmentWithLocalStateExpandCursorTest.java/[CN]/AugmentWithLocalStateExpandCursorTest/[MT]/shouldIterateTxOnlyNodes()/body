{
  StoreReadLayer store=mock(StoreReadLayer.class);
  ReadableTxState txState=mock(ReadableTxState.class);
  long node=nodeId.read();
  givenTxRels(txState,node,row(1337,2,INCOMING,node,3),row(1338,2,INCOMING,node,3));
  givenStoredRels(store);
  when(txState.nodeIsAddedInThisTx(node)).thenReturn(true);
  AugmentWithLocalStateExpandCursor cursor=newAugmentingExpandCursor(store,txState);
  assertThat(rows(cursor,relId,relType,direction,startNodeId,neighborNodeId),equalTo(asList(row(1337,2,INCOMING,1,3),row(1338,2,INCOMING,1,3))));
}
