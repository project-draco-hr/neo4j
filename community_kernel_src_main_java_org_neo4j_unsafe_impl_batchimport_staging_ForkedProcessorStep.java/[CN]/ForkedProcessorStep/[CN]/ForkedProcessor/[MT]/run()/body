{
  while (!halted) {
    boolean processed=false;
    try {
      park();
      if (!halted && localTicket + 1 == globalTicket) {
        processed=true;
        forkedProcess(id,forkedProcessors.size(),currentBatch);
      }
    }
 catch (    Throwable t) {
      error=t;
    }
 finally {
      if (processed) {
        localTicket++;
        doneSignal.decrementAndGet();
        LockSupport.unpark(submitterThread);
      }
    }
  }
}
