{
  ComException error=new ComException("Communication failure");
  when(master.endLockSession(any(RequestContext.class),anyBoolean())).thenThrow(error);
  try {
    client.stop();
    fail("Exception expected");
  }
 catch (  Exception e) {
    assertThat(e,instanceOf(DistributedLockFailureException.class));
  }
}
