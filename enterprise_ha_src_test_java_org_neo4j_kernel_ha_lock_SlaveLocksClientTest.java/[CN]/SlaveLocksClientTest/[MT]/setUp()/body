{
  master=mock(Master.class);
  RequestContextFactory requestContextFactory=mock(RequestContextFactory.class);
  availabilityGuard=new AvailabilityGuard(new FakeClock());
  Locks lockManager=new CommunityLockManger();
  local=spy(lockManager.newClient());
  LockResult lockResultOk=new LockResult(LockStatus.OK_LOCKED);
  TransactionStreamResponse<LockResult> responseOk=new TransactionStreamResponse<>(lockResultOk,null,TransactionStream.EMPTY,ResourceReleaser.NO_OP);
  whenMasterAcquireShared().thenReturn(responseOk);
  whenMasterAcquireExclusive().thenReturn(responseOk);
  client=new SlaveLocksClient(master,local,lockManager,requestContextFactory,availabilityGuard,1000);
}
