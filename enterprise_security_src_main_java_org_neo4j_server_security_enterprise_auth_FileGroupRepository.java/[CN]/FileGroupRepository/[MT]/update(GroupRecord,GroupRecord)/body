{
  if (!existingGroup.name().equals(updatedGroup.name())) {
    throw new IllegalArgumentException("updatedGroup has a different name");
  }
synchronized (this) {
    List<GroupRecord> newGroups=new ArrayList<>();
    boolean foundGroup=false;
    for (    GroupRecord other : groups) {
      if (other.equals(existingGroup)) {
        foundGroup=true;
        newGroups.add(updatedGroup);
      }
 else {
        newGroups.add(other);
      }
    }
    if (!foundGroup) {
      throw new ConcurrentModificationException();
    }
    groups=newGroups;
    saveGroupsToFile();
    groupsByName.put(updatedGroup.name(),updatedGroup);
    removeFromUserMap(existingGroup);
    populateUserMap(updatedGroup);
  }
}
