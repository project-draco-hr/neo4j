{
  Path directory=groupFile.getParent();
  if (!Files.exists(directory)) {
    Files.createDirectories(directory);
  }
  Path tempFile=Files.createTempFile(directory,groupFile.getFileName().toString() + "-",".tmp");
  try {
    Files.write(tempFile,serialization.serialize(groups));
    Files.move(tempFile,groupFile,ATOMIC_MOVE,REPLACE_EXISTING);
  }
 catch (  Throwable e) {
    Files.delete(tempFile);
    throw e;
  }
}
