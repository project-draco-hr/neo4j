{
  if (!isValidName(group.name())) {
    throw new IllegalCredentialsException("'" + group.name() + "' is not a valid group name.");
  }
synchronized (this) {
    for (    GroupRecord other : groups) {
      if (other.name().equals(group.name())) {
        throw new IllegalCredentialsException("The specified group already exists");
      }
    }
    groups.add(group);
    saveGroupsToFile();
    groupsByName.put(group.name(),group);
    populateUserMap(group);
  }
}
