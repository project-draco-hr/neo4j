{
  IndexPopulator populator=indexProvider.getPopulator(17,new IndexConfiguration(true));
  populator.create();
  populator.close(true);
  IndexAccessor accessor=indexProvider.getOnlineAccessor(17,new IndexConfiguration(true));
  IndexUpdaterSupport.updateAccessor(accessor,asList(NodePropertyUpdate.add(1,11,"value1",new long[]{4})));
  try {
    IndexUpdaterSupport.updateAccessor(accessor,asList(NodePropertyUpdate.add(2,11,"value1",new long[]{4})));
    fail("expected exception");
  }
 catch (  PreexistingIndexEntryConflictException conflict) {
    assertEquals(1,conflict.getExistingNodeId());
    assertEquals("value1",conflict.getPropertyValue());
    assertEquals(2,conflict.getAddedNodeId());
  }
}
