{
  IndexPopulator populator=indexProvider.getPopulator(17,new IndexConfiguration(true));
  populator.create();
  populator.close(true);
  IndexAccessor accessor=indexProvider.getOnlineAccessor(17,new IndexConfiguration(true));
  try {
    accessor.updateAndCommit(asList(NodePropertyUpdate.add(1,11,"value1",new long[]{4}),NodePropertyUpdate.add(2,11,"value1",new long[]{4})));
    fail("expected exception");
  }
 catch (  IndexEntryConflictException conflict) {
    assertEquals("value1",conflict.getPropertyValue());
    if (conflict.getExistingNodeId() == 1) {
      assertEquals(2,conflict.getAddedNodeId());
    }
 else {
      assertEquals(2,conflict.getExistingNodeId());
      assertEquals(1,conflict.getAddedNodeId());
    }
  }
}
