{
  IndexPopulator populator=indexProvider.getPopulator(17,descriptor,new IndexConfiguration(true));
  populator.create();
  populator.close(true);
  IndexAccessor accessor=indexProvider.getOnlineAccessor(17,new IndexConfiguration(true));
  try {
    updateAccessor(accessor,asList(NodePropertyUpdate.add(1,11,"value1",new long[]{4}),NodePropertyUpdate.add(2,11,"value1",new long[]{4})));
    fail("expected exception");
  }
 catch (  DuplicateIndexEntryConflictException conflict) {
    assertEquals("value1",conflict.getPropertyValue());
    assertEquals(asSet(1l,2l),conflict.getConflictingNodeIds());
  }
}
