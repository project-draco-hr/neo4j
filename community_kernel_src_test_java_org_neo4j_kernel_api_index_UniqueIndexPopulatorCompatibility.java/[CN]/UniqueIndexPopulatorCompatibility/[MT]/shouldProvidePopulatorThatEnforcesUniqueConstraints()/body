{
  IndexPopulator populator=indexProvider.getPopulator(17,new IndexConfiguration(true));
  populator.create();
  populator.add(1,"value1");
  try {
    populator.add(2,"value1");
    populator.verifyDeferredConstraints();
    populator.close(true);
    fail("expected exception");
  }
 catch (  PreexistingIndexEntryConflictException conflict) {
    assertEquals(1,conflict.getExistingNodeId());
    assertEquals("value1",conflict.getPropertyValue());
    assertEquals(2,conflict.getAddedNodeId());
  }
}
