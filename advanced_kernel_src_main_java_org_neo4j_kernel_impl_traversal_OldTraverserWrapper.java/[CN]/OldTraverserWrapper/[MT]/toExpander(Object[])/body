{
  Stack<Object[]> entries=new Stack<Object[]>();
  for (int i=0; i < relationshipTypesAndDirections.length; i+=2) {
    Object relType=relationshipTypesAndDirections[i];
    if (relType == null) {
      throw new IllegalArgumentException("Null relationship type at " + i);
    }
    if (!(relType instanceof RelationshipType)) {
      throw new IllegalArgumentException("Expected RelationshipType at var args pos " + i + ", found "+ relType);
    }
    Object direction=relationshipTypesAndDirections[i + 1];
    if (direction == null) {
      throw new IllegalArgumentException("Null direction at " + (i + 1));
    }
    if (!(direction instanceof Direction)) {
      throw new IllegalArgumentException("Expected Direction at var args pos " + (i + 1) + ", found "+ direction);
    }
    entries.push(new Object[]{relType,direction});
  }
  OrderedByTypeExpander expander=new OrderedByTypeExpander();
  while (!entries.isEmpty()) {
    Object[] entry=entries.pop();
    expander=(OrderedByTypeExpander)expander.add((RelationshipType)entry[0],(Direction)entry[1]);
  }
  return expander;
}
