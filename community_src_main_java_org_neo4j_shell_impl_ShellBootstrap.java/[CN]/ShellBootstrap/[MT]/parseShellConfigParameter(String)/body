{
  Map<String,Serializable> map=new HashMap<String,Serializable>();
  for (  String keyValue : shellConfig.split(",")) {
    String[] splitted=keyValue.split("=");
    if (splitted.length != 2) {
      throw new RuntimeException("Invalid shell configuration '" + shellConfig + "' should be '<key1>=<value1>,<key2>=<value2>...' where key can"+ " be any of ["+ StartClient.ARG_PORT+ ", "+ StartClient.ARG_NAME+ ", "+ StartClient.ARG_READONLY+ "]");
    }
    String key=splitted[0].trim();
    Serializable value=splitted[1];
    if (key.equals(StartClient.ARG_PORT)) {
      value=Integer.parseInt(splitted[1]);
    }
 else     if (key.equals(StartClient.ARG_READONLY)) {
      value=Boolean.parseBoolean(splitted[1]);
    }
    map.put(key,value);
  }
  return map;
}
