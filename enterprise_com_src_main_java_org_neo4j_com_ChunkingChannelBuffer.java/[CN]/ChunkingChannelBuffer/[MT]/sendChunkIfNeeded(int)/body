{
  if (writerIndex() + bytesPlus >= capacity || (enoughTimeHasPassed() && readable())) {
    setContinuation(CONTINUATION_MORE);
    writeCurrentChunk();
    buffer=ChannelBuffers.dynamicBuffer();
    addRoomForContinuationHeader();
  }
}
