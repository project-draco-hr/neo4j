{
  final Config config=dependencies.config();
  final GraphDatabaseService gdb=dependencies.db();
  final GraphDatabaseAPI api=(GraphDatabaseAPI)gdb;
  final StringLogger log=dependencies.logging().getMessagesLog(Sessions.class);
  final HostnamePort address=config.get(Settings.ndp_address);
  final LifeSupport life=new LifeSupport();
  if (config.get(Settings.ndp_enabled)) {
    final Sessions env=life.add(new StandardSessions(api,log));
    life.add(new SocketTransport(address,log,env));
    log.info("NDP Server extension loaded.");
  }
  return life;
}
