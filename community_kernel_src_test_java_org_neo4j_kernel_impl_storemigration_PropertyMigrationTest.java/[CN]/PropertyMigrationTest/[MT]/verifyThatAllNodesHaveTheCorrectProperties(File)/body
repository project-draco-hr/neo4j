{
  EmbeddedGraphDatabase database=new EmbeddedGraphDatabase(directory.getPath());
  int nodeCount=0;
  StringBuilder builder=new StringBuilder();
  for (int i=0; i < 100; i++) {
    builder.append("characters");
  }
  String longString=builder.toString();
  int[] longArray=new int[100];
  for (int i=0; i < 100; i++) {
    longArray[i]=i;
  }
  for (  Node node : database.getAllNodes()) {
    nodeCount++;
    if (node.getId() > 0) {
      assertEquals(true,node.getProperty("property1"));
      assertEquals(longString,node.getProperty("long_string"));
      assertArrayEquals(longArray,(int[])node.getProperty("long_array"));
    }
  }
  assertEquals(1000,nodeCount);
  database.shutdown();
}
