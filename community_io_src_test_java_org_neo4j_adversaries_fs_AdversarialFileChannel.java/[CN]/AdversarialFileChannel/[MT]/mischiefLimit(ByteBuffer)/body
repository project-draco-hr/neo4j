{
  int oldLimit=buf.limit();
  int newLimit=oldLimit - buf.remaining() / 2;
  buf.limit(newLimit);
  return oldLimit;
}
