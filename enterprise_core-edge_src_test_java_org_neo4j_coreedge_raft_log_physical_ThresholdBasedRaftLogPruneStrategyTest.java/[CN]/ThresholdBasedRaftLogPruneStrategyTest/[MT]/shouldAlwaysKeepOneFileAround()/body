{
  when(threshold.reached(any(),Matchers.eq(3L),any())).thenReturn(true);
  when(threshold.reached(any(),Matchers.eq(2L),any())).thenReturn(true);
  when(threshold.reached(any(),Matchers.eq(1L),any())).thenReturn(true);
  when(threshold.reached(any(),Matchers.eq(0L),any())).thenReturn(true);
  when(files.containsEntries(anyLong())).thenReturn(true);
  when(files.versionExists(anyLong())).thenReturn(true);
  final RaftLogPruneStrategy strategy=new RaftLogPruneStrategy(logFileInfo,files,threshold);
  strategy.prune(3L);
  verify(threshold,times(1)).init();
  verify(files,times(1)).pruneUpTo(2);
}
