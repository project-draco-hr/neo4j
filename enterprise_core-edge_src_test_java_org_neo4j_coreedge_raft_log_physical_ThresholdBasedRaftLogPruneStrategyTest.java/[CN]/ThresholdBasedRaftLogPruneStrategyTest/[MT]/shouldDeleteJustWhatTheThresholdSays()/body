{
  when(threshold.reached(any(),Matchers.eq(6L),any())).thenReturn(false);
  when(threshold.reached(any(),Matchers.eq(5L),any())).thenReturn(false);
  when(threshold.reached(any(),Matchers.eq(4L),any())).thenReturn(false);
  when(threshold.reached(any(),Matchers.eq(3L),any())).thenReturn(true);
  when(files.containsEntries(anyLong())).thenReturn(true);
  when(files.versionExists(anyLong())).thenReturn(true);
  final RaftLogPruneStrategy strategy=new RaftLogPruneStrategy(logFileInfo,files,threshold);
  strategy.prune(7L);
  verify(threshold,times(1)).init();
  verify(files,times(1)).pruneUpTo(3);
}
