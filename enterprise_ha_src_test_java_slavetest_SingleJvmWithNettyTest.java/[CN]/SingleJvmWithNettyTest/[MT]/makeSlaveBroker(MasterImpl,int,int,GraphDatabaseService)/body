{
  final Machine masterMachine=new Machine(masterId,-1,1,-1,"localhost:" + Protocol.PORT);
  final Master client=new MasterClient(masterMachine.getServer().first(),masterMachine.getServer().other(),graphDb,Client.DEFAULT_MAX_NUMBER_OF_CONCURRENT_CHANNELS_PER_CLIENT);
  return new AbstractBroker(id,graphDb){
    public boolean iAmMaster(){
      return false;
    }
    public Pair<Master,Machine> getMasterReally(){
      return getMaster();
    }
    public Pair<Master,Machine> getMaster(){
      return Pair.of(client,masterMachine);
    }
    public Object instantiateMasterServer(    GraphDatabaseService graphDb){
      throw new UnsupportedOperationException("cannot instantiate master server on slave");
    }
  }
;
}
