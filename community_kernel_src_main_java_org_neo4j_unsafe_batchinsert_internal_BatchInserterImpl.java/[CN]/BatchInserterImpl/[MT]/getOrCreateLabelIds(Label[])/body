{
  long[] ids=new long[labels.length];
  int cursor=0;
  for (int i=0; i < ids.length; i++) {
    int labelId=getOrCreateLabelId(labels[i].name());
    if (!arrayContains(ids,cursor,labelId)) {
      ids[cursor++]=labelId;
    }
  }
  if (cursor < ids.length) {
    ids=Arrays.copyOf(ids,cursor);
  }
  return ids;
}
