{
  Set<LogMatcher> expectedMatchers=new HashSet<>(Arrays.asList(expected));
synchronized (logCalls) {
    for (    LogCall logCall : logCalls) {
      for (      LogMatcher matcher : expectedMatchers) {
        if (matcher.matches(logCall)) {
          expectedMatchers.remove(matcher);
          break;
        }
      }
    }
    if (expectedMatchers.size() > 0) {
      fail(format("These log calls were expected, but never occurred:\n%s\nActual log calls were:\n%s",describe(expectedMatchers.iterator()),serialize(logCalls.iterator())));
    }
  }
}
