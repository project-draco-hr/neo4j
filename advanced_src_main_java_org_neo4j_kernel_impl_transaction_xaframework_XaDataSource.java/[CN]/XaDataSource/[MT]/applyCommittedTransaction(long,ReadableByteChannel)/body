{
  if (getLastCommittedTxId() + 1 == txId) {
    getXaContainer().getResourceManager().applyCommittedTransaction(transaction);
  }
 else   if (getLastCommittedTxId() + 1 < txId) {
    throw new IOException("Tried to apply transaction with txId=" + txId + " but last committed txId="+ getLastCommittedTxId());
  }
 else {
    System.out.println("Tried to apply transaction with txId=" + txId + " but last committed txId="+ getLastCommittedTxId());
  }
}
