{
  Set<Member> hazelcastMembers=new HashSet<>();
  List<CoreMember> coreMembers=new ArrayList<>();
  for (int i=0; i < 5; i++) {
    CoreMember coreMember=new CoreMember(UUID.randomUUID());
    coreMembers.add(coreMember);
    Config config=Config.defaults();
    HashMap<String,String> settings=new HashMap<>();
    settings.put(CoreEdgeClusterSettings.transaction_advertised_address.name(),"tx:" + (i + 1));
    settings.put(CoreEdgeClusterSettings.raft_advertised_address.name(),"raft:" + (i + 1));
    settings.put(GraphDatabaseSettings.bolt_advertised_address.name(),"bolt:" + (i + 1));
    config.augment(settings);
    hazelcastMembers.add(new MemberImpl(new Address("localhost",i),null,buildMemberAttributes(coreMember,config).getAttributes()));
  }
  Map<CoreMember,CoreAddresses> coreMemberMap=HazelcastClusterTopology.toCoreMemberMap(hazelcastMembers,NullLogProvider.getInstance());
  for (int i=0; i < 5; i++) {
    CoreAddresses coreAddresses=coreMemberMap.get(coreMembers.get(i));
    assertEquals(new AdvertisedSocketAddress("tx:" + (i + 1)),coreAddresses.getCoreServer());
    assertEquals(new AdvertisedSocketAddress("raft:" + (i + 1)),coreAddresses.getRaftServer());
    assertEquals(new AdvertisedSocketAddress("bolt:" + (i + 1)),coreAddresses.getBoltServer());
  }
}
