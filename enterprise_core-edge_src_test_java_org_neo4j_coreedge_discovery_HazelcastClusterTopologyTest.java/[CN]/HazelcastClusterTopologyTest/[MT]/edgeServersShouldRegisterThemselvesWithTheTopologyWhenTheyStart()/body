{
  MemberId memberId=new MemberId(UUID.randomUUID());
  final Map<String,String> params=new HashMap<>();
  params.put(new GraphDatabaseSettings.BoltConnector("bolt").type.name(),"BOLT");
  params.put(new GraphDatabaseSettings.BoltConnector("bolt").enabled.name(),"true");
  params.put(new GraphDatabaseSettings.BoltConnector("bolt").address.name(),"127.0.0.1:" + 8001);
  Config config=new Config(params);
  final EdgeTopologyService topology=mock(EdgeTopologyService.class);
  final CoreMemberSelectionStrategy connectionStrategy=mock(CoreMemberSelectionStrategy.class);
  when(connectionStrategy.coreMember()).thenReturn(memberId);
  LocalDatabase localDatabase=mock(LocalDatabase.class);
  when(localDatabase.isEmpty()).thenReturn(true);
  StoreFetcher storeFetcher=mock(StoreFetcher.class);
  when(storeFetcher.storeId(memberId)).thenReturn(new StoreId(1,2,3,4));
  final EdgeStartupProcess startupProcess=new EdgeStartupProcess(storeFetcher,localDatabase,mock(Lifecycle.class),connectionStrategy,new ConstantTimeRetryStrategy(1,TimeUnit.MILLISECONDS),NullLogProvider.getInstance(),topology,config);
  startupProcess.start();
  verify(topology).registerEdgeServer(anyObject());
}
