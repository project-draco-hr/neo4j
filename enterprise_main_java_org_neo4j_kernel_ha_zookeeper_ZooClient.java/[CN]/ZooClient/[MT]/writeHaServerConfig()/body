{
  String path=rootPath + "/" + HA_SERVERS_CHILD;
  try {
    zooKeeper.create(path,new byte[0],ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
    System.out.println("Created the ha server root");
  }
 catch (  KeeperException e) {
    if (e.code() != KeeperException.Code.NODEEXISTS) {
      throw e;
    }
  }
  String machinePath=path + "/" + machineId;
  byte[] data=haServerAsData();
  try {
    zooKeeper.create(machinePath,data,ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
    System.out.println("Creating entry for " + haServer);
  }
 catch (  KeeperException e) {
    if (e.code() != KeeperException.Code.NODEEXISTS) {
      throw e;
    }
  }
  zooKeeper.setData(machinePath,data,-1);
  System.out.println("wrote " + data.length + " bytes for "+ machinePath);
}
