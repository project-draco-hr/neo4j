{
  String path=rootPath + "/" + HA_SERVERS_CHILD+ "/"+ machineId+ "-jmx";
  String url=jmxUrl.toString();
  byte[] data=new byte[(url.length() + instanceId.length()) * 2 + 4];
  ByteBuffer buffer=ByteBuffer.wrap(data);
  buffer.putShort((short)url.length());
  buffer.asCharBuffer().put(url.toCharArray());
  buffer.position(buffer.position() + url.length() * 2);
  buffer.putShort((short)instanceId.length());
  buffer.asCharBuffer().put(instanceId.toCharArray());
  if (buffer.limit() != data.length) {
    byte[] array=new byte[buffer.limit()];
    System.arraycopy(data,0,array,0,array.length);
    data=array;
  }
  try {
    try {
      zooKeeper.setData(path,data,-1);
    }
 catch (    KeeperException e) {
      if (e.code() == KeeperException.Code.NONODE) {
        zooKeeper.create(path,data,ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL);
      }
 else {
        msgLog.logMessage("Unable to set jxm connection info",e);
      }
    }
  }
 catch (  KeeperException e) {
    msgLog.logMessage("Unable to set jxm connection info",e);
  }
catch (  InterruptedException e) {
    Thread.interrupted();
    msgLog.logMessage("Unable to set jxm connection info",e);
  }
}
