{
  Integer previousDepth=nodeScanDepths.get(node);
  if (previousDepth != null && previousDepth >= searchDepth) {
    return;
  }
  nodeMap.put(node,new SubNetworkNode(node));
  nodeScanDepths.put(node,searchDepth);
  for (  Relationship relationship : node.getRelationships(relationshipType,direction)) {
    Node otherNode=relationship.getOtherNode(node);
    if (nodeMap.containsKey(otherNode)) {
      addRelationship(relationship);
    }
  }
  if (searchDepth <= 0) {
    return;
  }
  for (  Relationship relationship : node.getRelationships(relationshipType,direction)) {
    internalAddSubNetworkFromCentralNode(relationship.getOtherNode(node),searchDepth - 1,relationshipType,direction,nodeScanDepths);
  }
}
