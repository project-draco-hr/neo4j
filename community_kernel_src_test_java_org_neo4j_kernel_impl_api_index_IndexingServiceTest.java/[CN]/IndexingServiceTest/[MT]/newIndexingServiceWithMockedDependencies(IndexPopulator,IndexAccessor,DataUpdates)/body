{
  StringLogger logger=mock(StringLogger.class);
  SchemaIndexProvider indexProvider=mock(SchemaIndexProvider.class);
  IndexStoreView storeView=mock(IndexStoreView.class);
  UpdateableSchemaState schemaState=mock(UpdateableSchemaState.class);
  when(indexProvider.getProviderDescriptor()).thenReturn(PROVIDER_DESCRIPTOR);
  when(indexProvider.getPopulator(anyLong(),any(IndexConfiguration.class))).thenReturn(populator);
  data.getsProcessedByStoreScanFrom(storeView);
  when(indexProvider.getOnlineAccessor(anyLong(),any(IndexConfiguration.class))).thenReturn(accessor);
  return life.add(new IndexingService(life.add(new Neo4jJobScheduler(logger)),new DefaultSchemaIndexProviderMap(indexProvider),storeView,mock(TokenNameLookup.class),schemaState,mockLogging(logger)));
}
