{
  IndexingService indexingService=newIndexingServiceWithMockedDependencies(populator,accessor,withData(),IteratorUtil.<IndexRule>emptyIterator());
  life.start();
  indexingService.createIndex(IndexRule.constraintIndexRule(0,labelId,propertyKeyId,PROVIDER_DESCRIPTOR,null));
  IndexProxy proxy=indexingService.getProxyForRule(0);
  indexingService.activateIndex(0);
  assertEquals(ONLINE,proxy.getState());
  InOrder order=inOrder(populator,accessor);
  order.verify(populator).create();
  order.verify(populator).close(true);
}
