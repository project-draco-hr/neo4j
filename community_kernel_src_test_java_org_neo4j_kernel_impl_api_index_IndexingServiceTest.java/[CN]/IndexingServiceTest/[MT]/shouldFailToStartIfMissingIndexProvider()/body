{
  IndexingService indexing=newIndexingServiceWithMockedDependencies(mock(IndexPopulator.class),mock(IndexAccessor.class),new DataUpdates(new NodePropertyUpdate[0]));
  String otherProviderKey="something-completely-different";
  SchemaIndexProvider.Descriptor otherDescriptor=new SchemaIndexProvider.Descriptor(otherProviderKey,"no-version");
  IndexRule rule=IndexRule.indexRule(1,2,3,otherDescriptor);
  try {
    indexing.initIndexes(iterator(rule));
    fail("initIndexes with mismatching index provider should fail");
  }
 catch (  IllegalArgumentException e) {
    assertThat(e.getMessage(),containsString("existing index"));
    assertThat(e.getMessage(),containsString(otherProviderKey));
  }
}
