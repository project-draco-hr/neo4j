{
  StringLogger logger=mock(StringLogger.class);
  UpdateableSchemaState schemaState=mock(UpdateableSchemaState.class);
  when(indexProvider.getProviderDescriptor()).thenReturn(PROVIDER_DESCRIPTOR);
  when(indexProvider.getPopulator(anyLong(),any(IndexDescriptor.class),any(IndexConfiguration.class))).thenReturn(populator);
  data.getsProcessedByStoreScanFrom(storeView);
  when(indexProvider.getOnlineAccessor(anyLong(),any(IndexConfiguration.class))).thenReturn(accessor);
  when(indexProvider.snapshotMetaFiles()).thenReturn(IteratorUtil.<File>emptyIterator());
  when(indexProvider.storeMigrationParticipant()).thenReturn(StoreMigrationParticipant.NOT_PARTICIPATING);
  return life.add(new IndexingService(life.add(new Neo4jJobScheduler()),new DefaultSchemaIndexProviderMap(indexProvider),storeView,mock(TokenNameLookup.class),schemaState,loop(iterator(rules)),mockLogging(logger),IndexingService.NO_MONITOR));
}
