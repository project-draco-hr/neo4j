{
  SchemaStore schemaStore=neoStore.getSchemaStore();
  int labelId=10, propertyKey=10;
  IndexRule rule=indexRule(schemaStore.nextId(),labelId,propertyKey,PROVIDER_DESCRIPTOR);
  Collection<DynamicRecord> records=schemaStore.allocateFrom(rule);
  for (  DynamicRecord record : records) {
    schemaStore.updateRecord(record);
  }
  long ruleId=first(records).getId();
  TransactionRecordState writeTransaction=newWriteTransaction(mockIndexing).first();
  writeTransaction.dropSchemaRule(rule);
  commitProcess.commit(writeTransaction.doPrepare());
  verify(cacheAccessBackDoor).removeSchemaRuleFromCache(ruleId);
}
