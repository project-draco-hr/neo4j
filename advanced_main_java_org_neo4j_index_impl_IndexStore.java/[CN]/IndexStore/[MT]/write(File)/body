{
  FileChannel channel=null;
  try {
    channel=new RandomAccessFile(file,"rw").getChannel();
    for (    Map.Entry<String,Map<String,String>> entry : config.entrySet()) {
      writeString(channel,entry.getKey());
      writeInt(channel,entry.getValue().size());
      for (      Map.Entry<String,String> propertyEntry : entry.getValue().entrySet()) {
        writeString(channel,propertyEntry.getKey());
        writeString(channel,propertyEntry.getValue());
      }
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
 finally {
    close(channel);
  }
}
