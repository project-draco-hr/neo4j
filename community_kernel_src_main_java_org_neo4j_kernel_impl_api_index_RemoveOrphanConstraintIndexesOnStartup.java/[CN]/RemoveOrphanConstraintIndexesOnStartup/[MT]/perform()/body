{
  try (KernelTransaction transaction=kernel.newTransaction(KernelTransaction.Type.implicit,AccessMode.Static.FULL);Statement statement=transaction.acquireStatement()){
    for (Iterator<IndexDescriptor> indexes=statement.readOperations().uniqueIndexesGetAll(); indexes.hasNext(); ) {
      IndexDescriptor index=indexes.next();
      if (statement.readOperations().indexGetOwningUniquenessConstraintId(index) == null) {
        log.info("Removing orphan constraint index: " + index);
        statement.schemaWriteOperations().uniqueIndexDrop(index);
      }
    }
    transaction.success();
  }
 catch (  KernelException e) {
    log.error("Failed to execute orphan index checking transaction.",e);
  }
}
