{
  try {
    txManager.begin(ForceMode.unforced);
    @SuppressWarnings("deprecation") TransactionContext tx=txManager.getTransactionContext();
    boolean success=false;
    try {
      StatementContext context=tx.newStatementContext();
      try {
        for (Iterator<IndexDescriptor> indexes=context.getIndexRules(); indexes.hasNext(); ) {
          IndexDescriptor index=indexes.next();
          if (index.isConstraintIndex() && context.getOwningConstraint(index) == null) {
            context.dropIndexRule(index);
          }
        }
      }
  finally {
        context.close();
      }
      success=true;
    }
  finally {
      if (success) {
        tx.commit();
      }
 else {
        tx.rollback();
      }
    }
  }
 catch (  Throwable e) {
    log.error("Failed to execute orphan index checking transaction.",e);
  }
}
