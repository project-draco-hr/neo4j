{
  PagedFile storeFile=mock(PagedFile.class);
  when(storeFile.pageSize()).thenReturn(cursor.getCurrentPageSize());
  long hugeValue=1L << 48;
  RelationshipRecord record=new RelationshipRecord(5).initialize(true,hugeValue + 1,hugeValue + 2,hugeValue + 3,4,hugeValue + 5,hugeValue + 6,hugeValue + 7,hugeValue + 8,true,true);
  record.setSecondaryUnitId(17);
  record.setRequiresSecondaryUnit(true);
  cursor.setOffset(offsetForId(record.getId(),cursor.getCurrentPageSize(),recordSize));
  format.write(record,cursor,recordSize,storeFile);
  record.setInUse(false);
  cursor.setOffset(offsetForId(record.getId(),cursor.getCurrentPageSize(),recordSize));
  format.write(record,cursor,recordSize,storeFile);
  cursor.setOffset(offsetForId(record.getId(),cursor.getCurrentPageSize(),recordSize));
  assertFalse(recordInUse(cursor));
  cursor.setOffset(offsetForId(record.getSecondaryUnitId(),cursor.getCurrentPageSize(),recordSize));
  assertFalse(recordInUse(cursor));
}
