{
  FileSystemAbstraction fileSystemAbstraction=new CannedFileSystemAbstraction(true,null,new IOException("cannot open lock file"),true);
  StoreLocker storeLocker=new StoreLocker(new Config(),fileSystemAbstraction);
  try {
    storeLocker.checkLock(target.directory("unused",true));
    fail();
  }
 catch (  IllegalStateException e) {
  }
}
