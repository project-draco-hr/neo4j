{
  FileSystemAbstraction fileSystemAbstraction=new CannedFileSystemAbstraction(false,new IOException("store dir could not be created"),null,true,NOTHING);
  StoreLocker storeLocker=new StoreLocker(new Config(),fileSystemAbstraction);
  File storeDir=target.directory("unused",true);
  try {
    storeLocker.checkLock(storeDir);
    fail();
  }
 catch (  StoreLockException e) {
    String msg=format("Unable to create path for store dir: %s",storeDir);
    assertThat(e.getMessage(),is(msg));
  }
}
