{
  PropertyContainer entity;
  Transaction tx=graphdb.beginTx();
  try {
    entity=entityType.create(this);
    assertFalse(entity.hasProperty("key"));
    assertNull(entity.getProperty("key",null));
    assertContainsAll(entity.getPropertyKeys());
    assertContainsAll(entity.getPropertyValues());
    entity.setProperty("key","value");
    assertTrue(entity.hasProperty("key"));
    assertEquals("value",entity.getProperty("key"));
    assertEquals("value",entity.getProperty("key",null));
    assertNull(entity.getProperty("foo",null));
    tx.success();
  }
  finally {
    tx.finish();
  }
  assertTrue(entity.hasProperty("key"));
  assertEquals("value",entity.getProperty("key"));
  assertEquals("value",entity.getProperty("key",null));
  assertContainsAll(entity.getPropertyKeys(),"key");
  assertContainsAll(entity.getPropertyValues(),"value");
  tx=graphdb.beginTx();
  try {
    assertEquals("value",entity.removeProperty("key"));
    assertFalse(entity.hasProperty("key"));
    tx.success();
  }
  finally {
    tx.finish();
  }
  assertFalse(entity.hasProperty("key"));
  assertNull(entity.getProperty("key",null));
  assertContainsAll(entity.getPropertyKeys());
  assertContainsAll(entity.getPropertyValues());
}
