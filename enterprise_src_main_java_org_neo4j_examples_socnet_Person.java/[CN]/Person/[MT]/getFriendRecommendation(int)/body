{
  HashSet<Person> friends=new HashSet<Person>();
  IteratorUtil.addToCollection(getFriends(),friends);
  HashSet<Person> friendsOfFriens=new HashSet<Person>();
  IteratorUtil.addToCollection(getFriendsOfFriends(),friendsOfFriens);
  friendsOfFriens.removeAll(friends);
  ArrayList<RankedPerson> rankedFriends=new ArrayList<RankedPerson>();
  for (  Person friend : friendsOfFriens) {
    int rank=getPathsToPerson(friend);
    rankedFriends.add(new RankedPerson(friend,rank));
  }
  Collections.sort(rankedFriends,new RankedComparer());
  while (rankedFriends.size() > numberOfFriendsToReturn) {
    rankedFriends.remove(rankedFriends.size() - 1);
  }
  return onlyFriend(rankedFriends);
}
