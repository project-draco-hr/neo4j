{
  final CountsTracker tracker=mock(CountsTracker.class);
  when(neoStores.getCounts()).thenReturn(tracker);
  when(tracker.apply(anyLong())).thenReturn(some(mock(CountsAccessor.Updater.class)));
  when(storageEngine.indexingService()).thenReturn(indexService);
  when(storageEngine.cacheAccess()).thenReturn(cacheAccess);
  when(storageEngine.legacyIndexApplierLookup()).thenReturn(legacyIndexProviderLookup);
  when(storageEngine.neoStores()).thenReturn(neoStores);
  when(storageEngine.kernelHealth()).thenReturn(kernelHealth);
}
