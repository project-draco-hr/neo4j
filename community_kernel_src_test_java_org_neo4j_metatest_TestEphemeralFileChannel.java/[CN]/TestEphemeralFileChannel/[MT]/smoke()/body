{
  EphemeralFileSystemAbstraction fs=new EphemeralFileSystemAbstraction();
  FileChannel channel=fs.open("yo","rw");
  ByteBuffer buffer=allocateDirect(23);
  buffer.put(new byte[23]);
  buffer.flip();
  channel.write(buffer);
  channel=fs.open("yo","rw");
  long longValue=1234567890L;
  buffer.clear();
  buffer.limit(1);
  buffer.put((byte)1);
  buffer.flip();
  channel.write(buffer);
  buffer.clear();
  buffer.limit(1);
  buffer.put((byte)2);
  buffer.flip();
  channel.position(6);
  channel.write(buffer);
  buffer.clear();
  buffer.limit(8);
  buffer.putLong(longValue);
  buffer.flip();
  channel.position(15);
  channel.write(buffer);
  assertEquals(23,channel.size());
  buffer.clear();
  buffer.limit(1);
  channel.read(buffer,0);
  buffer.flip();
  assertEquals((byte)1,buffer.get());
  buffer.clear();
  buffer.limit(3);
  channel.read(buffer,5);
  buffer.flip();
  assertEquals((byte)0,buffer.get());
  assertEquals((byte)2,buffer.get());
  assertEquals((byte)0,buffer.get());
  buffer.clear();
  buffer.limit(8);
  channel.read(buffer,15);
  buffer.flip();
  assertEquals(longValue,buffer.getLong());
}
