{
  LocalReplicator<MEMBER,MEMBER> localReplicator=new LocalReplicator<>(member,member,outbound);
  RaftMembershipManager<MEMBER> membershipManager=new RaftMembershipManager<>(localReplicator,memberSetBuilder,raftLog,logProvider,expectedClusterSize,electionTimeout,clock,catchupTimeout);
  RaftLogShippingManager<MEMBER> logShipping=new RaftLogShippingManager<>(outbound,logProvider,raftLog,clock,member,membershipManager,retryTimeMillis,catchupBatchSize,maxAllowedShippingLag);
  return new RaftInstance<>(member,termStore,voteStore,raftLog,electionTimeout,heartbeatInterval,timeoutService,inbound,outbound,leaderWaitTimeout,logProvider,membershipManager,logShipping);
}
