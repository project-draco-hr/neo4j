{
  for (; ; ) {
    final com.sun.jdi.event.EventSet events;
    try {
      events=queue.remove();
    }
 catch (    InterruptedException e) {
      return;
    }
    try {
      for (      com.sun.jdi.event.Event event : events) {
        if (event instanceof com.sun.jdi.event.LocatableEvent) {
          callback((com.sun.jdi.event.LocatableEvent)event);
        }
 else         if (event instanceof com.sun.jdi.event.ClassPrepareEvent) {
          setup(((com.sun.jdi.event.ClassPrepareEvent)event).referenceType());
        }
 else         if (event instanceof com.sun.jdi.event.VMDisconnectEvent || event instanceof com.sun.jdi.event.VMDeathEvent) {
          return;
        }
      }
    }
  finally {
      events.resume();
    }
  }
}
