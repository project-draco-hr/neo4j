{
  TransactionToApply newTx1=mock(TransactionToApply.class);
  TransactionToApply newTx2=mock(TransactionToApply.class);
  TransactionToApply newTx3=mock(TransactionToApply.class);
  StubLocalDatabase localDatabase=new StubLocalDatabase(1);
  final ReplayableCommitProcess txListener=new ReplayableCommitProcess(localDatabase,localDatabase);
  txListener.commit(newTx1,NULL,EXTERNAL);
  txListener.commit(newTx2,NULL,EXTERNAL);
  txListener.commit(newTx3,NULL,EXTERNAL);
  verify(localDatabase.commitProcess,times(3)).commit(any(TransactionToApply.class),any(CommitEvent.class),any(TransactionApplicationMode.class));
}
