{
  machine.initialize("FunClient/1.2",null,Session.Callback.NO_OP);
  machine.beginTransaction();
  machine.close();
  assertThat(machine.state(),equalTo(SessionStateMachine.State.STOPPED));
  verify(db).beginTx();
  verify(tx).close();
}
