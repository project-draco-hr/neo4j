{
  Map<String,Direction> matches=new TreeMap<String,Direction>();
  for (  RelationshipType type : GlobalGraphOperations.at(db).getAllRelationshipTypes()) {
    Direction direction=null;
    if (filterMap == null || filterMap.isEmpty()) {
      direction=defaultDirection;
    }
 else {
      for (      Map.Entry<String,Object> entry : filterMap.entrySet()) {
        if (matches(newPattern(entry.getKey(),caseInsensitiveFilters),type.name(),caseInsensitiveFilters,looseFilters)) {
          direction=getDirection(entry.getValue() != null ? entry.getValue().toString() : null,defaultDirection);
          break;
        }
      }
    }
    if (direction != null) {
      matches.put(type.name(),direction);
    }
  }
  return matches.isEmpty() ? Collections.<String,Direction>emptyMap() : matches;
}
