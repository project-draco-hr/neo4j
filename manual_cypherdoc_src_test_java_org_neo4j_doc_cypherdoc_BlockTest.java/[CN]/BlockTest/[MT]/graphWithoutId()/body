{
  engine.execute("CREATE (n:Person {name:\"Adam\"});");
  Block block=Block.getBlock(Arrays.asList("//graph"));
  assertThat(block.type,sameInstance(BlockType.GRAPH));
  Transaction transaction=database.beginTx();
  String output;
  try {
    output=block.process(state);
  }
  finally {
    transaction.finish();
  }
  assertThat(output,allOf(startsWith("[\"dot\""),containsString("Adam"),containsString("cypherdoc--"),containsString(".svg"),containsString("neoviz")));
}
