{
  requireNonNull(consumer,"consumer must not be null");
  PrintWriter writer;
synchronized (lock) {
    writer=writerSupplier.get();
    consumer.accept(getBulkLogger(writer,lock));
  }
  maybeFlush(writer);
}
