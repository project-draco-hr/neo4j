{
  StoreChannel channel=getFileChannel();
  long previousPosition=channel.position();
  channel.position(RECORD_SIZE * recordPosition);
  int trail=(int)(channel.size() - channel.position());
  ByteBuffer trailBuffer=null;
  if (trail > 0) {
    trailBuffer=ByteBuffer.allocate(trail);
    channel.read(trailBuffer);
    trailBuffer.flip();
  }
  ByteBuffer buffer=ByteBuffer.allocate(RECORD_SIZE);
  buffer.put(Record.IN_USE.byteValue());
  buffer.putLong(value);
  buffer.flip();
  channel.position(RECORD_SIZE * recordPosition);
  channel.write(buffer);
  if (trail > 0) {
    channel.write(trailBuffer);
  }
  channel.position(previousPosition);
}
