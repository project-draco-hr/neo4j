{
  long current=getRecord(3);
  if ((current + 1) != txId && !isInRecoveryMode()) {
    throw new InvalidRecordException("Could not set tx commit id[" + txId + "] since the current one is["+ current+ "]");
  }
  setRecord(3,txId);
  if (isStarted && lastCommittedTxIdSetter != null && txId != lastCommittedTx) {
    try {
      lastCommittedTxIdSetter.setLastCommittedTxId(txId);
    }
 catch (    RuntimeException e) {
      logger.log(Level.WARNING,"Could not set last committed tx id",e);
    }
  }
  lastCommittedTx=txId;
}
