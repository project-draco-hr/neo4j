{
  Master master=mock(Master.class);
  RequestContextFactory reqFactory=mock(RequestContextFactory.class);
  Response<Long> response=mock(Response.class);
  when(response.response()).thenReturn(1l);
  when(master.commit(any(RequestContext.class),any(TransactionRepresentation.class))).thenReturn(response);
  SlaveTransactionCommitProcess process=new SlaveTransactionCommitProcess(master,reqFactory);
  PhysicalTransactionRepresentation tx=new PhysicalTransactionRepresentation(Collections.<Command>emptyList());
  tx.setHeader(new byte[]{},1,1,1,1,1,1337);
  process.commit(tx,new LockGroup());
  verify(reqFactory).newRequestContext(1337);
}
