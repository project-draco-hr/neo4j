{
  StoreId storeId=newStoreIdForCurrentVersion(1,1,1,1);
  TransactionApplier transactionApplier=mock(TransactionApplier.class);
  TransactionIdStore transactionIdStore=mock(TransactionIdStore.class);
  when(transactionIdStore.getLastCommittedTransactionId()).thenReturn(3L);
  CommittedTransactionRepresentation alreadyAppliedTx=mock(CommittedTransactionRepresentation.class);
  LogEntryCommit commitEntry=mock(LogEntryCommit.class);
  when(commitEntry.getTxId()).thenReturn(3L);
  when(alreadyAppliedTx.getCommitEntry()).thenReturn(commitEntry);
  ApplyPulledTransactions handler=new ApplyPulledTransactions(NullLogProvider.getInstance(),singleton(transactionApplier),singleton(transactionIdStore),new Monitors());
  handler.onTxReceived(new TxPullResponse(storeId,alreadyAppliedTx));
  verifyNoMoreInteractions(transactionApplier);
}
