{
  if (brickMiss < REFRESH_BRICK_COUNT || brickSize <= 0) {
    return;
  }
  if (refreshing.compareAndSet(false,true)) {
    try {
      long t=System.currentTimeMillis();
      doRefreshBricks();
      refreshes.incrementAndGet();
      refreshTime.addAndGet(System.currentTimeMillis() - t);
    }
  finally {
      refreshing.set(false);
    }
  }
 else {
    avertedRefreshes.incrementAndGet();
  }
}
