{
  CoreGraphDatabase coreDB;
  while (true) {
    coreDB=cluster.awaitLeader(5000).database();
    try (Transaction tx=coreDB.beginTx()){
      workload.doWork(coreDB);
      tx.success();
      break;
    }
 catch (    TransactionFailureException e) {
      e.printStackTrace();
    }
  }
  return coreDB;
}
