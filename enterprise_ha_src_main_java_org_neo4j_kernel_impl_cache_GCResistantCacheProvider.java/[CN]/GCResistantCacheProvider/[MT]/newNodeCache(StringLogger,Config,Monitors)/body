{
  Long node=config.get(GcrSettings.node_cache_size);
  if (node == null) {
    node=Runtime.getRuntime().maxMemory() / 4;
  }
  Long rel=config.get(GcrSettings.relationship_cache_size);
  if (rel == null) {
    rel=Runtime.getRuntime().maxMemory() / 4;
  }
  checkMemToUse(logger,node,rel,Runtime.getRuntime().maxMemory());
  return new GCResistantCache<NodeImpl>(node,config.get(GcrSettings.node_cache_array_fraction),config.get(GcrSettings.log_interval),NODE_CACHE_NAME,logger,monitors.newMonitor(GCResistantCache.Monitor.class));
}
