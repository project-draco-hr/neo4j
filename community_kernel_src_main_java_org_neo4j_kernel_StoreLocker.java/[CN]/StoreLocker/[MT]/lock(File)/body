{
  File storeLockFile=new File(storeDir,STORE_LOCK_FILENAME);
  try {
    if (!fileSystemAbstraction.fileExists(storeLockFile)) {
      if (configuration.get(read_only)) {
        logger.warn("Unable to lock store as store dir does not exist and instance is in read-only mode");
        return false;
      }
      fileSystemAbstraction.autoCreatePath(storeLockFile.getParentFile());
    }
  }
 catch (  IOException e) {
    logger.warn("Unable to create path for store dir: " + storeDir,e);
    return false;
  }
  try {
    storeLockFileChannel=fileSystemAbstraction.open(storeLockFile,"rw");
    storeLockFileLock=fileSystemAbstraction.tryLock(storeLockFile,storeLockFileChannel);
    return storeLockFileLock != null;
  }
 catch (  OverlappingFileLockException e) {
    logger.warn("Unable to obtain lock on store lock file: " + storeLockFile,e);
    return false;
  }
catch (  IOException e) {
    logger.warn("Unable to obtain lock on store lock file: " + storeLockFile,e);
    return false;
  }
}
