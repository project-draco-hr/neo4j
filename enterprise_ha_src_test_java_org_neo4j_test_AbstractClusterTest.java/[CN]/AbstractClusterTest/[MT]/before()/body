{
  life=new LifeSupport();
  dir=TargetDirectory.forTest(getClass()).directory(testName.getMethodName(),true);
  clusterManager=life.add(new ClusterManager(provider,dir,stringMap(default_timeout.name(),"1s")){
    @Override protected void config(    GraphDatabaseBuilder builder,    String clusterName,    InstanceId serverId){
      super.config(builder,clusterName,serverId);
      configureClusterMember(builder,clusterName,serverId);
    }
    @Override protected void insertInitialData(    GraphDatabaseService db,    String name,    InstanceId serverId){
      super.insertInitialData(db,name,serverId);
      insertClusterMemberInitialData(db,name,serverId);
    }
  }
);
  life.start();
  cluster=clusterManager.getDefaultCluster();
  cluster.await(masterAvailable());
}
