{
  try (ServerControls server=TestServerBuilders.newInProcessBuilder().withFunction(MyFunctionsUsingMyCoreAPI.class).newServer()){
    HTTP.POST(server.httpURI().resolve("db/data/transaction/commit").toString(),quotedJson("{ 'statements': [ { 'statement': 'CREATE (), (), ()' } ] }"));
    assertQueryGetsValue(server,"RETURN my.countNodes() AS value",3L);
    assertQueryGetsError(server,"RETURN my.willFail() AS value","Write operations are not allowed");
  }
 }
