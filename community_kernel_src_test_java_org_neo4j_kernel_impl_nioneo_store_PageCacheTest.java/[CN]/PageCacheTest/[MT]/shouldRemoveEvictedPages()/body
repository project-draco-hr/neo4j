{
  StandardPageCache cache=newPageCache();
  PagedFile mappedFile=cache.map(storeFile,16);
  PageCursor cursor=cache.newPageCursor();
  Thread evictionThread=new Thread(cache);
  evictionThread.start();
  for (int i=0; i < 128; i++) {
    mappedFile.pin(cursor,PageLock.SHARED,i);
    mappedFile.unpin(cursor);
  }
  Thread.sleep(50);
  assertThat(mappedFile.numberOfCachedPages(),equalTo(61));
  evictionThread.interrupt();
}
