{
  commitNoLabels();
  IndexRule rule1=txContext.addIndexRule(labelId1,key1);
  IndexRule rule2=txContext.addIndexRule(labelId2,key2);
  assertEquals(asSet(rule1),IteratorUtil.asSet(txContext.getIndexRules(labelId1)));
  verify(store).getIndexRules(labelId1);
  assertEquals(asSet(rule2),IteratorUtil.asSet(txContext.getIndexRules(labelId2)));
  verify(store).getIndexRules(labelId2);
  assertEquals(asSet(rule1,rule2),IteratorUtil.asSet(txContext.getIndexRules()));
  verify(store).getIndexRules();
  verifyNoMoreInteractions(store);
}
