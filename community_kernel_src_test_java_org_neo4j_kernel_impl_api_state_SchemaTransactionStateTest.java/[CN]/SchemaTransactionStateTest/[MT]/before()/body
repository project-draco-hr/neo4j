{
  oldTxState=mock(OldTxStateBridge.class);
  txState=new TxStateImpl(oldTxState,mock(PersistenceManager.class),mock(TxState.IdGeneration.class));
  state=StatementOperationsTestHelper.mockedState(txState);
  store=mock(StatementOperations.class);
  when(store.indexesGetForLabel(state,labelId1)).then(asAnswer(Collections.<IndexDescriptor>emptyList()));
  when(store.indexesGetForLabel(state,labelId2)).then(asAnswer(Collections.<IndexDescriptor>emptyList()));
  when(store.indexesGetAll(state)).then(asAnswer(Collections.<IndexDescriptor>emptyList()));
  when(store.indexCreate(eq(state),anyInt(),anyInt())).thenAnswer(new Answer<IndexDescriptor>(){
    @Override public IndexDescriptor answer(    InvocationOnMock invocation) throws Throwable {
      return new IndexDescriptor((Integer)invocation.getArguments()[0],(Integer)invocation.getArguments()[1]);
    }
  }
);
  txContext=new StateHandlingStatementOperations(store,store,mock(AuxiliaryStoreOperations.class),mock(ConstraintIndexCreator.class));
}
