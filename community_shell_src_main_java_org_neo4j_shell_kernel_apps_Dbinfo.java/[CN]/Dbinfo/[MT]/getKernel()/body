{
  GraphDatabaseService graphDb=getServer().getDb();
  Kernel kernel=null;
  if (graphDb instanceof GraphDatabaseSPI) {
    try {
      kernel=((GraphDatabaseSPI)graphDb).getSingleManagementBean(Kernel.class);
    }
 catch (    Exception e) {
    }
  }
  if (kernel == null) {
    throw new ShellException(getName() + " is not available for this graph database.");
  }
  return kernel;
}
