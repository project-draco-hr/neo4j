{
  GraphDatabaseAPI graphDb=getServer().getDb();
  Kernel kernel=null;
  if (graphDb instanceof GraphDatabaseAPI) {
    try {
      kernel=graphDb.getDependencyResolver().resolveDependency(JmxKernelExtension.class).getSingleManagementBean(Kernel.class);
    }
 catch (    Exception e) {
    }
  }
  if (kernel == null) {
    throw new ShellException(getName() + " is not available for this graph database.");
  }
  return kernel;
}
