{
  try {
    Attribute attribute=(Attribute)value;
    Object attributeValue=attribute.getValue();
    if (attributeValue != null && attributeValue.getClass().isArray()) {
      Object[] arrayValue=(Object[])attributeValue;
      JSONArray array=new JSONArray();
      for (      Object item : (Object[])arrayValue) {
        if (item instanceof CompositeData) {
          array.put(compositeDataAsMap((CompositeData)item));
        }
 else {
          array.put(item.toString());
        }
      }
      json.put(attribute.getName(),array);
    }
 else {
      json.put(attribute.getName(),attributeValue);
    }
  }
 catch (  JSONException e) {
    throw ShellException.wrapCause(e);
  }
}
