{
  try {
    Attribute attribute=(Attribute)value;
    if (attribute.getValue().getClass().isArray()) {
      Object[] arrayValue=(Object[])attribute.getValue();
      JSONArray array=new JSONArray();
      for (      Object item : (Object[])arrayValue) {
        if (item instanceof CompositeData)         array.put(compositeDataAsMap((CompositeData)item));
 else         array.put(item.toString());
      }
      json.put(attribute.getName(),array);
    }
 else {
      json.put(attribute.getName(),attribute.getValue());
    }
  }
 catch (  JSONException e) {
    throw ShellException.wrapCause(e);
  }
}
