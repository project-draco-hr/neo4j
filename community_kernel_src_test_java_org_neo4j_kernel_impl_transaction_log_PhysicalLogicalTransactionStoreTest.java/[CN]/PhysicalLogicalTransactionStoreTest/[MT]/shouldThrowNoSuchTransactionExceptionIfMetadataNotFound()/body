{
  LogFile logFile=mock(LogFile.class);
  TransactionMetadataCache cache=new TransactionMetadataCache(10,10);
  TransactionIdStore txIdStore=mock(TransactionIdStore.class);
  LifeSupport life=new LifeSupport();
  TransactionAppender appender=life.add(new BatchingTransactionAppender(logFile,NO_ROTATION,cache,txIdStore,BYPASS,kernelHealth));
  final LogicalTransactionStore txStore=new PhysicalLogicalTransactionStore(logFile,cache,appender);
  try {
    life.start();
    try {
      txStore.getMetadataFor(10);
      fail("Should have thrown");
    }
 catch (    NoSuchTransactionException e) {
    }
  }
  finally {
    life.shutdown();
  }
}
