{
  try (Transaction tx=db.beginTx()){
    db.schema().constraintFor(label).assertPropertyIsUnique(property).create();
    tx.success();
  }
   Node a, b;
  Object va="a", vb="b";
  try (Transaction tx=db.beginTx()){
    a=db.createNode(label);
    a.setProperty(property,va);
    tx.success();
  }
   try (Transaction tx=db.beginTx()){
    b=db.createNode(label);
    b.setProperty(property,vb);
    tx.success();
  }
   try (Transaction tx=db.beginTx()){
    assertThat(single(db.findNodesByLabelAndProperty(label,property,va)).getProperty(property),is(va));
    assertThat(single(db.findNodesByLabelAndProperty(label,property,vb)).getProperty(property),is(vb));
    tx.success();
  }
 }
