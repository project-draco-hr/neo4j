{
  DatabasePanicEventGenerator generator=mock(DatabasePanicEventGenerator.class);
  DatabaseHealth databaseHealth=new DatabaseHealth(generator,NullLogProvider.getInstance().getLog(DatabaseHealth.class));
  databaseHealth.healed();
  Exception cause=new Exception("My own fault");
  databaseHealth.panic(cause);
  databaseHealth.panic(cause);
  verify(generator,times(1)).generateEvent(TX_MANAGER_NOT_OK,cause);
}
