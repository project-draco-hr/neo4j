{
  ByteBuf buffer=Unpooled.buffer();
  marshal.marshal(logEntry.content(),buffer);
  ByteBuffer contentBuffer=buffer.internalNioBuffer(0,buffer.writerIndex());
  int length=CONTENT_LENGTH_BYTES + contentBuffer.remaining();
  ByteBuffer contentLengthBuffer=ByteBuffer.allocate(CONTENT_LENGTH_BYTES);
  contentLengthBuffer.putInt(length);
  contentLengthBuffer.flip();
  contentChannel.writeAll(contentLengthBuffer,contentOffset);
  contentChannel.writeAll(contentBuffer,contentOffset + CONTENT_LENGTH_BYTES);
  contentChannel.force(false);
  return length;
}
