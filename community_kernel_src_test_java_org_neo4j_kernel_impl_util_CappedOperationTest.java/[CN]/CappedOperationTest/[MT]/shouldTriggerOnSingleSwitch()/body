{
  AtomicInteger triggerCount=new AtomicInteger();
  CappedOperation<String> operation=countingCappedOperations(triggerCount,count(2));
  assertEquals(0,triggerCount.get());
  operation.event("test");
  assertEquals(0,triggerCount.get());
  operation.event("test");
  assertEquals(1,triggerCount.get());
  operation.event("test");
  assertEquals(1,triggerCount.get());
  operation.event("test");
  assertEquals(2,triggerCount.get());
}
