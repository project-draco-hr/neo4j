{
  this.operations=operations;
  this.legacyKernelOperations=legacyKernelOperations;
  this.readOnly=readOnly;
  this.schemaWriteGuard=schemaWriteGuard;
  this.labelScanStore=labelScanStore;
  this.indexService=indexService;
  this.transactionManager=transactionManager;
  this.providerMap=providerMap;
  this.persistenceCache=persistenceCache;
  this.schemaState=schemaState;
  this.persistenceManager=persistenceManager;
  try {
    lockHolder=new LockHolderImpl(lockManager,transactionManager.getTransaction(),nodeManager);
  }
 catch (  SystemException e) {
    throw new org.neo4j.graphdb.TransactionFailureException("Unable to get transaction",e);
  }
  constraintIndexCreator=new ConstraintIndexCreator(new Transactor(transactionManager),this.indexService);
  schemaStorage=new SchemaStorage(neoStore.getSchemaStore());
  legacyStateBridge=new OldTxStateBridgeImpl(nodeManager,transactionManager.getTransactionState());
}
