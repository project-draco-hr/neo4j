{
class Impl extends Store {
    Impl(){
      super(TX_ID);
    }
    @SuppressWarnings("unchecked") @Override <Value>Value initialHeader(    HeaderField<Value> field){
      if (field == TX_ID) {
        return (Value)(Object)1l;
      }
 else {
        return super.initialHeader(field);
      }
    }
    @Override protected int compareHeaders(    Headers lhs,    Headers rhs){
      return Long.compare(lhs.get(TX_ID),rhs.get(TX_ID));
    }
    @Override protected long version(    Headers headers){
      return headers.get(TX_ID);
    }
    @Override protected void updateHeaders(    Headers.Builder headers,    long version){
      headers.put(TX_ID,version);
    }
  }
  try (Lifespan life=new Lifespan()){
    Store store=life.add(new Impl());
    for (long txId=2; txId <= 10; txId++) {
      store.updater(txId).get().close();
      store.prepareRotation(txId).rotate();
    }
  }
   try (Lifespan life=new Lifespan()){
    Store store=life.add(new Impl());
    assertEquals(10l,store.headers().get(TX_ID).longValue());
  }
 }
