{
  if (!dir.isDirectory()) {
    throw new UnsuitableDirectoryException("%s is not a directory",dir);
  }
  if (!dir.canWrite()) {
    throw new UnsuitableDirectoryException("%s is not writeable",dir);
  }
  String[] fileNames=dir.list(new FilenameFilter(){
    @Override public boolean accept(    File dir,    String name){
      return !name.startsWith(".");
    }
  }
);
  if (0 == fileNames.length) {
    return;
  }
  for (  String fileName : fileNames) {
    if (fileName.startsWith("neostore") || fileName.equals("neo4j.properties")) {
      return;
    }
  }
  throw new UnsuitableDirectoryException("%s is neither empty nor does it contain a neo4j graph database",dir);
}
