{
  GraphDatabaseAPI db=new FakeHaDatabase();
  ThreadToStatementContextBridge stmtBridge=db.getDependencyResolver().resolveDependency(ThreadToStatementContextBridge.class);
  db.beginTx();
  Statement statement=stmtBridge.statement();
  try {
    statement.schemaWriteOperations().uniquenessConstraintCreate(1,1);
    fail("expected exception here");
  }
 catch (  InvalidTransactionTypeKernelException e) {
    assertThat(e.getMessage(),containsString("HA"));
  }
  db.shutdown();
}
