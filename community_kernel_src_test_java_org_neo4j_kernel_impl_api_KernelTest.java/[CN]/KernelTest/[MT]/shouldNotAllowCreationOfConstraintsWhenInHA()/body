{
  GraphDatabaseAPI db=new FakeHaDatabase();
  KernelAPI kernelAPI=db.getDependencyResolver().resolveDependency(KernelAPI.class);
  db.beginTx();
  KernelTransaction tx=kernelAPI.newTransaction();
  Statement statement=tx.acquireStatement();
  try {
    statement.schemaWriteOperations().uniquenessConstraintCreate(1,1);
    fail("expected exception here");
  }
 catch (  InvalidTransactionTypeKernelException e) {
    assertThat(e.getMessage(),containsString("HA"));
  }
  db.shutdown();
}
