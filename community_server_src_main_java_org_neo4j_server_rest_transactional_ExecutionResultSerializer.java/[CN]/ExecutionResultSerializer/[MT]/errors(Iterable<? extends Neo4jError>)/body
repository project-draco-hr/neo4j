{
  try {
    ensureDocumentOpen();
    ensureResultsFieldClosed();
    out.writeArrayFieldStart("errors");
    try {
      for (      Neo4jError error : errors) {
        try {
          out.writeStartObject();
          out.writeObjectField("code",error.getStatusCode().getCode());
          out.writeObjectField("message",error.getMessage());
          if (error.shouldSerializeStackTrace()) {
            out.writeObjectField("stackTrace",error.getStackTraceAsString());
          }
        }
  finally {
          out.writeEndObject();
        }
      }
    }
  finally {
      out.writeEndArray();
      currentState=State.ERRORS_WRITTEN;
    }
  }
 catch (  IOException e) {
    loggedIOException(e);
  }
}
