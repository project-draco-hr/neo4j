{
  try {
    out.writeEndArray();
    try {
      out.writeArrayFieldStart("errors");
      while (errors.hasNext()) {
        Neo4jError error=errors.next();
        try {
          out.writeStartObject();
          out.writeObjectField("code",error.getErrorCode().getCode());
          out.writeObjectField("message",error.getMessage());
        }
  finally {
          out.writeEndObject();
        }
      }
    }
  finally {
      out.writeEndArray();
      out.writeEndObject();
      out.flush();
    }
  }
 catch (  IOException e) {
    handleIOException(e);
  }
}
