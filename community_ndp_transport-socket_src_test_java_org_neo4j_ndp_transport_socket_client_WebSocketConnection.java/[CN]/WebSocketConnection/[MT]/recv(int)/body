{
  int remaining=length;
  byte[] target=new byte[remaining];
  while (remaining > 0) {
    waitForRecievedData(length,remaining,target);
    for (int i=0; i < Math.min(remaining,currentRecieveBuffer.length - currentRecieveIndex); i++) {
      target[length - remaining]=currentRecieveBuffer[currentRecieveIndex++];
      remaining--;
    }
  }
  return target;
}
