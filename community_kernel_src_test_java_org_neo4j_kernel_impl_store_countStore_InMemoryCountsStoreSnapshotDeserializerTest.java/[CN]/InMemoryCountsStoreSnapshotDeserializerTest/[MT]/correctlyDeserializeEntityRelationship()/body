{
  serializedBytes=ByteBuffer.allocate(1000);
  InMemoryClosableChannel logChannel=new InMemoryClosableChannel(serializedBytes.array());
  writeSimpleHeader(logChannel);
  logChannel.put(ENTITY_RELATIONSHIP.code);
  logChannel.putInt(1);
  logChannel.putInt(1);
  logChannel.putInt(1);
  logChannel.putLong(1);
  RelationshipKey expectedNode=CountsKeyFactory.relationshipKey(1,1,1);
  CountsSnapshot countsSnapshot=deserialize(logChannel);
  assertNotNull(countsSnapshot.getMap().get(expectedNode));
  assertArrayEquals(new long[]{1},countsSnapshot.getMap().get(expectedNode));
}
