{
  Configuration config=movingAverageConfig(10);
  DynamicProcessorAssigner assigner=new DynamicProcessorAssigner(config,5);
  ControlledStep<?> aStep=new ControlledStep<>("slow",true);
  aStep.setStat(Keys.avg_processing_time,0);
  aStep.setStat(Keys.done_batches,0);
  ControlledStep<?> anotherStep=new ControlledStep<>("fast",true);
  anotherStep.setStat(Keys.avg_processing_time,0);
  anotherStep.setStat(Keys.done_batches,0);
  StageExecution[] execution=executionOf(config,aStep,anotherStep);
  assigner.start(execution);
  assigner.check(execution);
  assertEquals(1,aStep.numberOfProcessors());
  assertEquals(1,anotherStep.numberOfProcessors());
}
