{
  this.transactionData=nodeManager.getTransactionData();
  states=new ArrayList<HandlerAndState>();
  for (  TransactionEventHandler<T> handler : this.handlers) {
    try {
      T state=handler.beforeCommit(transactionData);
      states.add(new HandlerAndState(handler,state));
    }
 catch (    Throwable t) {
      transaction.failure();
      throw new RuntimeException(t);
    }
  }
}
