{
  Map<String,Object> data=new HashMap<String,Object>();
  data.put(ID_KEY,wrapped.getId());
  data.put(NAME_KEY,wrapped.getName());
  data.put(CRON_EXPRESSION_KEY,wrapped.getCronExpression());
  data.put(AUTO_FOUNDATION_KEY,wrapped.isAutoFoundation());
  data.put(BACKUP_PATH_KEY,wrapped.getPath());
  if (includeLog) {
    BackupLog log=BackupManager.INSTANCE.getLog();
    ArrayList<BackupLogEntry> logEntries=log.getLog(wrapped.getId());
    BackupLogEntry latestSuccessfulLogEntry=log.getLatestSuccessful(wrapped.getId());
    ArrayList<Object> serializedLog=new ArrayList<Object>();
    for (    BackupLogEntry entry : logEntries) {
      serializedLog.add(entry.serialize());
    }
    Map<String,Object> logData=new HashMap<String,Object>();
    logData.put(LATEST_SUCCESS_LOG_KEY,latestSuccessfulLogEntry == null ? null : latestSuccessfulLogEntry.serialize());
    logData.put(LOG_ENTRIES_KEY,serializedLog);
    data.put(LOG_KEY,logData);
  }
  return data;
}
