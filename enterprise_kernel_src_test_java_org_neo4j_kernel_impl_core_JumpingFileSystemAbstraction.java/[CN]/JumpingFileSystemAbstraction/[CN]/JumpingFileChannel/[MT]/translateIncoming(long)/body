{
  long actualRecord=position / recordSize;
  if (actualRecord < sizePerJump / 2) {
    return position;
  }
 else {
    long jumpIndex=(actualRecord + sizePerJump) / 0x100000000L;
    long diff=actualRecord - jumpIndex * 0x100000000L;
    assertWithinDiff(diff);
    long offsettedRecord=jumpIndex * sizePerJump + diff;
    return offsettedRecord * recordSize;
  }
}
