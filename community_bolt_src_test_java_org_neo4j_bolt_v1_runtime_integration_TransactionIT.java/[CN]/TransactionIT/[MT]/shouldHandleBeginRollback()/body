{
  RecordingCallback<StatementMetadata,?> responses=new RecordingCallback<>();
  Session session=env.newSession("<test>");
  session.init("TestClient",emptyMap(),-1,null,null);
  session.run("BEGIN",emptyMap(),null,responses);
  session.discardAll(null,Session.Callbacks.noop());
  session.run("CREATE (n:InTx)",emptyMap(),null,responses);
  session.discardAll(null,Session.Callbacks.noop());
  session.run("ROLLBACK",emptyMap(),null,responses);
  session.discardAll(null,Session.Callbacks.noop());
  assertThat(responses.next(),success());
  assertThat(responses.next(),success());
  assertThat(responses.next(),success());
}
