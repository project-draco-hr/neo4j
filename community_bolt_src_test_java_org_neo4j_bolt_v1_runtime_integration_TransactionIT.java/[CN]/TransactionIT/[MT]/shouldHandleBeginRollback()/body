{
  RecordingCallback<StatementMetadata,?> responses=new RecordingCallback<>();
  Session session=env.newSession();
  session.init("TestClient",Collections.<String,Object>emptyMap(),null,null);
  session.run("BEGIN",EMPTY_PARAMS,null,responses);
  session.discardAll(null,Session.Callbacks.<Void,Object>noop());
  session.run("CREATE (n:InTx)",EMPTY_PARAMS,null,responses);
  session.discardAll(null,Session.Callbacks.<Void,Object>noop());
  session.run("ROLLBACK",EMPTY_PARAMS,null,responses);
  session.discardAll(null,Session.Callbacks.<Void,Object>noop());
  MatcherAssert.assertThat(responses.next(),SessionMatchers.success());
  MatcherAssert.assertThat(responses.next(),SessionMatchers.success());
  MatcherAssert.assertThat(responses.next(),SessionMatchers.success());
}
