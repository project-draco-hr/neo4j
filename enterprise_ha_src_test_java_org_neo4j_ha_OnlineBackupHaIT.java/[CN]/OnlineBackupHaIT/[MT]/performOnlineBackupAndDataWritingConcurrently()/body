{
  final Future<?> backupFuture=executor.submit(new Runnable(){
    @Override public void run(){
      try {
        startedDataWriting.await();
      }
 catch (      InterruptedException e) {
        throw new RuntimeException(e);
      }
      OnlineBackup backup=OnlineBackup.from("127.0.0.1",BACKUP_PORT);
      backup.backup(BACKUP_PATH.getPath());
      System.out.println("***Done backup***");
    }
  }
);
  Future<?> writeFuture=executor.submit(new Runnable(){
    @Override public void run(){
      GraphDatabaseService db=cluster.getMaster();
      while (!backupFuture.isDone()) {
        Transaction tx=db.beginTx();
        Node node=db.createNode();
        node.setProperty("name","node" + nodeCount);
        tx.success();
        tx.finish();
        nodeCount++;
        startedDataWriting.countDown();
      }
      System.out.println("***Done data writing***");
    }
  }
);
  writeFuture.get();
}
