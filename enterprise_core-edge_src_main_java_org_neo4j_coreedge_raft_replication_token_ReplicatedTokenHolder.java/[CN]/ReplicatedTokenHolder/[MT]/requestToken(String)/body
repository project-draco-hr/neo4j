{
  ReplicatedTokenRequest tokenRequest=new ReplicatedTokenRequest(type,tokenName,createCommands(tokenName));
  try (TokenFutures.CompletableFutureTokenId tokenFuture=tokenFutures.createFuture(tokenName)){
    try {
      replicator.replicate(tokenRequest);
    }
 catch (    Replicator.ReplicationFailedException e) {
      throw new RuntimeException("Replication failures not currently handled.");
    }
    try {
      return tokenFuture.get();
    }
 catch (    InterruptedException|ExecutionException e) {
      throw new RuntimeException("Future exceptions currently not handled.");
    }
  }
 catch (  Exception e) {
    throw new RuntimeException("Error closing future.",e);
  }
}
