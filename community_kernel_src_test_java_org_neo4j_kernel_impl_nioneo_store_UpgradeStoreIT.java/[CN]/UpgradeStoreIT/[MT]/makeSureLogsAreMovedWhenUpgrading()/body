{
  File path=path(10);
  for (int i=0; i < 3; i++) {
    new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(path.getPath()).setConfig(GraphDatabaseSettings.keep_logical_logs,Settings.TRUE).newGraphDatabase().shutdown();
  }
  setOlderNeoStoreVersion(path);
  new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(path.getPath()).setConfig(GraphDatabaseSettings.allow_store_upgrade,Settings.TRUE).newGraphDatabase().shutdown();
  File oldLogDir=new File(path,"1.2-logs");
  assertTrue(oldLogDir.exists());
  assertTrue(new File(oldLogDir,PhysicalLogFile.DEFAULT_NAME + PhysicalLogFile.DEFAULT_VERSION_SUFFIX + "0").exists());
  assertTrue(new File(oldLogDir,PhysicalLogFile.DEFAULT_NAME + PhysicalLogFile.DEFAULT_VERSION_SUFFIX + "1").exists());
  assertTrue(new File(oldLogDir,PhysicalLogFile.DEFAULT_NAME + PhysicalLogFile.DEFAULT_VERSION_SUFFIX + "2").exists());
  assertFalse(new File(path,PhysicalLogFile.DEFAULT_NAME + PhysicalLogFile.DEFAULT_VERSION_SUFFIX + "0").exists());
  assertFalse(new File(path,PhysicalLogFile.DEFAULT_NAME + PhysicalLogFile.DEFAULT_VERSION_SUFFIX + "1").exists());
  assertFalse(new File(path,PhysicalLogFile.DEFAULT_NAME + PhysicalLogFile.DEFAULT_VERSION_SUFFIX + "2").exists());
}
