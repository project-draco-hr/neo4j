{
  long entity=createConstraintAndEntity("Type1","key1","value1");
  DataWriteOperations statement=dataWriteOperationsInNewTransaction();
  int key=statement.propertyKeyGetOrCreateForName("key1");
  removeProperty(statement,entity,key);
  try {
    commit();
    fail("should have thrown exception");
  }
 catch (  ConstraintViolationTransactionFailureException e) {
    Status expected=Status.Schema.ConstraintViolation;
    assertThat(e.status(),is(expected));
  }
}
