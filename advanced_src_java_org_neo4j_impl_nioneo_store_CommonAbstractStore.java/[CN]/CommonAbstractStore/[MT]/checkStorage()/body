{
  if (!new File(storageFileName).exists()) {
    throw new IllegalStateException("No such store[" + storageFileName + "]");
  }
  try {
    this.fileChannel=new RandomAccessFile(storageFileName,"rw").getChannel();
  }
 catch (  IOException e) {
    throw new StoreFailureException("Unable to open file " + storageFileName,e);
  }
  try {
    this.fileLock=this.fileChannel.tryLock();
    if (fileLock == null) {
      fileChannel.close();
      throw new IllegalStateException("Unable to lock store [" + storageFileName + "], this is usually a result of some "+ "other Neo running using the same store.");
    }
  }
 catch (  IOException e) {
    throw new StoreFailureException("Unable to lock store[" + storageFileName + "]");
  }
}
