{
  return compile(className,inputSource,new CompilationListener<Visitable<DbStructureVisitor>>(){
    @Override public Visitable<DbStructureVisitor> compiled(    Boolean success,    JavaFileManager manager,    List<Diagnostic<? extends JavaFileObject>> diagnostics){
      assertSuccessfullyCompiled(success,diagnostics,className);
      Object instance;
      try {
        ClassLoader classLoader=manager.getClassLoader(null);
        Class<?> clazz=classLoader.loadClass(className);
        instance=clazz.getDeclaredField("INSTANCE").get(null);
      }
 catch (      IllegalAccessException|ClassNotFoundException|NoSuchFieldException e) {
        throw new AssertionError("Failed to instantiate compiled class",e);
      }
      return (Visitable<DbStructureVisitor>)instance;
    }
  }
);
}
