{
  this.connectedStateMachines=connectedStateMachines;
  this.msgLog=logging.getLogger(getClass());
  FromHeaderMessageProcessor fromHeaderMessageProcessor=new FromHeaderMessageProcessor();
  addBindingListener(fromHeaderMessageProcessor);
  connectedStateMachines.addMessageProcessor(fromHeaderMessageProcessor);
  StateMachineConversations conversations=new StateMachineConversations();
  proxyFactory=new StateMachineProxyFactory(connectedStateMachines,conversations);
  connectedStateMachines.addMessageProcessor(proxyFactory);
  addBindingListener(conversations);
  addBindingListener(proxyFactory);
}
