{
  this.stateMachines=stateMachines;
  this.msgLog=logging.getLogger(getClass());
  FromHeaderMessageProcessor fromHeaderMessageProcessor=new FromHeaderMessageProcessor();
  addBindingListener(fromHeaderMessageProcessor);
  stateMachines.addMessageProcessor(fromHeaderMessageProcessor);
  StateMachineConversations conversations=new StateMachineConversations();
  proxyFactory=new StateMachineProxyFactory(stateMachines,conversations);
  stateMachines.addMessageProcessor(proxyFactory);
  addBindingListener(conversations);
  addBindingListener(proxyFactory);
}
