{
  File file=new File("a");
  StoreChannel channel=fs.create(file);
  ByteBuffer buf=ByteBuffer.allocate(cachePageSize);
  channel.writeAll(buf);
  channel.close();
  Page page=createPage(cachePageSize);
  PageSwapper swapper=swapperFactory.createPageSwapper(file,cachePageSize,NO_CALLBACK);
  swapper.close();
  long stamp=writeLock(page);
  try {
    swapper.read(0,page);
    fail("Should have thrown because the channel should be closed");
  }
 catch (  ClosedChannelException ignore) {
  }
 finally {
    unlockWrite(page,stamp);
  }
}
