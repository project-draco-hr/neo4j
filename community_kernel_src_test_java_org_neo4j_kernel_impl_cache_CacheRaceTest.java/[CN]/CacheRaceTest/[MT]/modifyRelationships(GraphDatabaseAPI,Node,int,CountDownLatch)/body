{
  try (Transaction tx=graphDb.beginTx()){
    List<Relationship> createdRelationships=new ArrayList<>();
    List<Relationship> deletedRelationships=new ArrayList<>();
    Node other=graphDb.createNode();
    int changes=random.nextInt(maxNumberOfChanges);
    for (int i=0; i < changes; i++) {
      if (random.nextFloat() < 0.8f) {
        createdRelationships.add(createRandomRelationship(node,other));
      }
 else {
        Relationship deletedRelationship=deleteRandomRelationship(node);
        if (deletedRelationship != null) {
          deletedRelationships.add(deletedRelationship);
        }
      }
    }
    tx.success();
    if (startLatch != null) {
      startLatch.countDown();
    }
    return Pair.of(createdRelationships.toArray(new Relationship[createdRelationships.size()]),deletedRelationships.toArray(new Relationship[deletedRelationships.size()]));
  }
 }
