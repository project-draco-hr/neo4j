{
  StringBuilder builder=new StringBuilder();
  NeoStore neoStore=graphDb.getDependencyResolver().resolveDependency(NeoStoreProvider.class).evaluate();
  NodeRecord node=neoStore.getNodeStore().getRecord(nodeId);
  if (node.isDense()) {
    RelationshipGroupRecord group=neoStore.getRelationshipGroupStore().getRecord(node.getNextRel());
    do {
      builder.append("group " + group);
      builder.append("out:\n");
      printRelChain(builder,neoStore,nodeId,group.getFirstOut());
      builder.append("in:\n");
      printRelChain(builder,neoStore,nodeId,group.getFirstIn());
      builder.append("loop:\n");
      printRelChain(builder,neoStore,nodeId,group.getFirstLoop());
      group=group.getNext() != -1 ? neoStore.getRelationshipGroupStore().getRecord(group.getNext()) : null;
    }
 while (group != null);
  }
 else {
    printRelChain(builder,neoStore,nodeId,node.getNextRel());
  }
  return builder.toString();
}
