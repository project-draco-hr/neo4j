{
  EnterpriseDriver driver=drivers[0];
  long nodeId=driver.neo4jClient().createNode();
  driver.performFullHABackup("neobackup",coordinatorAddresses);
  driver.performIncrementalHABackup("neobackup",coordinatorAddresses);
  for (  EnterpriseDriver d : drivers) {
    d.stopNeo4j();
    d.deleteDatabase();
  }
  driver.replaceGraphDataDirWithBackup("neobackup");
  for (  EnterpriseDriver d : drivers)   d.startNeo4j();
  for (  EnterpriseDriver d : drivers) {
    try {
      d.neo4jClient().waitUntilNodeExists(nodeId);
    }
 catch (    Exception e) {
      throw new RuntimeException("Restoring backup failed on server " + d.vm().definition().ip(),e);
    }
  }
  assertClusterWorks();
}
