{
  sharedLocks.clear();
  exclusiveLocks.clear();
  client.releaseAll();
  if (initialized) {
    try (Response<Void> ignored=master.endLockSession(newRequestContextFor(client),true)){
    }
 catch (    ComException e) {
      throw new DistributedLockFailureException("Failed to end the lock session on the master (which implies releasing all held locks)",master,e);
    }
    initialized=false;
  }
}
