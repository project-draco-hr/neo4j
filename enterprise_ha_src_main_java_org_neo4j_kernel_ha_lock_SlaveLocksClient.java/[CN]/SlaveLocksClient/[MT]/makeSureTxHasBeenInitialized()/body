{
  if (!availabilityGuard.isAvailable(config.getAvailabilityTimeout())) {
    throw new RuntimeException("Timed out waiting for database to allow operations to proceed. " + availabilityGuard.describeWhoIsBlocking());
  }
  if (!initialized) {
    master.initializeTx(requestContextFactory.newRequestContext((int)client.getIdentifier()));
    initialized=true;
  }
}
