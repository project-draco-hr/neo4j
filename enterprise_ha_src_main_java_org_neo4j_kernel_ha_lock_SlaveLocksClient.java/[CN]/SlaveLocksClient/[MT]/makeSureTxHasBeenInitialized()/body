{
  try {
    availabilityGuard.await(config.getAvailabilityTimeout());
  }
 catch (  AvailabilityGuard.UnavailableException e) {
    throw new RuntimeException(e.getMessage());
  }
  if (!initialized) {
    try (Response<Void> ignored=master.newLockSession(newRequestContextFor(client))){
    }
 catch (    TransactionFailureException e) {
      throw new org.neo4j.graphdb.TransactionFailureException("Failed to acquire lock in cluster: " + e.getMessage(),e);
    }
    initialized=true;
  }
}
