{
  try {
    if (!ctx.closed && onClose != null) {
      onClose.run();
    }
  }
  finally {
    ctx.closed=true;
    reset();
  }
}
