{
  if (!ctx.closed) {
    if (onClose != null) {
      onClose.run();
    }
    try {
      ctx.statementProcessor.reset();
    }
 catch (    TransactionFailureException e) {
      throw new RuntimeException(e);
    }
 finally {
      ctx.closed=true;
    }
  }
}
