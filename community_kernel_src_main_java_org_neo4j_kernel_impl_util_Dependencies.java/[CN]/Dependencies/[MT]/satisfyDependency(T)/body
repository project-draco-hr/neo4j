{
  Class type=dependency.getClass();
  do {
    List<Object> deps=(List<Object>)typeDependencies.get(type);
    if (deps == null) {
      deps=new ArrayList<>();
      typeDependencies.put(type,deps);
    }
    deps.add(dependency);
    Class[] interfaces=type.getInterfaces();
    addInterfaces(interfaces,dependency);
    type=type.getSuperclass();
  }
 while (type != null);
  return dependency;
}
