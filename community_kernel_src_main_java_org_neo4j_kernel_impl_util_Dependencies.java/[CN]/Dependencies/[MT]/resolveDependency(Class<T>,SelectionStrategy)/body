{
  Object dependency=dependencies.get(type);
  if (dependency == null) {
    dependency=getDependencyForType(type,SUPER_CLASS);
  }
  if (dependency == null) {
    dependency=getDependencyForType(type,INTERFACES);
  }
  if (dependency == null) {
    throw new IllegalArgumentException("Weird exception nesting here, but anyways, I couldn't find any dependency for " + type);
  }
  return type.cast(dependency);
}
