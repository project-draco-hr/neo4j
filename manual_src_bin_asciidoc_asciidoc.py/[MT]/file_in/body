def file_in(fname, directory):
    'Return True if file fname resides inside directory.'
    assert os.path.isfile(fname)
    if (directory == ''):
        directory = os.getcwd()
    else:
        assert os.path.isdir(directory)
        directory = os.path.realpath(directory)
    fname = os.path.realpath(fname)
    return (os.path.commonprefix((directory, fname)) == directory)
