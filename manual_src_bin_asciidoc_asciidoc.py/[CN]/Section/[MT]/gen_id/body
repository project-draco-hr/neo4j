@staticmethod
def gen_id(title):
    "\n        The normalized value of the id attribute is an NCName according to\n        the 'Namespaces in XML' Recommendation:\n        NCName          ::=     NCNameStartChar NCNameChar*\n        NCNameChar      ::=     NameChar - ':'\n        NCNameStartChar ::=     Letter | '_'\n        NameChar        ::=     Letter | Digit | '.' | '-' | '_' | ':'\n        "
    base_ident = char_encode(re.sub('(?u)\\W+', '_', char_decode(title)).strip('_').lower())
    idprefix = document.attributes.get('idprefix', '_')
    base_ident = (idprefix + base_ident)
    i = 1
    while True:
        if (i == 1):
            ident = base_ident
        else:
            ident = ('%s_%d' % (base_ident, i))
        if (ident not in Section.ids):
            Section.ids.append(ident)
            return ident
        else:
            ident = base_ident
        i += 1
