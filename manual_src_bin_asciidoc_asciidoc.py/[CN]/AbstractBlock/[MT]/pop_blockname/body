def pop_blockname(self):
    "\n        On block exits restore previous (parent) 'blockname' attribute or\n        undefine it if we're no longer inside a block.\n        "
    assert (len(self.blocknames) > 0)
    blockname = self.blocknames.pop()
    trace('pop blockname', blockname)
    if (len(self.blocknames) == 0):
        document.attributes['blockname'] = None
    else:
        document.attributes['blockname'] = self.blocknames[(-1)]
