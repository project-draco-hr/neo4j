@staticmethod
def set_replacement(pat, rep, replacements):
    'Add pattern and replacement to replacements dictionary.'
    pat = strip_quotes(pat)
    if (not is_re(pat)):
        return False
    if (rep is None):
        if (pat in replacements):
            del replacements[pat]
    else:
        replacements[pat] = strip_quotes(rep)
    return True
