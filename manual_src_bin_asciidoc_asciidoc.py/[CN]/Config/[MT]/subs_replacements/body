def subs_replacements(self, s, sect='replacements'):
    "Substitute patterns from self.replacements in 's'."
    result = s
    for (pat, rep) in getattr(self, sect).items():
        result = re.sub(pat, rep, result)
    return result
