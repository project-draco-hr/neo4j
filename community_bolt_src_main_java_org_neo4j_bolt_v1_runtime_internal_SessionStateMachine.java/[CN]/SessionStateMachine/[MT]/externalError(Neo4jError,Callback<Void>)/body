{
  before(callback);
  try {
    state=state.error(this,error);
  }
  finally {
    after();
  }
}
