{
switch (mode) {
case PIPELINE:
    while (lastSentIndex <= prevLogIndex) {
      if (prevLogIndex - matchIndex <= maxAllowedShippingLag) {
        sendNewEntry(prevLogIndex,prevLogTerm,newLogEntry,leaderContext);
      }
 else {
        mode=Mode.CATCHUP;
        break;
      }
    }
  break;
}
lastLeaderContext=leaderContext;
}
