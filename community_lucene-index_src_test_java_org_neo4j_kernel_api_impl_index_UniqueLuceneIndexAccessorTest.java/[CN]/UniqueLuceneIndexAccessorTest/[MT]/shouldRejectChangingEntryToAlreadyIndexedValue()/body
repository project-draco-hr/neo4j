{
  UniqueLuceneIndexAccessor accessor=createAccessor();
  updateAndCommit(accessor,asList(add(1l,"value1")));
  updateAndCommit(accessor,asList(add(2l,"value2")));
  try {
    updateAndCommit(accessor,asList(change(1l,"value1","value2")));
    fail("expected exception");
  }
 catch (  PreexistingIndexEntryConflictException conflict) {
    assertConflict(conflict,"value2",2l,1l);
  }
}
