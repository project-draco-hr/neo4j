{
  PartitionedIndexReader indexReader=createPartitionedReaderFromReaders();
  when(indexReader1.createSampler()).thenReturn(new SimpleSampler(1));
  when(indexReader2.createSampler()).thenReturn(new SimpleSampler(2));
  when(indexReader3.createSampler()).thenReturn(new SimpleSampler(3));
  IndexSampler sampler=indexReader.createSampler();
  assertEquals(6,sampler.sampleIndex(Registers.newDoubleLongRegister()));
}
