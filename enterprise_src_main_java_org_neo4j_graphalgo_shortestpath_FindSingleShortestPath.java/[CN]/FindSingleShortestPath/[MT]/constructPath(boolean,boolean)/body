{
  LinkedList<PropertyContainer> path=new LinkedList<PropertyContainer>();
  Relationship rel=firstSet.get(matchNode);
  Node currentNode=matchNode;
  while (rel != NULL_REL && rel != null) {
    if (includeRels) {
      path.addFirst(rel);
    }
    currentNode=rel.getOtherNode(currentNode);
    if (includeNodes && !currentNode.equals(matchNode) && !currentNode.equals(startNode)) {
      path.addFirst(currentNode);
    }
    rel=firstSet.get(currentNode);
  }
  if (includeNodes) {
    path.addFirst(startNode);
    if (!matchNode.equals(startNode)) {
      path.addLast(matchNode);
    }
  }
  rel=secondSet.get(matchNode);
  currentNode=matchNode;
  while (rel != NULL_REL && rel != null) {
    if (includeRels) {
      path.addLast(rel);
    }
    currentNode=rel.getOtherNode(currentNode);
    if (includeNodes && !currentNode.equals(endNode)) {
      path.addLast(currentNode);
    }
    rel=secondSet.get(currentNode);
  }
  if (includeNodes && !endNode.equals(matchNode)) {
    path.addLast(endNode);
  }
  return path;
}
