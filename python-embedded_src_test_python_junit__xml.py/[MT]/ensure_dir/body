def ensure_dir(dir):
    'Ensure dir exists'
    if dir.endswith('/'):
        dir = dir[:(-1)]
    if (not os.path.exists(dir)):
        ensure_dir(os.path.dirname(dir))
        os.mkdir(dir)
