def write_xml(self, stream):
    stream.write(('  <testcase name="%s" time="%.3f"' % (self.name, self.took)))
    if (not (self.type or self.stdout or self.stderr)):
        stream.write('/>\n')
        return
    stream.write('>\n')
    if self.type:
        stream.write(('    <%s type="%s" message=%s><![CDATA[%s]]></%s>\n' % (self.type, self.exc_name, saxutils.quoteattr(self.message), escape_cdata(self.traceback), self.type)))
    write_stdouterr_xml(stream, self.stdout, self.stderr)
    stream.write('  </testcase>\n')
