{
  buffer.put(coreSnapshot.version());
  buffer.putLong(coreSnapshot.prevIndex);
  buffer.putLong(coreSnapshot.prevTerm);
  buffer.putInt(coreSnapshot.size());
  for (  CoreStateType type : coreSnapshot.types()) {
    buffer.putInt(type.ordinal());
    type.marshal.marshal(coreSnapshot.get(type),buffer);
  }
}
