{
  long timeot=System.currentTimeMillis() + TimeUnit.SECONDS.toMillis(10);
  while (db.schema().getIndexState(index) != state) {
    Thread.yield();
    if (System.currentTimeMillis() > timeot)     fail("Expected index to come online within a reasonable time.");
  }
}
