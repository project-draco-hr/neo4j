{
  Throwable causeOfFailure=null;
  int i=0;
  boolean unexpectedException=false;
  while (i++ < NEW_MASTER_STARTUP_RETRIES) {
    try {
      cause.log(messageLog,"newMaster called");
      reevaluateMyself();
      return;
    }
 catch (    ZooKeeperException zke) {
      getMessageLog().logMessage("ZooKeeper exception in newMaster, retry #" + i,zke);
      causeOfFailure=zke;
      sleepWithoutInterruption(500,"");
      continue;
    }
catch (    IllegalProtocolVersionException pe) {
      getMessageLog().logMessage("Got wrong protocol version during newMaster, expected " + pe.getExpected() + " but got "+ pe.getReceived(),pe);
      broker.restart();
      causeOfFailure=pe;
      continue;
    }
catch (    ComException ce) {
      getMessageLog().logMessage("Communication exception in newMaster, retry #" + i,ce);
      causeOfFailure=ce;
      sleepWithoutInterruption(500,"");
      continue;
    }
catch (    BranchedDataException bde) {
      getMessageLog().logMessage("Branched data occurred, during newMaster retry #" + i,bde);
      getFreshDatabaseFromMaster(true);
      causeOfFailure=bde;
      continue;
    }
catch (    Throwable t) {
      causeOfFailure=t;
      unexpectedException=true;
      break;
    }
  }
  if (causeOfFailure != null && unexpectedException) {
    getMessageLog().logMessage("Reevaluation ended in unknown exception so shutting down",causeOfFailure,true);
    shutdown(causeOfFailure,false);
  }
  throw Exceptions.launderedException(causeOfFailure);
}
