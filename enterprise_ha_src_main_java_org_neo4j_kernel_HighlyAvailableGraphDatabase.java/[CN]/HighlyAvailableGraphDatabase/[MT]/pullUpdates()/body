{
  try {
    if (masterServer == null) {
      if (broker.getMaster() == null && broker instanceof ZooKeeperBroker) {
        messageLog.logMessage("ZooKeeper broker returned null master");
        newMaster(KnownReevaluationCauses.NO_MASTER_IN_PULL_UPDATES);
      }
 else       if (broker.getMaster().first() == null) {
        newMaster(KnownReevaluationCauses.NO_MASTER_IN_PULL_UPDATES);
      }
      RequestContext slaveContext=null;
      if (!pullUpdates)       throw new NoMasterException();
synchronized (this) {
        if (!pullUpdates)         return;
        slaveContext=slaveOperations.getSlaveContext(-1);
      }
      slaveOperations.receive(broker.getMaster().first().pullUpdates(slaveContext));
    }
  }
 catch (  ZooKeeperException e) {
    newMaster(UnknownReevaluationCause.fromException(e));
    throw e;
  }
catch (  NoMasterException e) {
    newMaster(UnknownReevaluationCause.fromException(e));
    throw e;
  }
catch (  ComException e) {
    throw e;
  }
}
