{
  if (e instanceof ComException && e.getCause() instanceof BranchedDataException) {
    BranchedDataException bde=(BranchedDataException)e.getCause();
    getMessageLog().logMessage("Master says I've got branched data: " + bde);
  }
  Throwable cause=null;
  int i=0;
  boolean unexpectedException=false;
  while (i++ < NEW_MASTER_STARTUP_RETRIES) {
    try {
      getMessageLog().logMessage("newMaster called",e,true);
      reevaluateMyself();
      return;
    }
 catch (    ZooKeeperException zke) {
      getMessageLog().logMessage("ZooKeeper exception in newMaster, retry #" + i,zke);
      e=zke;
      cause=zke;
      sleepWithoutInterruption(500,"");
      continue;
    }
catch (    ComException ce) {
      getMessageLog().logMessage("Communication exception in newMaster, retry #" + i,ce);
      e=ce;
      cause=ce;
      sleepWithoutInterruption(500,"");
      continue;
    }
catch (    BranchedDataException bde) {
      getMessageLog().logMessage("Branched data occurred, during newMaster retry #" + i,bde);
      getFreshDatabaseFromMaster(true);
      e=bde;
      cause=bde;
      continue;
    }
catch (    Throwable t) {
      cause=t;
      unexpectedException=true;
      break;
    }
  }
  if (cause != null && unexpectedException) {
    getMessageLog().logMessage("Reevaluation ended in unknown exception " + cause + " so shutting down",cause,true);
    shutdown(cause,false);
  }
  throw Exceptions.launderedException(cause);
}
