{
  String path;
  try {
    path=file.getCanonicalPath();
  }
 catch (  IOException ex) {
    path=file.getAbsolutePath();
  }
  GraphDbContainer graphDb=instances.get(path);
  if (graphDb == null) {
    graphDb=new GraphDbContainer(new EmbeddedGraphDatabase(path));
    Runtime.getRuntime().addShutdownHook(new Thread(graphDb));
    instances.put(path,graphDb);
  }
  return graphDb;
}
