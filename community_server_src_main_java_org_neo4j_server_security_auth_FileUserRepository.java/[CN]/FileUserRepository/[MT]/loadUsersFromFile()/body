{
  byte[] fileBytes=Files.readAllBytes(authFile);
  List<User> loadedUsers;
  try {
    loadedUsers=serialization.deserializeUsers(fileBytes);
  }
 catch (  UserSerialization.FormatException e) {
    log.error(format("Ignoring authorization file \"%s\" (%s)",authFile.toAbsolutePath(),e.getMessage()));
    loadedUsers=new ArrayList<>();
  }
  if (loadedUsers == null) {
    throw new IllegalStateException("Failed to read authentication file: " + authFile);
  }
  users=loadedUsers;
  for (  User user : users) {
    usersByName.put(user.name(),user);
  }
}
