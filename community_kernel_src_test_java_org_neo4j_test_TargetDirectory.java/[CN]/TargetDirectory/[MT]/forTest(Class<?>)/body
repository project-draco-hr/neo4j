{
  File target=null;
  try {
    File codeSource=new File(owningTest.getProtectionDomain().getCodeSource().getLocation().toURI());
    if (codeSource.exists()) {
      if (codeSource.isFile()) {
      }
 else       if (codeSource.isDirectory()) {
        target=codeSource.getParentFile();
      }
    }
  }
 catch (  URISyntaxException e) {
  }
  if (target == null) {
    target=new File("target");
    if (!(target.exists() && target.isDirectory())) {
      try {
        target=File.createTempFile("neo4j-test","target");
      }
 catch (      IOException e) {
        throw new IllegalStateException("Cannot create target directory");
      }
    }
  }
  return new TargetDirectory(new File(new File(target,"test-data"),owningTest.getName()));
}
