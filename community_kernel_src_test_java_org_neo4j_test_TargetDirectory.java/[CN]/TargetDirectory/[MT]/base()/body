{
  if (fileSystem.fileExists(base)) {
    if (!fileSystem.isDirectory(base))     throw new IllegalStateException(base + " exists and is not a directory!");
  }
 else {
    try {
      fileSystem.mkdirs(base);
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
  return base;
}
