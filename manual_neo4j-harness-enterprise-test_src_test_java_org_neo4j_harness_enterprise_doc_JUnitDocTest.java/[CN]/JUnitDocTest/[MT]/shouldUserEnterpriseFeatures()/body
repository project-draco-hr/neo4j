{
  GraphDatabaseService db=neo4j.getGraphDatabaseService();
  try (Transaction tx=db.beginTx()){
    try (Result result=db.execute("CREATE CONSTRAINT ON (user:User) ASSERT exists(user.name)")){
    }
     tx.success();
  }
   try (Transaction tx=db.beginTx()){
    ConstraintDefinition constraint=single(db.schema().getConstraints());
    assertTrue(constraint.isConstraintType(ConstraintType.NODE_PROPERTY_EXISTENCE));
    assertEquals(DynamicLabel.label("User"),constraint.getLabel());
    assertEquals("name",single(constraint.getPropertyKeys()));
    tx.success();
  }
 }
