{
  Collection<Releasable> releaseFailures=null;
  Exception releaseException=null;
  for (  Releasable lockElement : locks) {
    try {
      lockElement.release();
    }
 catch (    Exception e) {
      releaseException=e;
      if (releaseFailures == null)       releaseFailures=new ArrayList<Releasable>();
      releaseFailures.add(lockElement);
    }
  }
  if (releaseException != null) {
    throw new RuntimeException("Unable to release locks: " + releaseFailures + ".",releaseException);
  }
}
