{
  ReplicatedInteger content=ReplicatedInteger.valueOf(1);
  RaftLogEntry payload=new RaftLogEntry(0,content);
  RaftRecordCursor recordCursor=mock(RaftRecordCursor.class);
  when(recordCursor.next()).thenReturn(true).thenReturn(true).thenReturn(true).thenReturn(false);
  when(recordCursor.get()).thenReturn(new RaftLogAppendRecord(1,payload)).thenReturn(new RaftLogAppendRecord(2,payload)).thenReturn(new RaftLogAppendRecord(3,payload)).thenReturn(null);
  PhysicalRaftLogEntryCursor entryCursor=new PhysicalRaftLogEntryCursor(recordCursor);
  assertTrue(entryCursor.next());
  assertEquals(payload,entryCursor.get().getLogEntry());
  assertTrue(entryCursor.next());
  assertEquals(payload,entryCursor.get().getLogEntry());
  assertTrue(entryCursor.next());
  assertEquals(payload,entryCursor.get().getLogEntry());
  assertFalse(entryCursor.next());
}
