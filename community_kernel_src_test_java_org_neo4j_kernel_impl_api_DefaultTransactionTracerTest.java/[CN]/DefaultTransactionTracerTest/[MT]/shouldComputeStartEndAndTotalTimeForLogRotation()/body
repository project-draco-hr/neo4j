{
  DefaultTransactionTracer tracer=new DefaultTransactionTracer(clock);
  try (TransactionEvent txEvent=tracer.beginTransaction()){
    try (CommitEvent commitEvent=txEvent.beginCommitEvent()){
      try (LogAppendEvent logAppendEvent=commitEvent.beginLogAppend()){
        clock.forward(10,TimeUnit.MILLISECONDS);
        try (LogRotateEvent event=logAppendEvent.beginLogRotate()){
          clock.forward(20,TimeUnit.MILLISECONDS);
        }
       }
     }
   }
   assertEquals(1,tracer.numberOfLogRotationEvents());
  assertEquals(20,tracer.logRotationAccumulatedTotalTimeMillis());
  try (TransactionEvent txEvent=tracer.beginTransaction()){
    try (CommitEvent commitEvent=txEvent.beginCommitEvent()){
      try (LogAppendEvent logAppendEvent=commitEvent.beginLogAppend()){
        clock.forward(200,TimeUnit.MILLISECONDS);
        try (LogRotateEvent event=logAppendEvent.beginLogRotate()){
          clock.forward(30,TimeUnit.MILLISECONDS);
        }
       }
     }
   }
   assertEquals(2,tracer.numberOfLogRotationEvents());
  assertEquals(50,tracer.logRotationAccumulatedTotalTimeMillis());
}
