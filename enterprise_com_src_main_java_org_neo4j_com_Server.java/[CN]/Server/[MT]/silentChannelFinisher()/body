{
  return new Runnable(){
    @Override public void run(){
      Map<Channel,Boolean> channels=new HashMap<Channel,Boolean>();
synchronized (connectedSlaveChannels) {
        for (        Map.Entry<Channel,Pair<SlaveContext,AtomicLong>> channel : connectedSlaveChannels.entrySet()) {
          long age=System.currentTimeMillis() - channel.getValue().other().get();
          if (age > 30 * 1000) {
            msgLog.logMessage("Found a silent channel " + channel + ", "+ age);
            channels.put(channel.getKey(),Boolean.TRUE);
          }
 else           if (age > 5 * 1000) {
            channels.put(channel.getKey(),Boolean.FALSE);
          }
        }
      }
      for (      Map.Entry<Channel,Boolean> channel : channels.entrySet()) {
        if (channel.getValue() || !channel.getKey().isOpen() || !channel.getKey().isConnected()|| !channel.getKey().isBound()) {
          tryToFinishOffChannel(channel.getKey());
        }
      }
    }
  }
;
}
