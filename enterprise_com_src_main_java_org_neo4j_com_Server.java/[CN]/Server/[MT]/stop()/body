{
  shuttingDown=true;
  targetCallExecutor.shutdown();
  targetCallExecutor.awaitTermination(10,TimeUnit.SECONDS);
  unfinishedTransactionExecutor.shutdown();
  unfinishedTransactionExecutor.awaitTermination(10,TimeUnit.SECONDS);
  silentChannelExecutor.shutdown();
  silentChannelExecutor.awaitTermination(10,TimeUnit.SECONDS);
  channelGroup.close().awaitUninterruptibly();
  if (Version.ID.compareTo("3.5.7.Final") >= 0) {
    channelFactory.releaseExternalResources();
  }
 else {
    executor.shutdown();
    executor.awaitTermination(10,TimeUnit.SECONDS);
    workerExecutor.shutdown();
    workerExecutor.awaitTermination(10,TimeUnit.SECONDS);
  }
}
