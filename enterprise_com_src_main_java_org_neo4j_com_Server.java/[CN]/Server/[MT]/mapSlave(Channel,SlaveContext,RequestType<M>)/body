{
  channelGroup.add(channel);
synchronized (connectedSlaveChannels) {
    if (slave != null && slave.machineId() != SlaveContext.EMPTY.machineId()) {
      Pair<SlaveContext,AtomicLong> previous=connectedSlaveChannels.get(channel);
      if (previous != null) {
        previous.other().set(System.currentTimeMillis());
      }
 else {
        connectedSlaveChannels.put(channel,Pair.of(slave,new AtomicLong(System.currentTimeMillis())));
      }
    }
  }
  return ChannelBuffers.dynamicBuffer();
}
