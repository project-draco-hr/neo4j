{
  byte continuation=readContinuationHeader(buffer,channel);
  if (continuation == ChunkingChannelBuffer.CONTINUATION_MORE) {
    PartialRequest partialRequest=partialRequests.get(channel);
    if (partialRequest == null) {
      RequestType<M> type=getRequestContext(buffer.readByte());
      SlaveContext context=readContext(buffer);
      ChannelBuffer targetBuffer=mapSlave(channel,context,type);
      partialRequest=new PartialRequest(type,context,targetBuffer);
      partialRequests.put(channel,partialRequest);
    }
    partialRequest.add(buffer);
  }
 else {
    PartialRequest partialRequest=partialRequests.remove(channel);
    RequestType<M> type=null;
    SlaveContext context=null;
    ChannelBuffer targetBuffer;
    ChannelBuffer bufferToReadFrom=null;
    ChannelBuffer bufferToWriteTo=null;
    if (partialRequest == null) {
      type=getRequestContext(buffer.readByte());
      context=readContext(buffer);
      targetBuffer=mapSlave(channel,context,type);
      bufferToReadFrom=buffer;
      bufferToWriteTo=targetBuffer;
    }
 else {
      type=partialRequest.type;
      context=partialRequest.context;
      targetBuffer=partialRequest.buffer;
      partialRequest.add(buffer);
      bufferToReadFrom=targetBuffer;
      bufferToWriteTo=ChannelBuffers.dynamicBuffer();
    }
    bufferToWriteTo.clear();
    ChunkingChannelBuffer chunkingBuffer=newChunkingChannelBuffer(bufferToWriteTo,channel);
    submitSilent(masterCallExecutor,masterCaller(type,channel,context,chunkingBuffer,bufferToReadFrom));
  }
}
