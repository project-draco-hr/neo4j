{
  byte[] header=new byte[2];
  buffer.readBytes(header);
  try {
    assertSameProtocolVersion(header,getInternalProtocolVersion(),applicationProtocolVersion);
  }
 catch (  final IllegalProtocolVersionException e) {
    final ChunkingChannelBuffer failureResponse=new ChunkingChannelBuffer(ChannelBuffers.dynamicBuffer(),channel,chunkSize,getInternalProtocolVersion(),applicationProtocolVersion);
    submitSilent(targetCallExecutor,new Runnable(){
      @Override public void run(){
        writeFailureResponse(e,failureResponse);
      }
    }
);
    return null;
  }
  return (byte)(header[0] & 0x1);
}
