{
  return new Runnable(){
    @Override @SuppressWarnings("unchecked") public void run(){
      Response<R> response=null;
      try {
        unmapSlave(channel);
        response=type.getTargetCaller().call(requestTarget,context,bufferToReadFrom,targetBuffer);
        type.getObjectSerializer().write(response.response(),targetBuffer);
        writeStoreId(response.getStoreId(),targetBuffer);
        writeTransactionStreams(response.transactions(),targetBuffer);
        targetBuffer.done();
        responseWritten(type,channel,context);
      }
 catch (      Throwable e) {
        targetBuffer.clear(true);
        writeFailureResponse(e,targetBuffer);
        tryToFinishOffChannel(channel,context);
        throw Exceptions.launderedException(e);
      }
 finally {
        if (response != null) {
          response.close();
        }
      }
    }
  }
;
}
