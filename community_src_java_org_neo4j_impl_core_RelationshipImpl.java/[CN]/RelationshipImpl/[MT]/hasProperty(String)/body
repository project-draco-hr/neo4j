{
  TransactionIsolationLevel level=TransactionFactory.getTransactionIsolationLevel();
  acquireLock(this,LockType.READ);
  try {
    for (    PropertyIndex index : PropertyIndex.index(key)) {
      Property property=propertyMap.get(index.getKeyId());
      if (property != null) {
        return true;
      }
      if (ensureFullRelationship()) {
        if (propertyMap.get(index.getKeyId()) != null) {
          return true;
        }
      }
    }
    ensureFullRelationship();
    for (    int keyId : propertyMap.keySet()) {
      PropertyIndex indexToCheck=PropertyIndex.getIndexFor(keyId);
      if (indexToCheck.getKey().equals(key)) {
        return true;
      }
    }
    return false;
  }
  finally {
    releaseLock(this,LockType.READ,level);
  }
}
