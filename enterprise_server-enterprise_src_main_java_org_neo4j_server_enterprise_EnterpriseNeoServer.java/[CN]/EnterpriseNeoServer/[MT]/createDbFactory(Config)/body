{
  final Mode mode=Mode.fromString(config.get(EnterpriseServerSettings.mode).toUpperCase());
switch (mode) {
case HA:
    return lifecycleManagingDatabase(HA_FACTORY);
case ARBITER:
  throw new IllegalArgumentException("The server cannot be started in ARBITER mode.");
default :
return lifecycleManagingDatabase(ENTERPRISE_FACTORY);
}
}
