{
  try {
    IndexHits<Document> result=null;
    if (additionalParametersOrNull != null && additionalParametersOrNull.topHits > 0) {
      result=new TopDocsIterator(query,additionalParametersOrNull,searcher);
    }
 else {
      Sort sorting=additionalParametersOrNull != null ? additionalParametersOrNull.sorting : null;
      boolean forceScore=additionalParametersOrNull == null || !additionalParametersOrNull.tradeCorrectnessForSpeed;
      Hits hits=new Hits(searcher.getSearcher(),query,null,sorting,forceScore);
      result=new HitsIterator(hits);
    }
    return result;
  }
 catch (  IOException e) {
    throw new RuntimeException("Unable to query " + this + " with "+ query,e);
  }
}
