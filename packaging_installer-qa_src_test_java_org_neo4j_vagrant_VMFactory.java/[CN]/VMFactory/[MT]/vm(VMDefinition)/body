{
  VirtualMachine v;
  File projectFolder=new File(workingDir + config.vmName());
  File templateFolder=new File(templateDir + config.vmName());
  File templateSharedFolder=new File(templateShareDir);
  if (!projectFolder.exists()) {
    projectFolder.mkdirs();
    v=vm(projectFolder,config);
    if (!templateFolder.exists()) {
      System.out.println("No vagrant project for " + config.vmName() + " ("+ templateFolder.getAbsolutePath()+ "), using vagrant init.");
      v.init(config.box());
    }
  }
 else {
    v=vm(projectFolder,config);
  }
  if (templateFolder.exists()) {
    copyFolder(templateFolder,projectFolder);
  }
  copyFolder(templateSharedFolder,projectFolder);
  return v;
}
