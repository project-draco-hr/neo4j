{
  final VersionAwareLogEntryReader reader=new VersionAwareLogEntryReader(logEntryParserFactory,commandReaderFactory);
  return new LogEntryReader<T>(){
    @Override public LogEntry readLogEntry(    T channel) throws IOException {
      return reader.readLogEntry(channel,channel.getLogFormatVersion());
    }
  }
;
}
