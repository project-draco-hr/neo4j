{
  try {
    Function<CallableProcedure.Context,?> supplier=components.supplierFor(field.getType());
    if (supplier == null) {
      throw new ProcedureException(Status.Procedure.FailedRegistration,"Unable to set up injection for procedure `%s`, the field `%s` " + "has type `%s` which is not a known injectable component.",cls.getSimpleName(),field.getName(),field.getType());
    }
    MethodHandle setter=MethodHandles.lookup().unreflectSetter(field);
    return new FieldSetter(field,setter,supplier);
  }
 catch (  IllegalAccessException e) {
    throw new ProcedureException(Status.Procedure.FailedRegistration,"Unable to set up injection for `%s`, failed to access field `%s`: %s",e,cls.getSimpleName(),field.getName(),e.getMessage());
  }
}
