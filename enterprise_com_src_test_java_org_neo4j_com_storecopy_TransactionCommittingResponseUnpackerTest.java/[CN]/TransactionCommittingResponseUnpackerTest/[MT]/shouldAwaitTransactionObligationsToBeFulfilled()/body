{
  final TransactionIdStore txIdStore=mock(TransactionIdStore.class);
  final TransactionAppender appender=mock(TransactionAppender.class);
  final TransactionRepresentationStoreApplier applier=mock(TransactionRepresentationStoreApplier.class);
  final TransactionObligationFulfiller obligationFulfiller=mock(TransactionObligationFulfiller.class);
  TransactionCommittingResponseUnpacker.Dependencies deps=buildDependencies(txIdStore,mock(LogFile.class),mock(KernelHealth.class),mock(LogRotation.class),mock(IndexUpdatesValidator.class),applier,appender,obligationFulfiller);
  final TransactionCommittingResponseUnpacker unpacker=new TransactionCommittingResponseUnpacker(deps);
  unpacker.start();
  unpacker.unpackResponse(new DummyObligationResponse(4),NO_OP_TX_HANDLER);
  verify(obligationFulfiller,times(1)).fulfill(4l);
}
