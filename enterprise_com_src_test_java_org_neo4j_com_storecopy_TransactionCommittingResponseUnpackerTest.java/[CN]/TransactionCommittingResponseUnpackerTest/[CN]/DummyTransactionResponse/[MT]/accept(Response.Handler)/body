{
  for (int i=0; i < txCount; i++) {
    handler.transactions().visit(tx(startingAtTxId + i,timestamp(i,txCount,batchLength)));
    if ((i + 1) % maxBatchSize == 0) {
      try {
        verify(appender,times(maxBatchSize)).append(any(TransactionRepresentation.class),anyLong());
        verify(appender,times(1)).force();
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
 else {
      verifyNoMoreInteractions(appender);
    }
  }
}
