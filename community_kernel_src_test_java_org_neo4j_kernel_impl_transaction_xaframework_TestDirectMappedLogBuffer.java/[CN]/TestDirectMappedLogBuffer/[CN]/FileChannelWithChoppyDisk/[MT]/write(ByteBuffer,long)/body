{
  int bytesToWrite=chunkSize > (byteBuffer.limit() - byteBuffer.position()) ? byteBuffer.limit() - byteBuffer.position() : chunkSize;
  buff.position((int)l);
  int originalLimit=byteBuffer.limit();
  byteBuffer.limit(byteBuffer.position() + bytesToWrite);
  buff.put(byteBuffer);
  byteBuffer.limit(originalLimit);
  return bytesToWrite;
}
