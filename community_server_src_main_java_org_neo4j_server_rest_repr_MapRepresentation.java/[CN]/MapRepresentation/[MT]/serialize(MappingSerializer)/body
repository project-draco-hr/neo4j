{
  for (  Object key : value.keySet()) {
    Object val=value.get(key);
    if (val instanceof Number) {
      serializer.putNumber(key.toString(),(Number)val);
    }
 else     if (val instanceof Boolean) {
      serializer.putBoolean(key.toString(),(Boolean)val);
    }
 else     if (val instanceof String) {
      serializer.putString(key.toString(),(String)val);
    }
 else     if (val instanceof Path) {
      PathRepresentation<Path> representation=new PathRepresentation<>((Path)val);
      serializer.putMapping(key.toString(),representation);
    }
 else     if (val instanceof Iterable) {
      serializer.putList(key.toString(),ObjectToRepresentationConverter.getListRepresentation((Iterable)val));
    }
 else     if (val instanceof Map) {
      serializer.putMapping(key.toString(),ObjectToRepresentationConverter.getMapRepresentation((Map)val));
    }
 else     if (val == null) {
      serializer.putString(key.toString(),null);
    }
 else     if (val.getClass().isArray()) {
      Object[] objects=toArray(val);
      serializer.putList(key.toString(),ObjectToRepresentationConverter.getListRepresentation(asList(objects)));
    }
 else     if (val instanceof Node || val instanceof Relationship) {
      Representation representation=ObjectToRepresentationConverter.getSingleRepresentation(val);
      serializer.putMapping(key.toString(),(MappingRepresentation)representation);
    }
 else {
      throw new IllegalArgumentException("Unsupported value type: " + val.getClass());
    }
  }
}
