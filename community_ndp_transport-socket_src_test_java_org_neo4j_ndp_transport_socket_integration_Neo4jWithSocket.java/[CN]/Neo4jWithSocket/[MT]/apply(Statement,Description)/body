{
  return new Statement(){
    @Override public void evaluate() throws Throwable {
      final GraphDatabaseService gdb=new TestGraphDatabaseFactory().newImpermanentDatabase();
      final GraphDatabaseAPI api=((GraphDatabaseAPI)gdb);
      StringLogger log=api.getDependencyResolver().resolveDependency(Logging.class).getMessagesLog(Session.class);
      transport=life.add(new SocketTransport(new HostnamePort("localhost:7687"),log,life.add(new StandardSessions(api,log))));
      life.start();
      try {
        statement.evaluate();
      }
  finally {
        life.shutdown();
        gdb.shutdown();
      }
    }
  }
;
}
