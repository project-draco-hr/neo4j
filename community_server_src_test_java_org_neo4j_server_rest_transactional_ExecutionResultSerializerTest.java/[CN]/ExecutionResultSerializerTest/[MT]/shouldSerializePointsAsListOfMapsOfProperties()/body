{
  ByteArrayOutputStream output=new ByteArrayOutputStream();
  ExecutionResultSerializer serializer=getSerializerWith(output);
  List<Coordinate> points=new ArrayList<>();
  points.add(new Coordinate(1,2));
  points.add(new Coordinate(2,3));
  Result executionResult=mockExecutionResult(map("geom",new MockPoint(12.3,45.6,mockWGS84())),map("geom",new MockPoint(123,456,mockCartesian())),map("geom",new MockGeometry("LineString",points,mockCartesian())));
  serializer.statementResult(executionResult,false);
  serializer.finish();
  String result=output.toString(UTF_8.name());
  assertEquals("{\"results\":[{\"columns\":[\"geom\"],\"data\":[" + "{\"row\":[{\"type\":\"Point\",\"coordinates\":[12.3,45.6],\"crs\":" + "{\"name\":\"WGS-84\",\"type\":\"link\",\"properties\":"+ "{\"href\":\"http://spatialreference.org/ref/epsg/4326/ogcwkt/\",\"type\":\"ogcwkt\"}"+ "}}],\"meta\":[null]},"+ "{\"row\":[{\"type\":\"Point\",\"coordinates\":[123.0,456.0],\"crs\":"+ "{\"name\":\"cartesian\",\"type\":\"link\",\"properties\":"+ "{\"href\":\"http://spatialreference.org/ref/sr-org/7203/ogcwkt/\",\"type\":\"ogcwkt\"}"+ "}}],\"meta\":[null]},"+ "{\"row\":[{\"type\":\"LineString\",\"coordinates\":[[1.0,2.0],[2.0,3.0]],\"crs\":"+ "{\"name\":\"cartesian\",\"type\":\"link\",\"properties\":"+ "{\"href\":\"http://spatialreference.org/ref/sr-org/7203/ogcwkt/\",\"type\":\"ogcwkt\"}"+ "}}],\"meta\":[null]}"+ "]}],\"errors\":[]}",result);
}
