{
  TransactionResourceManager trm=new TransactionResourceManager(){
    @Override public void returnXAResource(    String rmName,    XAResource rmXares){
      return;
    }
  }
;
  try {
    for (    XaDataSource xaDs : xaDataSourceManager.getAllRegisteredDataSources()) {
      Current.getTransactionRecovery().registerResourceManager(xaDs.getName(),xaDs.getXaConnection().getXaResource(),xaDs.getName(),trm);
    }
    Current.getTransactionRecovery().startResourceManagerRecovery();
  }
 catch (  XAException e) {
    throw new Error("Error registering xa datasource",e);
  }
}
