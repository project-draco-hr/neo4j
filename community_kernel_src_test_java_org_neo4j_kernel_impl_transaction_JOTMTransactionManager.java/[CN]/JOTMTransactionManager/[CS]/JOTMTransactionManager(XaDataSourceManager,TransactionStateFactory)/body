{
  this.xaDataSourceManager=xaDataSourceManager;
  this.stateFactory=stateFactory;
  Registry registry=null;
  try {
    registry=LocateRegistry.getRegistry(1099);
  }
 catch (  RemoteException re) {
  }
  if (registry == null) {
    try {
      registry=LocateRegistry.createRegistry(1099);
    }
 catch (    RemoteException re) {
      throw new Error(re);
    }
  }
  try {
    jotm=new Jotm(true,false);
    current=jotm.getTransactionManager();
  }
 catch (  NamingException ne) {
    throw new Error("Error during JOTM creation",ne);
  }
}
