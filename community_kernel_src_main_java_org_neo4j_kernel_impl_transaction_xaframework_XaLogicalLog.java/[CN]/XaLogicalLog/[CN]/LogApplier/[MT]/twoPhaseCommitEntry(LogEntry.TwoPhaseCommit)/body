{
  int identifier=twoPhaseCommitEntry.getIdentifier();
  long txId=twoPhaseCommitEntry.getTxId();
  LogEntry.Start startEntry=xidIdentMap.get(identifier);
  if (startEntry == null) {
    throw new IOException("Unknown xid for identifier " + identifier);
  }
  Xid xid=startEntry.getXid();
  if (xid == null) {
    throw new IOException("Xid null for identifier " + identifier);
  }
  try {
    XaTransaction xaTx=xaRm.getXaTransaction(xid);
    xaTx.setCommitTxId(txId);
    positionCache.cacheStartPosition(txId,startEntry,logVersion);
    xaRm.injectTwoPhaseCommit(xid);
    registerRecoveredTransaction(txId);
  }
 catch (  XAException e) {
    throw new IOException(e);
  }
}
