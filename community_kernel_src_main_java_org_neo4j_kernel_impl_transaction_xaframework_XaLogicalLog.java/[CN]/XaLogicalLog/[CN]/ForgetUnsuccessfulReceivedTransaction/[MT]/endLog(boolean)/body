{
  try {
    super.endLog(success);
  }
  finally {
    if (!success && startEntry != null && xidIdentMap.get(startEntry.getIdentifier()) != null) {
      try {
        xaRm.forget(startEntry.getXid());
      }
 catch (      XAException e) {
        throw new IOException(e);
      }
 finally {
        xidIdentMap.remove(startEntry.getIdentifier());
      }
    }
  }
}
