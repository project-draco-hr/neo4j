{
  if (writeBuffer != null) {
    logEntryWriter.writeLogEntry(new LogEntry.Done(identifier),writeBuffer);
  }
 else {
    InMemoryLogBuffer buffer=new InMemoryLogBuffer();
    logEntryWriter.writeLogEntry(new LogEntry.Done(identifier),buffer);
    fileChannel.write(buffer.asByteBuffer());
  }
  xidIdentMap.remove(identifier);
}
