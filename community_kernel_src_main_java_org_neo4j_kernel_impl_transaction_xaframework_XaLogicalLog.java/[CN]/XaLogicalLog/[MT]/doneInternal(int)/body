{
  if (writeBuffer != null) {
    logEntryWriter.writeLogEntry(doneEntry.reset(identifier),writeBuffer);
  }
 else {
    InMemoryLogBuffer buffer=new InMemoryLogBuffer();
    logEntryWriter.writeLogEntry(doneEntry.reset(identifier),buffer);
    fileChannel.writeAll(buffer.asByteBuffer());
  }
  xidIdentMap.remove(identifier);
}
