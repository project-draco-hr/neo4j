{
  if (backupSlave) {
    throw new XAException("Resource is configured as backup slave, " + "no new transactions can be started for " + fileName + "."+ currentLog);
  }
  int xidIdent=getNextIdentifier();
  try {
    long position=writeBuffer.getFileChannelPosition();
    LogEntry.Start start=new LogEntry.Start(xid,xidIdent,position);
    LogIoUtils.writeStart(writeBuffer,xidIdent,xid);
    xidIdentMap.put(xidIdent,start);
  }
 catch (  IOException e) {
    throw Exceptions.withCause(new XAException("Logical log couldn't start transaction: " + e),e);
  }
  return xidIdent;
}
