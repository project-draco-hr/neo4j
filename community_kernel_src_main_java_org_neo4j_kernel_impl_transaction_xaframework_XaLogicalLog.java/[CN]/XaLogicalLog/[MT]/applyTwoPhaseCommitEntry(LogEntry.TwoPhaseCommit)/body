{
  int identifier=commit.getIdentifier();
  long txId=commit.getTxId();
  LogEntry.Start startEntry=xidIdentMap.get(identifier);
  if (startEntry == null) {
    throw new IOException("Unknown xid for identifier " + identifier);
  }
  Xid xid=startEntry.getXid();
  if (xid == null) {
    throw new IOException("Xid null for identifier " + identifier);
  }
  try {
    XaTransaction xaTx=xaRm.getXaTransaction(xid);
    xaTx.setCommitTxId(txId);
    xaRm.injectTwoPhaseCommit(xid);
    logRecoveryMessage("Injected two phase commit, txId=" + commit.getTxId());
  }
 catch (  XAException e) {
    e.printStackTrace();
    throw new IOException(e.getMessage());
  }
}
