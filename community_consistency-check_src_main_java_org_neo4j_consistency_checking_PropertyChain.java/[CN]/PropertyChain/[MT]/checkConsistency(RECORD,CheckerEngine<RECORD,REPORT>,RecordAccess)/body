{
  if (!Record.NO_NEXT_PROPERTY.is(record.getNextProp())) {
    Iterator<PropertyRecord> props=records.rawPropertyChain(record.getNextProp());
    PropertyRecord firstProp=props.next();
    if (!Record.NO_PREVIOUS_PROPERTY.is(firstProp.getPrevProp())) {
      engine.report().propertyNotFirstInChain(firstProp);
    }
    try (PrimitiveIntSet keys=Primitive.intSet();MandatoryProperties.Check<RECORD,REPORT> mandatory=mandatoryProperties.apply(record)){
      checkChainItem(firstProp,engine,keys,mandatory);
      while (props.hasNext()) {
        checkChainItem(props.next(),engine,keys,mandatory);
      }
    }
   }
}
