{
  assertEquals("123",slave1.getNodeById(1).getProperty("uuid"));
  Transaction tx=master.beginTx();
  Node toRemove=master.index().forNodes("auto").get("uuid","123").next();
  long nodeId=toRemove.getId();
  master.index().forNodes("auto").remove(toRemove);
  toRemove.delete();
  tx.success();
  tx.finish();
  Thread t=new Thread(new Runnable(){
    public void run(){
      slave1.getDependencyResolver().resolveDependency(UpdatePuller.class).pullUpdates();
    }
  }
);
  t.start();
  t.join();
  if (slave1.index().forNodes("auto").get("uuid","123").hasNext()) {
    System.out.println("it was in the index");
    assertEquals("123",slave1.getNodeById(nodeId).getProperty("uuid"));
  }
 else {
    System.out.println("it was not in the index");
    try {
      slave1.getNodeById(nodeId);
      fail("Node should not be there");
    }
 catch (    NotFoundException e) {
    }
  }
}
