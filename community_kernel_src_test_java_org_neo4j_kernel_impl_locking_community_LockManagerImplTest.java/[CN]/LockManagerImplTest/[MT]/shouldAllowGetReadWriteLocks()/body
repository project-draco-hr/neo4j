{
  LockResource node1=new LockResource(ResourceTypes.NODE,1L);
  LockResource node2=new LockResource(ResourceTypes.NODE,2L);
  LockTransaction lockTransaction=new LockTransaction();
  LockManagerImpl lockManager=new LockManagerImpl(new RagManager());
  assertTrue(lockManager.getReadLock(node1,lockTransaction));
  assertTrue(lockManager.getReadLock(node2,lockTransaction));
  assertTrue(lockManager.getWriteLock(node2,lockTransaction));
  lockManager.releaseReadLock(node1,lockTransaction);
  lockManager.releaseReadLock(node2,lockTransaction);
  lockManager.releaseWriteLock(node2,lockTransaction);
  int lockCount=countLocks(lockManager);
  assertEquals(0,lockCount);
}
