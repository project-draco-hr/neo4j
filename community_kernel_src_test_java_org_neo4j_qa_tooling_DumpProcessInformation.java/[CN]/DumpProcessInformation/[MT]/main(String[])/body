{
  Args arg=new Args(args == null ? new String[0] : args);
  boolean doHeapDump=arg.getBoolean("heap",false,true);
  String[] containing=arg.orphans().toArray(new String[arg.orphans().size()]);
  String dumpDir=arg.get("dir","data");
  File dirFile=dumpDir != null ? new File(dumpDir) : null;
  if (dirFile != null) {
    dirFile.mkdirs();
  }
  for (  Pair<Long,String> pid : getJPids(in(containing))) {
    doThreadDump(pid,dirFile);
    if (doHeapDump) {
      doHeapDump(pid,dirFile);
    }
  }
}
