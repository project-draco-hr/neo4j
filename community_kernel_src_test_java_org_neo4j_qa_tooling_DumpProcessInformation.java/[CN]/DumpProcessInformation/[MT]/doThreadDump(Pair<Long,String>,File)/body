{
  String[] cmdarray=new String[]{"jstack","" + pid.first()};
  File outputFile=new File(dir,"threaddump-" + pid.other() + "-"+ System.currentTimeMillis());
  Process process=Runtime.getRuntime().exec(cmdarray);
  writeProcessOutputToFile(process,outputFile);
  reduceThreadDump(outputFile,new File(outputFile.getParentFile(),outputFile.getName() + "-reduced"));
  System.out.println("Created thread dump " + outputFile.getAbsolutePath());
}
