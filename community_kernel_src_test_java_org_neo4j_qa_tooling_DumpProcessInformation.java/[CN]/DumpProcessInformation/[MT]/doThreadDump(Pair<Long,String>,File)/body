{
  System.out.println("Creating thread dump of " + pid + " to "+ outputDirectory.getAbsolutePath());
  String[] cmdarray=new String[]{"jstack","" + pid.first()};
  File outputFile=new File(outputDirectory,fileName("threaddump",pid));
  Process process=Runtime.getRuntime().exec(cmdarray);
  writeProcessOutputToFile(process,outputFile);
  return outputFile;
}
