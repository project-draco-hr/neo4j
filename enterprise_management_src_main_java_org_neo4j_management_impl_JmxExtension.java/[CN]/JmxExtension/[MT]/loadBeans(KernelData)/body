{
  MBeanServer mbs=getPlatformMBeanServer();
  List<Neo4jMBean> beans=new ArrayList<Neo4jMBean>();
  for (  ManagementBeanProvider provider : Service.load(ManagementBeanProvider.class)) {
    try {
      Neo4jMBean bean=provider.loadBeen(kernel);
      if (bean != null) {
        mbs.registerMBean(bean,bean.objectName);
        beans.add(bean);
      }
    }
 catch (    Exception e) {
      log.info("Failed to register JMX Bean " + provider);
    }
  }
  try {
    Neo4jMBean bean=new KernelBean(kernel);
    mbs.registerMBean(bean,bean.objectName);
    beans.add(bean);
  }
 catch (  Exception e) {
    log.info("Failed to register Kernel JMX Bean");
  }
  return new JmxData(kernel,beans.toArray(new Neo4jMBean[beans.size()]));
}
