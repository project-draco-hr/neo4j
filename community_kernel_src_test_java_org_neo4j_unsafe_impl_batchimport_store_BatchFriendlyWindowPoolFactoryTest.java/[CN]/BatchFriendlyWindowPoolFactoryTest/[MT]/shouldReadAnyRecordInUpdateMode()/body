{
  byte[] someBytes=new byte[]{1,2,3,4,5};
  byte[] someOtherBytes=new byte[]{6,7,8,9,10};
  prepopulateChannel(data(0,0,someBytes));
  prepopulateChannel(data(1,0,someOtherBytes));
  Monitor monitor=mock(Monitor.class);
  WindowPool pool=pool(monitor,Mode.UPDATE);
{
    PersistenceWindow window=pool.acquire(recordId(0,0),OperationType.READ);
    Buffer buffer=window.getOffsettedBuffer(0);
    byte[] readData=new byte[someBytes.length];
    buffer.get(readData);
    assertArrayEquals(someBytes,readData);
  }
{
    PersistenceWindow window=pool.acquire(recordId(1,0),OperationType.READ);
    Buffer buffer=window.getOffsettedBuffer(recordId(1,0));
    byte[] readData=new byte[someBytes.length];
    buffer.get(readData);
    assertArrayEquals(someOtherBytes,readData);
  }
}
