{
  new Thread("PRODUCER"){
    @Override public void run(){
      assertHealthy();
      try {
        process();
        endOfUpstream();
      }
 catch (      Throwable e) {
        issuePanic(e);
      }
    }
  }
.start();
  return 0;
}
