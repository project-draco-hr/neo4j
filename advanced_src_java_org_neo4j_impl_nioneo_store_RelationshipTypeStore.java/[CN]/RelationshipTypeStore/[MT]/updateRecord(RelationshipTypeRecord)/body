{
  if (record.isTransferable() && !hasWindow(record.getId())) {
    transferRecord(record);
  }
 else {
    PersistenceWindow window=acquireWindow(record.getId(),OperationType.WRITE);
    try {
      updateRecord(record,window.getBuffer());
    }
  finally {
      releaseWindow(window);
    }
  }
  for (  DynamicRecord typeRecord : record.getTypeRecords()) {
    typeNameStore.updateRecord(typeRecord);
  }
}
