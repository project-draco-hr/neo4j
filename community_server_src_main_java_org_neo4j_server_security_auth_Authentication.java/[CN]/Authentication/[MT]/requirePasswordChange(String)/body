{
  User existingUser=users.findByName(name);
  if (existingUser != null) {
    try {
      User updatedUser=existingUser.augment().withRequiredPasswordChange(true).build();
      users.update(existingUser,updatedUser);
    }
 catch (    ConcurrentModificationException e) {
      requirePasswordChange(name);
    }
catch (    IllegalTokenException e) {
      throw new ThisShouldNotHappenError("Jake","Token is not being modified.",e);
    }
  }
 else {
    throw new RuntimeException("No such user: " + name);
  }
}
