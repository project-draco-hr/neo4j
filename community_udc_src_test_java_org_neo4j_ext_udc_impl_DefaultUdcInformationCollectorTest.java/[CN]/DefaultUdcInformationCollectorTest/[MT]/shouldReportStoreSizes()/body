{
  DataSourceManager dataSourceManager=new DataSourceManager();
  NeoStoreDataSource dataSource=mock(NeoStoreDataSource.class);
  dataSourceManager.start();
  UdcInformationCollector collector=new DefaultUdcInformationCollector(Config.empty(),dataSourceManager,new StubIdGeneratorFactory(),mock(StartupStatistics.class),usageData);
  when(dataSource.getStoreId()).thenReturn(StoreId.DEFAULT);
  dataSourceManager.register(dataSource);
  when(dataSource.listStoreFiles(false)).thenReturn(asResourceIterator(testFiles().iterator()));
  Map<String,String> udcParams=collector.getUdcParams();
  assertThat(udcParams.get("storesize"),is("152"));
}
