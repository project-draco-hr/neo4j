{
  DataSourceManager dataSourceManager=new DataSourceManager();
  NeoStoreDataSource dataSource=mock(NeoStoreDataSource.class);
  dataSourceManager.start();
  UdcInformationCollector collector=new DefaultUdcInformationCollector(Config.empty(),dataSourceManager,new StubIdGeneratorFactory(),mock(StartupStatistics.class),usageData);
  when(dataSource.getStoreId()).thenReturn(StoreId.DEFAULT);
  dataSourceManager.register(dataSource);
  when(dataSource.listStoreFiles(false)).thenReturn(asResourceIterator(testFiles().iterator()));
  Map<String,String> udcParams=collector.getUdcParams();
  assertThat(udcParams.get("storefilesize_neostore_foo_db"),is("23"));
  assertThat(udcParams.get("storefilesize_neostore_bar_keys"),is("42"));
  assertThat(udcParams.get("storefilesize_neostore_baz_names"),is("87"));
  assertThat(udcParams.get("storefilesize_neostore_quux_id"),is("117"));
}
