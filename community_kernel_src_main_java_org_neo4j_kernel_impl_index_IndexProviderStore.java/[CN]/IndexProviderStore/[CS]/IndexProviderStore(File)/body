{
  this.file=file;
  if (!file.exists()) {
    create(file);
  }
  try {
    fileChannel=new RandomAccessFile(file,"rw").getChannel();
    int bytesRead=fileChannel.read(buf);
    if (bytesRead != FILE_LENGTH && bytesRead != FILE_LENGTH - 8) {
      throw new RuntimeException("Expected to read " + FILE_LENGTH + " or "+ (FILE_LENGTH - 8)+ " bytes");
    }
    buf.flip();
    creationTime=buf.getLong();
    randomIdentifier=buf.getLong();
    version=buf.getLong();
    lastCommittedTx=bytesRead == FILE_LENGTH ? buf.getLong() : 1;
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
