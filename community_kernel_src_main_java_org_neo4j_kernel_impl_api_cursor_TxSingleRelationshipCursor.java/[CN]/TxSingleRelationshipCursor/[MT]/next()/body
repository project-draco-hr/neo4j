{
  if (state.relationshipIsDeletedInThisTx(nextId)) {
    visit(StatementConstants.NO_SUCH_RELATIONSHIP,StatementConstants.NO_SUCH_RELATIONSHIP_TYPE,StatementConstants.NO_SUCH_NODE,StatementConstants.NO_SUCH_NODE);
    return false;
  }
  boolean exists=cursor.next();
  this.relationshipIsAddedInThisTx=state.relationshipIsAddedInThisTx(nextId);
  if (exists || relationshipIsAddedInThisTx) {
    if (relationshipIsAddedInThisTx) {
      state.relationshipVisit(nextId,this);
    }
 else {
      RelationshipItem relationshipItem=cursor.get();
      visit(nextId,relationshipItem.type(),relationshipItem.startNode(),relationshipItem.endNode());
    }
    relationshipState=state.getRelationshipState(nextId);
    return true;
  }
 else {
    visit(StatementConstants.NO_SUCH_RELATIONSHIP,StatementConstants.NO_SUCH_RELATIONSHIP_TYPE,StatementConstants.NO_SUCH_NODE,StatementConstants.NO_SUCH_NODE);
    this.relationshipState=null;
    return false;
  }
}
