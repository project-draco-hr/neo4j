{
  List<IndexSampler> samplers=Arrays.asList(createSampler(1),createSampler(2));
  AggregatingIndexSampler partitionedSampler=new AggregatingIndexSampler(samplers);
  Register.DoubleLongRegister resultRegister=Registers.newDoubleLongRegister(0,0);
  long sampleIndex=partitionedSampler.sampleIndex(resultRegister);
  assertEquals(3,sampleIndex);
  assertEquals(3,resultRegister.readFirst());
  assertEquals(6,resultRegister.readSecond());
}
