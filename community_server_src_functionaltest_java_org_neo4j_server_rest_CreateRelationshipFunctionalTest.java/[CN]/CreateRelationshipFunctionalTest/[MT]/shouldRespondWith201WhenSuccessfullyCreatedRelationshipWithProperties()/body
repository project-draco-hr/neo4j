{
  long startNode=helper.createNode();
  long endNode=helper.createNode();
  String jsonString="{\"to\" : \"" + functionalTestHelper.dataUri() + "node/"+ endNode+ "\", \"type\" : \"LOVES\", \"data\" : {\"foo\" : \"bar\"}}";
  ClientResponse response=CLIENT.resource(functionalTestHelper.dataUri() + "node/" + startNode+ "/relationships").type(MediaType.APPLICATION_JSON).accept(MediaType.APPLICATION_JSON).entity(jsonString).post(ClientResponse.class);
  assertEquals(201,response.getStatus());
  assertTrue(response.getLocation().toString().matches(RELATIONSHIP_URI_PATTERN));
  assertEquals(MediaType.APPLICATION_JSON_TYPE,response.getType());
  String relationshipUri=response.getLocation().toString();
  long relationshipId=Long.parseLong(relationshipUri.substring(relationshipUri.lastIndexOf('/') + 1));
  Map<String,Object> properties=helper.getRelationshipProperties(relationshipId);
  assertEquals(MapUtil.map("foo","bar"),properties);
  assertProperRelationshipRepresentation(JsonHelper.jsonToMap(response.getEntity(String.class)));
  response.close();
}
