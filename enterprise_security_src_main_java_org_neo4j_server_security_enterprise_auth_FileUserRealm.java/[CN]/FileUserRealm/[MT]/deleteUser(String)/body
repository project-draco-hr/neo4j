{
  boolean result=false;
synchronized (this) {
    User user=userRepository.findByName(username);
    if (user != null && userRepository.delete(user)) {
      removeUserFromAllRoles(username);
      result=true;
    }
 else {
      throw new IllegalArgumentException("The user '" + username + "' does not exist");
    }
  }
  clearCacheForUser(username);
  return result;
}
