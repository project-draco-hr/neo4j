{
  GraphDatabaseAPI db=dbRule.getGraphDatabaseAPI();
  int labelsToAdd=80;
  int labelsToRemove=40;
  Node node;
  try (Transaction tx=db.beginTx()){
    node=db.createNode();
    for (int l=0; l < labelsToAdd; l++) {
      node.addLabel(label("Label-" + l));
    }
    for (int l=0; l < labelsToRemove; l++) {
      node.removeLabel(label("Label-" + l));
    }
    tx.success();
  }
   try (Transaction ignore=db.beginTx()){
    for (int l=labelsToAdd - 1; l >= labelsToRemove; l--) {
      Label label=label("Label-" + l);
      assertThat("Should have founnd node when looking for label " + label,single(db.findNodes(label)),equalTo(node));
    }
  }
 }
