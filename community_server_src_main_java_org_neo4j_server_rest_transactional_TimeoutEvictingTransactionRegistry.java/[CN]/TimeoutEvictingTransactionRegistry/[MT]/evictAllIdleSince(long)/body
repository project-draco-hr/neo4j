{
  for (  Map.Entry<Long,RegisteredTransaction> entry : registry.entrySet()) {
    long storedAtTimestamp=entry.getValue().storedAtTimestamp;
    if (storedAtTimestamp < maxAgeInMilliseconds) {
      try {
        pop(entry.getKey()).rollback();
        long idleSeconds=MILLISECONDS.toSeconds(clock.currentTimeInMilliseconds() - storedAtTimestamp);
        log.info(format("Transaction with id %d has been idle for %d seconds, and has been " + "automatically rolled back.",entry.getKey(),idleSeconds));
      }
 catch (      InvalidTransactionIdError neo4jError) {
      }
    }
  }
}
