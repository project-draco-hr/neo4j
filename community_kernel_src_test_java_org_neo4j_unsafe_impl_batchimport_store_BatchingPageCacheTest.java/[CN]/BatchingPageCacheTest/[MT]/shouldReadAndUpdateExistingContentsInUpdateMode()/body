{
  int pageSize=100;
  File file=directory.file("store");
  fillFileWithByteContents(file);
  PageCache pageCache=new BatchingPageCache(FS,pageSize,SYNCHRONOUS,NO_MONITOR,Mode.UPDATE);
  PagedFile pagedFile=pageCache.map(file,pageSize);
  for (int p=0; p <= 1; p++) {
    try (PageCursor cursor=pagedFile.io(p,0)){
      cursor.next();
      for (int i=0; i < pageSize; i++) {
        int offset=cursor.getOffset();
        byte value=cursor.getByte();
        if (i % 3 == 0) {
          cursor.setOffset(offset);
          value++;
          cursor.putByte(value);
        }
      }
    }
   }
  pageCache.close();
  assertByteContentsAreCorrect(file);
}
