{
  if (Settings.osIsWindows())   return;
  cluster=new ServerCluster(testName.getMethodName(),dir,SERVER_PORTS);
  String theMaster=null;
  for (  Triplet<ServerCluster.ServerManager,URI,File> baseServerURI : cluster.getServers()) {
    URI managementUri=URI.create(baseServerURI.second().toString() + "db/manage");
    System.out.println("Requesting :::: " + managementUri + MasterInfoService.BASE_PATH+ MasterInfoService.ISMASTER_PATH);
    JaxRsResponse response=RestRequest.req().get(managementUri + MasterInfoService.BASE_PATH + MasterInfoService.ISMASTER_PATH);
    if (Response.SC_OK == response.getStatus()) {
      assertEquals("200 means it is the master",Boolean.toString(Boolean.TRUE),response.getEntity());
      if (theMaster == null) {
        theMaster=baseServerURI.first().getHaURI();
      }
 else {
        assertEquals("all should report the same master",theMaster,baseServerURI);
      }
    }
 else     if (Response.SC_SEE_OTHER == response.getStatus()) {
      String reportedMaster=response.getHeaders().get(HttpHeaders.LOCATION).get(0);
      assertNotNull(reportedMaster);
      if (theMaster == null) {
        theMaster=reportedMaster;
      }
 else {
        assertEquals("all should report the same master",theMaster,reportedMaster);
      }
    }
 else {
      fail(response.getStatus() + " is not an expected return code from " + baseServerURI.second());
    }
  }
  assertNotNull(theMaster);
}
