{
  createGraphDbAndKillIt();
  Monitors monitors=new Monitors();
  Recovery.Monitor listener=mock(Recovery.Monitor.class);
  monitors.addMonitorListener(listener);
  runConsistencyCheckToolWith(monitors,mock(ExitHandle.class),fs.get(),"-recovery",storeDirectory.graphDbDir().getAbsolutePath());
  verify(listener).recoveryRequired(any(LogPosition.class));
  verify(listener).recoveryCompleted();
}
