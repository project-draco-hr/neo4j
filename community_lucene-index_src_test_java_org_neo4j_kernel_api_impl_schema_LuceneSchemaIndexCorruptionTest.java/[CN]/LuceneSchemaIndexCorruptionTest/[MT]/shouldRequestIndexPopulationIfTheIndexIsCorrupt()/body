{
  long faultyIndexId=1;
  CorruptIndexException error=new CorruptIndexException("It's broken.","");
  LuceneSchemaIndexProvider provider=newFaultySchemaIndexProvider(faultyIndexId,error);
  InternalIndexState initialState=provider.getInitialState(faultyIndexId);
  assertThat(initialState,equalTo(InternalIndexState.POPULATING));
  logProvider.assertAtLeastOnce(loggedException(error));
}
