{
  long faultyIndexId=1;
  EOFException error=new EOFException("/some/path/somewhere");
  LuceneSchemaIndexProvider provider=newFaultySchemaIndexProvider(faultyIndexId,error);
  InternalIndexState initialState=provider.getInitialState(faultyIndexId);
  assertEquals(InternalIndexState.FAILED,initialState);
  assertEquals("EOF encountered: " + error.getMessage(),provider.getPopulationFailure(faultyIndexId));
}
