{
  long timeout=System.currentTimeMillis() + 1000 * 30;
  for (; ; ) {
    if (serverResponds(host,port)) {
      return;
    }
 else {
      Thread.sleep(100);
    }
    if (System.currentTimeMillis() > timeout) {
      throw new RuntimeException("Waited for 30 seconds for server to respond to HTTP calls, " + "but no response, timing out to avoid blocking forever.");
    }
  }
}
