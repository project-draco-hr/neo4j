{
  LockManager mgr=mock(LockManager.class);
  Transaction tx=mock(Transaction.class);
  NodeManager nm=mock(NodeManager.class);
  LockHolder holder=new LockHolderImpl(mgr,tx,nm);
  doThrow(new LockNotFoundException("Sad face")).when(mgr).releaseWriteLock(anyObject(),any(Transaction.class));
  doThrow(new LockNotFoundException("Sad face")).when(mgr).releaseReadLock(anyObject(),any(Transaction.class));
  holder.acquireSchemaReadLock();
  holder.acquireSchemaReadLock();
  holder.acquireNodeWriteLock(1337);
  try {
    holder.releaseLocks();
    fail("Expected releaseLocks to throw");
  }
 catch (  ReleaseLocksFailedKernelException e) {
    assertThat(e.getMessage(),containsString("[READ SchemaLocks: 2, WRITE NodeLocks: 1]"));
  }
}
