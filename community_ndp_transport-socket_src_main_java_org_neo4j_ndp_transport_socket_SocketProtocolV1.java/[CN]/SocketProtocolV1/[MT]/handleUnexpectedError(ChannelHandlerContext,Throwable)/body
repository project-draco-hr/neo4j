{
  log.error(String.format("Session %s: Unexpected error while processing message. Session will be " + "terminated: %s",session.key(),e.getMessage()),e);
  try {
    try {
      packer.handleFailureMessage(new Neo4jError(Status.General.UnknownFailure,e.getMessage()));
      packer.flush();
    }
 catch (    Throwable e1) {
      log.error(String.format("Session %s: Secondary error while notifying client of problem: %s",session.key(),e.getMessage()),e);
    }
 finally {
      channelContext.close();
    }
  }
  finally {
    session.close();
  }
}
