{
  PrimitiveLongIterator nodes=nodesGetForLabel(state,labelId);
  while (nodes.hasNext()) {
    long nodeId=nodes.next();
    try (Cursor<NodeItem> node=nodeCursor(state,nodeId)){
      if (node.next()) {
        if (!nodeHasProperty(state,node.get(),propertyKeyId)) {
          MandatoryNodePropertyConstraint constraint=new MandatoryNodePropertyConstraint(labelId,propertyKeyId);
          throw new CreateConstraintFailureException(constraint,new MandatoryNodePropertyConstraintVerificationFailedKernelException(constraint,nodeId));
        }
      }
    }
   }
  return schemaWriteOperations.mandatoryNodePropertyConstraintCreate(state,labelId,propertyKeyId);
}
