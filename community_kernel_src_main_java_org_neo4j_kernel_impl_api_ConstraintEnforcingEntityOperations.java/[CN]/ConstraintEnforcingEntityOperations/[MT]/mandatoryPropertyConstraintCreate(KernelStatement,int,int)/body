{
  PrimitiveLongIterator nodes=nodesGetForLabel(state,labelId);
  while (nodes.hasNext()) {
    try {
      long nodeId=nodes.next();
      if (!nodeHasProperty(state,nodeId,propertyKeyId)) {
        PropertyConstraint constraint=new MandatoryPropertyConstraint(labelId,propertyKeyId);
        ConstraintVerificationFailedKernelException cause=new ConstraintVerificationFailedKernelException(constraint,Evidence.ofNodeWithNullProperty(nodeId));
        throw new CreateConstraintFailureException(constraint,cause);
      }
    }
 catch (    EntityNotFoundException e) {
      PropertyConstraint constraint=new MandatoryPropertyConstraint(labelId,propertyKeyId);
      throw new CreateConstraintFailureException(constraint,e);
    }
  }
  return schemaWriteOperations.mandatoryPropertyConstraintCreate(state,labelId,propertyKeyId);
}
