{
  PrimitiveLongIterator nodes=nodesGetForLabel(state,labelId);
  while (nodes.hasNext()) {
    try {
      long nodeId=nodes.next();
      if (!nodeHasProperty(state,nodeId,propertyKeyId)) {
        MandatoryPropertyConstraint constraint=new MandatoryPropertyConstraint(labelId,propertyKeyId);
        throw new CreateConstraintFailureException(constraint,new MandatoryNodePropertyConstraintVerificationFailedKernelException(constraint,nodeId));
      }
    }
 catch (    EntityNotFoundException e) {
      PropertyConstraint constraint=new MandatoryPropertyConstraint(labelId,propertyKeyId);
      throw new CreateConstraintFailureException(constraint,e);
    }
  }
  return schemaWriteOperations.mandatoryPropertyConstraintCreate(state,labelId,propertyKeyId);
}
