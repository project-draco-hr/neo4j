{
  PrimitiveIntIterator labelIds=entityReadOperations.nodeGetLabels(state,nodeId);
  while (labelIds.hasNext()) {
    int labelId=labelIds.next();
    int propertyKeyId=property.propertyKeyId();
    Iterator<PropertyConstraint> constraintIterator=uniquePropertyConstraints(schemaReadOperations.constraintsGetForLabelAndPropertyKey(state,labelId,propertyKeyId));
    if (constraintIterator.hasNext()) {
      validateNoExistingNodeWithLabelAndProperty(state,labelId,property,nodeId);
    }
  }
  return entityWriteOperations.nodeSetProperty(state,nodeId,property);
}
