{
  PrimitiveIntIterator labelIds=entityReadOperations.nodeGetLabels(state,nodeId);
  while (labelIds.hasNext()) {
    int labelId=labelIds.next();
    int propertyKeyId=property.propertyKeyId();
    Iterator<NodePropertyConstraint> allConstraints=schemaReadOperations.constraintsGetForLabelAndPropertyKey(state,labelId,propertyKeyId);
    Iterator<NodePropertyConstraint> constraintIterator=uniquePropertyConstraints(allConstraints);
    if (constraintIterator.hasNext()) {
      validateNoExistingNodeWithLabelAndProperty(state,labelId,property,nodeId);
    }
  }
  return entityWriteOperations.nodeSetProperty(state,nodeId,property);
}
