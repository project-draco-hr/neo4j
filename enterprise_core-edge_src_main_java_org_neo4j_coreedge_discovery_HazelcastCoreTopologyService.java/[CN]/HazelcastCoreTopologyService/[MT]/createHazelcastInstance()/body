{
  System.setProperty(GroupProperties.PROP_WAIT_SECONDS_BEFORE_JOIN,"1");
  JoinConfig joinConfig=new JoinConfig();
  joinConfig.getMulticastConfig().setEnabled(false);
  TcpIpConfig tcpIpConfig=joinConfig.getTcpIpConfig();
  tcpIpConfig.setEnabled(true);
  List<AdvertisedSocketAddress> initialMembers=config.get(CoreEdgeClusterSettings.initial_discovery_members);
  for (  AdvertisedSocketAddress address : initialMembers) {
    tcpIpConfig.addMember(address.toString());
  }
  log.info("Discovering cluster with initial members: " + initialMembers);
  NetworkConfig networkConfig=new NetworkConfig();
  ListenSocketAddress hazelcastAddress=config.get(CoreEdgeClusterSettings.discovery_listen_address);
  InterfacesConfig interfaces=new InterfacesConfig();
  interfaces.addInterface(hazelcastAddress.getHostname());
  networkConfig.setInterfaces(interfaces);
  networkConfig.setPort(hazelcastAddress.getPort());
  networkConfig.setJoin(joinConfig);
  com.hazelcast.config.Config c=new com.hazelcast.config.Config();
  c.setProperty(GroupProperty.OPERATION_CALL_TIMEOUT_MILLIS,"10000");
  c.setProperty(GroupProperties.PROP_INITIAL_MIN_CLUSTER_SIZE,String.valueOf(minimumClusterSizeThatCanTolerateOneFaultForExpectedClusterSize()));
  c.setProperty(GroupProperties.PROP_LOGGING_TYPE,"none");
  c.setNetworkConfig(networkConfig);
  MemberAttributeConfig memberAttributeConfig=HazelcastClusterTopology.buildMemberAttributes(myself,config);
  c.setMemberAttributeConfig(memberAttributeConfig);
  userLog.info("Waiting for other members to join cluster before continuing...");
  return Hazelcast.newHazelcastInstance(c);
}
