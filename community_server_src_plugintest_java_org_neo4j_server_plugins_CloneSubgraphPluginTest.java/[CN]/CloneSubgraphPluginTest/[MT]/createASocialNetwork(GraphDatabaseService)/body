{
  Transaction tx=db.beginTx();
  try {
    jw=db.createNode();
    jw.setProperty("name","jim");
    Node sp=db.createNode();
    sp.setProperty("name","savas");
    Node bg=db.createNode();
    bg.setProperty("name","bill");
    Node th=db.createNode();
    th.setProperty("name","tony");
    Node rj=db.createNode();
    rj.setProperty("name","rhodri");
    rj.setProperty("hobby","family");
    Node nj=db.createNode();
    nj.setProperty("name","ned");
    nj.setProperty("hobby","cs");
    Node ml=db.createNode();
    ml.setProperty("name","mark");
    Node mf=db.createNode();
    mf.setProperty("name","martin");
    Node rp=db.createNode();
    rp.setProperty("name","rebecca");
    Node rs=db.createNode();
    rs.setProperty("name","roy");
    Node sc=db.createNode();
    sc.setProperty("name","steve");
    sc.setProperty("hobby","cloud");
    Node sw=db.createNode();
    sw.setProperty("name","stuart");
    sw.setProperty("hobby","cs");
    jw.createRelationshipTo(sp,KNOWS);
    jw.createRelationshipTo(mf,KNOWS);
    jw.createRelationshipTo(rj,KNOWS);
    rj.createRelationshipTo(nj,KNOWS);
    mf.createRelationshipTo(rp,KNOWS);
    mf.createRelationshipTo(rs,KNOWS);
    sp.createRelationshipTo(bg,KNOWS);
    sp.createRelationshipTo(th,KNOWS);
    sp.createRelationshipTo(mf,KNOWS);
    sp.createRelationshipTo(ml,WORKED_FOR);
    ml.createRelationshipTo(sc,KNOWS);
    ml.createRelationshipTo(sw,KNOWS);
    jw.setProperty("hobby","cs");
    sp.setProperty("hobby","cs");
    bg.setProperty("hobby","cs");
    ml.setProperty("hobby","cs");
    mf.setProperty("hobby","cs");
    rp.setProperty("hobby","lisp");
    rs.setProperty("hobby","socialism");
    th.setProperty("hobby","fishing");
    tx.success();
  }
  finally {
    tx.finish();
  }
}
