{
  Iterable<CacheProvider> cacheProviders=asList((CacheProvider)new NoCacheProvider());
  Iterable<TransactionInterceptorProvider> txInterceptorProviders=asList();
  Iterable<KernelExtensionFactory<?>> kernelExtensions=Iterables.cast(Service.load(KernelExtensionFactory.class));
  return new EmbeddedGraphDatabase(storeLocation.absolutePath(),stringMap(cache_type.name(),NoCacheProvider.NAME),kernelExtensions,cacheProviders,txInterceptorProviders){
    @Override protected TxIdGenerator createTxIdGenerator(){
      return idGenerator;
    }
  }
;
}
