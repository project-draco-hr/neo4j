{
  directory=new RAMDirectory();
  DirectoryFactory directoryFactory=new DirectoryFactory.Single(new DirectoryFactory.UncloseableDirectory(directory));
  provider=new LuceneSchemaIndexProvider(directoryFactory,new Config(stringMap(store_dir.name(),"target/whatever")));
  indexDescriptor=new IndexDescriptor(42,propertyKeyId);
  indexStoreView=mock(IndexStoreView.class);
  index=provider.getPopulator(indexId,indexDescriptor,new IndexConfiguration(false));
  index.create();
}
