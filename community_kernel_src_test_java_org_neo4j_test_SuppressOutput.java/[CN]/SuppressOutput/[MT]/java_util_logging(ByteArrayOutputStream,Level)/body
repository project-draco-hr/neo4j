{
  final Handler replacement=redirectTo == null ? null : new StreamHandler(redirectTo,new SimpleFormatter());
  if (replacement != null && level != null) {
    replacement.setLevel(level);
  }
  return new Suppressible(){
    @Override public Voice suppress(){
      final Logger logger=LogManager.getLogManager().getLogger("");
      final Level level=logger.getLevel();
      final Handler[] handlers=logger.getHandlers();
      for (      Handler handler : handlers) {
        logger.removeHandler(handler);
      }
      if (replacement != null) {
        logger.addHandler(replacement);
        logger.setLevel(Level.ALL);
      }
      return new Voice(this,redirectTo){
        @Override void restore(        boolean failure) throws IOException {
          for (          Handler handler : handlers) {
            logger.addHandler(handler);
          }
          logger.setLevel(level);
          if (replacement != null) {
            logger.removeHandler(replacement);
          }
        }
      }
;
    }
  }
;
}
