{
  haDbs=new ArrayList<GraphDatabaseService>();
  startUpMaster(config);
  for (int i=1; i <= numSlaves; i++) {
    File slavePath=dbPath(i);
    Broker broker=makeSlaveBroker(master,0,i,slavePath.getAbsolutePath());
    Map<String,String> cfg=new HashMap<String,String>(config);
    cfg.put(HighlyAvailableGraphDatabase.CONFIG_KEY_HA_MACHINE_ID,Integer.toString(i));
    cfg.put(Config.KEEP_LOGICAL_LOGS,"true");
    HighlyAvailableGraphDatabase db=new HighlyAvailableGraphDatabase(slavePath.getAbsolutePath(),cfg,AbstractBroker.wrapSingleBroker(broker));
    haDbs.add(db);
  }
}
