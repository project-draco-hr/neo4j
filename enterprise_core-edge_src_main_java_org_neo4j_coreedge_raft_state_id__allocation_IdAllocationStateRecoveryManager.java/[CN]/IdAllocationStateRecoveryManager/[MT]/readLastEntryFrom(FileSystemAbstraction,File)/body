{
  final ByteBuffer workingBuffer=ByteBuffer.allocate((int)fileSystemAbstraction.getFileSize(file));
  final StoreChannel channel=fileSystemAbstraction.open(file,"r");
  channel.read(workingBuffer);
  workingBuffer.flip();
  InMemoryIdAllocationState result=new InMemoryIdAllocationState();
  InMemoryIdAllocationState lastRead;
  while ((lastRead=marshal.unmarshal(workingBuffer)) != null) {
    result=lastRead;
  }
  return result;
}
