{
  long newPosition=beginningOfLastCompleteEntry(file);
  if (newPosition < 0) {
    return newPosition;
  }
  ByteBuffer buffer=ByteBuffer.allocate((int)fileSystem.getFileSize(file));
  StoreChannel channel=fileSystem.open(file,"r");
  channel.position(newPosition);
  channel.read(buffer);
  buffer.flip();
  InMemoryIdAllocationState inMemoryIdAllocationState=new InMemoryIdAllocationState.InMemoryIdAllocationStateMarshal().unmarshal(buffer);
  channel.close();
  return inMemoryIdAllocationState.logIndex();
}
