{
  if (!stillRunning) {
    throw new IllegalStateException("sending on disposed channel");
  }
  if (messageQueue.size() < MAX_QUEUE_SIZE) {
    messageQueue.offer(msg);
    LockSupport.unpark(messageSendingThread);
  }
}
