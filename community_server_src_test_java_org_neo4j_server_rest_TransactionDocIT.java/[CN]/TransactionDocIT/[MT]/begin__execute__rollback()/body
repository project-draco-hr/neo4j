{
  long nodesInDatabaseBeforeTransaction=countNodes();
  Response begin=http.POST("/db/data/transaction");
  assertThat(begin.status(),equalTo(201));
  assertThat(begin.location(),matches("http://localhost:\\d+/db/data/transaction/\\d+"));
  http.POST(begin.location(),set(map("statement","CREATE n")));
  Response commit=http.DELETE(begin.location());
  assertThat(commit.status(),equalTo(200));
  assertThat(countNodes(),equalTo(nodesInDatabaseBeforeTransaction));
}
