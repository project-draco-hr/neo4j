{
  long denseNode=0;
  cache=new NodeRelationshipCache(NumberArrayFactory.AUTO,1,100,base);
  cache.incrementCount(denseNode);
  cache.getAndPutRelationship(denseNode,0,Direction.OUTGOING,0,true);
  cache.getAndPutRelationship(denseNode,1,Direction.INCOMING,1,true);
  cache.getAndPutRelationship(denseNode,0,Direction.INCOMING,2,true);
  cache.getAndPutRelationship(denseNode,1,Direction.OUTGOING,3,true);
  GroupVisitor visitor=mock(GroupVisitor.class);
  assertEquals(0L,cache.getFirstRel(denseNode,visitor));
  InOrder order=inOrder(visitor);
  order.verify(visitor).visit(denseNode,0,base + 1L,0L,2L,-1L);
  order.verify(visitor).visit(denseNode,1,-1L,3L,1L,-1L);
  order.verifyNoMoreInteractions();
}
