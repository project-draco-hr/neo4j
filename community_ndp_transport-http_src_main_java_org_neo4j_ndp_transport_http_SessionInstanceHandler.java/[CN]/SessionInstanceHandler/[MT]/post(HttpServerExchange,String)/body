{
  SessionAcquisition acquisition=sessionRegistry.acquire(sessionKey);
  if (acquisition.success()) {
    exchange.setResponseCode(StatusCodes.OK);
    exchange.getResponseHeaders().add(Headers.CONTENT_TYPE,PackStreamMessageFormatV1.CONTENT_TYPE);
    processorForSession(exchange,acquisition.session()).process(onAllMessagesProcessed(exchange,acquisition.session()));
  }
 else   if (acquisition.sessionExists()) {
    exchange.setResponseCode(StatusCodes.CONFLICT);
    exchange.endExchange();
  }
 else {
    exchange.setResponseCode(StatusCodes.NOT_FOUND);
    exchange.endExchange();
  }
}
