{
  char active='1';
  File activeLog=new File(logBaseFileName.getPath() + ".active");
  FileChannel af=fileSystem.open(activeLog,"r");
  ByteBuffer buffer=ByteBuffer.allocate(1024);
  af.read(buffer);
  buffer.flip();
  File activeLogBackup=new File(logBaseFileName.getPath() + ".bak.active");
  FileChannel activeCopy=fileSystem.open(activeLogBackup,"rw");
  activeCopy.write(buffer);
  activeCopy.close();
  af.close();
  buffer.flip();
  active=buffer.asCharBuffer().get();
  buffer.clear();
  File currentLog=new File(logBaseFileName.getPath() + "." + active);
  FileChannel source=fileSystem.open(currentLog,"r");
  File currentLogBackup=new File(logBaseFileName.getPath() + ".bak." + active);
  FileChannel dest=fileSystem.open(currentLogBackup,"rw");
  int read=-1;
  do {
    read=source.read(buffer);
    buffer.flip();
    dest.write(buffer);
    buffer.clear();
  }
 while (read == 1024);
  source.close();
  dest.close();
  return Pair.of(Pair.of(activeLog,activeLogBackup),Pair.of(currentLog,currentLogBackup));
}
