{
  if (isByteUniform(defaultValue)) {
    UnsafeUtil.setMemory(address,length * itemSize,defaultValue[0]);
  }
 else {
    long intermediary=UnsafeUtil.allocateMemory(itemSize);
    for (int i=0; i < defaultValue.length; i++) {
      UnsafeUtil.putByte(intermediary + i,defaultValue[i]);
    }
    for (long i=0, adr=address; i < length; i++, adr+=itemSize) {
      UnsafeUtil.copyMemory(intermediary,adr,itemSize);
    }
    UnsafeUtil.free(intermediary);
  }
}
