{
  final long logVersion=1;
  final long txId=42;
  final ByteBuffer buffer=ByteBuffer.allocate(LOG_HEADER_SIZE);
  final ReadableByteChannel channel=mock(ReadableByteChannel.class);
  when(channel.read(buffer)).thenAnswer(new Answer<Integer>(){
    @Override public Integer answer(    InvocationOnMock invocation) throws Throwable {
      buffer.putLong(encodeLogVersion(logVersion));
      buffer.putLong(txId);
      return 8 + 8;
    }
  }
);
  final long[] result=readLogHeader(buffer,channel,true);
  assertEquals(logVersion,result[0]);
  assertEquals(txId,result[1]);
}
