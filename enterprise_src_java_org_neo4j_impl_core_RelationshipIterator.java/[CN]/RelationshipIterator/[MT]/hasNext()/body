{
  if (nextElement != null) {
    return true;
  }
  do {
    if (nextPosition < relIds.length) {
      try {
        Relationship possibleElement=nodeManager.getRelationshipById(relIds[nextPosition++]);
        if (direction == Direction.INCOMING && possibleElement.getEndNode().equals(fromNode)) {
          nextElement=possibleElement;
        }
 else         if (direction == Direction.OUTGOING && possibleElement.getStartNode().equals(fromNode)) {
          nextElement=possibleElement;
        }
 else         if (direction == Direction.BOTH) {
          nextElement=possibleElement;
        }
      }
 catch (      Throwable t) {
        log.log(Level.FINE,"Unable to get relationship " + relIds[nextPosition - 1],t);
      }
    }
  }
 while (nextElement == null && nextPosition < relIds.length);
  return nextElement != null;
}
