{
  double equalityTolerance=0.2d;
  HeuristicsCollector collector=new HeuristicsCollector(new RollingAverage.Parameters(RollingAverage.Parameters.DEFAULT_WINDOW_SIZE,equalityTolerance));
  RuntimeHeuristicsService service=new RuntimeHeuristicsService(collector,generateStore(),null);
  HeuristicsData heuristics=service.heuristics();
  service.run();
  service.run();
  assertThat(heuristics.labelDistribution(0),closeTo(0.2,equalityTolerance));
  assertThat(heuristics.labelDistribution(1),closeTo(0.8,equalityTolerance));
}
