{
  double equalityTolerance=0.2d;
  HeuristicsCollector collector=new HeuristicsCollector(new RollingAverage.Parameters(RollingAverage.Parameters.DEFAULT_WINDOW_SIZE,equalityTolerance));
  RuntimeHeuristicsService service=new RuntimeHeuristicsService(collector,generateStore(),null);
  HeuristicsData heuristics=service.heuristics();
  service.run();
  service.run();
  assertThat(heuristics.relationshipTypeDistribution(0),closeTo(0.4,equalityTolerance));
  assertThat(heuristics.relationshipTypeDistribution(1),closeTo(0.5,equalityTolerance));
}
