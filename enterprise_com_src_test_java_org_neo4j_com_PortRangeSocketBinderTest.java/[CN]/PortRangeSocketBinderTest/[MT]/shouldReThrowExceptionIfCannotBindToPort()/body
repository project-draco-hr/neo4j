{
  HostnamePort localhost=new HostnamePort("localhost",9000);
  ServerBootstrap bootstrap=mock(ServerBootstrap.class);
  when(bootstrap.bind(new InetSocketAddress("localhost",9000))).thenThrow(new ChannelException());
  try {
    new PortRangeSocketBinder(bootstrap).bindToFirstAvailablePortInRange(localhost);
    fail("should have thrown ChannelException");
  }
 catch (  ChannelException ignored) {
  }
}
