{
  Process process=getRuntime().exec(new String[]{"java","-cp",getProperty("java.class.path"),DumpableProcess.class.getName(),SIGNAL});
  awaitSignal(process);
  DumpProcessInformation dumper=new DumpProcessInformation(new DevNullLoggingService(),directory);
  Pair<Long,String> pid=single(dumper.getJPids(containsString(DumpableProcess.class.getSimpleName())));
  File threaddumpFile=dumper.doThreadDump(pid);
  process.destroy();
  assertTrue(fileContains(threaddumpFile,"traceableMethod",DumpableProcess.class.getName()));
}
