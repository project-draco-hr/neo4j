{
  SchemaIndexProvider.Descriptor providerDescriptor=providerMap.getDefaultProvider().getProviderDescriptor();
  IndexRule rule=new IndexRule(idGeneration.newSchemaRuleId(),labelId,providerDescriptor,propertyKey);
  legacyTransaction.createSchemaRule(rule);
  ruleDiffSets.add(rule);
  LabelState labelState=getState(labelStates,rule.getLabel(),LABEL_STATE_CREATOR);
  labelState.getIndexRuleDiffSets().add(rule);
  return rule;
}
