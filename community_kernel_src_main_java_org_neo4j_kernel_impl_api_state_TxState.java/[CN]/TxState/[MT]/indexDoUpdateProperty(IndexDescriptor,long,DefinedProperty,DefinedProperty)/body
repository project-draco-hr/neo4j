{
  DiffSets<Long> before=getIndexUpdatesForScanOrSeek(descriptor.getLabelId(),true,propertyBefore);
  if (before != null) {
    before.remove(nodeId);
    if (before.getRemoved().contains(nodeId)) {
      getOrCreateNodeState(nodeId).addIndexDiff(before);
    }
 else {
      getOrCreateNodeState(nodeId).removeIndexDiff(before);
    }
  }
  DiffSets<Long> after=getIndexUpdatesForScanOrSeek(descriptor.getLabelId(),true,propertyAfter);
  if (after != null) {
    after.add(nodeId);
    if (after.getAdded().contains(nodeId)) {
      getOrCreateNodeState(nodeId).addIndexDiff(after);
    }
 else {
      getOrCreateNodeState(nodeId).removeIndexDiff(after);
    }
  }
}
