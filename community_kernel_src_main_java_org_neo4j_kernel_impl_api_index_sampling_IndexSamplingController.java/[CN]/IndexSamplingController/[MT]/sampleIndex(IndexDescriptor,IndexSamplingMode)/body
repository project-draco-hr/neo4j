{
  IndexMap indexMap=indexMapSnapshotProvider.indexMapSnapshot();
  jobQueue.sampleIndex(mode,descriptor);
  if (mode.blockUntilAllScheduled) {
    emptyQueue(indexMap);
  }
 else {
    tryEmptyQueue(indexMap);
  }
}
