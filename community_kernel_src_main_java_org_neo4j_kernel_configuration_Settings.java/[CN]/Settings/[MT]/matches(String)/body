{
  final Pattern pattern=Pattern.compile(regex);
  return new Function2<String,Function<String,String>,String>(){
    @Override public String apply(    String value,    Function<String,String> settings){
      if (!pattern.matcher(value).matches()) {
        throw new IllegalArgumentException("value does not match expression:" + regex);
      }
      return value;
    }
    @Override public String toString(){
      return String.format(MATCHES_PATTERN_MESSAGE,regex);
    }
  }
;
}
