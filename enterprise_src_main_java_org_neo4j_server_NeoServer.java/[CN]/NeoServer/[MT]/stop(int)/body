{
  String location="unknown";
  try {
    RrdManager.getRrdDB().close();
    RrdSampler.instance().stop();
    RrdSampler.shutdown();
    if (database != null) {
      location=database.getLocation();
      database.shutdown();
      database=null;
    }
    if (webServer != null) {
      webServer.stop();
      webServer=null;
    }
    configurator=null;
    log.info("Successfully shutdown Neo Server on port [%d], database [%s]",webServerPort,location);
    return 0;
  }
 catch (  Exception e) {
    log.error("Failed to cleanly shutdown Neo Server on port [%d], database [%s]. Reason [%s] ",webServerPort,location,e.getMessage());
    return 1;
  }
}
