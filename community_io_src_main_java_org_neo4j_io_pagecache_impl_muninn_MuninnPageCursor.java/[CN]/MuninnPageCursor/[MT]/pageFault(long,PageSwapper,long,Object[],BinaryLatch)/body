{
  PageFaultEvent faultEvent=pinEvent.beginPageFault();
  MuninnPage page;
  try {
    page=pagedFile.grabFreePage(faultEvent);
    if (!page.tryExclusiveLock()) {
      throw new AssertionError("Unable to take exclusive lock on free page");
    }
  }
 catch (  Throwable throwable) {
    UnsafeUtil.putObjectVolatile(chunk,chunkOffset,null);
    latch.release();
    faultEvent.done(throwable);
    pinEvent.done();
    throw throwable;
  }
  try {
    assertPagedFileStillMappedAndGetIdOfLastPage();
    page.initBuffer();
    page.fault(swapper,filePageId,faultEvent);
  }
 catch (  Throwable throwable) {
    page.unlockExclusive();
    UnsafeUtil.putObjectVolatile(chunk,chunkOffset,null);
    latch.release();
    faultEvent.done(throwable);
    pinEvent.done();
    throw throwable;
  }
  convertPageFaultLock(page);
  UnsafeUtil.putObjectVolatile(chunk,chunkOffset,page);
  latch.release();
  faultEvent.done();
  return page;
}
