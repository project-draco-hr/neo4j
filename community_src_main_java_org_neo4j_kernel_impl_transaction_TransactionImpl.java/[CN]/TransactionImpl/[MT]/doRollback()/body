{
  try {
    status=Status.STATUS_ROLLING_BACK;
    LinkedList<Xid> rolledbackXids=new LinkedList<Xid>();
    Iterator<ResourceElement> itr=resourceList.iterator();
    while (itr.hasNext()) {
      ResourceElement re=itr.next();
      if (!rolledbackXids.contains(re.getXid())) {
        rolledbackXids.add(re.getXid());
        re.getResource().rollback(re.getXid());
      }
    }
    status=Status.STATUS_ROLLEDBACK;
  }
  finally {
    this.txManager.rollbackHook.doneCommitting(eventIdentifier);
  }
}
