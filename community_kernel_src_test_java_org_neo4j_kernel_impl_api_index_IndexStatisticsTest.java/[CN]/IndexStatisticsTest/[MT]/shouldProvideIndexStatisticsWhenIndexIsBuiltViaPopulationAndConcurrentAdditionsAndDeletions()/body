{
  ArrayList<Long> nodes=new ArrayList<>(10000);
  int createdBefore=0;
  while (createdBefore < 10000) {
    createdBefore+=createNamedPeople(nodes);
  }
  IndexDescriptor index=createIndex("Person","name");
  int createdAfter=0;
  while (createdAfter < 10000) {
    createdAfter+=createNamedPeople(nodes);
    if (createdAfter % 5 == 0) {
      long nodeId=nodes.get(nodes.size() / 2);
      deleteNode(nodeId);
      createdAfter--;
    }
  }
  awaitOnline(index);
  int expected=createdBefore + createdAfter;
  assertCorrectNumberOfEntries(expected,numberOfIndexEntries(index));
}
