{
  File store=createIntactStore();
  fileSystem.deleteFile(new File(store,"nioneo_logical.log.active"));
  StoreRecoverer recoverer=new StoreRecoverer(fileSystem);
  assertThat(recoverer.recoveryNeededAt(store,mock(LogVersionRepository.class),new HashMap<String,String>()),is(true));
  new TestGraphDatabaseFactory().setFileSystem(fileSystem).newImpermanentDatabase(store.getPath()).shutdown();
  assertThat(recoverer.recoveryNeededAt(store,mock(LogVersionRepository.class),new HashMap<String,String>()),is(false));
}
