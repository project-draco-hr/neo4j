{
  File store=null;
  try {
    store=createIntactStore();
    new File(store,"nioneo_logical.log.active").delete();
    StoreRecoverer recoverer=new StoreRecoverer();
    assertThat(recoverer.recoveryNeededAt(store,new HashMap<String,String>()),is(true));
    recoverer.recover(store,new HashMap<String,String>());
    assertThat(recoverer.recoveryNeededAt(store,new HashMap<String,String>()),is(false));
  }
  finally {
    if (store != null) {
      FileUtils.deleteRecursively(store);
    }
  }
}
