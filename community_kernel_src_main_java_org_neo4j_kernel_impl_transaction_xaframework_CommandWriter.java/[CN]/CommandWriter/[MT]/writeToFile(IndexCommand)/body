{
  writeIndexCommandHeader(command);
  putIntOrLong(command.getEntityId());
  Object value=command.getValue();
switch (command.getValueType()) {
case IndexCommand.VALUE_TYPE_STRING:
    write3bLengthAndString(channel,value.toString());
  break;
case IndexCommand.VALUE_TYPE_SHORT:
channel.putShort(((Number)value).shortValue());
break;
case IndexCommand.VALUE_TYPE_INT:
channel.putInt(((Number)value).intValue());
break;
case IndexCommand.VALUE_TYPE_LONG:
channel.putLong(((Number)value).longValue());
break;
case IndexCommand.VALUE_TYPE_FLOAT:
channel.putFloat(((Number)value).floatValue());
break;
case IndexCommand.VALUE_TYPE_DOUBLE:
channel.putDouble(((Number)value).doubleValue());
break;
case IndexCommand.VALUE_TYPE_NULL:
break;
default :
throw new RuntimeException("Unknown value type " + command.getValueType());
}
}
