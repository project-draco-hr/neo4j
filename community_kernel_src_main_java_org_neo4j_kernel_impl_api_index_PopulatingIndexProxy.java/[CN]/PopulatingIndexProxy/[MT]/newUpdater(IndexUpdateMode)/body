{
switch (mode) {
case ONLINE:
    return new PopulatingIndexUpdater(){
      @Override public void process(      NodePropertyUpdate update) throws IOException, IndexEntryConflictException {
        job.update(update);
      }
    }
;
case RECOVERY:
  return new PopulatingIndexUpdater(){
    @Override public void process(    NodePropertyUpdate update) throws IOException, IndexEntryConflictException {
      throw new UnsupportedOperationException("Recovered updates shouldn't reach this place");
    }
  }
;
default :
return new PopulatingIndexUpdater(){
  @Override public void process(  NodePropertyUpdate update) throws IOException, IndexEntryConflictException {
    throw new ThisShouldNotHappenError("Stefan","Unsupported IndexUpdateMode");
  }
}
;
}
}
