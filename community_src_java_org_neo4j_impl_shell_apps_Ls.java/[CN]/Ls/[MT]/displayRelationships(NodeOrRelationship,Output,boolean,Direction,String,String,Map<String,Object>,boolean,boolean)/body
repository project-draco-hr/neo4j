{
  for (  Relationship rel : thing.getRelationships(direction)) {
    String type=rel.getType().name();
    boolean matches=filterMap.isEmpty();
    for (    String filter : filterMap.keySet()) {
      if (matches(newPattern(filter,caseInsensitiveFilters),type,caseInsensitiveFilters,looseFilters)) {
        matches=true;
        break;
      }
    }
    if (!matches) {
      continue;
    }
    StringBuffer buf=new StringBuffer(getDisplayNameForCurrentNode());
    buf.append(" " + prefixString).append(rel.getType().name());
    if (verbose) {
      buf.append(", ").append(rel.getId());
    }
    buf.append(postfixString + " ");
    buf.append(getDisplayNameForNode(direction == Direction.OUTGOING ? rel.getEndNode() : rel.getStartNode()));
    out.println(buf);
  }
}
