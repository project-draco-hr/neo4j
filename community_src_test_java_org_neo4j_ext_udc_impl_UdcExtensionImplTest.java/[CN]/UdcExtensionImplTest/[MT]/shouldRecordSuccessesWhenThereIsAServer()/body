{
  LocalTestServer server=new LocalTestServer(null,null);
  PingerHandler handler=new PingerHandler();
  server.register("/*",handler);
  server.start();
  final String hostname=server.getServiceHostName();
  final String serverAddress=hostname + ":" + server.getServicePort();
  Map<String,String> config=new HashMap<String,String>();
  config.put(UdcExtensionImpl.FIRST_DELAY_CONFIG_KEY,"100");
  config.put(UdcExtensionImpl.UDC_HOST_ADDRESS,serverAddress);
  EmbeddedGraphDatabase graphdb=createTempDatabase(config);
  Thread.sleep(200);
  Collection<Integer> successCountValues=UdcTimerTask.successCounts.values();
  Integer successes=successCountValues.iterator().next();
  assertTrue(successes > 0);
  Collection<Integer> failureCountValues=UdcTimerTask.failureCounts.values();
  Integer failures=failureCountValues.iterator().next();
  assertTrue(failures == 0);
  graphdb.shutdown();
}
