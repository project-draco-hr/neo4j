{
  IndexConfigStore indexConfigStore=mock(IndexConfigStore.class);
  when(indexConfigStore.get(eq(Node.class),anyString())).thenReturn(singletonMap(IndexManager.PROVIDER,"test"));
  when(indexConfigStore.get(eq(Relationship.class),anyString())).thenReturn(singletonMap(IndexManager.PROVIDER,"test"));
  Function<String,IndexImplementation> providerLookup=new Function<String,IndexImplementation>(){
    @Override public IndexImplementation apply(    String s) throws RuntimeException {
      return mock(IndexImplementation.class);
    }
  }
;
  return new LegacyIndexTransactionStateImpl(indexConfigStore,providerLookup);
}
