{
  KeyValueStoreState<Key,MetaData> state=this.state;
  visitor.visitMetadata(state.file(),metadata(),state.totalRecordsStored());
  try (DataProvider provider=state.dataProvider()){
    transfer(provider,new DelegatingKeyValueVisitor(visitor));
  }
 }
