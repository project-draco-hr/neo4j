{
  BatchInserter inserter=BatchInserters.inserter(dbRule.getStoreDirAbsolutePath());
  long nodeId=inserter.createNode(Collections.<String,Object>emptyMap());
  final Object finalValue1=87;
  final Object finalValue2=3.14;
  inserter.setNodeProperty(nodeId,"a","some property value");
  inserter.setNodeProperty(nodeId,"a",42);
  inserter.setNodeProperty(nodeId,"b",finalValue2);
  inserter.setNodeProperty(nodeId,"a",finalValue2);
  inserter.setNodeProperty(nodeId,"a",true);
  inserter.setNodeProperty(nodeId,"a",finalValue1);
  inserter.shutdown();
  GraphDatabaseService db=dbRule.getGraphDatabaseService();
  try (Transaction ignored=db.beginTx()){
    assertThat(db.getNodeById(nodeId).getProperty("a"),equalTo(finalValue1));
    assertThat(db.getNodeById(nodeId).getProperty("b"),equalTo(finalValue2));
  }
  finally {
    db.shutdown();
  }
}
