{
  UserTransaction ut=TransactionFactory.getUserTransaction();
  ut.commit();
  Transaction tx=Transaction.begin();
  Node node;
  try {
    node=NodeManager.getManager().createNode();
    tx.success();
  }
  finally {
    tx.finish();
  }
  tx=Transaction.begin();
  try {
    node.setProperty("test",new String[]{"value1"});
    tx.success();
  }
  finally {
    tx.finish();
  }
  tx=Transaction.begin();
  try {
    node.setProperty("test",new String[]{"value1","value2"});
  }
  finally {
    tx.finish();
  }
  tx=Transaction.begin();
  try {
    String[] value=(String[])node.getProperty("test");
    assertEquals(1,value.length);
    assertEquals("value1",value[0]);
    tx.success();
  }
  finally {
    tx.finish();
  }
  ut.begin();
}
