{
  if (fromIndex <= commitIndex) {
    throw new IllegalArgumentException("cannot truncate before the commit index");
  }
 else   if (fromIndex > appendIndex) {
    throw new IllegalArgumentException("Cannot truncate at index " + fromIndex + " when append index is "+ appendIndex);
  }
 else   if (fromIndex <= prevIndex) {
    prevIndex=-1;
    prevTerm=-1;
  }
  for (long i=appendIndex; i >= fromIndex; --i) {
    raftLog.remove(i);
  }
  if (appendIndex >= fromIndex) {
    appendIndex=fromIndex - 1;
  }
  term=readEntryTerm(appendIndex);
}
