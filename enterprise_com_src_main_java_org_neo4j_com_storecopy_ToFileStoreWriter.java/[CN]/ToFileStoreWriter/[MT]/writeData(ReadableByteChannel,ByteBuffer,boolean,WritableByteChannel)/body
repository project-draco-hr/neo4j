{
  long totalWritten=0;
  if (hasData) {
    while (data.read(temporaryBuffer) >= 0) {
      temporaryBuffer.flip();
      totalWritten+=temporaryBuffer.limit();
      channel.write(temporaryBuffer);
      temporaryBuffer.clear();
    }
  }
  return totalWritten;
}
