{
  this.config=config;
  this.monitors=monitors;
  this.registry=registry;
  masterNetworkTransactionWrites=new ByteCountsMetric();
  masterNetworkStoreWrites=new ByteCountsMetric();
  slaveNetworkTransactionWrites=new ByteCountsMetric();
  networkTransactionReads=new ByteCountsMetric();
  if (config.get(MetricsSettings.neoNetworkEnabled)) {
    monitors.addMonitorListener(masterNetworkTransactionWrites,MasterServer.class.getName());
    monitors.addMonitorListener(masterNetworkStoreWrites,ToNetworkStoreWriter.class.getName(),"storeCopier");
    monitors.addMonitorListener(slaveNetworkTransactionWrites,MasterClient210.class.getName());
    monitors.addMonitorListener(networkTransactionReads,"logdeserializer");
    registry.register(MASTER_NETWORK_TX_WRITES,new Gauge<Long>(){
      public Long getValue(){
        return masterNetworkTransactionWrites.getBytesWritten();
      }
    }
);
    registry.register(MASTER_NETWORK_STORE_WRITES,new Gauge<Long>(){
      public Long getValue(){
        return masterNetworkStoreWrites.getBytesWritten();
      }
    }
);
    registry.register(SLAVE_NETWORK_TX_WRITES,new Gauge<Long>(){
      public Long getValue(){
        return slaveNetworkTransactionWrites.getBytesWritten();
      }
    }
);
    registry.register(TRANSACTION_READS,new Gauge<Long>(){
      public Long getValue(){
        return networkTransactionReads.getBytesRead();
      }
    }
);
  }
}
