{
  Transaction tx=this.getCurrentTransaction();
  if (tx == null) {
    throw new NotInTransactionException();
  }
  T con=txConnectionMap.get(tx);
  if (con != null) {
    try {
      tx.delistResource(con.getXaResource(),XAResource.TMSUCCESS);
    }
 catch (    IllegalStateException e) {
      throw new RuntimeException("Unable to delist lucene resource from tx",e);
    }
catch (    SystemException e) {
      throw new RuntimeException("Unable to delist lucene resource from tx",e);
    }
  }
}
