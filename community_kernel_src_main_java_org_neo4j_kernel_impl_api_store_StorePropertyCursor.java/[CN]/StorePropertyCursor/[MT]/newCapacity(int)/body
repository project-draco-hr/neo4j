{
  int newCapacity;
  do {
    newCapacity=buffer.capacity() * 2;
  }
 while (newCapacity - buffer.limit() < required);
  return newCapacity;
}
