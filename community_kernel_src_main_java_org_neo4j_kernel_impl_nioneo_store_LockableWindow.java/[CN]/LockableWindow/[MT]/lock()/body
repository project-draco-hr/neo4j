{
  Thread currentThread=Thread.currentThread();
  LockElement le=new LockElement(currentThread);
  while (lockCount > 0 && lockingThread != currentThread) {
    waitingThreadList.addFirst(le);
    try {
      wait();
    }
 catch (    InterruptedException e) {
      Thread.interrupted();
    }
  }
  lockCount++;
  lockingThread=currentThread;
  le.movedOn=true;
  marked--;
}
