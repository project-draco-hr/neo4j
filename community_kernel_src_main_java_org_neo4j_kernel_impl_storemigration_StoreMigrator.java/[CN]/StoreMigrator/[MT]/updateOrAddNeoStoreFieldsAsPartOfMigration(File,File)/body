{
  final File storeDirNeoStore=new File(storeDir,MetaDataStore.DEFAULT_NAME);
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.UPGRADE_TRANSACTION_ID,MetaDataStore.getRecord(pageCache,storeDirNeoStore,Position.LAST_TRANSACTION_ID));
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.UPGRADE_TIME,System.currentTimeMillis());
  TransactionId lastTxInfo=readLastTxInformation(migrationDir);
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.LAST_TRANSACTION_CHECKSUM,lastTxInfo.checksum());
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.UPGRADE_TRANSACTION_CHECKSUM,lastTxInfo.checksum());
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.LAST_TRANSACTION_COMMIT_TIMESTAMP,lastTxInfo.commitTimestamp());
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.UPGRADE_TRANSACTION_COMMIT_TIMESTAMP,lastTxInfo.commitTimestamp());
  LogPosition logPosition=readLastTxLogPosition(migrationDir);
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.LAST_CLOSED_TRANSACTION_LOG_VERSION,logPosition.getLogVersion());
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.LAST_CLOSED_TRANSACTION_LOG_BYTE_OFFSET,logPosition.getByteOffset());
  MetaDataStore.setRecord(pageCache,storeDirNeoStore,Position.STORE_VERSION,MetaDataStore.versionStringToLong(ALL_STORES_VERSION));
}
