{
  final File storeDirNeoStore=new File(storeDir,NeoStore.DEFAULT_NAME);
  NeoStore.setRecord(pageCache,storeDirNeoStore,Position.UPGRADE_TRANSACTION_ID,NeoStore.getRecord(pageCache,storeDirNeoStore,Position.LAST_TRANSACTION_ID));
  NeoStore.setRecord(pageCache,storeDirNeoStore,Position.UPGRADE_TIME,System.currentTimeMillis());
  long lastTxChecksum=readLastTxChecksum(migrationDir);
  NeoStore.setRecord(pageCache,storeDirNeoStore,Position.LAST_TRANSACTION_CHECKSUM,lastTxChecksum);
  NeoStore.setRecord(pageCache,storeDirNeoStore,Position.UPGRADE_TRANSACTION_CHECKSUM,lastTxChecksum);
  LogPosition logPosition=readLastTxLogPosition(migrationDir);
  NeoStore.setRecord(pageCache,storeDirNeoStore,Position.LAST_CLOSED_TRANSACTION_LOG_VERSION,logPosition.getLogVersion());
  NeoStore.setRecord(pageCache,storeDirNeoStore,Position.LAST_CLOSED_TRANSACTION_LOG_BYTE_OFFSET,logPosition.getByteOffset());
}
