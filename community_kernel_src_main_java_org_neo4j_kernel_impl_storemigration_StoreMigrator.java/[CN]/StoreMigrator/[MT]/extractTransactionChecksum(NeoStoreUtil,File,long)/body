{
  try {
    return neoStoreAccess.getLastCommittedTxChecksum();
  }
 catch (  IllegalStateException e) {
    try {
      return legacyLogs.getTransactionChecksum(storeDir,txId);
    }
 catch (    IOException ioe) {
      return txId == TransactionIdStore.BASE_TX_ID ? TransactionIdStore.BASE_TX_CHECKSUM : Math.abs(new Random().nextLong());
    }
  }
}
