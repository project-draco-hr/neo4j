{
  long nextIdFromStore=relationshipTypeStore.nextId();
  if (nextIdFromStore != id) {
    throw new IllegalStateException(String.format("Expected next id from store %d to match legacy id %d",nextIdFromStore,id));
  }
  RelationshipTypeRecord record=new RelationshipTypeRecord(id);
  record.setInUse(true);
  record.setCreated();
  int keyBlockId=(int)relationshipTypeStore.nextBlockId();
  record.setTypeBlock(keyBlockId);
  Collection<DynamicRecord> keyRecords=relationshipTypeStore.allocateTypeNameRecords(keyBlockId,encodeString(name));
  for (  DynamicRecord keyRecord : keyRecords) {
    record.addTypeRecord(keyRecord);
  }
  relationshipTypeStore.updateRecord(record);
}
