{
  if (xaDataSourceManager.getNeoStoreDataSource().isReadOnly()) {
    throw new ReadOnlyDbException();
  }
  NeoStoreTransaction result=((NeoStoreXaConnection)connection).getWriteTransaction();
  result.setXaConnection(connection);
  return result;
}
