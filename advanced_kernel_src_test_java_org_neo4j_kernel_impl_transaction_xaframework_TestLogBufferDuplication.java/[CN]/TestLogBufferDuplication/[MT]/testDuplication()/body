{
  CloseableByteBuffer original=CloseableByteBuffer.wrap(ByteBuffer.allocate(20));
  original.putInt(1).putInt(2).putInt(3);
  original.flip();
  assertEquals(1,original.getInt());
  CloseableByteBuffer dup=original.duplicate();
  assertEquals(2,dup.getInt());
  dup.rewind();
  assertEquals(1,dup.getInt());
  assertEquals(2,dup.getInt());
  assertEquals(3,dup.getInt());
  assertEquals(2,original.getInt());
  assertEquals(3,original.getInt());
  dup.rewind().putInt(4).putInt(5);
  dup.rewind();
  assertEquals(4,dup.getInt());
  assertEquals(5,dup.getInt());
  original.rewind();
  assertEquals(4,original.getInt());
  assertEquals(5,original.getInt());
  original.clear();
  original.putInt(6).putInt(7).putInt(8);
  dup.rewind();
  assertEquals(4,dup.getInt());
  assertEquals(5,dup.getInt());
  original.flip();
  assertEquals(6,original.getInt());
  assertEquals(7,original.getInt());
  assertEquals(8,original.getInt());
}
