{
  RelationshipProxy relationship=new RelationshipProxy(relationshipActions,relId);
  if (!state.relationshipVisit(relId,relationship)) {
    RelationshipProxy cached=relationshipsReadFromStore.get(relId);
    if (cached != null) {
      return relationship;
    }
    try {
      store.relationshipVisit(relId,relationship);
      relationshipsReadFromStore.put(relId,relationship);
    }
 catch (    EntityNotFoundException e) {
      throw new IllegalStateException("Getting deleted relationship data should have been covered by the tx state");
    }
  }
  return relationship;
}
