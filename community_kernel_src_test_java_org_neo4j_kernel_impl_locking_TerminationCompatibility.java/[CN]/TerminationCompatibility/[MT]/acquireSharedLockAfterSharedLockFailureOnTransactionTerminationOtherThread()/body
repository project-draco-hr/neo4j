{
  acquireExclusiveLockInThisThread();
  LockAcquisition sharedLockAcquisition1=acquireSharedLockInAnotherThread();
  assertThreadIsWaitingForLock(sharedLockAcquisition1);
  sharedLockAcquisition1.terminate();
  assertLockAcquisitionFailed(sharedLockAcquisition1);
  releaseAllLocksInThisThread();
  LockAcquisition sharedLockAcquisition2=acquireSharedLockInAnotherThread();
  assertLockAcquisitionSucceeded(sharedLockAcquisition2);
}
