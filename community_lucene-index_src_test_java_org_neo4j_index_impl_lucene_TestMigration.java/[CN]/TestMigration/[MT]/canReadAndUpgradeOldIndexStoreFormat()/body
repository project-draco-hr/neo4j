{
  String path="target/var/old-index-store";
  Neo4jTestCase.deleteFileOrDirectory(new File(path));
  GraphDatabaseService db=new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(path).newGraphDatabase();
  db.shutdown();
  InputStream stream=getClass().getClassLoader().getResourceAsStream("old-index.db");
  writeFile(stream,new File(path,"index.db"));
  db=new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(path).newGraphDatabase();
  assertTrue(db.index().existsForNodes("indexOne"));
  Index<Node> indexOne=db.index().forNodes("indexOne");
  verifyConfiguration(db,indexOne,LuceneIndexImplementation.EXACT_CONFIG);
  assertTrue(db.index().existsForNodes("indexTwo"));
  Index<Node> indexTwo=db.index().forNodes("indexTwo");
  verifyConfiguration(db,indexTwo,LuceneIndexImplementation.FULLTEXT_CONFIG);
  assertTrue(db.index().existsForRelationships("indexThree"));
  Index<Relationship> indexThree=db.index().forRelationships("indexThree");
  verifyConfiguration(db,indexThree,LuceneIndexImplementation.EXACT_CONFIG);
  db.shutdown();
}
