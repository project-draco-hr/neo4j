{
  FileSystemAbstraction fs=mock(FileSystemAbstraction.class);
  ConsoleLogger logger=Mockito.mock(ConsoleLogger.class);
  mockFileSize(fs,"nodestore.db",200 * GiB);
  mockFileSize(fs,"relationshipstore.db",200 * GiB);
  mockFileSize(fs,"relationshipgroupstore.db",200 * GiB);
  mockFileSize(fs,"propertystore.db",200 * GiB);
  mockFileSize(fs,"propertystore.db.strings",200 * GiB);
  mockFileSize(fs,"propertystore.db.arrays",200 * GiB);
  long vmMemory=512 * MiB;
  long physicalMemory=-1;
  AutoConfigurator autoConf=new AutoConfigurator(fs,storeDir,true,physicalMemory,vmMemory,logger);
  verify(logger).warn("Could not determine the size of the physical memory. Continuing but without memory mapped buffers.");
  verifyNoMoreInteractions(logger);
  assertEquals(Collections.<String,String>emptyMap(),autoConf.configure());
}
