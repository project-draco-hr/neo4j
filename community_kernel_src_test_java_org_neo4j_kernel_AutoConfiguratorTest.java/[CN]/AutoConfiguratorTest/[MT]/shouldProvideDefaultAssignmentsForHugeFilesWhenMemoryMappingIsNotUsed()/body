{
  FileSystemAbstraction fs=mock(FileSystemAbstraction.class);
  mockFileSize(fs,"nodestore.db",200 * GiB);
  mockFileSize(fs,"relationshipstore.db",200 * GiB);
  mockFileSize(fs,"relationshipgroupstore.db",200 * GiB);
  mockFileSize(fs,"propertystore.db",200 * GiB);
  mockFileSize(fs,"propertystore.db.strings",200 * GiB);
  mockFileSize(fs,"propertystore.db.arrays",200 * GiB);
  long availableMem=100000;
  AutoConfigurator autoConf=new AutoConfigurator(fs,storeDir,false,10000 * GiB,2 * availableMem * MiB,Mockito.mock(ConsoleLogger.class));
  Map<String,String> configuration=autoConf.configure();
  assertMappedMemory(configuration,"75000M","relationshipstore.db");
  assertMappedMemory(configuration," 5000M","nodestore.db");
  assertMappedMemory(configuration,"    2M","relationshipgroupstore.db");
  assertMappedMemory(configuration,"14998M","propertystore.db");
  assertMappedMemory(configuration," 3750M","propertystore.db.strings");
  assertMappedMemory(configuration," 1250M","propertystore.db.arrays");
}
