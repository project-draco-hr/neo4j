{
  if (config.get(GraphDatabaseSettings.read_only)) {
    return new ReadOnlyTokenCreator();
  }
 else {
    DelegateInvocationHandler<TokenCreator> propertyKeyCreatorDelegate=new DelegateInvocationHandler<>(TokenCreator.class);
    TokenCreator propertyTokenCreator=(TokenCreator)Proxy.newProxyInstance(TokenCreator.class.getClassLoader(),new Class[]{TokenCreator.class},propertyKeyCreatorDelegate);
    new PropertyKeyCreatorModeSwitcher(memberStateMachine,propertyKeyCreatorDelegate,masterDelegateInvocationHandler,requestContextFactory,kernelProvider,idGeneratorFactory);
    return propertyTokenCreator;
  }
}
