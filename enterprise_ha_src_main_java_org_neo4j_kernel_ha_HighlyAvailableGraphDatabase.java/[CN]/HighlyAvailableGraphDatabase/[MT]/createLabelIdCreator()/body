{
  DelegateInvocationHandler<TokenCreator> labelIdCreatorDelegate=new DelegateInvocationHandler<>(TokenCreator.class);
  TokenCreator labelIdCreator=(TokenCreator)Proxy.newProxyInstance(TokenCreator.class.getClassLoader(),new Class[]{TokenCreator.class},labelIdCreatorDelegate);
  new LabelTokenCreatorModeSwitcher(memberStateMachine,labelIdCreatorDelegate,masterDelegateInvocationHandler,requestContextFactory,new Provider<KernelAPI>(){
    @Override public KernelAPI instance(){
      return neoDataSource.getKernel();
    }
  }
,idGeneratorFactory);
  return labelIdCreator;
}
