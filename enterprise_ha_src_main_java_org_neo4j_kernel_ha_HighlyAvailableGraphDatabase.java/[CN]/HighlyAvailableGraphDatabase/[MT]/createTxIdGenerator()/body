{
  DelegateInvocationHandler<TxIdGenerator> txIdGeneratorDelegate=new DelegateInvocationHandler<TxIdGenerator>();
  TxIdGenerator txIdGenerator=(TxIdGenerator)Proxy.newProxyInstance(TxIdGenerator.class.getClassLoader(),new Class[]{TxIdGenerator.class},txIdGeneratorDelegate);
  highAvailabilityMembers=life.add(new HighAvailabilityMembers(clusterClient,memberStateMachine,msgLog,config,xaDataSourceManager));
  new TxIdGeneratorModeSwitcher(memberStateMachine,txIdGeneratorDelegate,(HaXaDataSourceManager)xaDataSourceManager,master,requestContextFactory,msgLog,config,highAvailabilityMembers);
  return txIdGenerator;
}
