{
  DelegateInvocationHandler<TxIdGenerator> txIdGeneratorDelegate=new DelegateInvocationHandler<TxIdGenerator>(TxIdGenerator.class);
  TxIdGenerator txIdGenerator=(TxIdGenerator)Proxy.newProxyInstance(TxIdGenerator.class.getClassLoader(),new Class[]{TxIdGenerator.class},txIdGeneratorDelegate);
  slaves=life.add(new HighAvailabilitySlaves(members,clusterClient,new DefaultSlaveFactory(xaDataSourceManager,logging,monitors,config.get(HaSettings.com_chunk_size).intValue())));
  new TxIdGeneratorModeSwitcher(memberStateMachine,txIdGeneratorDelegate,(HaXaDataSourceManager)xaDataSourceManager,masterDelegateInvocationHandler,requestContextFactory,msgLog,config,slaves);
  return txIdGenerator;
}
