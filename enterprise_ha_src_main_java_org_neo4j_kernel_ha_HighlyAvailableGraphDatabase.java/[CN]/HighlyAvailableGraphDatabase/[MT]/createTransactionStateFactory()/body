{
  return new TransactionStateFactory(logging){
    @Override public TransactionState create(    Transaction tx){
      return new WritableTransactionState(snapshot(lockManager),nodeManager,logging,tx,snapshot(txHook),snapshot(txIdGenerator));
    }
  }
;
}
