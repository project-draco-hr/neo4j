{
  if (!availabilityGuard.isAvailable(stateSwitchTimeoutMillis)) {
    throw new TransactionFailureException("Timeout waiting for database to allow new transactions. " + availabilityGuard.describeWhoIsBlocking());
  }
  return super.index();
}
