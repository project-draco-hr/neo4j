{
  Map<InstanceId,URI> members=new HashMap<InstanceId,URI>();
  for (int i=0; i < instanceIds.length; i++) {
    members.put(instanceIds[i],URI.create(initialHosts[i]));
  }
  ClusterConfiguration config=new ClusterConfiguration("clusterName",StringLogger.DEV_NULL,initialHosts);
  config.setMembers(members);
  context=mock(ClusterContext.class);
  when(context.getConfiguration()).thenReturn(config);
  when(context.getMyId()).thenReturn(instanceIds[0]);
  when(context.getLogger(Matchers.<Class>any())).thenReturn(mock(StringLogger.class));
  toTest=new HeartbeatContext(context,mock(LearnerContext.class),Executors.newSingleThreadExecutor());
}
