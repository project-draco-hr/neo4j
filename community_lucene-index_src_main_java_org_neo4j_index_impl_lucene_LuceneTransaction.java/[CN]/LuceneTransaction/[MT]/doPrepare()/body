{
  boolean containsDeleteCommand=false;
  for (  CommandList list : commandMap.values()) {
    for (    LuceneCommand command : list.commands) {
      if (command instanceof DeleteCommand) {
        containsDeleteCommand=true;
      }
      addCommand(command);
    }
  }
  if (!containsDeleteCommand) {
    addAbandonedEntitiesToTheTx();
  }
}
