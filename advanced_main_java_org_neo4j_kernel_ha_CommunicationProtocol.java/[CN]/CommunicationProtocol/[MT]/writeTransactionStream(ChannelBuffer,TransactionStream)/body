{
  Collection<Pair<Long,ReadableByteChannel>> channels=transactionStream.getChannels();
  dest.writeInt(channels.size());
  for (  Pair<Long,ReadableByteChannel> channel : channels) {
    dest.writeLong(channel.first());
    ByteData data=new ByteData(channel.other());
    dest.writeInt(data.size());
    for (    byte[] bytes : data) {
      dest.writeBytes(bytes);
    }
    channel.other().close();
  }
}
