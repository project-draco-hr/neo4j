{
  AbstractNeo4jTestCase.requiresPersistentGraphDatabase.set(requiresPersistentGraphDatabase);
  AbstractNeo4jTestCase.currentTestClassName.set(testClassName);
  if (requiresPersistentGraphDatabase) {
    try {
      FileUtils.deleteRecursively(getStorePath("neo-test"));
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
  threadLocalGraphDb.set((GraphDatabaseAPI)(requiresPersistentGraphDatabase ? new TestGraphDatabaseFactory().newEmbeddedDatabase(getStorePath("neo-test")) : new TestGraphDatabaseFactory().newImpermanentDatabase()));
}
