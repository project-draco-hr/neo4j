{
  Node node1=NodeManager.getManager().createNode();
  Node node2=NodeManager.getManager().createNode();
  NodeManager.getManager().createRelationship(node1,node2,MyRelTypes.TEST);
  node1.delete();
  node2.delete();
  Logger log=Logger.getLogger("org.neo4j.impl.core.NeoConstraintsListener");
  Level level=log.getLevel();
  log.setLevel(Level.OFF);
  try {
    TransactionFactory.getUserTransaction().commit();
    fail("deleting node with relaitonship should not commit.");
  }
 catch (  Exception e) {
  }
  log.setLevel(level);
}
