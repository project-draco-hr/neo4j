{
  ran=true;
  String configFilename=properties.getProperty(Configurator.NEO_SERVER_CONFIG_FILE_KEY);
  Properties configProperties=new Properties();
  FileInputStream inputStream=null;
  try {
    inputStream=new FileInputStream(configFilename);
    configProperties.load(inputStream);
  }
 catch (  IOException e) {
    failureMessage=String.format("Failed to load configuration properties from [%s]",configFilename);
    return false;
  }
 finally {
    if (inputStream != null) {
      try {
        inputStream.close();
      }
 catch (      IOException e) {
      }
    }
  }
  String configuredDatabaseMode=configProperties.getProperty(Configurator.DB_MODE_KEY,"unspecified");
  if (DatabaseMode.HA.name().equals(configuredDatabaseMode)) {
    String dbTuningFilename=configProperties.getProperty(Configurator.DB_TUNING_PROPERTY_FILE_KEY);
    if (dbTuningFilename == null) {
      failureMessage=String.format("High-Availability mode requires %s to be set in %s",Configurator.DB_TUNING_PROPERTY_FILE_KEY,Configurator.NEO_SERVER_CONFIG_FILE_KEY);
      return false;
    }
 else {
      File dbTuningFile=new File(dbTuningFilename);
      if (!dbTuningFile.exists()) {
        failureMessage=String.format("No database tuning file at [%s]",dbTuningFile.getAbsoluteFile());
        return false;
      }
    }
  }
  passed=true;
  return passed;
}
