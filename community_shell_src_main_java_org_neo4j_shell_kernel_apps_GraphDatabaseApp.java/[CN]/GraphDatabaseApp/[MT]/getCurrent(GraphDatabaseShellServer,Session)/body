{
  String currentThing=(String)safeGet(session,CURRENT_KEY);
  NodeOrRelationship result=null;
  if (currentThing == null) {
    try {
      result=NodeOrRelationship.wrap(server.getDb().getReferenceNode());
    }
 catch (    NotFoundException e) {
      throw new ShellException("Reference node not found");
    }
    setCurrent(session,result);
  }
 else {
    TypedId typedId=new TypedId(currentThing);
    result=getThingById(server,typedId);
  }
  return result;
}
