{
  long start=clock.currentTimeMillis();
  long timeoutMillis=timeUnit.toMillis(timeout);
  while (timeoutMillis > 0) {
    if (allAliveAreAvailable()) {
      return true;
    }
 else {
      clusterMembers.waitForEvent(timeoutMillis);
      timeoutMillis=timeoutMillis - (clock.currentTimeMillis() - start);
    }
  }
  return allAliveAreAvailable();
}
