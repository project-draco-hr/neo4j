{
  if (!isQuorum(getAliveCount(),getTotalCount())) {
    try {
      if (state.isAccessAllowed()) {
        availabilityGuard.deny(HighAvailabilityMemberStateMachine.this);
      }
      final HighAvailabilityMemberChangeEvent event=new HighAvailabilityMemberChangeEvent(state,HighAvailabilityMemberState.PENDING,null,null);
      state=HighAvailabilityMemberState.PENDING;
      Listeners.notifyListeners(memberListeners,new Listeners.Notification<HighAvailabilityMemberListener>(){
        @Override public void notify(        HighAvailabilityMemberListener listener){
          listener.instanceStops(event);
        }
      }
);
      context.setAvailableHaMasterId(null);
      context.setElectedMasterId(null);
    }
 catch (    Throwable throwable) {
      throw new RuntimeException(throwable);
    }
  }
}
