{
  newDb(2);
  Node node;
  try (Transaction tx=db.beginTx()){
    node=db.createNode();
    node.createRelationshipTo(db.createNode(),MyRelTypes.TEST);
    node.createRelationshipTo(db.createNode(),MyRelTypes.TEST2);
    assertEquals(2,node.getDegree());
    assertEquals(1,node.getDegree(MyRelTypes.TEST));
    assertEquals(1,node.getDegree(MyRelTypes.TEST2));
    tx.success();
  }
   try (Transaction tx=db.beginTx()){
    assertEquals(NodeImpl.class,db.getDependencyResolver().resolveDependency(NodeManager.class).getNodeForProxy(node.getId()).getClass());
    tx.success();
  }
   try (Transaction tx=db.beginTx()){
    node.createRelationshipTo(db.createNode(),MyRelTypes.TEST);
    tx.success();
  }
   db.shutdown();
}
