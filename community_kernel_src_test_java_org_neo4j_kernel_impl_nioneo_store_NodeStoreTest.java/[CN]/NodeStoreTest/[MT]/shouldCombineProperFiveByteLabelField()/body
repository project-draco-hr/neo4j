{
  EphemeralFileSystemAbstraction fs=new EphemeralFileSystemAbstraction();
  Config config=new Config();
  IdGeneratorFactory idGeneratorFactory=new DefaultIdGeneratorFactory();
  WindowPoolFactory windowPoolFactory=new DefaultWindowPoolFactory();
  StoreFactory factory=new StoreFactory(config,idGeneratorFactory,windowPoolFactory,fs,DEV_NULL,new DefaultTxHook(),new Monitors());
  File nodeStoreFileName=new File("nodestore");
  factory.createNodeStore(nodeStoreFileName);
  NodeStore nodeStore=factory.newNodeStore(nodeStoreFileName);
  long nodeId=0, labels=0x8000000001L;
  NodeRecord record=new NodeRecord(nodeId,false,NO_NEXT_RELATIONSHIP.intValue(),NO_NEXT_PROPERTY.intValue());
  record.setInUse(true);
  record.setLabelField(labels,Collections.<DynamicRecord>emptyList());
  nodeStore.updateRecord(record);
  NodeRecord readRecord=nodeStore.getRecord(nodeId);
  assertEquals(labels,readRecord.getLabelField());
  nodeStore.close();
  fs.shutdown();
}
