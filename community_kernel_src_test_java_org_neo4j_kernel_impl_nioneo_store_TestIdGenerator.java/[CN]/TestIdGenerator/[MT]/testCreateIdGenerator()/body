{
  try {
    IdGeneratorImpl.createGenerator(fs,null);
    fail("Null filename should throw exception");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    IdGeneratorImpl.createGenerator(null,idGeneratorFile());
    fail("Null filesystem should throw exception");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    IdGeneratorImpl.createGenerator(fs,idGeneratorFile());
    new IdGeneratorImpl(fs,idGeneratorFile(),0,100,false,0).close();
    fail("Zero grab size should throw exception");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    new IdGeneratorImpl(fs,new File("testIdGenerator.id"),-1,100,false,0).close();
    fail("Negative grab size should throw exception");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    IdGenerator idGenerator=new IdGeneratorImpl(fs,idGeneratorFile(),1008,1000,false,0);
    try {
      IdGeneratorImpl.createGenerator(fs,idGeneratorFile());
      fail("Creating a id generator with existing file name " + "should throw exception");
    }
 catch (    IllegalStateException e) {
    }
    closeIdGenerator(idGenerator);
    StoreChannel fileChannel=fs.open(idGeneratorFile(),"rw");
    ByteBuffer buffer=ByteBuffer.allocate(9);
    assertEquals(9,fileChannel.read(buffer));
    buffer.flip();
    assertEquals((byte)0,buffer.get());
    assertEquals(0l,buffer.getLong());
    buffer.flip();
    int readCount=fileChannel.read(buffer);
    if (readCount != -1 && readCount != 0) {
      fail("Id generator header not ok read 9 + " + readCount + " bytes from file");
    }
    fileChannel.close();
  }
  finally {
    File file=idGeneratorFile();
    if (file.exists()) {
      assertTrue(file.delete());
    }
  }
}
