{
  int maxDocLimit=42;
  int toReserve=maxDocLimit - 20;
  ReservingLuceneIndexWriter indexWriter=newReservingLuceneIndexWriter(maxDocLimit);
  indexWriter.reserveInsertions(toReserve);
  assertEquals(0,indexWriter.createSearcherManager().acquire().getIndexReader().maxDoc());
}
