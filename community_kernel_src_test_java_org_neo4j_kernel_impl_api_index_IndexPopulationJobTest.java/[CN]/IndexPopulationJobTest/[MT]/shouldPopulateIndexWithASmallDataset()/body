{
  String value="Mattias";
  long node1=createNode(map(name,value),FIRST);
  createNode(map(name,value),SECOND);
  createNode(map(age,31),FIRST);
  long node4=createNode(map(age,35,name,value),FIRST);
  IndexPopulator populator=spy(inMemoryPopulator(false));
  IndexPopulationJob job=newIndexPopulationJob(FIRST,name,populator,new FlippableIndexProxy(),false);
  job.run();
  verify(populator).create();
  verify(populator).add(Collections.singletonList(add(node1,0,value,new long[]{0})));
  verify(populator).add(Collections.singletonList(add(node4,0,value,new long[]{0})));
  verify(populator).verifyDeferredConstraints(indexStoreView);
  verify(populator).sampleResult(any(DoubleLong.Out.class));
  verify(populator).close(true);
  verifyNoMoreInteractions(populator);
}
