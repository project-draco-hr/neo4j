{
  db=(ImpermanentGraphDatabase)new TestGraphDatabaseFactory().newImpermanentDatabase();
  ctxProvider=db.getDependencyResolver().resolveDependency(ThreadToStatementContextBridge.class);
  populator=mock(IndexPopulator.class);
  stateHolder=new KernelSchemaStateStore();
  Transaction tx=db.beginTx();
  BaseStatement statement=ctxProvider.baseStatement();
  firstLabelId=statement.labelGetOrCreateForName(FIRST.name());
  secondLabelId=statement.labelGetOrCreateForName(SECOND.name());
  namePropertyKeyId=statement.propertyKeyGetOrCreateForName(name);
  agePropertyKeyId=statement.propertyKeyGetOrCreateForName(age);
  statement.labelGetOrCreateForName(SECOND.name());
  statement.close();
  tx.success();
  tx.finish();
}
