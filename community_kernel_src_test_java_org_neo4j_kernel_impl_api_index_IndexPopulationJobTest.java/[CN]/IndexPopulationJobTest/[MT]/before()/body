{
  db=(ImpermanentGraphDatabase)new TestGraphDatabaseFactory().newImpermanentDatabase();
  ctxProvider=db.getDependencyResolver().resolveDependency(ThreadToStatementContextBridge.class);
  populator=mock(IndexPopulator.class);
  stateHolder=new KernelSchemaStateStore();
  Transaction tx=db.beginTx();
  StatementOperations ctxForWriting=ctxProvider.getCtxForWriting().asStatementOperations();
  StatementState state=ctxProvider.statementForReading();
  firstLabelId=ctxForWriting.labelGetOrCreateForName(state,FIRST.name());
  secondLabelId=ctxForWriting.labelGetOrCreateForName(state,SECOND.name());
  namePropertyKeyId=ctxForWriting.propertyKeyGetOrCreateForName(state,name);
  agePropertyKeyId=ctxForWriting.propertyKeyGetOrCreateForName(state,age);
  ctxForWriting.labelGetOrCreateForName(state,SECOND.name());
  state.close();
  tx.success();
  tx.finish();
}
