{
  db=(ImpermanentGraphDatabase)new TestGraphDatabaseFactory().newImpermanentDatabase();
  ctxProvider=db.getDependencyResolver().resolveDependency(ThreadToStatementContextBridge.class);
  populator=mock(IndexPopulator.class);
  stateHolder=new KernelSchemaStateStore();
  Transaction tx=db.beginTx();
  Statement statement=ctxProvider.statement();
  firstLabelId=statement.readOperations().labelGetOrCreateForName(FIRST.name());
  secondLabelId=statement.readOperations().labelGetOrCreateForName(SECOND.name());
  namePropertyKeyId=statement.readOperations().propertyKeyGetOrCreateForName(name);
  agePropertyKeyId=statement.readOperations().propertyKeyGetOrCreateForName(age);
  statement.readOperations().labelGetOrCreateForName(SECOND.name());
  statement.close();
  tx.success();
  tx.finish();
}
