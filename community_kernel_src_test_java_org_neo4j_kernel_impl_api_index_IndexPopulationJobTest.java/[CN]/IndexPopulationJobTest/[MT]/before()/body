{
  db=(ImpermanentGraphDatabase)new TestGraphDatabaseFactory().newImpermanentDatabase();
  ctxProvider=db.getDependencyResolver().resolveDependency(ThreadToStatementContextBridge.class);
  context=ctxProvider.getCtxForReading();
  populator=mock(IndexPopulator.class);
  stateHolder=new KernelSchemaStateStore();
  Transaction tx=db.beginTx();
  StatementContext ctxForWriting=ctxProvider.getCtxForWriting();
  firstLabelId=ctxForWriting.getOrCreateLabelId(FIRST.name());
  ctxForWriting.getOrCreateLabelId(SECOND.name());
  ctxForWriting.close();
  tx.success();
  tx.finish();
}
