{
  createNode(map(name,"irrelephant"),FIRST);
  TestLogger logger=new TestLogger();
  FlippableIndexProxy index=mock(FlippableIndexProxy.class);
  IndexPopulationJob job=newIndexPopulationJob(FIRST,name,populator,index,indexStoreView,logger);
  IllegalStateException failure=new IllegalStateException("not successful");
  doThrow(failure).when(populator).create();
  job.run();
  logger.assertAtLeastOnce(error("Failed to populate index: [:FIRST(name)]",failure));
  assertEquals(0,indexCount(FIRST,name));
}
