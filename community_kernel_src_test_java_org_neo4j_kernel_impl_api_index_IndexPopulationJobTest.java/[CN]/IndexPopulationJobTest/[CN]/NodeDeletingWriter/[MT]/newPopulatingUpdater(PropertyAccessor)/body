{
  return new IndexUpdater(){
    @Override public Reservation validate(    Iterable<NodePropertyUpdate> updates) throws IOException {
      return Reservation.EMPTY;
    }
    @Override public void process(    NodePropertyUpdate update) throws IOException, IndexEntryConflictException {
switch (update.getUpdateMode()) {
case ADDED:
case CHANGED:
        added.put(update.getNodeId(),update.getValueAfter());
      break;
case REMOVED:
    removed.put(update.getNodeId(),update.getValueBefore());
  break;
default :
throw new IllegalArgumentException(update.getUpdateMode().name());
}
}
@Override public void close() throws IOException, IndexEntryConflictException {
}
@Override public void remove(Iterable<Long> nodeIds){
throw new UnsupportedOperationException("not expected");
}
}
;
}
