{
  try {
    if (votedFor == null) {
      channel.truncate(0);
    }
 else {
      ByteBuf byteBuf=Unpooled.buffer();
      coreMemberMarshal.marshal(votedFor,byteBuf);
      ByteBuffer buffer=byteBuf.nioBuffer();
      channel.writeAll(buffer,0);
    }
    channel.force(false);
  }
 catch (  IOException e) {
    throw new RaftStorageException("Failed to update votedFor",e);
  }
  this.votedFor=votedFor;
}
