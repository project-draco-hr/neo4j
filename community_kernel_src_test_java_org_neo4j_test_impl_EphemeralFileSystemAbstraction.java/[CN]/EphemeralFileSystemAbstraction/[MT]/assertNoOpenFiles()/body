{
  List<Throwable> open=new ArrayList<Throwable>();
  for (  EphemeralFileData file : files.values()) {
    for (    EphemeralFileChannel channel : loop(file.getOpenChannels())) {
      open.add(channel.openedAt);
    }
  }
  if (!open.isEmpty()) {
    if (open.size() == 1)     throw (FileStillOpenException)open.get(0);
    throw new MultipleFailureException(open);
  }
}
