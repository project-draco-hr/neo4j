{
  File parentFile=fileName.getParentFile();
  if (parentFile != null && !fileExists(parentFile)) {
    throw new FileNotFoundException("'" + fileName + "' (The system cannot find the path specified)");
  }
  EphemeralFileData data=new EphemeralFileData();
  free(files.put(fileName,data));
  return new EphemeralFileChannel(data,new FileStillOpenException(fileName.getPath()));
}
