{
synchronized (channels) {
    locked=0;
    for (Iterator<EphemeralFileChannel> iter=getOpenChannels(); iter.hasNext(); ) {
      if (iter.next() == channel) {
        iter.remove();
      }
    }
  }
}
