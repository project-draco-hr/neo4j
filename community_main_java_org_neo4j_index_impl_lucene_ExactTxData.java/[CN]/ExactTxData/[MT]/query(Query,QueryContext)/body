{
  boolean hasModifications=data != null && !data.isEmpty();
  boolean mustNotDoSlowQuery=contextOrNull == null || !contextOrNull.allowQueryingModifications;
  if (hasModifications && mustNotDoSlowQuery) {
    throw new QueryNotPossibleException("Querying an index inside a transaction where " + "modifications has been made must be explicitly enabled using " + "QueryContext.allowQueryingModifications");
  }
  return toFullTxData().query(query,contextOrNull);
}
