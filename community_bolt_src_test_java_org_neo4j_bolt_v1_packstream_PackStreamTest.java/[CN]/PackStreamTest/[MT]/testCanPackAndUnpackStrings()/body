{
  Machine machine=new Machine(17000000);
  for (int i=0; i < 24; i++) {
    String string=new String(new byte[(int)Math.pow(2,i)]);
    machine.reset();
    machine.packer().pack(string);
    machine.packer().flush();
    String value=newUnpacker(machine.output()).unpackString();
    assertThat(value,equalTo(string));
  }
}
