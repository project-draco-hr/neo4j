{
  IndexingService indexingService=getIndexingService(database);
  SchemaStore schemaStore=getSchemaStore(database);
  LabelTokenHolder labelTokenHolder=getLabelTokenHolder(database);
  PropertyKeyTokenHolder propertyKeyTokenHolder=getPropertyKeyTokenHolder(database);
  int foodId=labelTokenHolder.getIdByName(FOOD_LABEL);
  int propertyId=propertyKeyTokenHolder.getIdByName(PROPERTY_NAME);
  IndexRule rule=IndexRule.indexRule(schemaStore.nextId(),foodId,propertyId,indexDescriptor);
  indexingService.createIndexes(rule);
  IndexProxy indexProxy=indexingService.getIndexProxy(rule.getId());
  waitIndexOnline(indexProxy);
  assertEquals(InternalIndexState.ONLINE,indexProxy.getState());
  PopulationProgress progress=indexProxy.getIndexPopulationProgress();
  assertEquals(progress.getCompleted(),progress.getTotal());
}
