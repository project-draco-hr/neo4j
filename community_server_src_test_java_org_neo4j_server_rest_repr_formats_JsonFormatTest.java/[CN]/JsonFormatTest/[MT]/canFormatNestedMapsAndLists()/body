{
  String entity=json.format(new MappingRepresentation("test"){
    @Override protected void serialize(    MappingSerializer serializer){
      ArrayList<Representation> maps=new ArrayList<Representation>();
      maps.add(new MappingRepresentation("map"){
        @Override protected void serialize(        MappingSerializer serializer){
          serializer.putString("foo","bar");
        }
      }
);
      serializer.putList("foo",new ServerListRepresentation(RepresentationType.MAP,maps));
    }
  }
);
  Assert.assertEquals("bar",((Map)((List)((Map)JsonHelper.jsonToMap(entity)).get("foo")).get(0)).get("foo"));
}
