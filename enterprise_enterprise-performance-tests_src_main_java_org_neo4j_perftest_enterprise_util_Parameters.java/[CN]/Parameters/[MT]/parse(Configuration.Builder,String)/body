{
  for (int i=0; i < args.length; i++) {
    if (args[i].charAt(0) == '-') {
      String flag=args[i].substring(1);
      Setting<?> setting=settings.get(flag);
      if (setting == null) {
        throw new IllegalArgumentException(String.format("Unknown parameter '%s'",args[i]));
      }
      if (setting.isBoolean()) {
        configurationBuilder.set(setting,"true");
        continue;
      }
      if (++i == args.length) {
        throw new IllegalArgumentException(String.format("Missing value for parameter '%s",args[i]));
      }
      configurationBuilder.set(setting,args[i]);
    }
 else {
      return Arrays.copyOfRange(args,i,args.length);
    }
  }
  return new String[0];
}
