{
  if (waiter.state == waiterStateSuccessor) {
    unparkAll(waiter.next);
    return true;
  }
  Node state=stack;
  do {
    if (state == released) {
      if (waiter.state != waiterStateReleased) {
        unparkAll(waiter.next);
      }
      return true;
    }
    Node next;
    do {
      next=state.next;
    }
 while (next == null);
    state=next;
  }
 while (state != end);
  return false;
}
