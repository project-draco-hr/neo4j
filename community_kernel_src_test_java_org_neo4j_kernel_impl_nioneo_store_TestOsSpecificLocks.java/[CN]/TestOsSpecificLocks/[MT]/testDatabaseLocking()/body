{
  assumeTrue(Settings.osIsWindows());
  GraphDatabaseService db=new GraphDatabaseFactory().newEmbeddedDatabase(path);
  Transaction tx=db.beginTx();
  db.createNode();
  tx.success();
  tx.finish();
  assertTrue(new File(path + "\\lock").exists());
  try {
    new GraphDatabaseFactory().newEmbeddedDatabase(path);
    fail("Should not be able to start up another db in the same dir");
  }
 catch (  Exception e) {
  }
  db.shutdown();
}
