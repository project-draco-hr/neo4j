{
  deleteSocialGraph();
  Person a;
  Person e;
  try (Transaction tx=graphDb.beginTx()){
    a=personRepository.createPerson("a");
    Person b=personRepository.createPerson("b");
    Person c=personRepository.createPerson("c");
    Person d=personRepository.createPerson("d");
    e=personRepository.createPerson("e");
    a.addFriend(b);
    a.addFriend(c);
    a.addFriend(d);
    e.addFriend(b);
    e.addFriend(c);
    e.addFriend(d);
    tx.success();
  }
   try (Transaction tx=graphDb.beginTx()){
    Person recommendation=IteratorUtil.single(a.getFriendRecommendation(1).iterator());
    assertThat(recommendation,equalTo(e));
  }
 }
