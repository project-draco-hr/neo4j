{
  Transaction transaction=graphDb.beginTx();
  try {
    Person person=getRandomPerson();
    Person friend=getRandomFriendOf(person);
    for (    Person friendOfFriend : friend.getFriends()) {
      if (!friendOfFriend.equals(person)) {
        assertThat(person.getFriendsOfFriends(),hasItems(friendOfFriend));
      }
    }
  }
  finally {
    transaction.finish();
  }
}
