{
  fileChannel=fs.open(fileName,"r");
  long fileSize=fileChannel.size();
  String expectedVersion=fromVersionArray;
  byte version[]=new byte[UTF8.encode(expectedVersion).length];
  ByteBuffer buffer=ByteBuffer.wrap(version);
  fileChannel.position(fileSize - version.length);
  fileChannel.read(buffer);
  buffer=ByteBuffer.allocate(4);
  fileChannel.position(0);
  fileChannel.read(buffer);
  buffer.flip();
  blockSize=buffer.getInt();
  windowPool=new PersistenceWindowPool(fileName,blockSize,fileChannel,0,true,true,new ConcurrentHashMap<Long,PersistenceRow>(),BrickElementFactory.DEFAULT,log);
}
