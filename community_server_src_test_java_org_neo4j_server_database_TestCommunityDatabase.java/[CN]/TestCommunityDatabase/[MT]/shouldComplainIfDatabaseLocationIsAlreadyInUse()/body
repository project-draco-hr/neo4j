{
  deletionFailureOk=true;
  theDatabase.start();
  Configuration conf=new MapConfiguration(new HashMap<String,String>());
  conf.addProperty(Configurator.DATABASE_LOCATION_PROPERTY_KEY,databaseDirectory.getAbsolutePath());
  CommunityDatabase db=new CommunityDatabase(conf);
  try {
    db.start();
  }
 catch (  RuntimeException e) {
    assertTrue(IllegalStateException.class.isAssignableFrom(e.getCause().getCause().getCause().getClass()));
  }
}
