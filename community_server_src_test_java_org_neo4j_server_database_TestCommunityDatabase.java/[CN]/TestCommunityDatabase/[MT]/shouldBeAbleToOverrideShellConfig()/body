{
  final int customPort=findFreeShellPortToUse(8881);
  final File tempDir=createTempDir();
  Database otherDb=new CommunityDatabase(new Configurator.Adapter(){
    @Override public Configuration configuration(){
      return new MapConfiguration(stringMap(Configurator.DATABASE_LOCATION_PROPERTY_KEY,tempDir.getAbsolutePath()));
    }
    @Override public Map<String,String> getDatabaseTuningProperties(){
      return stringMap(ShellSettings.remote_shell_enabled.name(),Settings.TRUE,ShellSettings.remote_shell_port.name(),"" + customPort);
    }
  }
,logging);
  otherDb.start();
  ShellLobby.newClient(customPort).shutdown();
  otherDb.stop();
}
