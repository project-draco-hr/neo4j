{
  T entity1=creator.create();
  T entity2=creator.create();
  String key="name";
  index.add(entity1,key,"The quick brown fox");
  index.add(entity2,key,"brown fox jumped over");
  assertThat(index.get(key,"The quick brown fox"),contains(entity1));
  assertThat(index.get(key,"brown fox jumped over"),contains(entity2));
  assertContains(index.query(key,"quick"),entity1);
  assertContains(index.query(key,"brown"),entity1,entity2);
  assertContains(index.query(key,"quick OR jumped"),entity1,entity2);
  assertContains(index.query(key,"brown AND fox"),entity1,entity2);
  restartTx();
  assertThat(index.get(key,"The quick brown fox"),contains(entity1));
  assertThat(index.get(key,"brown fox jumped over"),contains(entity2));
  assertThat(index.query(key,"quick"),contains(entity1));
  assertThat(index.query(key,"brown"),contains(entity1,entity2));
  assertThat(index.query(key,"quick OR jumped"),contains(entity1,entity2));
  assertThat(index.query(key,"brown AND fox"),contains(entity1,entity2));
  index.delete();
}
