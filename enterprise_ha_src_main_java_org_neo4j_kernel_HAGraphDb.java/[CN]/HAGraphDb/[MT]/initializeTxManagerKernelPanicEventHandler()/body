{
  kernelEventHandlers.add(new KernelEventHandler(){
    @Override public void beforeShutdown(){
    }
    @Override public void kernelPanic(    ErrorState error){
      if (error == ErrorState.TX_MANAGER_NOT_OK) {
        getMessageLog().logMessage("TxManager not ok, doing internal restart");
        internalShutdown(true);
        newMaster(null,new Exception("Tx manager not ok"));
      }
    }
    @Override public Object getResource(){
      return null;
    }
    @Override public ExecutionOrder orderComparedTo(    KernelEventHandler other){
      return ExecutionOrder.DOESNT_MATTER;
    }
  }
);
}
