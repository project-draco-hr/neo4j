{
  getMessageLog().logMessage("Starting[" + machineId + "] as slave",true);
  EmbeddedGraphDbImpl result=new EmbeddedGraphDbImpl(getStoreDir(),storeId,config,this,new SlaveLockManagerFactory(broker,this),new SlaveIdGeneratorFactory(broker,this),new SlaveRelationshipTypeCreator(broker,this),new SlaveTxIdGeneratorFactory(broker,this),new SlaveTxHook(broker,this),slaveUpdateMode.createUpdater(broker),CommonFactories.defaultFileSystemAbstraction());
  instantiateAutoUpdatePullerIfConfigSaysSo();
  logHaInfo("Started as slave");
  return result;
}
