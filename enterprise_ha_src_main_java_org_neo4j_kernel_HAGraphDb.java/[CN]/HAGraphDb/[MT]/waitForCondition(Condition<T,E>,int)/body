{
  long endTime=System.currentTimeMillis();
  T result=condition.tryToFullfill();
  while (result == null && System.currentTimeMillis() < endTime) {
    try {
      Thread.sleep(1);
    }
 catch (    InterruptedException e) {
      Thread.interrupted();
    }
    result=condition.tryToFullfill();
    if (result != null)     return result;
  }
  throw condition.failure();
}
