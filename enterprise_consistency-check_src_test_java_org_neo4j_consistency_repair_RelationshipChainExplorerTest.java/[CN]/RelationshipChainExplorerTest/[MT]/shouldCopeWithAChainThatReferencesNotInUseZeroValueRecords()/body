{
  int nDegreeTwoNodes=10;
  StoreAccess store=createStoreWithOneHighDegreeNodeAndSeveralDegreeTwoNodes(nDegreeTwoNodes);
  RecordStore<RelationshipRecord> relationshipStore=store.getRelationshipStore();
  breakTheChain(relationshipStore);
  int relationshipIdInMiddleOfChain=10;
  RecordSet<RelationshipRecord> records=new RelationshipChainExplorer(relationshipStore).exploreRelationshipRecordChainsToDepthTwo(relationshipStore.getRecord(relationshipIdInMiddleOfChain));
  int recordsInaccessibleBecauseOfBrokenChain=3;
  assertEquals(nDegreeTwoNodes * 2 - recordsInaccessibleBecauseOfBrokenChain,records.size());
}
