{
  final File confDir=TargetDirectory.forTest(this.getClass()).directory("confDir");
  HTTPLoggingPreparednessRule rule=new HTTPLoggingPreparednessRule();
  final Properties properties=new Properties();
  properties.put(Configurator.HTTP_LOGGING,"true");
  final File unwritableDirectory=createUnwritableDirectory();
  properties.put(Configurator.HTTP_LOG_CONFIG_LOCATION,createConfigFile(createLogbackConfigXml(unwritableDirectory),confDir).getAbsolutePath());
  boolean result=rule.execute(properties);
  assertFalse(result);
  assertEquals(String.format("HTTP log file [%s] does not exist",unwritableDirectory + File.separator + "http.log"),rule.getFailureMessage());
}
