{
  File file=new File("tx_test_log.tx");
  if (file.exists()) {
    file.delete();
  }
  try {
    TxLog txLog=new TxLog("tx_test_log.tx");
    byte globalId[]=new byte[64];
    byte branchId[]=new byte[45];
    txLog.txStart(globalId);
    txLog.addBranch(globalId,branchId);
    txLog.markAsCommitting(globalId);
    txLog.truncate();
    assertEquals(0,getRecordLists(txLog.getDanglingRecords()).length);
    txLog.close();
    txLog=new TxLog("tx_test_log.tx");
    txLog.txStart(globalId);
    txLog.addBranch(globalId,branchId);
    txLog.markAsCommitting(globalId);
    txLog.close();
    txLog=new TxLog("tx_test_log.tx");
    assertEquals(1,getRecordLists(txLog.getDanglingRecords()).length);
    txLog.truncate();
    assertEquals(0,getRecordLists(txLog.getDanglingRecords()).length);
  }
  finally {
    file=new File("tx_test_log.tx");
    if (file.exists()) {
      file.delete();
    }
  }
}
