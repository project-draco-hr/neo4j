{
  int nodeCount=10;
  RelationshipGroupCache cache=new RelationshipGroupCache(HEAP,ByteUnit.kibiBytes(4),nodeCount);
  setCount(cache,1,7);
  assertEquals(nodeCount,cache.prepare(0));
  for (int i=0; i < 7; i++) {
    cache.put(new RelationshipGroupRecord(i + 1).initialize(true,i,-1,-1,-1,1,-1));
  }
  try {
    cache.put(new RelationshipGroupRecord(8).initialize(true,8,-1,-1,-1,1,-1));
    fail("Should have failed");
  }
 catch (  IllegalStateException e) {
  }
}
