{
  if (serviceRunning) {
    for (    IndexProxy index : indexes.values()) {
      try {
        index.update(updates);
      }
 catch (      IOException e) {
        throw new UnderlyingStorageException("Unable to update " + index,e);
      }
    }
  }
 else {
    for (    IndexProxy index : indexes.values()) {
      try {
        index.recover(updates);
      }
 catch (      IOException e) {
        throw new UnderlyingStorageException("Unable to update " + index,e);
      }
    }
  }
}
