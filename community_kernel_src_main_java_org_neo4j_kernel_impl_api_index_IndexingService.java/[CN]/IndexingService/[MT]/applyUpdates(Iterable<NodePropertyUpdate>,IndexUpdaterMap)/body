{
  for (  NodePropertyUpdate update : updates) {
    int propertyKeyId=update.getPropertyKeyId();
switch (update.getUpdateMode()) {
case ADDED:
      for (int len=update.getNumberOfLabelsAfter(), i=0; i < len; i++) {
        IndexDescriptor descriptor=new IndexDescriptor(update.getLabelAfter(i),propertyKeyId);
        processUpdateIfIndexExists(updaterMap,update,descriptor);
      }
    break;
case REMOVED:
  for (int len=update.getNumberOfLabelsBefore(), i=0; i < len; i++) {
    IndexDescriptor descriptor=new IndexDescriptor(update.getLabelBefore(i),propertyKeyId);
    processUpdateIfIndexExists(updaterMap,update,descriptor);
  }
break;
case CHANGED:
int lenBefore=update.getNumberOfLabelsBefore();
int lenAfter=update.getNumberOfLabelsAfter();
for (int i=0, j=0; i < lenBefore && j < lenAfter; ) {
int labelBefore=update.getLabelBefore(i);
int labelAfter=update.getLabelAfter(j);
if (labelBefore == labelAfter) {
IndexDescriptor descriptor=new IndexDescriptor(labelAfter,propertyKeyId);
processUpdateIfIndexExists(updaterMap,update,descriptor);
i++;
j++;
}
 else {
if (labelBefore < labelAfter) {
i++;
}
 else {
j++;
}
}
}
break;
}
}
}
