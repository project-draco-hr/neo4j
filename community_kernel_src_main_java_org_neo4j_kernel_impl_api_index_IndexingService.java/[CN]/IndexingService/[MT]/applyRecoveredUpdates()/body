{
  logger.debug("Applying recovered updates: " + recoveredNodeIds);
  monitor.applyingRecoveredData(recoveredNodeIds);
  if (!recoveredNodeIds.isEmpty()) {
    try (IndexUpdaterMap updaterMap=indexMapReference.getIndexUpdaterMap(IndexUpdateMode.RECOVERY)){
      for (      IndexUpdater updater : updaterMap) {
        updater.remove(recoveredNodeIds);
      }
      for (      long nodeId : recoveredNodeIds) {
        Iterable<NodePropertyUpdate> updates=storeView.nodeAsUpdates(nodeId);
        applyUpdates(updates,updaterMap);
        monitor.appliedRecoveredData(updates);
      }
    }
   }
  recoveredNodeIds.clear();
}
