{
  for (  IndexRule indexRule : indexRules) {
    long ruleId=indexRule.getId();
    IndexDescriptor descriptor=createDescriptor(indexRule);
    IndexProxy indexProxy=null;
switch (provider.getInitialState(ruleId,providerDependencies)) {
case ONLINE:
      indexProxy=createOnlineIndexProxy(ruleId,descriptor);
    break;
case POPULATING:
  indexProxy=createRecoveringIndexProxy(ruleId,descriptor);
break;
case FAILED:
indexProxy=createFailedIndexProxy(ruleId,descriptor);
break;
}
indexes.put(ruleId,indexProxy);
}
}
