{
  for (  IndexRule indexRule : indexRules) {
    long id=indexRule.getId();
switch (provider.getInitialState(id)) {
case ONLINE:
      indexes.put(id,createOnlineIndexContext(indexRule));
    break;
case POPULATING:
case NON_EXISTENT:
  indexes.put(id,createPopulatingIndexContext(indexRule));
break;
case FAILED:
indexes.put(id,new FailedIndexContext(provider.getPopulator(indexRule.getId())));
break;
}
}
}
