{
  for (  IndexRule indexRule : indexRules) {
    long ruleId=indexRule.getId();
    IndexDescriptor descriptor=createDescriptor(indexRule);
    IndexContext indexContext=null;
switch (provider.getInitialState(ruleId,providerDependencies)) {
case ONLINE:
      indexContext=createOnlineIndexContext(ruleId,descriptor);
    break;
case POPULATING:
  indexContext=createRecoveringIndexContext(ruleId,descriptor);
break;
case FAILED:
indexContext=createFailedIndexContext(ruleId,descriptor);
break;
}
indexes.put(ruleId,indexContext);
}
}
