{
  this.maxUniqueElementsPerSampling=config.get(GraphDatabaseSettings.max_unique_elements_per_sampling);
  this.scheduler=scheduler;
  this.providerMap=providerMap;
  this.storeView=storeView;
  this.indexRules=indexRules;
  this.logging=logging;
  this.monitor=monitor;
  this.logger=logging.getMessagesLog(getClass());
  this.updateableSchemaState=updateableSchemaState;
  this.tokenNameLookup=tokenNameLookup;
  this.samplingController=createIndexSamplingController();
  if (providerMap == null || providerMap.getDefaultProvider() == null) {
    throw new IllegalStateException("You cannot run the database without an index provider, " + "please make sure that a valid provider (subclass of " + SchemaIndexProvider.class.getName() + ") is on your classpath.");
  }
}
