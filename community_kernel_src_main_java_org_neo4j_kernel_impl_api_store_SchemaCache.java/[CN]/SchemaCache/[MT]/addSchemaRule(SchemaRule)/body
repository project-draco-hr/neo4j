{
  getOrCreateSchemaRulesMapForLabel(rule.getLabel()).put(rule.getId(),rule);
  ruleByIdMap.put(rule.getId(),rule);
  if (rule instanceof UniquenessConstraintRule) {
    constraints.add(ruleToConstraint((UniquenessConstraintRule)rule));
  }
 else   if (rule instanceof IndexRule) {
    IndexRule indexRule=(IndexRule)rule;
    Map<Integer,CommittedIndexDescriptor> byLabel=indexDescriptors.get(indexRule.getLabel());
    if (byLabel == null) {
      indexDescriptors.put(indexRule.getLabel(),byLabel=new HashMap<>());
    }
    byLabel.put(indexRule.getPropertyKey(),new CommittedIndexDescriptor(indexRule.getLabel(),indexRule.getPropertyKey(),indexRule.getId()));
  }
}
