{
  getOrCreateSchemaRulesMapForLabel(rule.getLabel()).put(rule.getId(),rule);
  rulesByIdMap.put(rule.getId(),rule);
  if (rule instanceof PropertyConstraintRule) {
    constraints.add(((PropertyConstraintRule)rule).toConstraint());
  }
 else   if (rule instanceof IndexRule) {
    IndexRule indexRule=(IndexRule)rule;
    Map<Integer,CommittedIndexDescriptor> byLabel=indexDescriptors.get(indexRule.getLabel());
    if (byLabel == null) {
      indexDescriptors.put(indexRule.getLabel(),byLabel=new HashMap<>());
    }
    byLabel.put(indexRule.getPropertyKey(),new CommittedIndexDescriptor(indexRule.getLabel(),indexRule.getPropertyKey(),indexRule.getId()));
  }
}
