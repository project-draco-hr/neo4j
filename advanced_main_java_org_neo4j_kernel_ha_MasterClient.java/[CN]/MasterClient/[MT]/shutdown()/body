{
synchronized (unusedChannels) {
    for (    Channel channel : unusedChannels) {
      channel.close();
    }
  }
synchronized (channels) {
    for (    Channel channel : channels.values()) {
      channel.close();
    }
  }
}
