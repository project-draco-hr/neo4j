{
  K key=keyFunction.convert(entity);
  Node<E,P> node=map.get(key);
  if (node != null && priority.equals(node.priority)) {
    node.head=new Link<E>(entity,node.head);
  }
 else {
    node=new Node<E,P>(entity,priority);
    map.put(key,node);
    queue.add(node);
  }
}
