{
  long maxHeapMemory=Runtime.getRuntime().maxMemory();
  if (0 < maxHeapMemory && maxHeapMemory < Long.MAX_VALUE) {
    try {
      OperatingSystemMXBean os=ManagementFactory.getOperatingSystemMXBean();
      Method getTotalPhysicalMemorySize=os.getClass().getMethod("getTotalPhysicalMemorySize");
      getTotalPhysicalMemorySize.setAccessible(true);
      long physicalMemory=(long)getTotalPhysicalMemorySize.invoke(os);
      if (0 < physicalMemory && physicalMemory < Long.MAX_VALUE && maxHeapMemory < physicalMemory) {
        long heuristic=(long)((physicalMemory - maxHeapMemory) * 0.75);
        long min=32 * 1024 * 1024;
        long max=1024 * 1024 * 1024* 1024L;
        long memory=Math.min(max,Math.max(min,heuristic));
        return String.valueOf(memory);
      }
    }
 catch (    Exception ignore) {
    }
  }
  return "2g";
}
