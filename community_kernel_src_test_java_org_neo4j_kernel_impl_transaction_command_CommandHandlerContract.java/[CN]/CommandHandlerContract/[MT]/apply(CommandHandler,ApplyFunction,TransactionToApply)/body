{
  boolean result=true;
  for (  TransactionToApply tx : transactions) {
    applier.begin(tx,new LockGroup());
    try {
      result&=function.apply(applier,tx.transactionRepresentation());
    }
  finally {
      applier.end();
    }
  }
  if (!(applier instanceof CommandApplierFacade)) {
    applier.apply();
  }
  applier.close();
  return result;
}
