{
  HighAvailabilityMemberState illegal=SLAVE.masterIsAvailable(context,myId,SampleUri);
  assertEquals(ILLEGAL,illegal);
  InstanceId masterInstanceId=new InstanceId(2);
  when(context.getElectedMasterId()).thenReturn(masterInstanceId);
  HighAvailabilityMemberState moreIllegal=SLAVE.masterIsAvailable(context,new InstanceId(3),SampleUri);
  assertEquals(ILLEGAL,moreIllegal);
  HighAvailabilityMemberState newState=SLAVE.masterIsAvailable(context,masterInstanceId,SampleUri);
  assertEquals(SLAVE,newState);
}
