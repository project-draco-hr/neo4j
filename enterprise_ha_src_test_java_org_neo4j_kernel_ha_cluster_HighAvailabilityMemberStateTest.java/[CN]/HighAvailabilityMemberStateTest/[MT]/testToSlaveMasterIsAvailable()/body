{
  HighAvailabilityMemberState illegal=TO_SLAVE.masterIsAvailable(context,myId,SampleUri);
  assertEquals(ILLEGAL,illegal);
  InstanceId currentMaster=new InstanceId(2);
  when(context.getElectedMasterId()).thenReturn(currentMaster);
  HighAvailabilityMemberState newState=TO_SLAVE.masterIsAvailable(context,currentMaster,SampleUri);
  assertEquals(TO_SLAVE,newState);
  InstanceId instanceId=new InstanceId(3);
  HighAvailabilityMemberState moreIllegal=TO_SLAVE.masterIsAvailable(context,instanceId,SampleUri);
  assertEquals(ILLEGAL,moreIllegal);
}
