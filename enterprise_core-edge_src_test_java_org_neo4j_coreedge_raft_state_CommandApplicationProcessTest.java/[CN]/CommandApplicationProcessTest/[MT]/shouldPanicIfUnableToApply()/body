{
  doThrow(IllegalStateException.class).when(commandDispatcher).dispatch(any(ReplicatedTransaction.class),anyLong(),anyCallback());
  applicationProcess.start();
  raftLog.append(new RaftLogEntry(0,operation(nullTx)));
  assertEquals(true,dbHealth.isHealthy());
  applicationProcess.notifyCommitted(0);
  applier.sync(false);
  assertEquals(false,dbHealth.isHealthy());
}
