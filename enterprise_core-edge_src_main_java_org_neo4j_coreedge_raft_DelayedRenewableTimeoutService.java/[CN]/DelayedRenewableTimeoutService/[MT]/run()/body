{
  try {
    long now=clock.currentTimeMillis();
    Collection<ScheduledTimeout> triggered=new LinkedList<>();
synchronized (timeouts) {
      ScheduledTimeout renew;
      while ((renew=pendingRenewals.poll()) != null) {
        timeouts.remove(renew);
        renew.setTimeoutTimestamp(calcTimeoutTimestamp(renew.timeoutLength,renew.randomRange));
        timeouts.add(renew);
      }
      for (      ScheduledTimeout timeout : timeouts) {
        if (timeout.shouldTrigger(now)) {
          triggered.add(timeout);
          timeout.trigger();
        }
 else {
          break;
        }
      }
      timeouts.removeAll(triggered);
    }
  }
 catch (  Throwable e) {
    e.printStackTrace();
  }
}
