{
  Transaction tx=graphDb.beginTx();
  try {
    graphDb.createNode();
    tx.success();
    tx.close();
    fail("expected exception");
  }
 catch (  TransactionFailureException e) {
    assertThat(e.getCause(),instanceOf(ReadOnlyDbException.class));
  }
}
