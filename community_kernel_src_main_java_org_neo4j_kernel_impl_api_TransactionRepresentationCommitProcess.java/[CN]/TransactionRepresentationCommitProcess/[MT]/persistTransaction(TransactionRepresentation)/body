{
  try {
    return logicalTransactionStore.getAppender().append(tx);
  }
 catch (  TransactionAppendException e) {
    if (e.hasNewTransactionIdGenerated()) {
      transactionIdStore.transactionClosed(e.newTransactionIdGenerated());
    }
    throw exception(Status.Transaction.CouldNotWriteToLog,e,"Could not write transaction representation to log");
  }
}
