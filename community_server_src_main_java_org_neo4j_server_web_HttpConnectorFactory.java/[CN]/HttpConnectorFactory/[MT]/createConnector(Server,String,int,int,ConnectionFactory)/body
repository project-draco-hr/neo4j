{
  int availableProcessors=Runtime.getRuntime().availableProcessors();
  int cpusByConfiguredThreads=jettyMaxThreads / 10;
  int cpusToConsider=Math.max(1,Math.min(availableProcessors,cpusByConfiguredThreads));
  int acceptors=Math.max(1,cpusToConsider / 4);
  int selectors=Math.max(1,cpusToConsider - acceptors);
  ServerConnector connector=new ServerConnector(server,null,null,null,acceptors,selectors,httpFactories);
  connector.setConnectionFactories(Arrays.asList(httpFactories));
  connector.setAcceptQueueSize(50);
  connector.setHost(host);
  connector.setPort(port);
  return connector;
}
