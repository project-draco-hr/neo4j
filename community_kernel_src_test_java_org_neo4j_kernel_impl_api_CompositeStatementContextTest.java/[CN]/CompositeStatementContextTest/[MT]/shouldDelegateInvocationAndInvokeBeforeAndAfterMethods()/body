{
  StatementContext delegate=mock(StatementContext.class);
  Object[] arguments=arguments(method.getParameterTypes());
  Object expectedResult=null;
  if (method.getReturnType() != void.class) {
    expectedResult=sample(method.getReturnType());
    method.invoke(doReturn(expectedResult).when(delegate),arguments);
  }
  MyStatementContext context=new MyStatementContext(delegate);
  Object result=method.invoke(context,arguments);
  method.invoke(verify(delegate),arguments);
  verifyNoMoreInteractions(delegate);
  if (method.getReturnType() != void.class) {
    assertEquals(expectedResult,result);
  }
  InOrder order=inOrder(context.checking);
  order.verify(context.checking).beforeOperation();
  if (method.operation != null) {
    order.verify(context.checking).beforeReadOrWriteOperation(method.operation);
    order.verify(context.checking).afterReadOrWriteOperation(method.operation);
  }
  order.verify(context.checking).afterOperation();
  verifyNoMoreInteractions(context.checking);
}
