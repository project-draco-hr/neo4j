{
  char type=encoded.charAt(0);
  String[] values=encoded.substring(1).split("\\|");
  Object[] array=new Object[values.length];
  for (int i=0; i < values.length; i++) {
switch (type) {
case 'D':
      array[i]=Double.parseDouble(values[i]);
    break;
case 'Z':
  array[i]=Boolean.parseBoolean(values[i]);
break;
case 'L':
try {
array[i]=new String(base64Decoder.decodeBuffer(values[i]));
}
 catch (IOException e) {
throw new IllegalArgumentException(format("Unable to BASE64 decode %s",values[i]),e);
}
break;
default :
throw new IllegalArgumentException(format("Unknown array type: %s",type));
}
}
return array;
}
