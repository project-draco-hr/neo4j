{
  final ByteBuffer buffer=ByteBuffer.allocate(LOG_HEADER_SIZE);
  final ByteBuffer result=writeLogHeader(buffer,expectedLogVersion,expectedTxId);
  assertSame(buffer,result);
  long encodedLogVersions=result.getLong();
  assertEquals(encodeLogVersion(expectedLogVersion),encodedLogVersions);
  byte logFormatVersion=decodeLogFormatVersion(encodedLogVersions);
  assertEquals(CURRENT_LOG_VERSION,logFormatVersion);
  long logVersion=decodeLogVersion(logFormatVersion,encodedLogVersions,true);
  assertEquals(expectedLogVersion,logVersion);
  long txId=result.getLong();
  assertEquals(expectedTxId,txId);
}
