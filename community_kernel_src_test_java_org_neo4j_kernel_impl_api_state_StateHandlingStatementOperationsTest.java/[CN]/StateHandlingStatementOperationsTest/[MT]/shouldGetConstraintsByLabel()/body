{
  UniquenessConstraint constraint1=new UniquenessConstraint(11,66);
  UniquenessConstraint constraint2=new UniquenessConstraint(11,99);
  StatementOperations delegate=mock(StatementOperations.class);
  TxState txState=new TxStateImpl(mock(OldTxStateBridge.class),mock(PersistenceManager.class),mock(IdGeneration.class));
  KernelStatement state=mockedState(txState);
  when(delegate.constraintsGetForLabelAndPropertyKey(state,10,66)).thenAnswer(asAnswer(Collections.emptyList()));
  when(delegate.constraintsGetForLabelAndPropertyKey(state,11,99)).thenAnswer(asAnswer(Collections.emptyList()));
  when(delegate.constraintsGetForLabel(state,10)).thenAnswer(asAnswer(Collections.emptyList()));
  when(delegate.constraintsGetForLabel(state,11)).thenAnswer(asAnswer(asIterable(constraint1)));
  StateHandlingStatementOperations context=new StateHandlingStatementOperations(delegate,delegate,mock(AuxiliaryStoreOperations.class),mock(ConstraintIndexCreator.class));
  context.uniquenessConstraintCreate(state,10,66);
  context.uniquenessConstraintCreate(state,11,99);
  Set<UniquenessConstraint> result=asSet(asIterable(context.constraintsGetForLabel(state,11)));
  assertEquals(asSet(constraint1,constraint2),result);
}
