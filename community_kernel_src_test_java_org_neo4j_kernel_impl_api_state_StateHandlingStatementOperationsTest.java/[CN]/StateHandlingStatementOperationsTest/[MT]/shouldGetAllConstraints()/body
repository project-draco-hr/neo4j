{
  PropertyConstraint constraint1=new UniquenessConstraint(10,66);
  PropertyConstraint constraint2=new UniquenessConstraint(11,99);
  TransactionState txState=new TxState();
  KernelStatement state=mockedState(txState);
  when(inner.constraintsGetForLabelAndPropertyKey(10,66)).thenAnswer(asAnswer(Collections.emptyList()));
  when(inner.constraintsGetForLabelAndPropertyKey(11,99)).thenAnswer(asAnswer(Collections.emptyList()));
  when(inner.constraintsGetAll()).thenAnswer(asAnswer(asIterable(constraint2)));
  StateHandlingStatementOperations context=newTxStateOps(inner);
  context.uniquePropertyConstraintCreate(state,10,66);
  Set<PropertyConstraint> result=asSet(asIterable(context.constraintsGetAll(state)));
  assertEquals(asSet(constraint1,constraint2),result);
}
