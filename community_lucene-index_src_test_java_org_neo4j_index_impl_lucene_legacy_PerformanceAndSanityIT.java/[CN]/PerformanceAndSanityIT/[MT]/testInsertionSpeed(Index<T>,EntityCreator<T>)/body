{
  long t=currentTimeMillis();
  int max=500000;
  for (int i=0; i < max; i++) {
    T entity=creator.create();
    if (i % 5000 == 5) {
      index.query(new TermQuery(new Term("name","The name " + i)));
    }
    lastOrNull((Iterable<T>)index.query(new QueryContext(new TermQuery(new Term("name","The name " + i))).tradeCorrectnessForSpeed()));
    lastOrNull((Iterable<T>)index.get("name","The name " + i));
    index.add(entity,"name","The name " + i);
    index.add(entity,"title","Some title " + i);
    index.add(entity,"something",i + "Nothing");
    index.add(entity,"else",i + "kdfjkdjf" + i);
    if (i % 30000 == 0) {
      restartTx();
      System.out.println(i);
    }
  }
  finishTx(true);
  out.println("insert:" + (currentTimeMillis() - t));
  t=currentTimeMillis();
  int count=2000000;
  int resultCount=0;
  for (int i=0; i < count; i++) {
    resultCount+=count((Iterator<T>)index.get("name","The name " + i % max));
  }
  out.println("get(" + resultCount + "):"+ (double)(currentTimeMillis() - t) / (double)count);
  t=currentTimeMillis();
  resultCount=0;
  for (int i=0; i < count; i++) {
    resultCount+=count((Iterator<T>)index.get("something",i % max + "Nothing"));
  }
  out.println("get(" + resultCount + "):"+ (double)(currentTimeMillis() - t) / (double)count);
}
