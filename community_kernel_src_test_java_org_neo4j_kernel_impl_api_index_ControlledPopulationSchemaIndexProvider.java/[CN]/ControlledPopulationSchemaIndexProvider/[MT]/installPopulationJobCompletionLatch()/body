{
  final DoubleLatch populationCompletionLatch=new DoubleLatch();
  mockedPopulator=new IndexPopulator.Adapter(){
    @Override public void create() throws IOException {
      populationCompletionLatch.startAndAwaitFinish();
      super.create();
    }
    @Override public IndexSample sampleResult(){
      return new IndexSample();
    }
  }
;
  return populationCompletionLatch;
}
