{
  ServerBootstrap bootstrap=new ServerBootstrap().group(new NioEventLoopGroup()).channel(NioServerSocketChannel.class).localAddress(new AdvertisedSocketAddress(serverAddress).socketAddress().getPort()).childHandler(new ChannelInitializer<SocketChannel>(){
    @Override protected void initChannel(    SocketChannel ch) throws Exception {
      ChannelPipeline pipeline=ch.pipeline();
      pipeline.addLast(new LengthFieldPrepender(4));
      ByteBuf buffer=ch.alloc().buffer();
      String message="Hello, World!";
      buffer.writeInt(message.getBytes().length);
      buffer.writeBytes(message.getBytes());
      ch.write(buffer);
      ch.flush();
    }
  }
);
  return bootstrap.bind().syncUninterruptibly().channel();
}
