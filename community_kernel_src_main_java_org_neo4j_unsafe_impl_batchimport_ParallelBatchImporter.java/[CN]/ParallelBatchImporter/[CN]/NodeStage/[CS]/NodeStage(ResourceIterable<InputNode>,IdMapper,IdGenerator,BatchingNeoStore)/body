{
  super("Nodes",config);
  add(new IteratorBatcherStep<>(control(),"INPUT",config.batchSize(),nodes.iterator()));
  NodeStore nodeStore=neoStore.getNodeStore();
  PropertyStore propertyStore=neoStore.getPropertyStore();
  Iterable<Object> allIds=new IterableWrapper<Object,InputNode>(nodes){
    @Override protected Object underlyingObjectToObject(    InputNode object){
      return object.id();
    }
  }
;
  add(new NodeEncoderStep(control(),config.workAheadSize(),1,idMapper,idGenerator,neoStore.getLabelRepository(),nodeStore,allIds));
  add(new PropertyEncoderStep<>(control(),config.workAheadSize(),2,neoStore.getPropertyKeyRepository(),propertyStore));
  add(new EntityStoreUpdaterStep<>(control(),"WRITER",nodeStore,propertyStore,writeMonitor));
}
