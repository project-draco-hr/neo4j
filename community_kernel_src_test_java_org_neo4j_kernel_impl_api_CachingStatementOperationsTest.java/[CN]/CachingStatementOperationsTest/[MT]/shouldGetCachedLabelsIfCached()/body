{
  long nodeId=3;
  Set<Integer> labels=new HashSet<>(asList(1,2,3));
  PersistenceCache cache=mock(PersistenceCache.class);
  when(cache.nodeGetLabels(any(KernelStatement.class),eq(nodeId),any(CacheLoader.class))).thenReturn(labels);
  EntityReadOperations entityReadOperations=mock(EntityReadOperations.class);
  SchemaReadOperations schemaReadOperations=mock(SchemaReadOperations.class);
  CachingStatementOperations context=new CachingStatementOperations(entityReadOperations,schemaReadOperations,cache,null);
  PrimitiveIntIterator receivedLabels=context.nodeGetLabels(mockedState(),nodeId);
  assertEquals(labels,addToCollection(receivedLabels,new HashSet<Integer>()));
}
