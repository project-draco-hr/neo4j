{
  String[] elements={"A","B","C"};
  IndexReader indexReader=mock(IndexReader.class);
  when(indexReader.isDeleted(anyInt())).thenReturn(false);
  LuceneAllDocumentsReader reader=new LuceneAllDocumentsReader(new SearcherManagerStub(new SearcherStub(indexReader,elements)));
  Iterator<Document> iterator=reader.iterator();
  List<Document> actualDocuments=new ArrayList<>(IteratorUtil.asCollection(iterator));
  for (int i=0; i < elements.length; i++) {
    assertEquals(elements[i],actualDocuments.get(i).get("element"));
  }
}
