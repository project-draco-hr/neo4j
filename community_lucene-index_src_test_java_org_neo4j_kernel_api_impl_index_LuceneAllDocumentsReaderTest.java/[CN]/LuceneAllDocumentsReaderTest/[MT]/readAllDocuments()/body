{
  LuceneAllDocumentsReader allDocumentsReader=createAllDocumentsReader();
  List<Document> documents=Iterables.toList(allDocumentsReader.iterator());
  assertEquals("Should have 1 document from first partition and 2 from second one.",3,documents.size());
  assertEquals("1",documents.get(0).getField("value").stringValue());
  assertEquals("3",documents.get(1).getField("value").stringValue());
  assertEquals("4",documents.get(2).getField("value").stringValue());
}
