{
  while (capacity > this.capacity) {
    int newCapacity=this.capacity * 2;
    long[] newArray=new long[newCapacity * longsPerItem];
    for (int i=0; i < itemsAhead; i++) {
      System.arraycopy(array,index(cursor + i),newArray,index(i),longsPerItem);
    }
    this.array=newArray;
    this.capacity=newCapacity;
    this.cursor=0;
  }
}
