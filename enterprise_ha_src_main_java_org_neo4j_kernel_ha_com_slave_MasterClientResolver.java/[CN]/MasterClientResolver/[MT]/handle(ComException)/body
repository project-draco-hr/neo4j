{
  if (exception instanceof IllegalProtocolVersionException) {
    log.info("Handling " + exception + ", will pick new master client");
    IllegalProtocolVersionException illegalProtocolVersion=(IllegalProtocolVersionException)exception;
    ProtocolVersion requiredProtocolVersion=new ProtocolVersion(illegalProtocolVersion.getReceived(),ProtocolVersion.INTERNAL_PROTOCOL_VERSION);
    getFor(requiredProtocolVersion);
  }
 else   if (exception instanceof InvalidEpochException) {
    log.info("Handling " + exception + ", will go to PENDING and ask for election");
    invalidEpochHandler.handle();
  }
}
