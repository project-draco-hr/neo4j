{
  AutoIndexer<Node> autoIndexer=graphDb.index().getNodeAutoIndexer();
  autoIndexer.setEnabled(true);
  autoIndexer.startAutoIndexingProperty("propName");
  newTransaction();
  Node node1=graphDb.createNode();
  Node node2=graphDb.createNode();
  node1.setProperty("propName","node");
  newTransaction();
  assertEquals(node1,autoIndexer.getAutoIndex().get("propName","node").getSingle());
  newTransaction();
  autoIndexer.startAutoIndexingProperty("propName2");
  autoIndexer.stopAutoIndexingProperty("propName");
  node2.setProperty("propName","propValue");
  Node node3=graphDb.createNode();
  node3.setProperty("propName2","propValue");
  newTransaction();
  assertEquals(node1,autoIndexer.getAutoIndex().get("propName","node").getSingle());
  assertEquals(node3,autoIndexer.getAutoIndex().get("propName2","propValue").getSingle());
  node1.setProperty("propName","newValue");
  newTransaction();
  assertFalse(autoIndexer.getAutoIndex().get("propName","newValue").hasNext());
}
