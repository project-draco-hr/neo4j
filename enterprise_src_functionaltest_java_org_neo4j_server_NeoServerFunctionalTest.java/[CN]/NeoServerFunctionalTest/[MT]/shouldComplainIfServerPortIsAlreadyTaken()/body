{
  NeoServer s1=new NeoServer();
  s1.start(null);
  Configurator conflictingConfig=portClashingConfigurator();
  NeoServer s2=new NeoServer(portClashingConfigurator(),new Database(conflictingConfig.configuration().getString("org.neo4j.database.location")),webServer());
  InMemoryAppender appender=new InMemoryAppender(NeoServer.log);
  s2.start(null);
  assertThat(appender.toString(),containsString(String.format("ERROR - Failed to start Neo Server on port [%s]",conflictingConfig.configuration().getString("org.neo4j.webserver.port"))));
  s1.stop();
  s2.stop();
}
