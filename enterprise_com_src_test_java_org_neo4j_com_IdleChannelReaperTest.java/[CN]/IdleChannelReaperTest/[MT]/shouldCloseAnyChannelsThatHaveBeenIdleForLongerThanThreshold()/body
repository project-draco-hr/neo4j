{
  FakeClock clock=Clocks.fakeClock();
  ChannelCloser channelCloser=mock(ChannelCloser.class);
  IdleChannelReaper idleChannelReaper=new IdleChannelReaper(channelCloser,NO_LOGGING,clock,THRESHOLD);
  Channel channel=mock(Channel.class);
  idleChannelReaper.add(channel,dummyRequestContext());
  clock.forward(THRESHOLD + 1,TimeUnit.MILLISECONDS);
  idleChannelReaper.run();
  verify(channelCloser).tryToCloseChannel(channel);
}
