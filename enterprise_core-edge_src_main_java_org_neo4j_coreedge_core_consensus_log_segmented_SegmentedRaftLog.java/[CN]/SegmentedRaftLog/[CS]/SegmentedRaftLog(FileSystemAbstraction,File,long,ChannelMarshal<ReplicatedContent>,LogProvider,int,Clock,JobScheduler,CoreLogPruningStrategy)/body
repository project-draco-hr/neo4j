{
  this.fileSystem=fileSystem;
  this.directory=directory;
  this.rotateAtSize=rotateAtSize;
  this.contentMarshal=contentMarshal;
  this.logProvider=logProvider;
  this.scheduler=scheduler;
  this.fileNames=new FileNames(directory);
  this.readerPool=new ReaderPool(readerPoolSize,logProvider,fileNames,fileSystem,clock);
  this.pruner=new SegmentedRaftLogPruner(pruningStrategy);
  this.log=logProvider.getLog(getClass());
}
