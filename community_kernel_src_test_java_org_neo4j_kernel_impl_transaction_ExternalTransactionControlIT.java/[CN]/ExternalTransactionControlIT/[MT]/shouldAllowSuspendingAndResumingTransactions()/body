{
  GraphDatabaseAPI db=dbRule.getGraphDatabaseAPI();
  TransactionManager tm=db.getDependencyResolver().resolveDependency(TransactionManager.class);
  Node node=createNode();
  db.beginTx();
  node.addLabel(Labels.MY_LABEL);
  Transaction jtaTx=tm.suspend();
  assertThat(node,inTx(db,not(hasLabel(Labels.MY_LABEL))));
  tm.resume(jtaTx);
  assertTrue("The label should be visible when I've resumed the transaction.",node.hasLabel(Labels.MY_LABEL));
}
