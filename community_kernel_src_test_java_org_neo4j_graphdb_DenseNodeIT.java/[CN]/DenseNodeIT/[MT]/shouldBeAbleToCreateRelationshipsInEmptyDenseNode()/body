{
  Node node;
  try (Transaction tx=databaseRule.beginTx()){
    node=databaseRule.createNode();
    createRelationshipsBetweenNodes(node,databaseRule.createNode(),denseNodeThreshold(databaseRule) + 1);
    tx.success();
  }
   try (Transaction tx=databaseRule.beginTx()){
    for (    Relationship relationship : node.getRelationships()) {
      relationship.delete();
    }
    tx.success();
  }
   Relationship rel;
  try (Transaction tx=databaseRule.beginTx()){
    rel=node.createRelationshipTo(databaseRule.createNode(),MyRelTypes.TEST);
    tx.success();
  }
   try (Transaction tx=databaseRule.beginTx()){
    assertEquals(rel,single(node.getRelationships()));
    tx.success();
  }
 }
