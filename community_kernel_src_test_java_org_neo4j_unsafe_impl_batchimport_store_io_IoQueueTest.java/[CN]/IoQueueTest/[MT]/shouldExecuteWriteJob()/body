{
  StoreChannel channel=mock(StoreChannel.class);
  Writer writer=queue.create(channel,monitor);
  SimplePool<ByteBuffer> pool=mock(SimplePool.class);
  int position=100;
  writer.write(buffer,position,pool);
  executor.shutdown();
  executor.awaitTermination(10,SECONDS);
  verify(executor,times(1)).submit(any(Callable.class));
  verify(channel).position(100);
  verify(channel).write(buffer);
  verifyNoMoreInteractions(channel);
}
