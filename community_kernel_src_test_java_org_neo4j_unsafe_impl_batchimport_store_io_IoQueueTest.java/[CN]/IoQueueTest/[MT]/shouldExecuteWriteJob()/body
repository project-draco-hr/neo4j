{
  StoreChannel channel=mock(StoreChannel.class);
  Writer writer=queue.create(channel,monitor);
  SimplePool<ByteBuffer> pool=mock(SimplePool.class);
  int position=100;
  writer.write(buffer,position,pool);
  executor.shutdown(true);
  verify(executor,times(1)).submit(any(Callable.class));
  verify(channel).write(buffer,100);
  verifyNoMoreInteractions(channel);
}
