{
  StoreId storeId=new StoreId(1,2,3,4,5);
  LocalDatabase localDatabase=mock(LocalDatabase.class);
  when(localDatabase.storeId()).thenReturn(storeId);
  ControlledRenewableTimeoutService timeouts=new ControlledRenewableTimeoutService();
  RaftInstance<RaftTestMember> raft=new RaftInstanceBuilder<>(myself,3,RaftTestMemberSetBuilder.INSTANCE).timeoutService(timeouts).raftLog(raftLog).localDatabase(localDatabase).build();
  raft.bootstrapWithInitialMembers(new RaftTestGroup(asSet(myself,member1,member2)));
  raft.handle(appendEntriesRequest().from(member1).leaderTerm(0).prevLogIndex(0).prevLogTerm(0).logEntry(new RaftLogEntry(0,data1)).leaderCommit(-1).storeId(storeId).build());
  assertEquals(1,raftLog.appendIndex());
  assertEquals(data1,readLogEntry(raftLog,1).content());
}
