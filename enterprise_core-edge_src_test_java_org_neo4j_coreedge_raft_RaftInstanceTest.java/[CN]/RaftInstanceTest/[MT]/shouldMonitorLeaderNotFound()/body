{
  ControlledRenewableTimeoutService timeouts=new ControlledRenewableTimeoutService();
  int leaderWaitTimeout=10000;
  Clock clock=new TickingClock(0,leaderWaitTimeout + 1,TimeUnit.MILLISECONDS);
  Monitors monitors=new Monitors();
  LeaderNotFoundMonitor leaderNotFoundMonitor=new StubLeaderNotFoundMonitor();
  monitors.addMonitorListener(leaderNotFoundMonitor);
  RaftInstance<RaftTestMember> raft=new RaftInstanceBuilder<>(myself,3,RaftTestMemberSetBuilder.INSTANCE).timeoutService(timeouts).clock(clock).leaderWaitTimeout(leaderWaitTimeout).monitors(monitors).build();
  raft.bootstrapWithInitialMembers(new RaftTestGroup(asSet(myself,member1,member2)));
  try {
    raft.getLeader();
    fail("Should have thrown exception");
  }
 catch (  NoLeaderTimeoutException e) {
    assertEquals(1,leaderNotFoundMonitor.leaderNotFoundExceptions());
  }
}
