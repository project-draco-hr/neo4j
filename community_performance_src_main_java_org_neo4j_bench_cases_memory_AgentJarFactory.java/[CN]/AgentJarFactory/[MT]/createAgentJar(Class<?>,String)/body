{
  String jarFile=codeSourceOf(agentClass);
  try {
    verifyAgentJar(jarFile,manifestHeader);
  }
 catch (  IllegalStateException e) {
    Manifest manifest=new Manifest();
    manifest.getMainAttributes().put(new Attributes.Name(manifestHeader),agentClass.getName());
    return new JarCreator(manifest).createTemporaryJar(jarFile);
  }
  return jarFile;
}
