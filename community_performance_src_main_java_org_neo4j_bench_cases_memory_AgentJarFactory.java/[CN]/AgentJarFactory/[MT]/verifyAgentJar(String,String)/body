{
  try {
    JarFile jarFile=new JarFile(jarPath);
    if (jarFile.getManifest().getMainAttributes().get(new Attributes.Name(manifestHeader)) == null) {
      throw new IllegalStateException(jarPath + " does not specify an Agent-Class");
    }
  }
 catch (  IOException e) {
    throw new IllegalStateException(jarPath + " does not represent a jar file",e);
  }
  return jarPath;
}
