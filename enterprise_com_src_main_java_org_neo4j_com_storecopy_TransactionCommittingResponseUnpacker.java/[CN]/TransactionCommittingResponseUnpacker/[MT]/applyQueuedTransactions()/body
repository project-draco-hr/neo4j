{
synchronized (logFile) {
    logRotation.rotateLogIfNeeded(LogAppendEvent.NULL);
    try {
      if (transactionQueue.accept(batchCommitter) > 0) {
        appender.force();
        transactionQueue.accept(batchApplier);
      }
    }
  finally {
      transactionQueue.clear();
    }
  }
}
