{
  if (stopped) {
    throw new IllegalStateException("Component is currently stopped");
  }
  try {
    response.accept(new BatchingResponseHandler(txHandler));
  }
  finally {
    if (response.hasTransactionsToBeApplied()) {
      applyQueuedTransactions();
    }
  }
}
