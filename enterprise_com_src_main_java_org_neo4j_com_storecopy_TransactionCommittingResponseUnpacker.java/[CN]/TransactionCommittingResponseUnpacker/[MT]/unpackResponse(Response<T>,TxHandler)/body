{
  for (  CommittedTransactionRepresentation transaction : response.getTxs()) {
synchronized (appender) {
      if (appender.append(transaction)) {
        long transactionId=transaction.getCommitEntry().getTxId();
        try {
          storeApplier.apply(transaction.getTransactionRepresentation(),transactionId,true);
          handler.accept(transaction);
        }
  finally {
          transactionIdStore.transactionClosed(transactionId);
        }
      }
    }
  }
  return response.response();
}
