{
  if (query instanceof BooleanQuery) {
    BooleanQuery source=(BooleanQuery)query;
    BooleanQuery result=new BooleanQuery();
    for (    BooleanClause clause : source.clauses()) {
      result.add(injectOrphans(clause.getQuery()),clause.getOccur());
    }
    return result;
  }
 else {
    Set<Term> terms=new HashSet<Term>();
    query.extractTerms(terms);
    Term term=terms.iterator().next();
    BooleanQuery result=new BooleanQuery();
    result.add(query,Occur.SHOULD);
    result.add(new TermQuery(new Term(ORPHANS_KEY,term.field())),Occur.SHOULD);
    return result;
  }
}
