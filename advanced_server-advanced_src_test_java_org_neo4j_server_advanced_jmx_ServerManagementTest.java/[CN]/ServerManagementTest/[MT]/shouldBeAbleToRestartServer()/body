{
  String dbDirectory1=baseDir.directory("db1").getAbsolutePath();
  String dbDirectory2=baseDir.directory("db2").getAbsolutePath();
  ConfigurationBuilder config=new PropertyFileConfigurator(AdvancedServerBuilder.server().usingDatabaseDir(dbDirectory1).createPropertiesFiles(),ConsoleLogger.DEV_NULL);
  NeoServer server=cleanup.add(new AdvancedNeoServer(config,graphDbDependencies()));
  server.start();
  assertNotNull(server.getDatabase().getGraph());
  assertEquals(dbDirectory1,server.getDatabase().getLocation());
  setProperty(config.configuration(),Configurator.DATABASE_LOCATION_PROPERTY_KEY,dbDirectory2);
  ServerManagement bean=new ServerManagement(server);
  bean.restartServer();
  assertNotNull(server.getDatabase().getGraph());
  assertEquals(dbDirectory2,server.getDatabase().getLocation());
}
