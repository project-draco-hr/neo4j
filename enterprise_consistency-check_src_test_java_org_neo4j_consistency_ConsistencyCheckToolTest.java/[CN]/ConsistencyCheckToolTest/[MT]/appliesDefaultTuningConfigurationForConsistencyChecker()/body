{
  String[] args={storeDirectory.directory().getPath()};
  ConsistencyCheckService service=mock(ConsistencyCheckService.class);
  PrintStream systemOut=mock(PrintStream.class);
  new ConsistencyCheckTool(service,systemOut).run(args);
  ArgumentCaptor<Config> config=ArgumentCaptor.forClass(Config.class);
  verify(service).runFullConsistencyCheck(anyString(),config.capture(),any(ProgressMonitorFactory.class),any(StringLogger.class));
  assertFalse(config.getValue().get(ConsistencyCheckSettings.consistency_check_property_owners));
  assertEquals(TaskExecutionOrder.MULTI_PASS,config.getValue().get(ConsistencyCheckSettings.consistency_check_execution_order));
  WindowPoolImplementation expectedPoolImplementation=!osIsWindows() ? WindowPoolImplementation.SCAN_RESISTANT : WindowPoolImplementation.MOST_FREQUENTLY_USED;
  assertEquals(expectedPoolImplementation,config.getValue().get(ConsistencyCheckSettings.consistency_check_window_pool_implementation));
}
