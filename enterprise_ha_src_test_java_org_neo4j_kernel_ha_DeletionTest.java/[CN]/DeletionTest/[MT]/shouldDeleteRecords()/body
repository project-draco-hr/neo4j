{
  clusterManager=new ClusterManager(clusterOfSize(2),TargetDirectory.forTest(getClass()).cleanDirectory("deleteRecords"),stringMap());
  clusterManager.start();
  ClusterManager.ManagedCluster cluster=clusterManager.getDefaultCluster();
  cluster.await(ClusterManager.allSeesAllAsAvailable());
  HighlyAvailableGraphDatabase master=cluster.getMaster();
  HighlyAvailableGraphDatabase slave=cluster.getAnySlave();
  Relationship rel;
  try (Transaction tx=slave.beginTx()){
    rel=slave.createNode().createRelationshipTo(slave.createNode(),withName("FOO"));
    tx.success();
  }
   try (Transaction transaction=master.beginTx()){
    assertNotNull(master.getRelationshipById(rel.getId()));
  }
   try (Transaction tx=slave.beginTx()){
    rel.delete();
    tx.success();
  }
   slave.shutdown();
  master.shutdown();
}
