{
  nodeStore.forceUpdateRecord(nodeReader.readNodeStore(relationships.nodeId()));
  relationships.accept(new Visitor<RelationshipRecord,RuntimeException>(){
    private int i=0;
    @Override public boolean visit(    RelationshipRecord record) throws RuntimeException {
      if (i == 0) {
        setDegree(relationships.nodeId(),record,relationships.size());
      }
      applyChangesToRecord(relationships.nodeId(),record,relationshipStore);
      relationshipStore.forceUpdateRecord(record);
      i++;
      return false;
    }
  }
);
}
