{
  Set<NodePropertyUpdate> updates=new HashSet<NodePropertyUpdate>();
  Transaction tx=db.beginTx();
  try {
    StatementContext context=db.getDependencyResolver().resolveDependency(ThreadToStatementContextBridge.class).getCtxForWriting();
    for (    int number : new int[]{4,10}) {
      Node node=db.createNode(label);
      node.setProperty(key,number);
      updates.add(NodePropertyUpdate.add(node.getId(),context.getPropertyKeyId(key),number,new long[]{context.getLabelId(label.name())}));
    }
    context.close();
    tx.success();
    return updates;
  }
  finally {
    tx.finish();
  }
}
