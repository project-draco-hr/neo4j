{
  Set<NodePropertyUpdate> updates=new HashSet<>();
  Transaction tx=db.beginTx();
  try {
    ThreadToStatementContextBridge ctxProvider=db.getDependencyResolver().resolveDependency(ThreadToStatementContextBridge.class);
    Statement statement=ctxProvider.statement();
    for (    int number : new int[]{4,10}) {
      Node node=db.createNode(label);
      node.setProperty(key,number);
      updates.add(NodePropertyUpdate.add(node.getId(),statement.readOperations().propertyKeyGetForName(key),number,new long[]{statement.readOperations().labelGetForName(label.name())}));
    }
    statement.close();
    tx.success();
    return updates;
  }
  finally {
    tx.finish();
  }
}
