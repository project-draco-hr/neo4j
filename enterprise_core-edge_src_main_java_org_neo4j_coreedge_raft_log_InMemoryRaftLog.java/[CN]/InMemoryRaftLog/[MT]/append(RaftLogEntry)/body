{
  Objects.requireNonNull(logEntry);
  if (logEntry.term() >= term) {
    term=logEntry.term();
  }
 else {
    throw new IllegalStateException(String.format("Non-monotonic term %d for in entry %s in term %d",logEntry.term(),logEntry.toString(),term));
  }
  appendIndex++;
  raftLog.put(appendIndex,logEntry);
  return appendIndex;
}
