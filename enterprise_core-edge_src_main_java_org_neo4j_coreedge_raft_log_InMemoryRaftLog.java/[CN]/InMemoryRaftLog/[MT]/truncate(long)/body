{
  if (fromIndex <= commitIndex) {
    throw new IllegalArgumentException("cannot truncate before the commit index");
  }
  for (long i=appendIndex; i >= fromIndex; --i) {
    raftLog.remove(i);
  }
  if (appendIndex >= fromIndex) {
    appendIndex=fromIndex - 1;
    for (    Listener listener : listeners) {
      listener.onTruncated(fromIndex);
    }
  }
  term=readEntryTerm(appendIndex);
}
