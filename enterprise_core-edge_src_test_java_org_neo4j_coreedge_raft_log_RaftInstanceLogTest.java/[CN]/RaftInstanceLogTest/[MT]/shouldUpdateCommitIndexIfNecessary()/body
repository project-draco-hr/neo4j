{
  testEntryLog.append(new RaftLogEntry(1,ReplicatedInteger.valueOf(1)));
  testEntryLog.append(new RaftLogEntry(1,ReplicatedInteger.valueOf(4)));
  testEntryLog.append(new RaftLogEntry(1,ReplicatedInteger.valueOf(7)));
  testEntryLog.commit(1);
  raft.handle(appendEntriesRequest().leaderTerm(2).prevLogIndex(2).prevLogTerm(1).leaderCommit(2).build());
  assertEquals(2,testEntryLog.commitIndex());
  verify(entryConsumer).onCommitted(ReplicatedInteger.valueOf(1));
}
