{
  String path=getDbPath();
  Neo4jTestCase.deleteFileOrDirectory(new File(path));
  assertEquals(0,Runtime.getRuntime().exec(new String[]{"java","-Xdebug","-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005","-cp",System.getProperty("java.class.path"),AddRelToIndex.class.getName(),getDbPath()}).waitFor());
  FileSystemAbstraction fileSystem=CommonFactories.defaultFileSystemAbstraction();
  Map<String,String> params=MapUtil.stringMap("store_dir",getDbPath());
  LuceneDataSource ds=new LuceneDataSource(ConfigProxy.config(params,LuceneDataSource.Configuration.class),new IndexStore(getDbPath(),fileSystem),fileSystem,new XaFactory(params,TxIdGenerator.DEFAULT,new PlaceboTm(),CommonFactories.defaultLogBufferFactory(),CommonFactories.defaultFileSystemAbstraction(),StringLogger.DEV_NULL));
  ds.close();
}
