{
  File path=getDbPath();
  Neo4jTestCase.deleteFileOrDirectory(path);
  Process process=runJava(AddRelToIndex.class,getDbPath().getPath());
  assertEquals(0,new ProcessStreamHandler(process,false).waitForResult());
  FileSystemAbstraction fileSystemAbstraction=new DefaultFileSystemAbstraction();
  FileSystemAbstraction fileSystem=fileSystemAbstraction;
  Map<String,String> params=MapUtil.stringMap("store_dir",getDbPath().getPath());
  Config config=new Config(params,GraphDatabaseSettings.class);
  LuceneDataSource ds=new LuceneDataSource(config,new IndexStore(getDbPath(),fileSystem),fileSystem,new XaFactory(config,TxIdGenerator.DEFAULT,new PlaceboTm(null,null),fileSystemAbstraction,new Monitors(),new DevNullLoggingService(),RecoveryVerifier.ALWAYS_VALID,LogPruneStrategies.NO_PRUNING,mock(KernelHealth.class)),null,new DevNullLoggingService());
  ds.start();
  ds.stop();
}
