{
  String path=getDbPath();
  Neo4jTestCase.deleteFileOrDirectory(new File(path));
  assertEquals(0,Runtime.getRuntime().exec(new String[]{"java","-cp",System.getProperty("java.class.path"),AddRelToIndex.class.getName(),getDbPath()}).waitFor());
  FileSystemAbstraction fileSystem=CommonFactories.defaultFileSystemAbstraction();
  Map<Object,Object> params=MapUtil.genericMap("store_dir",getDbPath(),IndexStore.class,new IndexStore(getDbPath(),fileSystem),FileSystemAbstraction.class,fileSystem,StringLogger.class,StringLogger.DEV_NULL,LogBufferFactory.class,CommonFactories.defaultLogBufferFactory());
  LuceneDataSource ds=new LuceneDataSource(params);
  ds.close();
}
