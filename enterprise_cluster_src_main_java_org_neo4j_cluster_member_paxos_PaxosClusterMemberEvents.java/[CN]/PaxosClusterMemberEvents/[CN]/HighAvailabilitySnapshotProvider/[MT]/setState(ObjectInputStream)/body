{
  clusterMembersSnapshot=ClusterMembersSnapshot.class.cast(input.readObject());
  if (!snapshotValidator.accept(clusterMembersSnapshot)) {
    executor.submit(new Runnable(){
      @Override public void run(){
        cluster.leave();
      }
    }
);
  }
 else {
    Listeners.notifyListeners(listeners,executor,new Listeners.Notification<ClusterMemberListener>(){
      @Override public void notify(      ClusterMemberListener listener){
        for (        MemberIsAvailable memberIsAvailable : clusterMembersSnapshot.getCurrentAvailableMembers()) {
          listener.memberIsAvailable(memberIsAvailable.getRole(),memberIsAvailable.getInstanceId(),memberIsAvailable.getRoleUri(),memberIsAvailable.getStoreId());
        }
      }
    }
);
  }
}
