{
  if (!file.exists()) {
    if (file.getParent() != null) {
      new File(file.getParent()).mkdirs();
    }
    if (!file.createNewFile()) {
      throw new IllegalStateException(file.getAbsolutePath());
    }
  }
  return file;
}
