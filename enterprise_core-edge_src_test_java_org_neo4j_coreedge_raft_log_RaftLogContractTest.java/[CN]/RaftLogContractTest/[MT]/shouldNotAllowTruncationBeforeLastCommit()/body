{
  RaftLog log=createRaftLog();
  log.append(new RaftLogEntry(0,ReplicatedInteger.valueOf(0)));
  long toTryToTruncate=log.append(new RaftLogEntry(0,ReplicatedInteger.valueOf(1)));
  long toCommit=log.append(new RaftLogEntry(1,ReplicatedInteger.valueOf(2)));
  log.commit(toCommit);
  try {
    log.truncate(toTryToTruncate);
    fail("Truncation at this point should have failed");
  }
 catch (  IllegalArgumentException truncationFailed) {
  }
  assertThat(log.entryExists(toCommit),is(true));
  assertThat(log.entryExists(toTryToTruncate),is(true));
}
