{
  RaftLog log=createRaftLog();
  log.append(new RaftLogEntry(0,ReplicatedInteger.valueOf(0)));
  long toCommit=log.append(new RaftLogEntry(1,ReplicatedInteger.valueOf(2)));
  log.commit(toCommit);
  try {
    log.truncate(toCommit);
    fail("Truncation at this point should have failed");
  }
 catch (  IllegalArgumentException truncationFailed) {
  }
  assertThat(log.entryExists(toCommit),is(true));
}
