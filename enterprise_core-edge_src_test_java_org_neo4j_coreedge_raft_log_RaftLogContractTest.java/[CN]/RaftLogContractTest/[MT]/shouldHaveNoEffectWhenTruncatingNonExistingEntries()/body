{
  RaftLog log=createRaftLog();
  RaftLogEntry logEntryA=new RaftLogEntry(1,valueOf(1));
  RaftLogEntry logEntryB=new RaftLogEntry(1,valueOf(2));
  log.append(logEntryA);
  log.append(logEntryB);
  try {
    log.truncate(5);
    fail("Truncate at index after append index should never be attempted");
  }
 catch (  IllegalArgumentException e) {
  }
  assertThat(log.appendIndex(),is(1L));
  assertThat(readLogEntry(log,0),equalTo(logEntryA));
  assertThat(readLogEntry(log,1),equalTo(logEntryB));
}
