{
  RaftLog log=createRaftLog();
  RaftLogEntry logEntryA=new RaftLogEntry(1,ReplicatedInteger.valueOf(1));
  RaftLogEntry logEntryB=new RaftLogEntry(1,ReplicatedInteger.valueOf(2));
  RaftLogEntry logEntryC=new RaftLogEntry(1,ReplicatedInteger.valueOf(3));
  RaftLogEntry logEntryD=new RaftLogEntry(1,ReplicatedInteger.valueOf(4));
  RaftLogEntry logEntryE=new RaftLogEntry(1,ReplicatedInteger.valueOf(5));
  log.append(logEntryA);
  log.append(logEntryB);
  log.append(logEntryC);
  log.truncate(1);
  log.append(logEntryD);
  log.append(logEntryE);
  assertThat(log.appendIndex(),is(2L));
  assertThat(readLogEntry(log,0),equalTo(logEntryA));
  assertThat(readLogEntry(log,1),equalTo(logEntryD));
  assertThat(readLogEntry(log,2),equalTo(logEntryE));
}
