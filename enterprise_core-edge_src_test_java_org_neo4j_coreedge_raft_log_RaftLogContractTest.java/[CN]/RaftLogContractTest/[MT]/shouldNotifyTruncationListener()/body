{
  RaftLog log=createRaftLog();
  RaftLog.Listener listener=mock(RaftLog.Listener.class);
  log.registerListener(listener);
  RaftLogEntry logEntry=new RaftLogEntry(1,ReplicatedInteger.valueOf(1));
  log.append(logEntry);
  log.truncate(0);
  verify(listener,times(1)).onTruncated(eq(0L));
}
