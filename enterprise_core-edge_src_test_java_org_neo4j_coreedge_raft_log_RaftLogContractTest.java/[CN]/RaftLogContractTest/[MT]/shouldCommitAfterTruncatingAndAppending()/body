{
  RaftLog log=createRaftLog();
  log.append(new RaftLogEntry(0,ReplicatedInteger.valueOf(0)));
  long toCommit=log.append(new RaftLogEntry(0,ReplicatedInteger.valueOf(1)));
  long toTruncate=log.append(new RaftLogEntry(1,ReplicatedInteger.valueOf(2)));
  log.truncate(toTruncate);
  long lastAppended=log.append(new RaftLogEntry(2,ReplicatedInteger.valueOf(3)));
  log.commit(toCommit);
  assertThat(log.entryExists(toCommit),is(true));
  assertThat(log.entryExists(lastAppended),is(true));
  assertThat(log.entryExists(toTruncate),is(true));
  assertThat(log.readEntryTerm(toCommit),is(0L));
  assertThat(log.readEntryTerm(lastAppended),is(2L));
}
