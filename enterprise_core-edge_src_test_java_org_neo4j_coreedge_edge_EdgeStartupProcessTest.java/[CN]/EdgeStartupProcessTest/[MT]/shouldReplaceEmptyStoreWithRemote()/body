{
  when(localDatabase.isEmpty()).thenReturn(true);
  when(storeFetcher.getStoreIdOf(any())).thenReturn(otherStoreId);
  EdgeStartupProcess edgeStartupProcess=new EdgeStartupProcess(storeFetcher,localDatabase,txPulling,new AlwaysChooseFirstMember(hazelcastTopology),new ConstantTimeRetryStrategy(1,MILLISECONDS),NullLogProvider.getInstance(),copiedStoreRecovery);
  edgeStartupProcess.start();
  verify(localDatabase).stop();
  verify(storeFetcher).copyStore(any(),any(),any());
  verify(localDatabase,times(2)).start();
  verify(txPulling).start();
}
