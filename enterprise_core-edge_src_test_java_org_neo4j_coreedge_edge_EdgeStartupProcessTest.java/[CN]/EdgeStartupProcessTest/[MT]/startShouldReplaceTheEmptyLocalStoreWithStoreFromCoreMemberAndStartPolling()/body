{
  MemberId memberId=new MemberId(UUID.randomUUID());
  StoreId storeId=new StoreId(1,2,3,4);
  StoreFetcher storeFetcher=mock(StoreFetcher.class);
  when(storeFetcher.storeId(memberId)).thenReturn(storeId);
  LocalDatabase localDatabase=mock(LocalDatabase.class);
  TopologyService hazelcastTopology=mock(TopologyService.class);
  ClusterTopology clusterTopology=mock(ClusterTopology.class);
  when(hazelcastTopology.currentTopology()).thenReturn(clusterTopology);
  when(clusterTopology.coreMembers()).thenReturn(asSet(memberId));
  when(localDatabase.isEmpty()).thenReturn(true);
  Lifecycle txPulling=mock(Lifecycle.class);
  EdgeStartupProcess edgeStartupProcess=new EdgeStartupProcess(storeFetcher,localDatabase,txPulling,new AlwaysChooseFirstMember(hazelcastTopology),new ConstantTimeRetryStrategy(1,MILLISECONDS),NullLogProvider.getInstance());
  edgeStartupProcess.start();
  Mockito.verify(localDatabase).isEmpty();
  Mockito.verify(localDatabase).stop();
  Mockito.verify(localDatabase).bringUpToDateOrReplaceStoreFrom(memberId,storeId,storeFetcher);
  Mockito.verify(localDatabase,times(2)).start();
  Mockito.verify(txPulling).start();
  Mockito.verifyNoMoreInteractions(localDatabase,txPulling);
}
