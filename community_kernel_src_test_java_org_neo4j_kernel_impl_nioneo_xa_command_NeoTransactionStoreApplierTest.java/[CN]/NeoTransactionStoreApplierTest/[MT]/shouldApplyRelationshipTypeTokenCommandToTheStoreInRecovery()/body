{
  final NeoTransactionStoreApplier applier=new NeoTransactionStoreApplier(neoStore,indexingService,cacheAccess,lockService,transactionId,true);
  final RelationshipTypeTokenRecord record=new RelationshipTypeTokenRecord(42);
  final Command.RelationshipTypeTokenCommand command=new Command.RelationshipTypeTokenCommand().init(record);
  final Token token=new Token("token",21);
  when(relationshipTypeTokenStore.getToken((int)command.getKey())).thenReturn(token);
  final boolean result=applier.visitRelationshipTypeTokenCommand(command);
  assertTrue(result);
  verify(relationshipTypeTokenStore,times(1)).setHighId(record.getId());
  verify(relationshipTypeTokenStore,times(1)).updateRecord(record);
  verify(cacheAccess,times(1)).addRelationshipTypeToken(token);
}
