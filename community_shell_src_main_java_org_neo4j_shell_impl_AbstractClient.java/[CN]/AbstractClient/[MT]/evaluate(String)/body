{
  if (EXIT_COMMANDS.contains(line)) {
    end();
    return;
  }
  boolean success=false;
  try {
    String expandedLine=expandLine(fullLine(line));
    String result=getServer().interpretLine(expandedLine,session(),getOutput());
    if (result == null || result.trim().length() == 0) {
      endMultiLine();
    }
 else     if (result.contains("c")) {
      multiLine.add(line);
    }
 else     if (result.contains("e")) {
      end();
    }
    success=true;
  }
 catch (  RemoteException e) {
    throw ShellException.wrapCause(e);
  }
 finally {
    if (!success)     endMultiLine();
  }
}
