{
  init();
  Runnable ctrlcAction=getTerminateAction();
  while (!end) {
    String command=readLine(getPrompt());
    Cancelable cancelable=null;
    try {
      cancelable=signalHandler.install(ctrlcAction);
      evaluate(command);
    }
 catch (    Exception e) {
      printStackTrace(e);
    }
 finally {
      if (cancelable != null) {
        cancelable.cancel();
      }
    }
  }
  this.shutdown();
}
