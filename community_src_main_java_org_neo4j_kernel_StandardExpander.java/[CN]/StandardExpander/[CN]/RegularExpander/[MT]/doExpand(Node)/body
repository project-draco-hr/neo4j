{
  Iterable<Relationship> relationships=start.getRelationships(types);
  if (directions.isEmpty()) {
    return relationships.iterator();
  }
 else {
    return new FilteringIterator<Relationship>(relationships.iterator(),new Predicate<Relationship>(){
      public boolean accept(      Relationship rel){
        Direction dir=directions.get(rel.getType().name());
        return matchDirection(dir == null ? Direction.BOTH : dir,start,rel);
      }
    }
);
  }
}
