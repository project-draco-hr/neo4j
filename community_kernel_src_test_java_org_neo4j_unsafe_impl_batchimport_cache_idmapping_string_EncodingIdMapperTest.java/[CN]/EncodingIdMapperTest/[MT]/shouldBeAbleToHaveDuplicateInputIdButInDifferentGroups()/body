{
  IdMapper mapper=new EncodingIdMapper(NumberArrayFactory.HEAP,new StringEncoder(),new Radix.String());
  ResourceIterable<Object> ids=IteratorUtil.<Object>resourceIterable(Arrays.<Object>asList("10","9","10"));
  try (ResourceIterator<Object> iterator=ids.iterator()){
    int group=0, id=0;
    Group group0=group(group++,"zero");
    mapper.put(iterator.next(),id++,group0);
    mapper.put(iterator.next(),id++,group0);
    Group group1=group(group,"one");
    mapper.put(iterator.next(),id++,group1);
  }
   mapper.prepare(ids);
  assertEquals(0L,mapper.get("10",groups(0)));
  assertEquals(1L,mapper.get("9",groups(0)));
  assertEquals(2L,mapper.get("10",groups(1)));
}
