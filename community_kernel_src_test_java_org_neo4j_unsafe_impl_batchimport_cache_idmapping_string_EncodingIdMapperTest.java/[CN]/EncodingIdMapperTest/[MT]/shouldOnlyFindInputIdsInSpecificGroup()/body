{
  IdMapper mapper=new EncodingIdMapper(NumberArrayFactory.HEAP,new StringEncoder(),new Radix.String());
  ResourceIterable<Object> ids=IteratorUtil.<Object>resourceIterable(Arrays.<Object>asList("8","9","10"));
  try (ResourceIterator<Object> iterator=ids.iterator()){
    int group=0, id=0;
    mapper.put(iterator.next(),id++,group(group++,"first"));
    mapper.put(iterator.next(),id++,group(group++,"second"));
    mapper.put(iterator.next(),id++,group(group++,"third"));
  }
   mapper.prepare(ids);
  assertEquals(0L,mapper.get("8",groups(0)));
  assertEquals(-1L,mapper.get("8",groups(1)));
  assertEquals(-1L,mapper.get("8",groups(2)));
  assertEquals(0L,mapper.get("8",groups(0,1,2)));
  assertEquals(-1L,mapper.get("9",groups(0)));
  assertEquals(1L,mapper.get("9",groups(1)));
  assertEquals(-1L,mapper.get("9",groups(2)));
  assertEquals(1L,mapper.get("9",groups(0,1,2)));
  assertEquals(-1L,mapper.get("10",groups(0)));
  assertEquals(-1L,mapper.get("10",groups(1)));
  assertEquals(2L,mapper.get("10",groups(2)));
  assertEquals(2L,mapper.get("10",groups(0,1,2)));
}
