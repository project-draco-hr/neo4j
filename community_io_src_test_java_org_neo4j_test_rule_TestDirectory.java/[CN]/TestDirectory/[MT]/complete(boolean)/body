{
  if (success && testDirectory != null && !keepDirectoryAfterSuccessfulTest) {
    try {
      fileSystem.deleteRecursively(testDirectory);
    }
 catch (    MaybeWindowsMemoryMappedFileReleaseProblem fme) {
      System.err.println("Failed to delete test directory, " + "maybe due to Windows memory-mapped file problem: " + fme.getMessage());
    }
catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
  testDirectory=null;
}
