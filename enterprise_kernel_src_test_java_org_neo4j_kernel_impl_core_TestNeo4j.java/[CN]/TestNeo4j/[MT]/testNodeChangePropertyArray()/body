{
  Transaction tx=getTransaction();
  tx.finish();
  tx=getGraphDb().beginTx();
  Node node;
  try {
    node=getGraphDb().createNode();
    tx.success();
  }
  finally {
    tx.finish();
  }
  tx=getGraphDb().beginTx();
  try {
    node.setProperty("test",new String[]{"value1"});
    tx.success();
  }
  finally {
    tx.finish();
  }
  tx=getGraphDb().beginTx();
  try {
    node.setProperty("test",new String[]{"value1","value2"});
  }
  finally {
    tx.finish();
  }
  tx=getGraphDb().beginTx();
  try {
    String[] value=(String[])node.getProperty("test");
    assertEquals(1,value.length);
    assertEquals("value1",value[0]);
    tx.success();
  }
  finally {
    tx.finish();
  }
  setTransaction(getGraphDb().beginTx());
}
