{
  OnDemandJobScheduler jobScheduler=new OnDemandJobScheduler();
  MembershipWaiter waiter=new MembershipWaiter(member(0),jobScheduler,500,mock(MismatchedStoreIdService.class),NullLogProvider.getInstance());
  InMemoryRaftLog raftLog=new InMemoryRaftLog();
  raftLog.append(new RaftLogEntry(0,valueOf(0)));
  RaftState raftState=RaftStateBuilder.raftState().votingMembers(member(0)).leaderCommit(0).entryLog(raftLog).commitIndex(0L).build();
  CompletableFuture<Boolean> future=waiter.waitUntilCaughtUpMember(raftState);
  jobScheduler.runJob();
  future.get(0,NANOSECONDS);
}
