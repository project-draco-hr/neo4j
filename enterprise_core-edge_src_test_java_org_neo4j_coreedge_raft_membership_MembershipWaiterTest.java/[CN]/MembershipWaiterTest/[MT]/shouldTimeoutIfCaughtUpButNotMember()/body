{
  OnDemandJobScheduler jobScheduler=new OnDemandJobScheduler();
  MembershipWaiter waiter=new MembershipWaiter(member(0),jobScheduler,1,mock(BatchingMessageHandler.class),NullLogProvider.getInstance());
  RaftState raftState=RaftStateBuilder.raftState().votingMembers(member(1)).leaderCommit(0).build();
  CompletableFuture<Boolean> future=waiter.waitUntilCaughtUpMember(raftState);
  jobScheduler.runJob();
  jobScheduler.runJob();
  try {
    future.get(10,MILLISECONDS);
    fail("Should have timed out.");
  }
 catch (  TimeoutException e) {
  }
}
