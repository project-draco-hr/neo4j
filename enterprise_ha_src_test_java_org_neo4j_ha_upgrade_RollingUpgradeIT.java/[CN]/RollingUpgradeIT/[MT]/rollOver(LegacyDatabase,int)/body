{
  String storeDir=legacyDb.getStoreDir();
  if (i == 0) {
    storeDir+="new";
  }
  stop(i);
  Thread.sleep(30000);
  debug("Starting " + i + " as current version");
  newDbs[i]=(GraphDatabaseAPI)new HighlyAvailableGraphDatabaseFactory().newHighlyAvailableDatabaseBuilder(storeDir).setConfig(config(i)).newGraphDatabase();
  debug("Started " + i + " as current version");
  legacyDbs[i]=null;
  if (i == 2 || i == 1) {
    legacyDbs[0].doComplexLoad(centralNode);
    debug("Node created on " + i);
  }
 else {
    doComplexLoad(newDbs[1],centralNode);
  }
  for (int j=0; j < legacyDbs.length; j++) {
    if (legacyDbs[j] != null) {
      legacyDbs[j].verifyComplexLoad(centralNode);
      debug("Verified on legacy db " + j);
    }
  }
  for (int j=0; j < newDbs.length; j++) {
    if (newDbs[j] != null) {
      verifyComplexLoad(newDbs[j],centralNode);
      debug("Verified on new db " + j);
    }
  }
}
