{
  StoreFileChannel channel=mock(StoreFileChannel.class);
  FileSystemAbstraction fsa=mock(FileSystemAbstraction.class);
  when(fsa.open(any(File.class),anyString())).thenReturn(channel);
  AdvertisedSocketAddress localhost=new AdvertisedSocketAddress(InetSocketAddress.createUnresolved("localhost",1234));
  CoreMember member=new CoreMember(localhost,localhost);
  DurableVoteStore store=new DurableVoteStore(fsa,new File(""));
  store.update(member);
  verify(channel).writeAll(any(ByteBuffer.class),anyInt());
  verify(channel).force(anyBoolean());
}
