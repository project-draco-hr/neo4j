{
  Map<String,Collection<Relationship>> map=new TreeMap<String,Collection<Relationship>>();
  for (  Relationship rel : source) {
    String type=rel.getType().name().toLowerCase();
    Collection<Relationship> rels=map.get(type);
    if (rels == null) {
      rels=new ArrayList<Relationship>();
      map.put(type,rels);
    }
    rels.add(rel);
  }
  Collection<Relationship> result=new ArrayList<Relationship>();
  for (  Collection<Relationship> rels : map.values()) {
    result.addAll(rels);
  }
  return result;
}
