{
  buffer.clear();
  byte inUse=record.inUse() ? Record.IN_USE.byteValue() : Record.NOT_IN_USE.byteValue();
  buffer.put(PROP_COMMAND);
  buffer.putInt(record.getId()).put(inUse).putInt(record.getType().intValue()).putInt(record.getKeyBlock()).putLong(record.getPropBlock()).putInt(record.getPrevProp()).putInt(record.getNextProp());
  Collection<DynamicRecord> keyRecords=record.getKeyRecords();
  buffer.putInt(keyRecords.size());
  Collection<DynamicRecord> valueRecords=record.getValueRecords();
  buffer.putInt(valueRecords.size());
  for (  DynamicRecord keyRecord : keyRecords) {
    if ((buffer.capacity() - buffer.position()) < keyRecord.getLength()) {
      buffer.flip();
      fileChannel.write(buffer);
      buffer.flip();
    }
    writeDynamicRecord(keyRecord,buffer);
  }
  for (  DynamicRecord valueRecord : valueRecords) {
    if ((buffer.capacity() - buffer.position()) < valueRecord.getLength()) {
      buffer.flip();
      fileChannel.write(buffer);
      buffer.flip();
    }
    writeDynamicRecord(valueRecord,buffer);
  }
  buffer.flip();
  fileChannel.write(buffer);
}
