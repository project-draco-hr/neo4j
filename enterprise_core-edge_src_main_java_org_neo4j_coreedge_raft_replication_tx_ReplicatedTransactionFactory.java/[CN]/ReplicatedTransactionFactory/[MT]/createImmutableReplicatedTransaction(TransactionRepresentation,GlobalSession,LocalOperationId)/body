{
  ByteBuf transactionBuffer=Unpooled.buffer();
  NetworkWritableLogChannelNetty4 channel=new NetworkWritableLogChannelNetty4(transactionBuffer);
  ReplicatedTransactionFactory.TransactionSerializer.write(tx,channel);
  byte[] txBytes=Arrays.copyOf(transactionBuffer.array(),transactionBuffer.writerIndex());
  transactionBuffer.release();
  return new ReplicatedTransaction(txBytes,globalSession,localOperationId);
}
