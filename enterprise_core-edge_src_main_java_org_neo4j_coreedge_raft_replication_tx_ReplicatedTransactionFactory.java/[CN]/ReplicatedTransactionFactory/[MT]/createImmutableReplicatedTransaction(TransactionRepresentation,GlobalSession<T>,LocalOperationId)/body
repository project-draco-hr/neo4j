{
  ByteBuf transactionBuffer=Unpooled.buffer();
  NetworkFlushableChannelNetty4 channel=new NetworkFlushableChannelNetty4(transactionBuffer);
  ReplicatedTransactionFactory.TransactionSerializer.write(tx,channel);
  byte[] txBytes=Arrays.copyOf(transactionBuffer.array(),transactionBuffer.writerIndex());
  transactionBuffer.release();
  return new ReplicatedTransaction<>(txBytes,globalSession,localOperationId);
}
