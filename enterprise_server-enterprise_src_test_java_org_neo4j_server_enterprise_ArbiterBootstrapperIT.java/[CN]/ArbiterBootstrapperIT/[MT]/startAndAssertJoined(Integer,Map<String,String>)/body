{
  Map<String,String> localCopy=new HashMap<>(config);
  localCopy.put(GraphDatabaseSettings.auth_store.name(),Files.createTempFile("auth","").toString());
  File configDir=writeConfig(localCopy);
  CountDownLatch latch=new CountDownLatch(1);
  AtomicInteger port=new AtomicInteger();
  clients[0].addClusterListener(joinAwaitingListener(latch,port));
  boolean arbiterStarted=startArbiter(configDir,latch);
  if (expectedAssignedPort == null) {
    assertFalse(format("Should not be able to start arbiter given config file:%s",config),arbiterStarted);
  }
 else {
    assertTrue(format("Should be able to start arbiter given config file:%s",config),arbiterStarted);
    assertEquals(expectedAssignedPort.intValue(),port.get());
  }
}
