{
  XaDataSource dataSource=branchIdMapping.get(new String(branchId));
  if (dataSource == null) {
    throw new TransactionFailureException("No mapping found for branchId[0x" + new String(branchId) + "]");
  }
  return dataSource.getXaConnection().getXaResource();
}
