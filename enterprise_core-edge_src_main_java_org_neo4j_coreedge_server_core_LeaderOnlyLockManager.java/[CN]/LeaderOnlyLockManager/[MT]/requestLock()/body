{
  try {
    replicator.replicate(new ReplicatedLockRequest<>(myself,replicatedLockStateMachine.nextId()));
  }
 catch (  Replicator.ReplicationFailedException e) {
    throw new LockClientAlreadyClosedException("Could not acquire lock session. Leader switch?");
  }
synchronized (replicatedLockStateMachine) {
    replicatedLockStateMachine.wait(LOCK_WAIT_TIME);
  }
}
