{
  int contestedPort=9999;
  ServerSocket socket=new ServerSocket(contestedPort,0,InetAddress.getLocalHost());
  InMemoryAppender appender=new InMemoryAppender(NeoServerWithEmbeddedWebServer.log);
  NeoServerWithEmbeddedWebServer server=ServerBuilder.server().onPort(contestedPort).onHost(InetAddress.getLocalHost().toString()).build();
  server.start();
  assertThat(appender.toString(),containsString(String.format(": Failed to start Neo Server on port [%s]",server.getWebServerPort())));
  socket.close();
  server.stop();
}
