{
  Map<String,Serializable> map=new HashMap<String,Serializable>();
  for (  String keyValue : shellConfig.split(",")) {
    String[] splitted=keyValue.split("=");
    if (splitted.length != 2) {
      throw new RuntimeException("Invalid shell configuration '" + shellConfig + "' should be '<key1>=<value1>,<key2>=<value2>...' where key can"+ " be any of [port, name]");
    }
    String key=splitted[0];
    Serializable value=splitted[1];
    if (key.equals("port")) {
      value=Integer.parseInt(splitted[1]);
    }
    map.put(key,value);
  }
  return map;
}
