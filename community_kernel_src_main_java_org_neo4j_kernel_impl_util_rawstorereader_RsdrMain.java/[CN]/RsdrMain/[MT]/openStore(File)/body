{
  Config config=new Config(MapUtil.stringMap(GraphDatabaseSettings.read_only.name(),"true",GraphDatabaseSettings.mapped_memory_total_size.name(),"64M",GraphDatabaseSettings.neo_store.name(),storepath.getAbsolutePath() + File.separator + NeoStore.DEFAULT_NAME));
  IdGeneratorFactory idGeneratorFactory=new DefaultIdGeneratorFactory();
  Neo4jJobScheduler jobScheduler=new Neo4jJobScheduler();
  jobScheduler.init();
  PageCacheFactory pageCacheFactory=new StandardPageCacheFactory();
  PageSwapperFactory swapperFactory=new SingleFilePageSwapperFactory(files);
  LifecycledPageCache pageCache=new LifecycledPageCache(pageCacheFactory,swapperFactory,jobScheduler,config,new Monitors().newMonitor(PageCacheMonitor.class));
  pageCache.start();
  StringLogger logger=StringLogger.DEV_NULL;
  StoreFactory factory=new StoreFactory(config,idGeneratorFactory,pageCache,files,logger,null);
  return factory;
}
