{
  final Arguments arguments;
  final Agent agent;
  try {
    arguments=new Arguments(args);
    agent=new Agent(false);
  }
 catch (  StartupException err) {
    System.err.println(err.getMessage());
    System.exit(1);
    return;
  }
  if (!arguments.equals(new Arguments(arguments.toString()))) {
    System.err.println("Implementation error in serialization!");
    System.exit(1);
    return;
  }
  agent_vm=true;
  try {
    agent.attach(arguments);
  }
 catch (  Exception ex) {
    System.err.println("Attachment process failed with an unexpected exception.");
    ex.printStackTrace();
  }
 finally {
    agent_vm=false;
  }
}
