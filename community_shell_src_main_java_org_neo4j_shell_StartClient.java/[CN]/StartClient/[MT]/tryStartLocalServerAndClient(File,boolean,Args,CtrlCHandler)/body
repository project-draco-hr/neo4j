{
  String configFile=args.get(ARG_CONFIG,null);
  final GraphDatabaseShellServer server=getGraphDatabaseShellServer(path,readOnly,configFile);
  Runtime.getRuntime().addShutdownHook(new Thread(){
    @Override public void run(){
      shutdownIfNecessary(server);
    }
  }
);
  if (!isCommandLine(args)) {
    out.println("NOTE: Local Neo4j graph database service at '" + path + "'");
  }
  ShellClient client=ShellLobby.newClient(server,getSessionVariablesFromArgs(args),new SystemOutput(out),signalHandler);
  grabPromptOrJustExecuteCommand(client,args);
  shutdownIfNecessary(server);
}
