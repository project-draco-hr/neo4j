{
  if (relationshipMap == null) {
    List<RelationshipImpl> fullRelationshipList=nodeManager.loadRelationships(this);
    ArrayIntSet addedRels=new ArrayIntSet();
    ArrayMap<String,ArrayIntSet> newRelationshipMap=new ArrayMap<String,ArrayIntSet>();
    for (    Relationship rel : fullRelationshipList) {
      int relId=(int)rel.getId();
      addedRels.add(relId);
      RelationshipType type=rel.getType();
      ArrayIntSet relationshipSet=newRelationshipMap.get(type.name());
      if (relationshipSet == null) {
        relationshipSet=new ArrayIntSet();
        newRelationshipMap.put(type.name(),relationshipSet);
      }
      relationshipSet.add(relId);
    }
    this.relationshipMap=newRelationshipMap;
    return true;
  }
  return false;
}
