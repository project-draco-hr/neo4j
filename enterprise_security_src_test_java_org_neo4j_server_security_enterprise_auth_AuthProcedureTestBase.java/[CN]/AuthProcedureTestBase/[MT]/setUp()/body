{
  db=(GraphDatabaseAPI)new TestEnterpriseGraphDatabaseFactory().newImpermanentDatabase();
  manager=new ShiroAuthManager(new InMemoryUserRepository(),new InMemoryRoleRepository(),new BasicPasswordPolicy(),systemUTC());
  manager.init();
  manager.start();
  manager.newUser("noneSubject","abc",false);
  manager.newUser("pwdSubject","abc",true);
  manager.newUser("adminSubject","abc",false);
  manager.newUser("schemaSubject","abc",false);
  manager.newUser("readWriteSubject","abc",false);
  manager.newUser("readSubject","123",false);
  manager.addUserToRole("adminSubject",ADMIN);
  manager.addUserToRole("schemaSubject",ARCHITECT);
  manager.addUserToRole("readWriteSubject",PUBLISHER);
  manager.addUserToRole("readSubject",READER);
  manager.newRole("empty");
  noneSubject=manager.login(authToken("noneSubject","abc"));
  pwdSubject=manager.login(authToken("pwdSubject","abc"));
  readSubject=manager.login(authToken("readSubject","123"));
  writeSubject=manager.login(authToken("readWriteSubject","abc"));
  schemaSubject=manager.login(authToken("schemaSubject","abc"));
  adminSubject=manager.login(authToken("adminSubject","abc"));
  db.execute("UNWIND range(0,2) AS number CREATE (:Node {number:number})");
}
