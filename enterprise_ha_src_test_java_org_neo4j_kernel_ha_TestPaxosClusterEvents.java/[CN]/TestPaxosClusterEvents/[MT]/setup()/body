{
  HighlyAvailableGraphDatabase initialDatabase=(HighlyAvailableGraphDatabase)new HighlyAvailableGraphDatabaseFactory().newHighlyAvailableDatabaseBuilder(dir.directory("1",true).getAbsolutePath()).setConfig(HaSettings.cluster_server,"127.0.0.1:5001").setConfig(HaSettings.server_id,"1").setConfig(HaSettings.ha_server,"localhost:6361").newGraphDatabase();
  databases.add(initialDatabase);
  for (int i=0; i < 2; i++) {
    int serverId=i + 2;
    HighlyAvailableGraphDatabase database=(HighlyAvailableGraphDatabase)new HighlyAvailableGraphDatabaseFactory().newHighlyAvailableDatabaseBuilder(dir.directory("" + serverId,true).getAbsolutePath()).setConfig(HaSettings.server_id,serverId + "").setConfig(HaSettings.ha_server,":" + (6362 + i)).setConfig(HaSettings.cluster_server,"localhost:" + (5002 + i)).setConfig(HaSettings.initial_hosts,"127.0.0.1:5001").newGraphDatabase();
    databases.add(database);
  }
  logger.getLogger().info("*** All nodes started");
}
