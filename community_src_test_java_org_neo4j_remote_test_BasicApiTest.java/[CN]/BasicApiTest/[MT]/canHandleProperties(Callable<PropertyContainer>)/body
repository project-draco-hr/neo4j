{
  final Value<PropertyContainer> entity=new Value<PropertyContainer>();
  inTransaction(new Runnable(){
    public void run(){
      try {
        entity.set(factory.call());
      }
 catch (      Exception e) {
        fail("failed to create entity (" + e + ")");
      }
      assignProperties(entity.get());
      verifyProperties(entity.get());
    }
  }
);
  inTransaction(new Runnable(){
    public void run(){
      verifyProperties(entity.get());
    }
  }
);
}
