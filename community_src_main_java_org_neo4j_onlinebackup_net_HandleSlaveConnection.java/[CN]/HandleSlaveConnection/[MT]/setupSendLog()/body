{
  if (retries > 20) {
    close();
  }
  if (!acquireWriteBuffer()) {
    retries++;
    return false;
  }
  log("Setup log: " + logVersionToSend);
  try {
    logToSend.read(buffer);
  }
 catch (  IOException e) {
    log("Error reading log",e);
    close();
    return true;
  }
  buffer.flip();
  setStatus(Status.SEND_LOG);
  retries=0;
  return true;
}
