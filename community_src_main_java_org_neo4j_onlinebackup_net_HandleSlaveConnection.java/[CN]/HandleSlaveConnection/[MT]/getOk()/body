{
  if (!acquireReadBuffer()) {
    return false;
  }
  try {
    buffer.limit(1);
    int read=connection.read();
    if (read == 1) {
      buffer.flip();
      byte status=buffer.get();
      if (status == HeaderConstants.OK) {
        setStatus(Status.SETUP_SEND_LOG);
      }
 else       if (status == HeaderConstants.NOT_OK) {
        setStatus(Status.GET_MESSAGE);
        logVersionToSend=-1;
        logLength=-1;
        logToSend=null;
      }
 else {
        log("Unkown ok message: " + status);
        close();
      }
      log("Get ok: " + status);
      retries=0;
      return true;
    }
 else {
      retries++;
      return false;
    }
  }
  finally {
    releaseReadBuffer();
  }
}
