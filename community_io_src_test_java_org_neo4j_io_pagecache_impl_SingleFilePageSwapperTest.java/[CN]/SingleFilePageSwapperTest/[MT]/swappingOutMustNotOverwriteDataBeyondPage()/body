{
  byte[] initialData=new byte[]{1,2,3,4,5,6,7,8,9,10};
  byte[] finalData=new byte[]{1,2,3,4,8,7,6,5,9,10};
  StoreChannel channel=fs.create(file);
  channel.writeAll(wrap(initialData));
  channel.close();
  byte[] change=new byte[]{8,7,6,5};
  ByteBufferPage page=new ByteBufferPage(wrap(change));
  PageSwapperFactory factory=swapperFactory(fs);
  PageSwapper swapper=factory.createPageSwapper(file,4,null);
  swapper.write(1,page);
  InputStream stream=fs.openAsInputStream(file);
  byte[] actual=new byte[(int)fs.getFileSize(file)];
  stream.read(actual);
  assertThat(actual,byteArray(finalData));
}
