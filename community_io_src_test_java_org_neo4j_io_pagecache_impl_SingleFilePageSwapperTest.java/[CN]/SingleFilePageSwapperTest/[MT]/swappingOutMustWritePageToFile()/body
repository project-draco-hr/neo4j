{
  fs.create(file).close();
  byte[] expected=new byte[]{1,2,3,4};
  ByteBufferPage page=new ByteBufferPage(wrap(expected));
  PageSwapperFactory factory=swapperFactory(fs);
  PageSwapper swapper=factory.createPageSwapper(file,4,null);
  swapper.write(0,page);
  InputStream stream=fs.openAsInputStream(file);
  byte[] actual=new byte[expected.length];
  stream.read(actual);
  assertThat(actual,byteArray(expected));
}
