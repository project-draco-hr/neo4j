{
  PropertyRecord propertyRecord=getPropertyRecord(propertyId);
  if (propertyRecord == null) {
    propertyRecord=getPropertyStore().getRecord(propertyId,readFromBuffer);
    addPropertyRecord(propertyRecord);
  }
  if (propertyRecord.isLight()) {
    getPropertyStore().makeHeavy(propertyRecord,readFromBuffer);
  }
  if (propertyRecord.getType() == PropertyType.STRING) {
    for (    DynamicRecord record : propertyRecord.getValueRecords()) {
      record.setInUse(false);
    }
  }
  getPropertyStore().encodeValue(propertyRecord,value);
  addPropertyRecord(propertyRecord);
}
