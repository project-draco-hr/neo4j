{
  try {
    try (IndexReader reader=indexProxy.newReader()){
      ValueSampler sampler=indexProxy.config().isUnique() ? new UniqueIndexSampler() : new NonUniqueIndexSampler(numOfUniqueElements);
      reader.sampleIndex(sampler);
      Register.DoubleLongRegister sample=Registers.newDoubleLongRegister();
      final long indexSize=sampler.result(sample);
      if (indexProxy.getState() == ONLINE) {
        storeView.setIndexCounts(indexDescriptor,sample.readFirst(),sample.readSecond(),indexSize);
      }
    }
   }
 catch (  IndexNotFoundKernelException e) {
    logger.warn("Attempted to sample missing/already deleted index " + indexDescriptor);
  }
}
