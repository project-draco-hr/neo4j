{
  List<String> allArgs=new ArrayList<>(Arrays.asList("java","-cp",System.getProperty("java.class.path"),TestPullUpdatesApplied.class.getName()));
  allArgs.addAll(Arrays.asList(args));
  Process p=Runtime.getRuntime().exec(allArgs.toArray(new String[allArgs.size()]));
  List<Thread> threads=new LinkedList<>();
  launchStreamConsumers(threads,p);
  Thread.sleep(10000);
  p.destroy();
  for (  Thread t : threads) {
    t.join();
  }
  return 0;
}
