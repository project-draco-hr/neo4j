{
  try {
    ConsensusOutcome outcome=raftInstance.handle(raftMessage);
    if (outcome.needsFreshSnapshot()) {
      raftStateMachine.notifyNeedFreshSnapshot();
    }
 else {
      raftStateMachine.notifyCommitted(outcome.getCommitIndex());
    }
  }
 catch (  Throwable e) {
    raftInstance.stopTimers();
    localDatabase.panic(e);
  }
}
