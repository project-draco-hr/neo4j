{
  IndexSamplingController controller=new IndexSamplingController(jobFactory,tracker,snapshotProvider);
  when(tracker.canExecuteMoreSamplingJobs()).thenReturn(true);
  when(indexProxy.getState()).thenReturn(ONLINE);
  controller.run();
  Runnable runnable=verify(jobFactory).create(indexProxy);
  verify(tracker).scheduleSamplingJob(runnable);
  verify(tracker,times(2)).canExecuteMoreSamplingJobs();
  verifyNoMoreInteractions(jobFactory,tracker);
}
