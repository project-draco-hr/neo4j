{
  buffer.clear();
  byte inUse=record.inUse() ? Record.IN_USE.byteValue() : Record.NOT_IN_USE.byteValue();
  buffer.put(PROP_COMMAND);
  buffer.putInt(record.getId()).put(inUse);
  record.setTransferStartPosition(fileChannel,fileChannel.position() + 5);
  if (record.inUse()) {
    buffer.putInt(record.getType().intValue()).putInt(record.getKeyIndexId()).putLong(record.getPropBlock()).putInt(record.getPrevProp()).putInt(record.getNextProp());
    record.setTransferCount(25);
  }
 else {
    record.setTransferCount(1);
  }
  if (record.isLight()) {
    buffer.putInt(0);
    buffer.flip();
    fileChannel.write(buffer);
  }
 else {
    Collection<DynamicRecord> valueRecords=record.getValueRecords();
    buffer.putInt(valueRecords.size());
    buffer.flip();
    fileChannel.write(buffer);
    for (    DynamicRecord valueRecord : valueRecords) {
      writeDynamicRecord(fileChannel,valueRecord,buffer);
    }
  }
}
