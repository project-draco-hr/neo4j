{
  state.relationshipDoDelete(1l,1,1l,2l);
  state.relationshipDoDelete(2l,1,1l,1l);
  when(storeStatement.acquireSingleRelationshipCursor(1l)).thenReturn(asRelationshipCursor(1l,1,1l,2l,asPropertyCursor()));
  when(storeStatement.acquireSingleRelationshipCursor(2l)).thenReturn(asRelationshipCursor(2l,1,1l,1l,asPropertyCursor(Property.stringProperty(1,"p"))));
  when(ops.propertyKeyGetName(1)).thenReturn("key");
  TxStateTransactionDataSnapshot snapshot=snapshot();
  assertThat(idList(snapshot.deletedRelationships()),equalTo(asList(1l,2l)));
  assertThat(single(snapshot.removedRelationshipProperties()).key(),equalTo("key"));
}
