{
  DefinedProperty prevValue=stringProperty(1,"prevValue");
  state.relationshipDoRemoveProperty(1l,prevValue);
  when(ops.propertyKeyGetName(1)).thenReturn("theKey");
  when(ops.relationshipGetProperty(1,1)).thenReturn(prevValue);
  Iterable<PropertyEntry<Relationship>> propertyEntries=snapshot().removedRelationshipProperties();
  PropertyEntry<Relationship> entry=single(propertyEntries);
  assertThat(entry.key(),equalTo("theKey"));
  assertThat(entry.previouslyCommitedValue(),equalTo((Object)"prevValue"));
  assertThat(entry.entity().getId(),equalTo(1l));
}
