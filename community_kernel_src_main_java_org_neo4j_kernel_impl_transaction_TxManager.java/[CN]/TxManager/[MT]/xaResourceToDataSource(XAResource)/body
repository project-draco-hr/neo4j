{
  byte[] participantBranchId=xaDsManager.getBranchId(participant);
  for (  XaDataSource dataSource : xaDsManager.getAllRegisteredDataSources()) {
    if (Arrays.equals(participantBranchId,dataSource.getBranchId())) {
      return dataSource;
    }
  }
  throw logAndReturn("TM recovery data source not found",new TransactionFailureException("Data source for recovery participant " + participant + ", "+ Arrays.toString(participantBranchId)+ " couldn't be found"));
}
