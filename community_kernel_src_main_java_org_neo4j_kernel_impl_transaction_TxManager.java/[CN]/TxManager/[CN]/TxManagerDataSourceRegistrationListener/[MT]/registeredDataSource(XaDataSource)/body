{
  branches.put(new RecoveredBranchInfo(ds.getBranchId()),true);
  boolean everythingRegistered=true;
  for (  boolean dsRegistered : branches.values()) {
    everythingRegistered&=dsRegistered;
  }
  if (everythingRegistered) {
    doRecovery();
  }
}
