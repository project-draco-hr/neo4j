{
  AtomicBoolean nextReadIsInconsistent=new AtomicBoolean(false);
  PageCache pageCache=pageCacheRule.getPageCache(fs);
  pageCache=pageCacheRule.withInconsistentReads(pageCache,nextReadIsInconsistent);
  StoreFactory factory=factory(null,pageCache);
  try (NeoStores neoStores=factory.openNeoStores(SF_CREATE)){
    RelationshipGroupStore relationshipGroupStore=neoStores.getRelationshipGroupStore();
    RelationshipGroupRecord record=new RelationshipGroupRecord(1,2,3,4,5,6,true);
    relationshipGroupStore.updateRecord(record);
    nextReadIsInconsistent.set(true);
    RelationshipGroupRecord readBack=relationshipGroupStore.getRecord(1);
    assertThat(readBack.toString(),equalTo(record.toString()));
  }
 }
