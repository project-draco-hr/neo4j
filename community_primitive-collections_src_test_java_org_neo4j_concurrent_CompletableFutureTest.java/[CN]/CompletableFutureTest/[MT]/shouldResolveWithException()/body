{
  CompletableFuture<Integer> future=new CompletableFuture<>();
  Throwable ex=new Exception();
  future.completeExceptionally(ex);
  assertThat(future.isDone(),is(true));
  assertThat(future.isCancelled(),is(false));
  try {
    future.get();
    fail("expected exception not thrown");
  }
 catch (  ExecutionException e) {
    assertThat(e.getCause(),sameInstance(ex));
  }
}
