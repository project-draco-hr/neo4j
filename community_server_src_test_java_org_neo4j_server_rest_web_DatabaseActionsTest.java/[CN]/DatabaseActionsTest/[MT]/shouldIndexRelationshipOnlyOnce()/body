{
  long relationshipId=graphdbHelper.createRelationship("FOO");
  graphdbHelper.createRelationshipIndex("myIndex");
  try (Transaction tx=graph.beginTx()){
    Pair<IndexedEntityRepresentation,Boolean> result=actions.getOrCreateIndexedRelationship("myIndex","foo","bar",relationshipId,null,null,null,null);
    assertThat(result.other(),is(true));
    assertThat(serialize(actions.getIndexedRelationships("myIndex","foo","bar")).size(),is(1));
    assertThat(actions.relationshipIsIndexed("myIndex","foo","bar",relationshipId),is(true));
    tx.success();
  }
   try (Transaction tx=graph.beginTx()){
    Pair<IndexedEntityRepresentation,Boolean> result=actions.getOrCreateIndexedRelationship("myIndex","foo","bar",relationshipId,null,null,null,null);
    assertThat(result.other(),is(false));
    assertThat(serialize(actions.getIndexedRelationships("myIndex","foo","bar")).size(),is(1));
    assertThat(actions.relationshipIsIndexed("myIndex","foo","bar",relationshipId),is(true));
    tx.success();
  }
 }
