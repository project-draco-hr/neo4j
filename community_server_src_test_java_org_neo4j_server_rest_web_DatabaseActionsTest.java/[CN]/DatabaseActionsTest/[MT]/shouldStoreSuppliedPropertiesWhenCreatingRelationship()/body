{
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put("string","value");
  properties.put("integer",17);
  long relId=actions.createRelationship(graphdbHelper.createNode(),graphdbHelper.createNode(),"LOVES",properties).getId();
  try (Transaction tx=database.getGraph().beginTx()){
    Relationship rel=database.getGraph().getRelationshipById(relId);
    for (    String key : rel.getPropertyKeys()) {
      assertTrue("extra property stored",properties.containsKey(key));
    }
    for (    Map.Entry<String,Object> entry : properties.entrySet()) {
      assertEquals(entry.getValue(),rel.getProperty(entry.getKey()));
    }
  }
 }
