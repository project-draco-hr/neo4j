{
  final TransactionHandle transactionHandle;
  try {
    AccessMode accessMode=AuthorizedRequestWrapper.getAccessModeFromHttpServletRequest(request);
    transactionHandle=facade.newTransactionHandle(uriScheme,true,accessMode);
  }
 catch (  TransactionLifecycleException e) {
    return invalidTransaction(e,uriInfo.getBaseUri());
  }
  final StreamingOutput streamingResults=executeStatementsAndCommit(input,transactionHandle,uriInfo.getBaseUri(),request);
  return okResponse(streamingResults);
}
