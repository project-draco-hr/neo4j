{
  String expectedBundleSymbolicName="OSGiAwareBundle";
  InputStream bundleStream=newBundle().add(LifecycleActivator.class).set(Constants.BUNDLE_SYMBOLICNAME,expectedBundleSymbolicName).set(Constants.EXPORT_PACKAGE,"org.neo4j.server.osgi.bundles.aware").set(Constants.IMPORT_PACKAGE,"org.neo4j.server.osgi.bundles.aware, org.osgi.framework").set(Constants.BUNDLE_ACTIVATOR,LifecycleActivator.class.getName()).build(withBnd());
  File awareJar=new File(container.getBundleDirectory(),"aware.jar");
  OutputStream jarOutputStream=new FileOutputStream(awareJar);
  StreamUtils.copyStream(bundleStream,jarOutputStream,true);
  container.start();
  Bundle awareBundle=container.getBundles()[1];
  assertNotNull(awareBundle);
  assertThat(awareBundle.getState(),is(Bundle.ACTIVE));
  container.shutdown();
}
