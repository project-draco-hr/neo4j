{
  boolean global=name == null;
  if (globalMode == null) {
    globalMode=global;
  }
 else {
    if (global != globalMode.booleanValue()) {
      throw new IllegalStateException("Mixing specified and unspecified group belongings " + "in a single import isn't supported");
    }
  }
  if (global) {
    return Group.GLOBAL;
  }
  Group group=groups.get(name);
  if (group == null) {
    groups.put(name,group=new Group.Adapter(nextId++,name));
  }
  return group;
}
