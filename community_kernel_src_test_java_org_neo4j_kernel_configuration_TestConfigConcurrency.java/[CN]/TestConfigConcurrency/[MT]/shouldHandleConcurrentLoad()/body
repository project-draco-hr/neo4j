{
  Config config=new Config();
  List<Thread> threads=new ArrayList<>();
  List<ConfigHammer> hammers=new ArrayList<>();
  int numThreads=10;
  while (numThreads-- > 0) {
    ConfigHammer configHammer=new ConfigHammer(config);
    Thread thread=new Thread(configHammer);
    thread.start();
    threads.add(thread);
    hammers.add(configHammer);
  }
  for (  Thread thread : threads)   thread.join();
  for (  ConfigHammer hammer : hammers)   if (hammer.failure != null)   throw hammer.failure;
}
