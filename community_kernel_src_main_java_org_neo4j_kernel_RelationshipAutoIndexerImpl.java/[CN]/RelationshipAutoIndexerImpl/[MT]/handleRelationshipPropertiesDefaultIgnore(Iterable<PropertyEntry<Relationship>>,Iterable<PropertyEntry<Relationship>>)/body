{
  final Index<Relationship> relIndex=getRelationshipIndexInternal();
  for (  PropertyEntry<Relationship> entry : assigned) {
    if (!relPropertyKeysToIgnore.contains(entry.key())) {
      Object previousValue=entry.previouslyCommitedValue();
      String key=entry.key();
      if (previousValue != null) {
        relIndex.remove(entry.entity(),key,previousValue);
      }
      relIndex.add(entry.entity(),key,entry.value());
    }
  }
  for (  PropertyEntry<Relationship> entry : removed) {
    if (!relPropertyKeysToIgnore.contains(entry.key())) {
      Object previouslyCommitedValue=entry.previouslyCommitedValue();
      if (previouslyCommitedValue != null) {
        relIndex.remove(entry.entity(),entry.key(),previouslyCommitedValue);
      }
    }
  }
}
