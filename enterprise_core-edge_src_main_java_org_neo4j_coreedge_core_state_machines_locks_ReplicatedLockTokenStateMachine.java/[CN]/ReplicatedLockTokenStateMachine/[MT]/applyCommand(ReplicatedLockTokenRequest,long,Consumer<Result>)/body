{
  if (commandIndex <= state().ordinal()) {
    return;
  }
  boolean requestAccepted=tokenRequest.id() == LockToken.nextCandidateId(currentToken().id());
  if (requestAccepted) {
    state().set(tokenRequest,commandIndex);
  }
  callback.accept(Result.of(requestAccepted));
}
