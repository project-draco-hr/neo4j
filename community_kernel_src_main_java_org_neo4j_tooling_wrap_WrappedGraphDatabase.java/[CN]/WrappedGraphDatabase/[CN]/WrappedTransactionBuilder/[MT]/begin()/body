{
  boolean openTx;
  try {
    graphdb.onBeginTransaction();
    openTx=true;
  }
 catch (  TransactionNotAllowedException exception) {
    exception.throwCause();
    openTx=false;
  }
  return new WrappedTransaction(graphdb,openTx ? wrapped.begin() : null);
}
