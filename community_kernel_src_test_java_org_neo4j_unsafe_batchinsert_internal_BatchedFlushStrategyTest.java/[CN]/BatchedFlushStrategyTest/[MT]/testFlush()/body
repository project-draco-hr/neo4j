{
  DirectRecordAccessSet recordAccessSet=Mockito.mock(DirectRecordAccessSet.class);
  BatchInserterImpl.BatchedFlushStrategy flushStrategy=createFlushStrategy(recordAccessSet,2);
  flushStrategy.flush();
  Mockito.verifyZeroInteractions(recordAccessSet);
  flushStrategy.flush();
  Mockito.verify(recordAccessSet).commit();
  Mockito.reset(recordAccessSet);
  flushStrategy.flush();
  flushStrategy.flush();
  flushStrategy.flush();
  flushStrategy.flush();
  flushStrategy.flush();
  flushStrategy.flush();
  flushStrategy.flush();
  Mockito.verify(recordAccessSet,Mockito.times(3)).commit();
}
