{
  inMemoryTermState.failIfInvalid(newTerm);
  try {
    if (needsToWriteToDisk(newTerm)) {
      InMemoryTermState tempState=new InMemoryTermState(inMemoryTermState);
      tempState.update(newTerm);
      statePersister.persistStoreData(tempState);
      inMemoryTermState=tempState;
    }
  }
 catch (  IOException e) {
    throw new RaftStorageException(e);
  }
}
