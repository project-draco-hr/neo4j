{
  this.lockMaps=new ConcurrentMap[findMaxResourceId(resourceTypes)];
  this.resourceTypes=new ResourceType[findMaxResourceId(resourceTypes)];
  WaitStrategy<AcquireLockTimeoutException>[] waitStrategies=new WaitStrategy[findMaxResourceId(resourceTypes)];
  for (  ResourceType type : resourceTypes) {
    this.lockMaps[type.typeId()]=new ConcurrentHashMap<>(16,0.6f,512);
    waitStrategies[type.typeId()]=type.waitStrategy();
    this.resourceTypes[type.typeId()]=type;
  }
  clientPool=new ForsetiClientFlyweightPool(lockMaps,waitStrategies,new DefaultDeadlockStrategy());
}
