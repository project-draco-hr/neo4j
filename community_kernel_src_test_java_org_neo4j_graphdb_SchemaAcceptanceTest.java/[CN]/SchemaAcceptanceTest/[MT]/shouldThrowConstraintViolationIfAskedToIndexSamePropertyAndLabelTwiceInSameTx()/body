{
  GraphDatabaseService beansAPI=dbRule.getGraphDatabaseService();
  Schema schema=beansAPI.schema();
  String property="my_property_key";
  Transaction tx=beansAPI.beginTx();
  try {
    schema.indexCreator(Labels.MY_LABEL).on(property).create();
    try {
      schema.indexCreator(Labels.MY_LABEL).on(property).create();
      fail("Should not have validated");
    }
 catch (    ConstraintViolationException e) {
      assertThat(e.getMessage(),containsString("Unable to create index"));
    }
    tx.success();
  }
  finally {
    tx.finish();
  }
}
