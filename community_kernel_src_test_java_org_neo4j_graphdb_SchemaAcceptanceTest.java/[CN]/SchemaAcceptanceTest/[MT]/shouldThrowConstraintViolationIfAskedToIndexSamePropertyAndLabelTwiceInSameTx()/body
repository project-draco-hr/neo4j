{
  Schema schema=db.schema();
  Transaction tx=db.beginTx();
  try {
    schema.indexCreator(label).on(propertyKey).create();
    try {
      schema.indexCreator(label).on(propertyKey).create();
      fail("Should not have validated");
    }
 catch (    ConstraintViolationException e) {
      assertEquals(e.getMessage(),"There already exists an index for label 'MY_LABEL' on property" + " 'my_property_key'.");
    }
    tx.success();
  }
  finally {
    tx.finish();
  }
}
