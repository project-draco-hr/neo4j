{
  IndexDefinition index=createIndex(label,propertyKey);
  Transaction tx=db.beginTx();
  try {
    index.drop();
    try {
      index.drop();
      fail("Should not be able to drop index twice");
    }
 catch (    ConstraintViolationException e) {
      assertThat(e.getMessage(),containsString("Unable to drop index"));
    }
    tx.success();
  }
  finally {
    tx.finish();
  }
  assertFalse("Index should have been deleted",asSet(db.schema().getIndexes(label)).contains(index));
}
