{
  Transaction transaction=db.beginTx();
  try {
    db.createNode(label).setProperty(propertyKey,"value1");
    db.createNode(label).setProperty(propertyKey,"value1");
    transaction.success();
  }
  finally {
    transaction.finish();
  }
  try {
    createConstraint(label,propertyKey);
    fail("Expected exception to be thrown");
  }
 catch (  ConstraintViolationException e) {
    assertEquals(String.format("Unable to create CONSTRAINT ON ( my_label:MY_LABEL ) ASSERT my_label.my_property_key " + "IS UNIQUE:%nMultiple nodes with label `MY_LABEL` have property `my_property_key` = " + "'value1':%n"+ "  node(1)%n"+ "  node(2)"),e.getMessage());
  }
}
