{
  Transaction tx=db.beginTx();
  Schema schema=db.schema();
  schema.indexFor(label).on(propertyKey).create();
  tx.success();
  tx.finish();
  ConstraintViolationException caught=null;
  tx=db.beginTx();
  try {
    schema.indexFor(label).on(propertyKey).create();
    tx.success();
  }
 catch (  ConstraintViolationException e) {
    caught=e;
  }
 finally {
    tx.finish();
  }
  assertThat(caught,not(nullValue()));
}
