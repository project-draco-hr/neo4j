{
  GraphDatabaseService beansAPI=dbRule.getGraphDatabaseService();
  Schema schema=beansAPI.schema();
  String property="my_property_key";
  Transaction tx=beansAPI.beginTx();
  schema.createIndex(Labels.MY_LABEL,property);
  tx.success();
  tx.finish();
  ConstraintViolationException caught=null;
  tx=beansAPI.beginTx();
  try {
    schema.createIndex(Labels.MY_LABEL,property);
    tx.success();
  }
 catch (  ConstraintViolationException e) {
    caught=e;
  }
 finally {
    tx.finish();
  }
  assertThat(caught,not(nullValue()));
}
