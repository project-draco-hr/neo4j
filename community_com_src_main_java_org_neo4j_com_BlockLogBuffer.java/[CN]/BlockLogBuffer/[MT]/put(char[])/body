{
  for (int bytePos=0; bytePos < chars.length * 2; ) {
    int bytesToWrite=Math.min(byteBuffer.remaining(),chars.length * 2 - bytePos);
    bytesToWrite-=(bytesToWrite % 2);
    for (int i=0; i < bytesToWrite / 2; i++) {
      byteBuffer.putChar(chars[(bytePos / 2) + i]);
    }
    checkFlush();
    bytePos+=bytesToWrite;
  }
  return this;
}
