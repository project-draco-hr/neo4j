{
  if (injectLatchPredicate.accept(deps.db())) {
    ControlledSchemaIndexProvider provider=new ControlledSchemaIndexProvider(new LuceneSchemaIndexProvider(DirectoryFactory.PERSISTENT,deps.config()));
    perDbIndexProvider.put(deps.db(),provider);
    return provider;
  }
 else {
    return new LuceneSchemaIndexProvider(DirectoryFactory.PERSISTENT,deps.config());
  }
}
