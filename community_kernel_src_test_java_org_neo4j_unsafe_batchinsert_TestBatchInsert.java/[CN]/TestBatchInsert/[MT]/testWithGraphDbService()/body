{
  GraphDatabaseService graphDb=newBatchGraphDatabase();
  Node startNode=graphDb.createNode();
  setProperties(startNode);
  Node endNodes[]=new Node[25];
  Set<Relationship> rels=new HashSet<>();
  for (int i=0; i < 25; i++) {
    endNodes[i]=graphDb.createNode();
    setProperties(endNodes[i]);
    Relationship rel=startNode.createRelationshipTo(endNodes[i],relTypeArray[i % 5]);
    rels.add(rel);
    setProperties(rel);
  }
  for (  Relationship rel : startNode.getRelationships()) {
    assertTrue(rels.contains(rel));
    assertEquals(rel.getStartNode(),startNode);
  }
  setProperties(startNode);
  graphDb.shutdown();
}
