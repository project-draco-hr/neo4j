{
  GraphDatabaseService database=newBatchGraphDatabase();
  DynamicRelationshipType type=DynamicRelationshipType.withName("TEST");
  long relationshipId=database.createNode().createRelationshipTo(database.createNode(),type).getId();
  database.shutdown();
  database=newBatchGraphDatabase();
  Relationship relationship=database.getRelationshipById(relationshipId);
  assertTrue("Relationship#isType returned false for the correct type",relationship.isType(type));
}
