{
  try {
    final Method factoryMethod;
    if (isMXBeanInterface(beanType)) {
      factoryMethod=newMXBeanProxy;
    }
 else {
      factoryMethod=newMBeanProxy;
    }
    return beanType.cast(factoryMethod.invoke(null,getPlatformMBeanServer(),name,beanType));
  }
 catch (  InvocationTargetException exception) {
    throw launderRuntimeException(exception.getTargetException());
  }
catch (  Exception exception) {
    throw new UnsupportedOperationException("Creating Management Bean proxies requires Java 1.6",exception);
  }
}
