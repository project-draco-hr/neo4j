{
  long labelId1=10, labelId2=30, labelId3=4096;
  NodeRecord node=nodeRecordWithInlinedLabels(labelId1,labelId2);
  NodeLabelRecordLogic manipulator=new NodeLabelRecordLogic(node,nodeStore);
  Iterable<DynamicRecord> changedDynamicRecords=manipulator.add(labelId3);
  assertEquals(1,count(changedDynamicRecords));
  assertEquals(dynamicLabelsLongRepresentation(changedDynamicRecords),node.getLabelField());
  assertTrue(Arrays.equals(new long[]{labelId1,labelId2,labelId3},nodeStore.getDynamicLabelsArray(changedDynamicRecords)));
}
