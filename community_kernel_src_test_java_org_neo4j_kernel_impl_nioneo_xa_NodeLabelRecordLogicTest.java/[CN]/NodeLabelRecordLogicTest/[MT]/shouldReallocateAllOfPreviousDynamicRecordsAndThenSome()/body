{
  NodeRecord node=nodeRecordWithDynamicLabels(nodeStore,fourByteLongs(100));
  Set<DynamicRecord> initialRecords=asSet(cloned(node.getDynamicLabelRecords(),DynamicRecord.class));
  NodeLabelRecordLogic manipulator=new NodeLabelRecordLogic(node,nodeStore);
  Set<DynamicRecord> reallocatedRecords=asUniqueSet(manipulator.set(fourByteLongs(5)));
  assertTrue("initial:" + initialRecords + ", reallocated:"+ reallocatedRecords,initialRecords.containsAll(used(reallocatedRecords)));
  assertTrue(used(reallocatedRecords).size() < initialRecords.size());
}
