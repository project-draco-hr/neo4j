{
  ClusterMembers members=clusterMembersWith(member(ID_1,MASTER,true,EXPECTED_STORE_ID,true),member(ID_3,SLAVE,true,EXPECTED_STORE_ID,true),member(ID_4,SLAVE,true,UNEXPECTED_STORE_ID,true),member(ID_5,SLAVE,true,EXPECTED_STORE_ID,true));
  Outcome outcome=new ClusterMemberVersionCheck(members,ID_2,new FakeClock()).doVersionCheck(EXPECTED_STORE_ID,1,SECONDS);
  assertTrue(outcome.hasMismatched());
  assertThat(outcome.getMismatched(),equalTo(singletonMap(ID_4.toIntegerIndex(),UNEXPECTED_STORE_ID)));
  assertFalse(outcome.hasUnavailable());
  verify(members,times(0)).waitForEvent(anyLong());
}
