{
  TransactionManager mockTxManager=mock(TransactionManager.class);
  Transaction mockTopLevelTx=mock(Transaction.class);
  when(mockTxManager.getTransaction()).thenReturn(mockTopLevelTx);
  PlaceboTransaction placeboTx=new PlaceboTransaction(mockTxManager);
  placeboTx.failure();
  placeboTx.finish();
  verify(mockTopLevelTx).setRollbackOnly();
}
