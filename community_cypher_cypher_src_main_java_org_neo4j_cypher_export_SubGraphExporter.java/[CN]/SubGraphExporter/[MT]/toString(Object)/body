{
  if (value == null) {
    return "null";
  }
  if (value instanceof String) {
    return "\"" + ((String)value).replaceAll("\"","\\\\\"") + "\"";
  }
  if (value instanceof Float || value instanceof Double) {
    return String.format("%f",value);
  }
  if (value instanceof Iterator) {
    return toString(((Iterator)value));
  }
  if (value instanceof Iterable) {
    return toString(((Iterable)value).iterator());
  }
  if (value.getClass().isArray()) {
    return arrayToString(value);
  }
  return value.toString();
}
