{
  return new GraphDatabaseFactory(){
    @Override protected GraphDatabaseService newDatabase(    File storeDir,    Map<String,String> config,    GraphDatabaseFacadeFactory.Dependencies dependencies){
      return new CommunityFacadeFactory(){
        @Override protected PlatformModule createPlatform(        File storeDir,        Map<String,String> params,        Dependencies dependencies,        GraphDatabaseFacade graphDatabaseFacade){
          return new PlatformModule(storeDir,params,dependencies,graphDatabaseFacade){
            @Override protected PageCache createPageCache(            FileSystemAbstraction fileSystem,            Config config,            LogService logging,            Tracers tracers){
              return new ExternallyManagedPageCache(delegatePageCache);
            }
          }
;
        }
      }
.newFacade(storeDir,config,dependencies);
    }
  }
;
}
