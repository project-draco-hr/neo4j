{
  buffer.clear();
  buffer.limit(12);
  if (byteChannel.read(buffer) != buffer.limit()) {
    throw new IOException("Unable to read tx 1PC entry");
  }
  buffer.flip();
  int identifier=buffer.getInt();
  long txId=buffer.getLong();
  StartEntry entry=xidIdentMap.get(identifier);
  if (entry == null) {
    throw new IOException("Unable to read tx prepeare entry");
  }
  Xid xid=entry.getXid();
  try {
    XaTransaction xaTx=xaRm.getXaTransaction(xid);
    xaTx.setCommitTxId(txId);
    xaRm.commit(xid,true);
  }
 catch (  XAException e) {
    e.printStackTrace();
    throw new IOException(e.getMessage());
  }
}
