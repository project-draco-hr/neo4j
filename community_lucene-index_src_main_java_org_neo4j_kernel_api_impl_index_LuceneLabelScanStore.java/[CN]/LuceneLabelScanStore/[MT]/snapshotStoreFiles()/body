{
  LuceneSnapshotter snapshotter=new LuceneSnapshotter();
  return readOnly ? snapshotter.snapshot(directoryLocation,directory) : snapshotter.snapshot(directoryLocation,writer);
}
