{
  try {
    fileChannel.position(fileChannel.size());
    writeBuffer.clear();
    while (releasedIdList.size() > 0) {
      long id=releasedIdList.removeFirst();
      if (id == INTEGER_MINUS_ONE) {
        continue;
      }
      writeBuffer.putLong(id);
      if (writeBuffer.position() == writeBuffer.capacity()) {
        writeBuffer.flip();
        fileChannel.write(writeBuffer);
        writeBuffer.clear();
      }
    }
    writeBuffer.flip();
    fileChannel.write(writeBuffer);
    fileChannel.position(totalBytesRead);
  }
 catch (  IOException e) {
    throw new UnderlyingStorageException("Unable to write defragged id " + " batch",e);
  }
}
