{
  Node oldReferenceNode=null;
  try {
    oldReferenceNode=getNeo().getReferenceNode();
  }
 catch (  RuntimeException e) {
  }
  try {
    NeoModule neoModule=((EmbeddedGraphDatabase)getNeo()).getConfig().getNeoModule();
    Node newReferenceNode=getNeo().createNode();
    neoModule.setReferenceNodeId((int)newReferenceNode.getId());
    assertEquals(newReferenceNode,getNeo().getReferenceNode());
    newReferenceNode.delete();
    if (oldReferenceNode != null) {
      neoModule.setReferenceNodeId((int)oldReferenceNode.getId());
      assertEquals(oldReferenceNode,getNeo().getReferenceNode());
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("" + e);
  }
}
