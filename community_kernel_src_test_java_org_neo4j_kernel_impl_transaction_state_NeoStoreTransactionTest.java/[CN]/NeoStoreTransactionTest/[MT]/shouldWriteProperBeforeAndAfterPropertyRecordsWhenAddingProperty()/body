{
  Visitor<Command,RuntimeException> verifier=new Visitor<Command,RuntimeException>(){
    @Override public boolean visit(    Command element){
      if (element instanceof PropertyCommand) {
        PropertyRecord before=((PropertyCommand)element).getBefore();
        assertFalse(before.inUse());
        assertEquals(Collections.<PropertyBlock>emptyList(),before.getPropertyBlocks());
        PropertyRecord after=((PropertyCommand)element).getAfter();
        assertTrue(after.inUse());
        assertEquals(1,count(after.getPropertyBlocks()));
      }
      return true;
    }
  }
;
  TransactionRecordState writeTransaction=newWriteTransaction().first();
  int nodeId=1;
  writeTransaction.nodeCreate(nodeId);
  int propertyKey=1;
  Object value=5;
  writeTransaction.nodeAddProperty(nodeId,propertyKey,value);
  transactionRepresentationOf(writeTransaction);
}
