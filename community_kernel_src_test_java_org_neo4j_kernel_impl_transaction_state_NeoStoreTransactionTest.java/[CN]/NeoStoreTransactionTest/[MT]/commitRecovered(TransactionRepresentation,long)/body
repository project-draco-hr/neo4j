{
  LabelScanStore labelScanStore=mock(LabelScanStore.class);
  when(labelScanStore.newWriter()).thenReturn(mock(LabelScanWriter.class));
  NeoTransactionIndexApplier indexApplier=new NeoTransactionIndexApplier(mockIndexing,labelScanStore,neoStore.getNodeStore(),neoStore.getPropertyStore(),cacheAccessBackDoor,propertyLoader);
  try (LockGroup lockGroup=new LockGroup()){
    NeoTransactionStoreApplier storeApplier=new NeoTransactionStoreApplier(neoStore,mockIndexing,cacheAccessBackDoor,locks,lockGroup,txId,DEFAULT_HIGH_ID_TRACKING,true);
    try (CommandApplierFacade applier=new CommandApplierFacade(storeApplier,indexApplier)){
      recoveredTx.accept(applier);
    }
   }
 }
