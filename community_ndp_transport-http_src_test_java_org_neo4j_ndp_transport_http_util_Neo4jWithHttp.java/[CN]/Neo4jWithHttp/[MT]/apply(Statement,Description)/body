{
  return new Statement(){
    @Override public void evaluate() throws Throwable {
      final GraphDatabaseService gdb=new TestGraphDatabaseFactory().newImpermanentDatabase();
      final GraphDatabaseAPI api=((GraphDatabaseAPI)gdb);
      StringLogger log=api.getDependencyResolver().resolveDependency(Logging.class).getMessagesLog(Session.class);
      listener=life.add(new HttpTransport("localhost",8080,new SessionRegistry(life.add(new StandardSessions(api,log))),log));
      life.start();
      try {
        statement.evaluate();
      }
  finally {
        life.stop();
        gdb.shutdown();
      }
    }
  }
;
}
