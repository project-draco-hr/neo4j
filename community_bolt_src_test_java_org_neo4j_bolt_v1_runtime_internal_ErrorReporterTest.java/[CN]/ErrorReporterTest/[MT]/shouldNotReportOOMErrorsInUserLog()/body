{
  AssertableLogProvider provider=new AssertableLogProvider();
  ErrorReporter reporter=new ErrorReporter(provider.getLog("userLog"),provider.getLog("internalLog"));
  Throwable cause=new OutOfMemoryError("memory is fading");
  Neo4jError error=Neo4jError.from(cause);
  reporter.report(error);
  assertThat(error.status(),equalTo((Status)Status.General.OutOfMemoryError));
  assertThat(error.message(),equalTo("There is not enough memory to perform the current task. Please try increasing " + "'dbms.memory.heap.max_size' in the process wrapper configuration (normally in " + "'conf/neo4j-wrapper"+ ".conf' or, if you are using Neo4j Desktop, found through the user interface) or if you are "+ "running an embedded "+ "installation increase the heap by using '-Xmx' command line flag, and then restart the "+ "database."));
  provider.assertContainsMessageContaining(cause.getClass().getName());
}
