{
  for (  NodeState node : nodeStates.values()) {
    DiffSets<Long> labelDiff=node.getLabelDiffSets();
    visitor.visitNodeLabelChanges(node.getId(),labelDiff.getAdded(),labelDiff.getRemoved());
  }
  indexChanges.accept(indexVisitor(visitor,false));
  constraintIndexChanges.accept(indexVisitor(visitor,true));
  constraintsChanges.accept(new DiffSets.Visitor<UniquenessConstraint>(){
    @Override public void visitAdded(    UniquenessConstraint element){
      visitor.visitAddedConstraint(element,createdConstraintIndexes.get(element));
    }
    @Override public void visitRemoved(    UniquenessConstraint element){
      visitor.visitRemovedConstraint(element);
    }
  }
);
}
