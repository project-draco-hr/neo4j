{
  legacyState.deleteRelationship(id);
  if (addedAndRemovedRels().remove(id)) {
    relsCreatedAndDeletedInTx.add(id);
  }
  if (startNodeId == endNodeId) {
    getOrCreateNodeState(startNodeId).removeRelationship(id,type,Direction.BOTH);
  }
 else {
    getOrCreateNodeState(startNodeId).removeRelationship(id,type,Direction.OUTGOING);
    getOrCreateNodeState(endNodeId).removeRelationship(id,type,Direction.INCOMING);
  }
  if (hasRelationshipsStatesMap()) {
    RelationshipState removed=relationshipStatesMap.remove(id);
    if (removed != null) {
      removed.clear();
    }
  }
  hasChanges=true;
}
