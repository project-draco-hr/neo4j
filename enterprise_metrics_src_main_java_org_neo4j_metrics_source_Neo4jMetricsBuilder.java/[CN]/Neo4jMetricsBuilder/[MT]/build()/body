{
  boolean result=false;
  if (config.get(MetricsSettings.neoTxEnabled)) {
    life.add(new TransactionMetrics(registry,dataSourceManager,transactionCounters));
    result=true;
  }
  if (config.get(MetricsSettings.neoPageCacheEnabled)) {
    life.add(new PageCacheMetrics(registry,pageCacheCounters));
    result=true;
  }
  if (config.get(MetricsSettings.neoCheckPointingEnabled)) {
    life.add(new CheckPointingMetrics(registry,checkPointerMonitor));
    result=true;
  }
  if (config.get(MetricsSettings.neoLogRotationEnabled)) {
    life.add(new LogRotationMetrics(registry,logRotationMonitor));
    result=true;
  }
  if (config.get(MetricsSettings.neoCountsEnabled)) {
    life.add(new EntityCountMetrics(registry,idGeneratorFactory));
    result=true;
  }
  if (config.get(MetricsSettings.neoNetworkEnabled)) {
    life.add(new NetworkMetrics(monitors,registry));
    result=true;
  }
  if (config.get(MetricsSettings.neoClusterEnabled)) {
    final ClusterMembers clusterMembers=resolveClusterMembersOrNull();
    if (clusterMembers != null) {
      life.add(new ClusterMetrics(monitors,registry,clusterMembers));
      result=true;
    }
  }
  if (config.get(MetricsSettings.cypherPlanningEnabled)) {
    life.add(new CypherMetrics(monitors,registry));
    result=true;
  }
  if (config.get(MetricsSettings.jvmGcEnabled)) {
    life.add(new GCMetrics(registry));
    result=true;
  }
  if (config.get(MetricsSettings.jvmThreadsEnabled)) {
    life.add(new ThreadMetrics(registry));
    result=true;
  }
  if (config.get(MetricsSettings.jvmMemoryEnabled)) {
    life.add(new MemoryPoolMetrics(registry));
    result=true;
  }
  if (config.get(MetricsSettings.jvmBuffersEnabled)) {
    life.add(new MemoryBuffersMetrics(registry));
    result=true;
  }
  return result;
}
