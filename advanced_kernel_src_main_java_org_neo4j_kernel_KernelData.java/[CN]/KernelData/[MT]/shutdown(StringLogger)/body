{
  try {
    for (    Map.Entry<KernelExtension<?>,Object> loaded : state.entrySet()) {
      try {
        unload(loaded.getKey(),loaded.getValue());
      }
 catch (      Throwable cause) {
        msgLog.logMessage("Error unloading " + loaded,cause,true);
      }
    }
  }
  finally {
    state.clear();
    removeInstance(instanceId);
  }
}
