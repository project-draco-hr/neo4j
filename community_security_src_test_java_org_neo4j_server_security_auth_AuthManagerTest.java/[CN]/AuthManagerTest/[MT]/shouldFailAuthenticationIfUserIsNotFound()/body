{
  final InMemoryUserRepository users=new InMemoryUserRepository();
  final User user=new User("jake",Credential.forPassword("abc123"),true);
  users.create(user);
  final AuthenticationStrategy authStrategy=mock(AuthenticationStrategy.class);
  final AuthManager manager=new AuthManager(users,authStrategy);
  manager.start();
  AuthenticationResult result=manager.authenticate("unknown","abc123");
  verifyNoMoreInteractions(authStrategy);
  assertThat(result,equalTo(AuthenticationResult.FAILURE));
}
