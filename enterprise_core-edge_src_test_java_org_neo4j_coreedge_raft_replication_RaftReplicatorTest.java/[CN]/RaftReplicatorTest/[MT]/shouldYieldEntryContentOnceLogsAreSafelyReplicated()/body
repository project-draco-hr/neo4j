{
  DirectNetworking net=new DirectNetworking();
  final long leader=0;
  final long[] allMembers={leader,1,2};
  final RaftTestFixture fixture=new RaftTestFixture(net,3,allMembers);
  fixture.members().withId(leader).raftInstance().bootstrapWithInitialMembers(new RaftTestGroup(allMembers));
  fixture.members().withId(leader).timeoutService().invokeTimeout(RaftInstance.Timeouts.ELECTION);
  net.processMessages();
  RaftReplicator<RaftTestMember> replicator=new RaftReplicator<>(fixture.members().withId(leader).raftInstance(),member(0),net.new Outbound(0));
  fixture.members().withId(leader).raftLog().registerListener(replicator);
  ReplicatedContentListener listener=new ReplicatedContentListener();
  replicator.subscribe(listener);
  replicator.replicate(CONTENT);
  net.processMessages();
  assertEquals(CONTENT,listener.getContent().get(3,SECONDS));
}
