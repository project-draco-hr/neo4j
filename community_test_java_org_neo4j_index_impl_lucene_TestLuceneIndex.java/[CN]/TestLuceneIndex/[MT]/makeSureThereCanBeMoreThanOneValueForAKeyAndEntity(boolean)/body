{
  Index<Node> index=provider.nodeIndex("index",LuceneIndexProvider.EXACT_CONFIG);
  String key="name";
  String value1="Lucene";
  String value2="Index";
  String value3="Rules";
  assertCollection(index.query(key,"*"));
  Node node=graphDb.createNode();
  index.add(node,key,value1);
  index.add(node,key,value2);
  if (restartTx) {
    restartTx();
  }
  index.add(node,key,value3);
  assertCollection(index.get(key,value1),node);
  assertCollection(index.get(key,value2),node);
  assertCollection(index.get(key,value3),node);
  assertCollection(index.get(key,"whatever"));
  restartTx();
  assertCollection(index.get(key,value1),node);
  assertCollection(index.get(key,value2),node);
  assertCollection(index.get(key,value3),node);
  assertCollection(index.get(key,"whatever"));
  index.delete();
}
