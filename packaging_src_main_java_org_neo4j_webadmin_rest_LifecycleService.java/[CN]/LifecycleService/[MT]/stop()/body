{
  LifecycleRepresentation status;
  if (DatabaseLocator.databaseIsRunning()) {
    try {
      WebServerFactory.getDefaultWebServer().stopServer();
    }
 catch (    NullPointerException e) {
    }
    DatabaseLocator.shutdownAndBlockGraphDatabase();
    status=new LifecycleRepresentation(LifecycleRepresentation.Status.STOPPED,LifecycleRepresentation.PerformedAction.STOPPED);
  }
 else {
    status=new LifecycleRepresentation(LifecycleRepresentation.Status.STOPPED,LifecycleRepresentation.PerformedAction.NONE);
  }
  serverStatus=LifecycleRepresentation.Status.STOPPED;
  String entity=JsonRenderers.DEFAULT.render(status);
  return addHeaders(Response.ok(entity,JsonRenderers.DEFAULT.getMediaType())).build();
}
