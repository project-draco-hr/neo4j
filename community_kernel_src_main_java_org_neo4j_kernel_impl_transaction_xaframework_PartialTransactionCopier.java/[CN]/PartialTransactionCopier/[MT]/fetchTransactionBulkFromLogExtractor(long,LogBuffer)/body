{
  LogExtractor extractor=new LogExtractor(positionCache,logLoader,monitor,commandReaderFactory,commandWriterFactory,txId,txId);
  InMemoryLogBuffer tempBuffer=new InMemoryLogBuffer();
  extractor.extractNext(tempBuffer);
  ByteBuffer localBuffer=newLogReaderBuffer();
  for (LogEntry readEntry=null; (readEntry=LogIoUtils.readEntry(localBuffer,tempBuffer,commandReader)) != null; ) {
    if (readEntry instanceof LogEntry.Commit) {
      break;
    }
    LogIoUtils.writeLogEntry(readEntry,target,commandWriter);
  }
  return extractor.getLastStartEntry();
}
