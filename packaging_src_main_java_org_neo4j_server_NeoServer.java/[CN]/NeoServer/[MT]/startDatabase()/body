{
  String dbLocation=new File(configurator.configuration().getString(Configurator.DATABASE_LOCATION_PROPERTY_KEY)).getAbsolutePath();
  DatabaseMode mode=DatabaseMode.valueOf(configurator.configuration().getString(Configurator.DB_MODE_KEY,"embedded").toUpperCase());
  Map<String,String> databaseTuningProperties=configurator.getDatabaseTuningProperties();
  if (databaseTuningProperties != null) {
    this.database=new Database(mode,dbLocation,databaseTuningProperties);
  }
 else {
    this.database=new Database(mode,dbLocation);
  }
}
