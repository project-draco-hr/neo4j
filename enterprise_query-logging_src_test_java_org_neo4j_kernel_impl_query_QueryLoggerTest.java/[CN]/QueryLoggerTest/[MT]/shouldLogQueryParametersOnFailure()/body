{
  final AssertableLogProvider logProvider=new AssertableLogProvider();
  QuerySession session=session(SESSION_1_NAME);
  FakeClock clock=new FakeClock();
  QueryLogger queryLogger=queryLoggerWithParams(logProvider,clock);
  RuntimeException failure=new RuntimeException();
  Map<String,Object> params=new HashMap<>();
  params.put("ages",Arrays.asList(41,42,43));
  queryLogger.startQueryExecution(session,QUERY_4,params);
  clock.forward(1,TimeUnit.MILLISECONDS);
  queryLogger.endFailure(session,failure);
  logProvider.assertExactly(inLog(getClass()).error(is("1 ms: {session one} - MATCH (n) WHERE n.age IN {ages} RETURN n - {ages: [41, 42, 43]}"),sameInstance(failure)));
}
