{
  final AssertableLogProvider logProvider=new AssertableLogProvider();
  FakeClock clock=Clocks.fakeClock();
  QueryLogger queryLogger=queryLoggerWithoutParams(logProvider,clock);
  QuerySession session=session(SESSION_1_NAME,"TestUser");
  queryLogger.startQueryExecution(session,QUERY_1,Collections.emptyMap());
  clock.forward(10,TimeUnit.MILLISECONDS);
  queryLogger.endSuccess(session);
  QuerySession anotherSession=session(SESSION_1_NAME,"AnotherUser");
  queryLogger.startQueryExecution(anotherSession,QUERY_1,Collections.emptyMap());
  clock.forward(10,TimeUnit.MILLISECONDS);
  queryLogger.endSuccess(anotherSession);
  logProvider.assertExactly(inLog(getClass()).info("%d ms: %s - %s",10L,"{session one} [TestUser]",QUERY_1),inLog(getClass()).info("%d ms: %s - %s",10L,"{session one} [AnotherUser]",QUERY_1));
}
