{
  final AssertableLogProvider logProvider=new AssertableLogProvider();
  QuerySession session1=session(SESSION_1_NAME);
  QuerySession session2=session(SESSION_2_NAME);
  QuerySession session3=session(SESSION_3_NAME);
  FakeClock clock=new FakeClock();
  QueryLogger queryLogger=queryLoggerWithoutParams(logProvider,clock);
  queryLogger.startQueryExecution(session1,QUERY_1,Collections.emptyMap());
  clock.forward(1,TimeUnit.MILLISECONDS);
  queryLogger.startQueryExecution(session2,QUERY_2,Collections.emptyMap());
  clock.forward(1,TimeUnit.MILLISECONDS);
  queryLogger.startQueryExecution(session3,QUERY_3,Collections.emptyMap());
  clock.forward(7,TimeUnit.MILLISECONDS);
  queryLogger.endSuccess(session3);
  clock.forward(7,TimeUnit.MILLISECONDS);
  queryLogger.endSuccess(session2);
  clock.forward(7,TimeUnit.MILLISECONDS);
  queryLogger.endSuccess(session1);
  logProvider.assertExactly(inLog(getClass()).info("%d ms: %s - %s",15L,SESSION_2_NAME,QUERY_2),inLog(getClass()).info("%d ms: %s - %s",23L,SESSION_1_NAME,QUERY_1));
}
