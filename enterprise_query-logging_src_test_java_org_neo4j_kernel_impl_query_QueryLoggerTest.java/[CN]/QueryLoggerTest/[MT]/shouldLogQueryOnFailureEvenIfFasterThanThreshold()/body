{
  final AssertableLogProvider logProvider=new AssertableLogProvider();
  ExecutingQuery query=query(0,SESSION_1_NAME,"TestUser",QUERY_1);
  FakeClock clock=Clocks.fakeClock();
  QueryLogger queryLogger=queryLoggerWithoutParams(logProvider,clock);
  RuntimeException failure=new RuntimeException();
  queryLogger.startQueryExecution(query);
  clock.forward(1,TimeUnit.MILLISECONDS);
  queryLogger.endFailure(query,failure);
  logProvider.assertExactly(inLog(getClass()).error(is("1 ms: {session one} [TestUser] - MATCH (n) RETURN n - {}"),sameInstance(failure)));
}
