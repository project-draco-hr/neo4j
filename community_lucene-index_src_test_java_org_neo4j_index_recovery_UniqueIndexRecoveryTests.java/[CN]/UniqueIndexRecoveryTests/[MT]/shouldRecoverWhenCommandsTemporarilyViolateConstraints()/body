{
  Node unLabeledNode=createUnLabeledNode();
  Node labeledNode=createLabeledNode();
  createUniqueConstraint();
  rotateLog();
  setPropertyOnLabeledNode(labeledNode);
  deletePropertyOnLabeledNode(labeledNode);
  addLabelToUnLabeledNode(unLabeledNode);
  flushAll();
  restart(snapshot(storeDir.absolutePath()));
  try (Transaction tx=db.beginTx()){
    assertThat(single(db.findNodesByLabelAndProperty(LABEL,PROPERTY_KEY,PROPERTY_VALUE)),equalTo(unLabeledNode));
    tx.success();
  }
 }
