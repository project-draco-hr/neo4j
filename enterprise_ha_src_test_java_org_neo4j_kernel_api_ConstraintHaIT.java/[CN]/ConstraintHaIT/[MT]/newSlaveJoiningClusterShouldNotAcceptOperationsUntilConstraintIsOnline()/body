{
  ClusterManager.ManagedCluster cluster=clusterRule.startCluster();
  HighlyAvailableGraphDatabase master=cluster.getMaster();
  HighlyAvailableGraphDatabase slave=cluster.getAnySlave();
  File slaveStoreDirectory=cluster.getStoreDir(slave);
  ClusterManager.RepairKit shutdownSlave=cluster.shutdown(slave);
  deleteRecursively(slaveStoreDirectory);
  try (Transaction tx=master.beginTx()){
    createConstraint(master,TYPE,PROPERTY_KEY);
    tx.success();
  }
   slave=shutdownSlave.repair();
  try (Transaction ignored=slave.beginTx()){
    ConstraintDefinition definition=single(slave.schema().getConstraints());
    assertThat(definition,instanceOf(constraintDefinitionClass()));
    assertThat(single(definition.getPropertyKeys()),equalTo(PROPERTY_KEY));
    validateLabelOrRelationshipType(definition);
  }
 }
