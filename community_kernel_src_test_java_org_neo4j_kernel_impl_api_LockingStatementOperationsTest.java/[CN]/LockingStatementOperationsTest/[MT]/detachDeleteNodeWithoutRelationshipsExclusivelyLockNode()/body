{
  long nodeId=1L;
  NodeItem nodeItem=mock(NodeItem.class);
  when(nodeItem.getRelationships(Direction.BOTH)).thenReturn(RelationshipIterator.EMPTY);
  StoreSingleNodeCursor nodeCursor=mock(StoreSingleNodeCursor.class);
  when(nodeCursor.get()).thenReturn(nodeItem);
  when(entityReadOps.nodeCursorById(state,nodeId)).thenReturn(nodeCursor);
  lockingOps.nodeDetachDelete(state,nodeId);
  order.verify(locks).acquireExclusive(ResourceTypes.NODE,nodeId);
  order.verify(locks,times(0)).releaseExclusive(ResourceTypes.NODE,nodeId);
  order.verify(entityWriteOps).nodeDetachDelete(state,nodeId);
}
