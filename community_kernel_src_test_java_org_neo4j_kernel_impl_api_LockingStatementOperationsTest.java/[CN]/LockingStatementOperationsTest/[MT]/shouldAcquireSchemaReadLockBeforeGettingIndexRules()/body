{
  Iterator<IndexDescriptor> rules=Collections.emptyIterator();
  when(schemaReadOps.indexesGetAll(state)).thenReturn(rules);
  Iterator<IndexDescriptor> result=lockingOps.indexesGetAll(state);
  assertSame(rules,result);
  order.verify(locks).acquireShared(ResourceTypes.SCHEMA,schemaResource());
  order.verify(schemaReadOps).indexesGetAll(state);
}
