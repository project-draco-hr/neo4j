{
  EnterpriseDriver driver=null;
  List<String> coordinators=new ArrayList<String>();
  for (int i=0; i < drivers.length; i++) {
    driver=drivers[i];
    driver.up();
    setupZookeeper(driver,i + 1);
    coordinators.add(driver.vm().definition().ip() + ":" + (zooClientPortBase + i + 1));
    driver.runInstall();
    driver.stopService();
  }
  String coordinatorsConfigValue=StringUtils.join(coordinators,",");
  for (int i=0; i < drivers.length; i++) {
    driver=drivers[i];
    String neo4jConf=driver.installDir() + "/conf/neo4j.properties";
    String serverConf=driver.installDir() + "/conf/neo4j-server.properties";
    driver.setConfig(neo4jConf,"ha.cluster_name","mycluster");
    driver.setConfig(neo4jConf,"ha.server_id","" + (i + 1));
    driver.setConfig(neo4jConf,"ha.server","0.0.0.0:6001");
    driver.setConfig(neo4jConf,"ha.coordinators",coordinatorsConfigValue);
    driver.setConfig(serverConf,"org.neo4j.server.database.mode","HA");
    driver.destroyDatabase();
    driver.startService();
  }
}
