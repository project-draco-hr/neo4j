{
  ClusterMemberAvailability availability=mock(ClusterMemberAvailability.class);
  HighAvailabilityModeSwitcher toTest=new HighAvailabilityModeSwitcher(mock(SwitchToSlave.class),mock(SwitchToMaster.class),mock(Election.class),availability,mock(ClusterClient.class),storeSupplierMock(),mock(InstanceId.class),NullLogService.getInstance(),neoStoreDataSourceSupplierMock());
  ModeSwitcher mockSwitcher=mock(ModeSwitcher.class);
  toTest.addModeSwitcher(mockSwitcher);
  toTest.init();
  toTest.start();
  toTest.instanceDetached(new HighAvailabilityMemberChangeEvent(HighAvailabilityMemberState.MASTER,HighAvailabilityMemberState.PENDING,null,null));
  verify(mockSwitcher).switchToSlave();
  verifyZeroInteractions(availability);
}
