{
  FileChannel channel=null;
  try {
    channel=new RandomAccessFile(file,"rw").getChannel();
    channel.write(ByteBuffer.wrap(MAGICK));
    IoPrimitiveUtils.writeInt(channel,buffer(4),VERSION);
    writeMap(channel,nodeConfig);
    writeMap(channel,relConfig);
    channel.force(false);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
 finally {
    close(channel);
  }
}
