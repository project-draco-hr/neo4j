{
  LogPruneStrategies.TransactionCountPruneStrategy pruner=new LogPruneStrategies.TransactionCountPruneStrategy(null,100);
  LogPruneStrategies.Threshold threshold=pruner.newThreshold();
  LogExtractor.LogLoader logLoader=mock(LogExtractor.LogLoader.class);
  when(logLoader.getFirstCommittedTxId(anyLong())).thenThrow(new RuntimeException(new IllegalLogFormatException(3,5)));
  try {
    threshold.reached(null,1,logLoader);
    fail("Should've thrown exception");
  }
 catch (  RuntimeException e) {
    assertThat(e.getMessage(),equalTo("Unable to read database logs, because it contains logs from a newer " + "version of Neo4j."));
  }
}
