{
  if (!directory.exists() && !directory.mkdirs()) {
    throw new IOException("Could not create: " + directory);
  }
  RecoveryProtocol recoveryProtocol=new RecoveryProtocol(fileSystem,fileNames,contentMarshal,logProvider);
  state=recoveryProtocol.run();
  entryStore=new EntryStore(state.segments);
}
