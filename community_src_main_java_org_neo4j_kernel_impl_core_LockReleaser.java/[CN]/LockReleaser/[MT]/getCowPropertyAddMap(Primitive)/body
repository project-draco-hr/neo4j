{
  PrimitiveElement primitiveElement=cowMap.get(getTransaction());
  if (primitiveElement != null && primitive instanceof NodeImpl) {
    ArrayMap<Integer,CowNodeElement> cowElements=primitiveElement.nodes;
    CowNodeElement element=cowElements.get(primitive.id);
    if (element != null) {
      if (element.deleted) {
        throw new IllegalStateException("Node[" + primitive.id + "] has been deleted in this tx");
      }
      return element.propertyAddMap;
    }
  }
 else   if (primitiveElement != null && primitive instanceof RelationshipImpl) {
    ArrayMap<Integer,CowRelElement> cowElements=primitiveElement.relationships;
    CowRelElement element=cowElements.get(primitive.id);
    if (element != null) {
      if (element.deleted) {
        throw new IllegalStateException("Relationship[" + primitive.id + "] has been deleted in this tx");
      }
      return element.propertyAddMap;
    }
  }
  return null;
}
