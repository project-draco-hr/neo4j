{
  Map<String,String> configuration=indexConfigStore.get(Relationship.class,indexName);
  if (configuration == null) {
    throw new LegacyIndexNotFoundKernelException("Relationship index '" + indexName + " not found");
  }
  String providerName=configuration.get(IndexManager.PROVIDER);
  IndexImplementation provider=providerLookup.lookup(providerName);
  LegacyIndexProviderTransaction transaction=transactions.get(providerName);
  if (transaction == null) {
    transactions.put(providerName,transaction=provider.newTransaction(this));
  }
  return transaction.relationshipIndex(indexName,configuration);
}
