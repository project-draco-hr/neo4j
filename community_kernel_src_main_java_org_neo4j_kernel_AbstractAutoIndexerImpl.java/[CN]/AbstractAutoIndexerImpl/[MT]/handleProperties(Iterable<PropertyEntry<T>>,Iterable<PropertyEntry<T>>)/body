{
  final Index<T> nodeIndex=getIndexInternal();
  for (  PropertyEntry<T> entry : assigned) {
    if (propertyKeysToInclude.contains(entry.key())) {
      Object previousValue=entry.previouslyCommitedValue();
      String key=entry.key();
      if (previousValue != null) {
        nodeIndex.remove(entry.entity(),key,previousValue);
      }
      nodeIndex.add(entry.entity(),key,entry.value());
    }
  }
  for (  PropertyEntry<T> entry : removed) {
    if (propertyKeysToInclude.contains(entry.key())) {
      Object previouslyCommitedValue=entry.previouslyCommitedValue();
      if (previouslyCommitedValue != null) {
        nodeIndex.remove(entry.entity(),entry.key(),previouslyCommitedValue);
      }
    }
  }
}
