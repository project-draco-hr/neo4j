{
  scheduler=new Neo4jJobScheduler(StringLogger.DEV_NULL);
  final AtomicInteger invocations=new AtomicInteger(0);
  scheduler.start();
  scheduler.scheduleRecurring(indexPopulation,new Runnable(){
    public void run(){
      invocations.incrementAndGet();
    }
  }
,500,MILLISECONDS);
  sleep(1500);
  scheduler.stop();
  int actualInvocations=invocations.get();
  assertTrue(actualInvocations >= 2);
  assertTrue(actualInvocations < 6);
  sleep(1000);
  assertThat(invocations.get(),equalTo(actualInvocations));
}
