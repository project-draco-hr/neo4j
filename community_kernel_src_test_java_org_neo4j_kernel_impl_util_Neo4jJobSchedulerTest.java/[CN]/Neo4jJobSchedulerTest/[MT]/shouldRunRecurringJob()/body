{
  long period=10;
  scheduler=new Neo4jJobScheduler();
  scheduler.init();
  scheduler.scheduleRecurring(indexPopulation,countInvocationsJob,period,MILLISECONDS);
  awaitFirstInvocation();
  sleep(period * 2);
  scheduler.shutdown();
  int actualInvocations=invocations.get();
  assertThat(actualInvocations,greaterThanOrEqualTo(2));
  assertThat(actualInvocations,lessThan(10));
  sleep(period);
  assertThat(invocations.get(),equalTo(actualInvocations));
}
