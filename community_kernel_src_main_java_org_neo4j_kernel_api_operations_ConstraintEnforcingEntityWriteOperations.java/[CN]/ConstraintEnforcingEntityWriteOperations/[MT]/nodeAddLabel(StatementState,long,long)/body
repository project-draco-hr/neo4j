{
  Iterator<UniquenessConstraint> constraints=schemaReadOperations.constraintsGetForLabel(state,labelId);
  while (constraints.hasNext()) {
    UniquenessConstraint constraint=constraints.next();
    long propertyKeyId=constraint.propertyKeyId();
    Property property;
    try {
      property=entityReadOperations.nodeGetProperty(state,nodeId,propertyKeyId);
    }
 catch (    PropertyKeyIdNotFoundException e) {
      throw new UnableToValidateConstraintKernelException(e);
    }
    if (!property.isNoProperty()) {
      validateNoExistingNodeWithLabelAndProperty(state,labelId,(SafeProperty)property);
    }
  }
  return entityWriteOperations.nodeAddLabel(state,nodeId,labelId);
}
