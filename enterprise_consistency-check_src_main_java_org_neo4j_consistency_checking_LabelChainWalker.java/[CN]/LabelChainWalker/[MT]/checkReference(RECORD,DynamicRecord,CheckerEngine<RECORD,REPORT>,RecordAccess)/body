{
  recordIds.put(dynamicRecord.getId(),dynamicRecord);
  if (dynamicRecord.inUse()) {
    recordList.add(dynamicRecord);
  }
 else {
    allInUse=false;
    validator.onRecordNotInUse(dynamicRecord,engine);
  }
  long nextBlock=dynamicRecord.getNextBlock();
  if (Record.NO_NEXT_BLOCK.is(nextBlock)) {
    if (allInUse) {
      validator.onWellFormedChain(labelIds(recordList),engine,records);
    }
  }
 else {
    if (recordIds.containsKey(nextBlock)) {
      validator.onRecordChainCycle(recordIds.get(nextBlock),engine);
    }
 else {
      engine.comparativeCheck(records.nodeLabels(nextBlock),this);
    }
  }
}
