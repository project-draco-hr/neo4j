{
  int magic=magic(file);
  if (magic == ZIP_MAGIC) {
    ZipFile zipFile=new ZipFile(file);
    ZipEntry entry=getSingleSuitableEntry(zipFile);
    return new InputStreamReader(zipFile.getInputStream(entry),charset){
      @Override public String toString(){
        return file.getPath();
      }
    }
;
  }
 else   if ((magic >>> 16) == GZIP_MAGIC) {
    GZIPInputStream zipStream=new GZIPInputStream(new FileInputStream(file));
    return new InputStreamReader(zipStream,charset){
      @Override public String toString(){
        return file.getPath();
      }
    }
;
  }
  return new InputStreamReader(new FileInputStream(file),charset){
    @Override public String toString(){
      return file.getPath();
    }
  }
;
}
