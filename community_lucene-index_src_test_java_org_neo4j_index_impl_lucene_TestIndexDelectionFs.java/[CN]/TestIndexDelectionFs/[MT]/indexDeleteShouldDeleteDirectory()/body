{
  String indexName="index";
  String otherIndexName="other-index";
  StringBuffer tempPath=new StringBuffer(((GraphDatabaseAPI)db).getStoreDir()).append(File.separator).append("index").append(File.separator).append("lucene").append(File.separator).append("node").append(File.separator);
  File pathToLuceneIndex=new File(tempPath.toString() + indexName);
  File pathToOtherLuceneIndex=new File(tempPath.toString() + otherIndexName);
  Index<Node> index=db.index().forNodes(indexName);
  Index<Node> otherIndex=db.index().forNodes(otherIndexName);
  Transaction tx=db.beginTx();
  Node node=db.createNode();
  index.add(node,"someKey","someValue");
  otherIndex.add(node,"someKey","someValue");
  assertFalse(pathToLuceneIndex.exists());
  assertFalse(pathToOtherLuceneIndex.exists());
  tx.success();
  tx.finish();
  assertTrue(pathToLuceneIndex.exists());
  assertTrue(pathToOtherLuceneIndex.exists());
  tx=db.beginTx();
  index.delete();
  assertTrue(pathToLuceneIndex.exists());
  assertTrue(pathToOtherLuceneIndex.exists());
  tx.success();
  tx.finish();
  assertFalse(pathToLuceneIndex.exists());
  assertTrue(pathToOtherLuceneIndex.exists());
}
