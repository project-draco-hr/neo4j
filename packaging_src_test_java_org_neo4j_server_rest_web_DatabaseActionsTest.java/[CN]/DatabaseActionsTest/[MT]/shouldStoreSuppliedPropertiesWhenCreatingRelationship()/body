{
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put("string","value");
  properties.put("integer",17);
  long relId=actions.createRelationship(graphdbHelper.createNode(),graphdbHelper.createNode(),"LOVES",properties).getId();
  Transaction tx=database.graph.beginTx();
  try {
    Relationship rel=database.graph.getRelationshipById(relId);
    for (    String key : rel.getPropertyKeys()) {
      assertTrue("extra property stored",properties.containsKey(key));
    }
    for (    Map.Entry<String,Object> entry : properties.entrySet()) {
      assertEquals(entry.getValue(),rel.getProperty(entry.getKey()));
    }
  }
  finally {
    tx.finish();
  }
}
