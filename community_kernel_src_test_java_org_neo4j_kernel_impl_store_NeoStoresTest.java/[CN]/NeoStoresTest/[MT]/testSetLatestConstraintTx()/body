{
  Config config=new Config(new HashMap<>(),GraphDatabaseSettings.class);
  StoreFactory sf=new StoreFactory(dir.directory(),config,new DefaultIdGeneratorFactory(fs.get()),pageCacheRule.getPageCache(fs.get()),fs.get(),LowLimitV3_0.RECORD_FORMATS,NullLogProvider.getInstance());
  NeoStores neoStores=sf.openAllNeoStores(true);
  MetaDataStore metaDataStore=neoStores.getMetaDataStore();
  assertEquals(0l,metaDataStore.getLatestConstraintIntroducingTx());
  metaDataStore.setLatestConstraintIntroducingTx(10l);
  assertEquals(10l,metaDataStore.getLatestConstraintIntroducingTx());
  neoStores.flush(IOLimiter.unlimited());
  neoStores.close();
  neoStores=sf.openAllNeoStores();
  assertEquals(10l,neoStores.getMetaDataStore().getLatestConstraintIntroducingTx());
  neoStores.close();
}
