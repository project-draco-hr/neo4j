{
  initializeStores(storeDir,stringMap());
  startTx();
  int relType1=(int)nextId(RelationshipType.class);
  String typeName="relationshiptype1";
  transaction.relationshipTypeDoCreateForName(typeName,relType1);
  long nodeIds[]=new long[3];
  for (int i=0; i < 3; i++) {
    nodeIds[i]=nextId(Node.class);
    transaction.nodeDoCreate(nodeIds[i]);
    nodeAddProperty(nodeIds[i],index("nisse"),new Integer(10 - i));
  }
  for (int i=0; i < 2; i++) {
    transaction.relationshipDoCreate(nextId(Relationship.class),relType1,nodeIds[i],nodeIds[i + 1]);
  }
  commitTx();
  startTx();
  for (int i=0; i < 3; i+=2) {
    try (Cursor<NodeItem> nodeCursor=((KernelStatement)tx.acquireStatement()).getStoreStatement().acquireSingleNodeCursor(nodeIds[i])){
      nodeCursor.next();
      PrimitiveLongIterator relationships=nodeCursor.get().getRelationships(Direction.BOTH);
      while (relationships.hasNext()) {
        relDelete(relationships.next());
      }
    }
     transaction.nodeDoDelete(nodeIds[i]);
  }
  commitTx();
  ds.stop();
}
