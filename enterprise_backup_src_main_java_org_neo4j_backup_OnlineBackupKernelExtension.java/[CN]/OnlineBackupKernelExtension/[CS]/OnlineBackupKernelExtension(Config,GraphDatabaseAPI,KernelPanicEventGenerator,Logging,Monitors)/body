{
  this(config,graphDatabaseAPI,new BackupProvider(){
    @Override public TheBackupInterface newBackup(){
      DependencyResolver resolver=graphDatabaseAPI.getDependencyResolver();
      StoreCopyServer copier=new StoreCopyServer(resolver.resolveDependency(TransactionIdStore.class),resolver.resolveDependency(DataSourceManager.class).getDataSource(),resolver.resolveDependency(FileSystemAbstraction.class),new File(graphDatabaseAPI.getStoreDir()));
      ResponsePacker responsePacker=new ResponsePacker(resolver.resolveDependency(LogicalTransactionStore.class),graphDatabaseAPI);
      return new BackupImpl(copier,responsePacker,monitors);
    }
  }
,monitors,logging);
}
