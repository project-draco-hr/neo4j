{
  this(config,graphDatabaseAPI,new BackupProvider(){
    @Override public TheBackupInterface newBackup(){
      DependencyResolver resolver=graphDatabaseAPI.getDependencyResolver();
      TransactionIdStore transactionIdStore=resolver.resolveDependency(TransactionIdStore.class);
      StoreCopyServer copier=new StoreCopyServer(transactionIdStore,resolver.resolveDependency(DataSourceManager.class).getDataSource(),resolver.resolveDependency(LogRotationControl.class),resolver.resolveDependency(FileSystemAbstraction.class),new File(graphDatabaseAPI.getStoreDir()),monitors.newMonitor(StoreCopyServer.Monitor.class));
      LogicalTransactionStore logicalTransactionStore=resolver.resolveDependency(LogicalTransactionStore.class);
      LogFileInformation logFileInformation=resolver.resolveDependency(LogFileInformation.class);
      return new BackupImpl(copier,monitors,logicalTransactionStore,transactionIdStore,logFileInformation,new Provider<StoreId>(){
        @Override public StoreId instance(){
          return graphDatabaseAPI.storeId();
        }
      }
);
    }
  }
,monitors,logging);
}
