{
  org.neo4j.graphdb.Transaction transaction=this.getDb().beginTx();
  try {
    Object rawCustomPrompt=session.get(PROMPT_KEY);
    String customPrompt=rawCustomPrompt != null ? rawCustomPrompt.toString() : getDefaultPrompt();
    String output=bashInterpreter.interpret(customPrompt,this,session);
    transaction.success();
    return output;
  }
  finally {
    transaction.finish();
  }
}
