{
  if (value instanceof Map<?,?>) {
    out.writeStartObject();
    try {
      for (      Map.Entry<String,?> entry : ((Map<String,?>)value).entrySet()) {
        out.writeFieldName(entry.getKey());
        write(out,format,entry.getValue());
      }
    }
  finally {
      out.writeEndObject();
    }
  }
 else   if (value instanceof Path) {
    write(format,new PathRepresentation<>((Path)value));
  }
 else   if (value instanceof Iterable<?>) {
    out.writeStartArray();
    try {
      for (      Object item : (Iterable<?>)value) {
        write(out,format,item);
      }
    }
  finally {
      out.writeEndArray();
    }
  }
 else   if (value instanceof Node) {
    write(format,new NodeRepresentation((Node)value));
  }
 else   if (value instanceof Relationship) {
    write(format,new RelationshipRepresentation((Relationship)value));
  }
 else {
    out.writeObject(value);
  }
}
