{
  if (value instanceof Map<?,?>) {
    out.writeStartObject();
    try {
      out.writeObjectFieldStart("data");
      try {
        @SuppressWarnings("unchecked") Map<String,?> map=(Map<String,?>)value;
        for (        Map.Entry<String,?> entry : map.entrySet()) {
          out.writeFieldName(entry.getKey());
          write(out,format,entry.getValue());
        }
      }
  finally {
        out.writeEndObject();
      }
    }
  finally {
      out.writeEndObject();
    }
  }
 else   if (value instanceof List<?>) {
    out.writeStartArray();
    try {
      for (      Object item : (List<?>)value) {
        write(out,format,item);
      }
    }
  finally {
      out.writeEndArray();
    }
  }
 else   if (value instanceof Node) {
    write(format,new NodeRepresentation((Node)value));
  }
 else   if (value instanceof Relationship) {
    write(format,new RelationshipRepresentation((Relationship)value));
  }
 else   if (value instanceof Path) {
    write(format,new PathRepresentation<>((Path)value));
  }
 else {
    out.writeObject(value);
  }
}
