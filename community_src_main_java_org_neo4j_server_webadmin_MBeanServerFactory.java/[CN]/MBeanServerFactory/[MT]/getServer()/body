{
  GraphDatabaseService db;
  try {
    NeoServer iNSTANCE=NeoServer.INSTANCE;
    db=iNSTANCE.database();
    if (db != cachedDb) {
      cachedDb=db;
      if (db instanceof EmbeddedGraphDatabase) {
        cachedServer=ManagementFactory.getPlatformMBeanServer();
      }
    }
  }
 catch (  DatabaseBlockedException e1) {
    e1.printStackTrace();
  }
  return cachedServer;
}
