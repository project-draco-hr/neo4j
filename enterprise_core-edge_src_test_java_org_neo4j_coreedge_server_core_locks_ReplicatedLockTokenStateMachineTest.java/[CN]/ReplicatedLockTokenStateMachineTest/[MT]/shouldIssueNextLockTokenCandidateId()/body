{
  DirectReplicator replicator=new DirectReplicator();
  ReplicatedLockTokenStateMachine stateMachine=new ReplicatedLockTokenStateMachine<>(replicator,new InMemoryReplicatedLockTokenState<RaftTestMember>());
  int firstCandidateId=stateMachine.nextCandidateId();
  replicator.replicate(new ReplicatedLockTokenRequest<>(member(0),firstCandidateId));
  assertEquals(firstCandidateId + 1,stateMachine.nextCandidateId());
}
