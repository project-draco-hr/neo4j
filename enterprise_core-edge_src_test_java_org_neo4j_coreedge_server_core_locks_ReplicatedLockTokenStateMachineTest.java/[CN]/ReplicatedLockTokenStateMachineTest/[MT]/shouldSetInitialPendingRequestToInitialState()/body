{
  @SuppressWarnings("unchecked") StateStorage<ReplicatedLockTokenState<Object>> storage=mock(StateStorage.class);
  RaftTestMember initialHoldingRaftTestMember=new RaftTestMember(0);
  ReplicatedLockTokenState<Object> initialState=new ReplicatedLockTokenState<>(123,new ReplicatedLockTokenRequest<>(initialHoldingRaftTestMember,3));
  when(storage.getInitialState()).thenReturn(initialState);
  ReplicatedLockTokenStateMachine<Object> stateMachine=new ReplicatedLockTokenStateMachine<>(storage);
  LockToken initialToken=stateMachine.currentToken();
  assertEquals(initialState.get().owner(),initialToken.owner());
  assertEquals(initialState.get().id(),initialToken.id());
}
