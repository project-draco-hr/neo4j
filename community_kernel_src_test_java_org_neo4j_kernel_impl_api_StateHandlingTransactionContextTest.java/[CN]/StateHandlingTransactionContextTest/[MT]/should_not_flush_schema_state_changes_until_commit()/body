{
  KernelSchemaStateStore stateHolder=mock(KernelSchemaStateStore.class);
  IndexRule rule=new IndexRule(0L,0L,1L);
  StatementContext innerStatementContext=mock(StatementContext.class);
  TransactionContext inner=mock(TransactionContext.class);
  when(inner.newStatementContext()).thenReturn(innerStatementContext);
  PersistenceCache persistenceCache=mock(PersistenceCache.class);
  TransactionState oldState=null;
  TxState txState=null;
  SchemaCache schemaCache=null;
  StateHandlingTransactionContext transactionContext=new StateHandlingTransactionContext(inner,txState,persistenceCache,oldState,schemaCache,stateHolder);
  StatementContext statementContext=transactionContext.newStatementContext();
  statementContext.dropIndexRule(rule);
  verifyZeroInteractions(stateHolder);
  transactionContext.commit();
  verify(stateHolder).flush();
}
