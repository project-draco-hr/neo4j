{
  if (data == null || !(data.getData() instanceof PersistenceMetadata)) {
    String msg="The data for " + event + " is "+ data+ ", which does not implement PersistenceMetadata.";
    throw new IllegalArgumentException(msg);
  }
  PersistenceMetadata entityMetaData=(PersistenceMetadata)data.getData();
  ResourceConnection resource=ResourceBroker.getBroker().acquireResourceConnection(entityMetaData);
  resource.performUpdate(event,data);
}
