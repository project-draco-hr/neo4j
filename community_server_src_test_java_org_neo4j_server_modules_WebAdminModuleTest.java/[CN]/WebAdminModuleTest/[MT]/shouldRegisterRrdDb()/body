{
  WebServer webServer=mock(WebServer.class);
  CommunityNeoServer neoServer=mock(CommunityNeoServer.class);
  when(neoServer.baseUri()).thenReturn(new URI("http://localhost:7575"));
  when(neoServer.getWebServer()).thenReturn(webServer);
  when(neoServer.getConfiguration()).thenReturn(new MapConfiguration(new HashMap<Object,Object>()));
  Database db=mock(Database.class);
  when(neoServer.getDatabase()).thenReturn(db);
  AbstractGraphDatabase graph=mock(AbstractGraphDatabase.class);
  when(db.getGraph()).thenReturn(graph);
  DependencyResolver resolver=mock(DependencyResolver.class);
  when(graph.getDependencyResolver()).thenReturn(resolver);
  NodeManager nodeManagerMock=mock(NodeManager.class);
  when(resolver.resolveDependency(NodeManager.class)).thenReturn(nodeManagerMock);
  WebAdminModule module=new WebAdminModule(webServer,neoServer.getConfiguration(),db);
  module.start(StringLogger.DEV_NULL);
  verify(db).setRrdDb(any(RrdDb.class));
}
