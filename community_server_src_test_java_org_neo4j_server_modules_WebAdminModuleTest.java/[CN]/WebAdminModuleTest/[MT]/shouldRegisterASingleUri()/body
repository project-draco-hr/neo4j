{
  WebServer webServer=mock(WebServer.class);
  NeoServerWithEmbeddedWebServer neoServer=mock(NeoServerWithEmbeddedWebServer.class);
  when(neoServer.baseUri()).thenReturn(new URI("http://localhost:7575"));
  when(neoServer.getWebServer()).thenReturn(webServer);
  Database db=mock(Database.class);
  db.graph=(mock(AbstractGraphDatabase.class));
  Kernel mockKernel=mock(Kernel.class);
  ObjectName mockObjectName=mock(ObjectName.class);
  when(mockKernel.getMBeanQuery()).thenReturn(mockObjectName);
  when(db.graph.getManagementBean(Kernel.class)).thenReturn(mockKernel);
  when(neoServer.getDatabase()).thenReturn(db);
  when(neoServer.getConfiguration()).thenReturn(new MapConfiguration(new HashMap<Object,Object>()));
  WebAdminModule module=new WebAdminModule();
  module.start(neoServer);
  verify(db).setRrdDb(any(RrdDb.class));
}
