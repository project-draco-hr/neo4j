{
  final Map<String,String> map=new HashMap<String,String>();
  map.put(Configurator.DATABASE_LOCATION_PROPERTY_KEY,databaseLocation.getAbsolutePath());
  List<String> packages=extensionPackages.get();
  if (!packages.isEmpty()) {
    map.put(Configurator.THIRD_PARTY_PACKAGES_KEY,toCommaSeparatedString(packages));
  }
  return new Configurator(){
    @Override public Configuration configuration(){
      return new MapConfiguration(map);
    }
    @Override public Map<String,String> getDatabaseTuningProperties(){
      return loadDatabasePropertiesFromFileInDatabaseDirectoryIfExists();
    }
    @Override public Set<ThirdPartyJaxRsPackage> getThirdpartyJaxRsPackages(){
      return Collections.emptySet();
    }
  }
;
}
