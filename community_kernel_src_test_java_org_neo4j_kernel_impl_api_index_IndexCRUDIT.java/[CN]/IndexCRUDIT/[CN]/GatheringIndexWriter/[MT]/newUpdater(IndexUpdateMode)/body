{
  return new CollectingIndexUpdater(){
    @Override public void close() throws IOException, IndexEntryConflictException {
      if (IndexUpdateMode.ONLINE == mode) {
        updatesCommitted.addAll(updates);
      }
    }
    @Override public void remove(    Iterable<Long> nodeIds) throws IOException {
      throw new UnsupportedOperationException("not expected");
    }
  }
;
}
