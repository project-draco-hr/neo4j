{
  if (protocol.isExpecting(NextMessage.FILE_CONTENTS)) {
    int bytesInMessage=msg.readableBytes();
    try (OutputStream outputStream=location.getStoreFileStreams().createStream(destination)){
      msg.readBytes(outputStream,bytesInMessage);
    }
     expectedBytes-=bytesInMessage;
    if (expectedBytes <= 0) {
      protocol.expect(NextMessage.MESSAGE_TYPE);
    }
  }
}
