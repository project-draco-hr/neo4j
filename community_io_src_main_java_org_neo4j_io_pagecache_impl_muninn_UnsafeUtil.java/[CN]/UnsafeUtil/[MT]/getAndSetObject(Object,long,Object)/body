{
  if (getAndSetObject != null) {
    try {
      return getAndSetObject.invokeExact(unsafe,obj,offset,newValue);
    }
 catch (    Throwable throwable) {
      throw new AssertionError("Unexpected intrinsic failure",throwable);
    }
  }
  Object current;
  do {
    current=unsafe.getObjectVolatile(obj,offset);
  }
 while (!unsafe.compareAndSwapObject(obj,offset,current,newValue));
  return current;
}
