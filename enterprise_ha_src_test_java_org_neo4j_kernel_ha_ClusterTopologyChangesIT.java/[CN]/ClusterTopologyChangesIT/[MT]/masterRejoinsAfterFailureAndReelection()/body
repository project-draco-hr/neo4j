{
  HighlyAvailableGraphDatabase initialMaster=cluster.getMaster();
  RepairKit kit=cluster.fail(initialMaster);
  cluster.await(masterAvailable(initialMaster));
  cluster.await(masterSeesSlavesAsAvailable(1));
  repairUsing(kit);
  cluster.await(masterAvailable());
  cluster.await(allSeesAllAsAvailable());
  assertEquals(3,cluster.size());
}
