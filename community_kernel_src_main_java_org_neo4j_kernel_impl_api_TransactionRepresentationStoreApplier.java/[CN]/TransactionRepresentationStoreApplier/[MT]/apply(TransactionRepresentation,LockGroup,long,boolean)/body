{
  NeoTransactionStoreApplier storeApplier=new NeoTransactionStoreApplier(neoStore,indexingService,cacheAccess,lockService,locks,transactionId,highIdTrackerFactory,applyRecovered);
  NeoTransactionIndexApplier indexApplier=new NeoTransactionIndexApplier(indexingService,labelScanStore,neoStore.getNodeStore(),neoStore.getPropertyStore(),cacheAccess,propertyLoader);
  LegacyIndexApplier legacyIndexApplier=new LegacyIndexApplier(indexConfigStore,legacyIndexProviderLookup,legacyIndexTransactionOrdering,transactionId,applyRecovered);
  try (CommandApplierFacade applier=new CommandApplierFacade(storeApplier,indexApplier,legacyIndexApplier)){
    representation.accept(applier);
  }
 }
