{
  if (!stillWorking() && !isCompleted()) {
    done();
    if (downstream != null) {
      downstream.endOfUpstream();
    }
    completed=true;
  }
}
