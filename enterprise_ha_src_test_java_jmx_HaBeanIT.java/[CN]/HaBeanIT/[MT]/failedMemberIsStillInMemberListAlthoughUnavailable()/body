{
  startCluster(3);
  assertEquals(3,ha(cluster.getAnySlave()).getInstancesInCluster().length);
  HighlyAvailableGraphDatabase failedDb=cluster.getAnySlave();
  RepairKit dbFailure=cluster.fail(failedDb);
  await(ha(cluster.getMaster()),dbAvailability(false));
  await(ha(cluster.getAnySlave(failedDb)),dbAvailability(false));
  dbFailure.repair();
  for (  HighlyAvailableGraphDatabase db : cluster.getAllMembers())   await(ha(db),dbAvailability(true));
}
