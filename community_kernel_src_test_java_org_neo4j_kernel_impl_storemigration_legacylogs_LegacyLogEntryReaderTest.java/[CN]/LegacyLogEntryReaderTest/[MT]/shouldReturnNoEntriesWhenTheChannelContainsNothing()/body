{
  final LogEntryReader<VersionableReadableClosablePositionAwareChannel> logEntryReader=mock(LogEntryReader.class);
  when(logEntryReader.readLogEntry(any(VersionableReadableClosablePositionAwareChannel.class))).thenReturn(null);
  final LegacyLogEntryReader reader=new LegacyLogEntryReader(fs,new Function<LogHeader,LogEntryReader<VersionableReadableClosablePositionAwareChannel>>(){
    @Override public LogEntryReader<VersionableReadableClosablePositionAwareChannel> apply(    LogHeader from) throws RuntimeException {
      return logEntryReader;
    }
  }
);
  final IOCursor<LogEntry> cursor=reader.openReadableChannel(input).other();
  assertFalse(cursor.next());
  assertNull(cursor.get());
  cursor.close();
}
