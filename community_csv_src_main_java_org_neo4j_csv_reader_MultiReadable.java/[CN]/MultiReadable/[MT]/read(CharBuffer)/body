{
  int read=0;
  while (cb.hasRemaining()) {
    int readThisTime=current.read(cb);
    if (readThisTime == -1) {
      if (actual.hasNext()) {
        closeCurrent();
        current=actual.next();
        if (readFromCurrent > 0) {
          cb.put('\n');
          readFromCurrent=0;
        }
      }
 else {
        break;
      }
    }
 else {
      read+=readThisTime;
      readFromCurrent+=readThisTime;
    }
  }
  return read == 0 ? -1 : read;
}
