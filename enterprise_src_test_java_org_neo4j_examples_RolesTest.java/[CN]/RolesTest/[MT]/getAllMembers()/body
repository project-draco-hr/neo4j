{
  Transaction tx=graphDb.beginTx();
  try {
    System.out.println("All members:");
    Node referenceNode=graphDb.getReferenceNode();
    Traverser traverser=referenceNode.traverse(Traverser.Order.BREADTH_FIRST,StopEvaluator.END_OF_GRAPH,ReturnableEvaluator.ALL_BUT_START_NODE,RoleRels.ROOT,Direction.INCOMING,RoleRels.PART_OF,Direction.INCOMING,RoleRels.MEMBER_OF,Direction.INCOMING);
    for (    Node group : traverser) {
      if (traverser.currentPosition().lastRelationshipTraversed().isType(RoleRels.MEMBER_OF)) {
        System.out.println(group.getProperty(NAME));
      }
    }
    tx.success();
  }
  finally {
    tx.finish();
  }
}
