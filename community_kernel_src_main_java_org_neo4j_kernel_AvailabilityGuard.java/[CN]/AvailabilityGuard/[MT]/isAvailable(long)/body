{
  int val=available.get();
  if (val == 0) {
    return true;
  }
 else   if (val == -1) {
    return false;
  }
 else {
    long start=clock.currentTimeMillis();
    while (clock.currentTimeMillis() < start + millis) {
      val=available.get();
      if (val == 0)       return true;
 else       if (val == -1)       return false;
      Thread.yield();
    }
    return false;
  }
}
