{
  if (!isAvailable(millis)) {
    EXCEPTION exception;
    try {
      exception=cls.getConstructor(String.class).newInstance("Timeout waiting for database to become available and allow new transactions. Waited " + Format.duration(millis) + ". "+ describeWhoIsBlocking());
    }
 catch (    NoSuchMethodException e) {
      throw new Error("Bad exception class given to this method, it doesn't have a (String) constructor",e);
    }
catch (    Exception e) {
      throw new RuntimeException(e);
    }
    throw exception;
  }
}
