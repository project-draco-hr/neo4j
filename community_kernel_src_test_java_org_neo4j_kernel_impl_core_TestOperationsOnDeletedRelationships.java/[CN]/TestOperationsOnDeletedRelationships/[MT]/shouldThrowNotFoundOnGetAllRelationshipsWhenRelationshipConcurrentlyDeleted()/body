{
  NodeImpl nodeImpl=new NodeImpl(1337l,0l,0l,false);
  NodeManager nodeManager=mock(NodeManager.class);
  Throwable exceptionCaught=null;
  when(nodeManager.getMoreRelationships(any(NodeImpl.class))).thenThrow(new InvalidRecordException("LURING!"));
  try {
    nodeImpl.getAllRelationships(nodeManager,RelIdArray.DirectionWrapper.BOTH);
  }
 catch (  Throwable e) {
    exceptionCaught=e;
  }
  assertThat(exceptionCaught,not(nullValue()));
  assertThat(exceptionCaught,is(instanceOf(NotFoundException.class)));
}
