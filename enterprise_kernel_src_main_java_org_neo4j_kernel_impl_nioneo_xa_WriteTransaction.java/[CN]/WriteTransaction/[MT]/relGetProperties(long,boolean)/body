{
  ArrayMap<Integer,PropertyData> propertyMap=new ArrayMap<Integer,PropertyData>(9,false,true);
  RelationshipRecord relRecord=getRelationshipRecord(relId);
  if (relRecord != null && relRecord.isCreated()) {
    return propertyMap;
  }
  if (relRecord != null) {
    if (!relRecord.inUse() && !light) {
      throw new IllegalStateException("Relationship[" + relId + "] has been deleted in this tx");
    }
  }
  relRecord=getRelationshipStore().getRecord(relId);
  if (!relRecord.inUse()) {
    throw new InvalidRecordException("Relationship[" + relId + "] not in use");
  }
  long nextProp=relRecord.getNextProp();
  while (nextProp != Record.NO_NEXT_PROPERTY.intValue()) {
    PropertyRecord propRecord=getPropertyStore().getLightRecord(nextProp);
    propertyMap.put(propRecord.getKeyIndexId(),new PropertyData(propRecord.getId(),propertyGetValueOrNull(propRecord)));
    nextProp=propRecord.getNextProp();
  }
  return propertyMap;
}
