{
  StoreId remoteStoreId=new StoreId(5,6,7,8);
  when(storeFetcher.getStoreIdOf(remoteMember)).thenReturn(remoteStoreId);
  when(localDatabase.isEmpty()).thenReturn(true);
  downloader.downloadSnapshot(remoteMember,coreState);
  verify(storeFetcher,never()).tryCatchingUp(any(),any(),any());
  verify(storeFetcher).copyStore(remoteMember,remoteStoreId,tempDir);
  verify(localDatabase).replaceWith(tempDir);
}
