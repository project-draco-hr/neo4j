{
  final List<Representation> results=new ArrayList<Representation>();
  while (data.hasNext()) {
    Object value=data.next();
    if (value instanceof Iterable) {
      List<Representation> nested=new ArrayList<Representation>();
      nested.addAll(convertValuesToRepresentations((Iterable)value));
      results.add(new ListRepresentation(getType(nested),nested));
    }
    final Representation representation=getSingleRepresentation(value);
    results.add(representation);
  }
  return new ListRepresentation(getType(results),results);
}
