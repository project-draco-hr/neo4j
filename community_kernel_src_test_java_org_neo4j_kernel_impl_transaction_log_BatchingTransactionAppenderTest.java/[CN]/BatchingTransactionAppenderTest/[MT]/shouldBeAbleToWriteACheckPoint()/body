{
  WritableLogChannel channel=mock(WritableLogChannel.class,RETURNS_MOCKS);
  Flushable flushable=mock(Flushable.class);
  when(channel.emptyBufferIntoChannelAndClearIt()).thenReturn(flushable);
  when(channel.putLong(anyLong())).thenReturn(channel);
  when(logFile.getWriter()).thenReturn(channel);
  BatchingTransactionAppender appender=life.add(new BatchingTransactionAppender(logFile,NO_ROTATION,positionCache,transactionIdStore,BYPASS,kernelHealth));
  appender.checkPoint(new LogPosition(1l,2l),LogCheckPointEvent.NULL);
  verify(channel,times(1)).putLong(1l);
  verify(channel,times(1)).putLong(2l);
  verify(channel,times(1)).emptyBufferIntoChannelAndClearIt();
  verify(flushable,times(1)).flush();
  verifyZeroInteractions(kernelHealth);
}
