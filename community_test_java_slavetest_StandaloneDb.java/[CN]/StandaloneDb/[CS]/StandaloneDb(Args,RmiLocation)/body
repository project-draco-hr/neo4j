{
  super();
  storeDir=args.get("path",null);
  out=new PrintStream(new File(new File(storeDir),"output"));
  System.setOut(out);
  try {
    println("About to start");
    boolean isMaster=args.getBoolean("master",false).booleanValue();
    int machineId=args.getNumber("id",null).intValue();
    AbstractBroker broker=isMaster ? new FakeMasterBroker() : new FakeSlaveBroker();
    this.db=new HighlyAvailableGraphDatabase(storeDir,MapUtil.stringMap(HighlyAvailableGraphDatabase.CONFIG_KEY_HA_MACHINE_ID,"" + machineId),broker);
    println("Started HA db");
    broker.setDb(this.db);
    this.location=location;
    this.location.ensureRegistryCreated();
    this.location.bind(this);
    println("RMI object bound");
  }
 catch (  Exception e) {
    println("Exception",e);
    throw e;
  }
}
