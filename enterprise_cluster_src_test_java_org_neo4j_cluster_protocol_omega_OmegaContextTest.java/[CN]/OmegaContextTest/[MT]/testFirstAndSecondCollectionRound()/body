{
  OmegaContext context=new OmegaContext(Mockito.mock(ClusterContext.class));
  int firstCollectionRound=context.startCollectionRound();
  assertEquals(1,firstCollectionRound);
  assertEquals(Collections.emptyMap(),context.getPreviousViewForCollectionRound(firstCollectionRound));
  assertEquals(0,context.getStatusResponsesForRound(firstCollectionRound));
  State state1=new State(new EpochNumber(),1);
  State state2=new State(new EpochNumber(),1);
  URI uri1=new URI("neo4j://server1");
  URI uri2=new URI("neo4j://server2");
  Map<URI,State> registry=new HashMap<URI,State>();
  registry.put(uri1,state1);
  registry.put(uri2,state2);
  Map<URI,State> emptyView=Collections.emptyMap();
  context.responseReceivedForRound(firstCollectionRound,uri1,emptyView);
  assertEquals(1,context.getStatusResponsesForRound(firstCollectionRound));
  context.responseReceivedForRound(firstCollectionRound,uri2,emptyView);
  assertEquals(2,context.getStatusResponsesForRound(firstCollectionRound));
  context.collectionRoundDone(firstCollectionRound);
  int secondCollectionRound=context.startCollectionRound();
  assertEquals(secondCollectionRound,firstCollectionRound + 1);
  assertEquals(context.getViews(),context.getPreviousViewForCollectionRound(secondCollectionRound));
}
