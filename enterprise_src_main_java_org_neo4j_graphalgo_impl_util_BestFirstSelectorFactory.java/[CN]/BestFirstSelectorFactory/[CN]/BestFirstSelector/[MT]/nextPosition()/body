{
  while (true) {
    ExpansionSource next=current.next();
    if (next != null) {
      if (!visitedNodes.contains(next.node().getId())) {
        P newPriority=addPriority(next,currentAggregatedValue,calculateValue(next));
        queue.put(next,newPriority);
      }
    }
 else {
      break;
    }
  }
  Entry<ExpansionSource,P> entry=queue.pop();
  if (entry != null) {
    current=entry.getEntity();
    currentAggregatedValue=entry.getPriority();
    visitedNodes.add(current.node().getId());
    return current;
  }
  return null;
}
