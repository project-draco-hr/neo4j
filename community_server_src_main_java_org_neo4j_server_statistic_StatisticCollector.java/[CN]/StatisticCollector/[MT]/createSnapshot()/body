{
  final StatisticData previousDuration, previousSize;
  final long timeStamp, period, previousCount, previousStart;
synchronized (this) {
    previousDuration=currentDuration.copy();
    previousSize=currentSize.copy();
    previousCount=count.get();
    previousStart=start;
    currentDuration=new StatisticData();
    currentSize=new StatisticData();
    start=System.currentTimeMillis();
    count.set(0l);
    timeStamp=start;
    period=(start - previousStart);
  }
  return snapshot=new StatisticRecord(timeStamp,period,previousCount,previousDuration,previousSize);
}
