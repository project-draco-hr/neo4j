{
  final StatisticData previousDuration, previousSize;
  final long timeStamp, period, previousCount, previousStart;
synchronized (this) {
    previousDuration=currentDuration;
    previousSize=currentSize;
    previousCount=count;
    previousStart=start;
    currentDuration=StatisticData.empty();
    currentSize=StatisticData.empty();
    start=System.currentTimeMillis();
    count=0;
    timeStamp=start;
    period=(start - previousStart);
  }
  return snapshot=new StatisticRecord(timeStamp,period,previousCount,previousDuration,previousSize);
}
