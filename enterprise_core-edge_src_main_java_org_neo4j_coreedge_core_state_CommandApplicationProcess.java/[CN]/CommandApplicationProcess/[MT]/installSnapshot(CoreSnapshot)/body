{
  coreStateMachines.installSnapshots(coreSnapshot);
  long snapshotPrevIndex=coreSnapshot.prevIndex();
  try {
    if (snapshotPrevIndex > 1) {
      raftLog.skip(snapshotPrevIndex,coreSnapshot.prevTerm());
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  this.lastApplied=this.lastFlushed=snapshotPrevIndex;
  log.info(format("Skipping lastApplied index forward to %d",snapshotPrevIndex));
  sessionTracker.installSnapshots(coreSnapshot);
}
