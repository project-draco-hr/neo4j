{
  GraphDatabaseAPI db=(GraphDatabaseAPI)new TestGraphDatabaseFactory().newImpermanentDatabase();
  try {
    TransactionMonitorCounters monitor=db.getDependencyResolver().resolveDependency(TransactionMonitorCounters.class);
    int startedBefore=monitor.getNumberOfStartedTransactions();
    long committedBefore=monitor.getNumberOfCommittedTransactions();
    long rolledBackBefore=monitor.getNumberOfRolledbackTransactions();
    try (Transaction tx=db.beginTx()){
      db.createNode();
      tx.success();
    }
     assertEquals(startedBefore + 1,monitor.getNumberOfStartedTransactions());
    assertEquals(committedBefore + 1,monitor.getNumberOfCommittedTransactions());
    assertEquals(rolledBackBefore,monitor.getNumberOfRolledbackTransactions());
  }
  finally {
    db.shutdown();
  }
}
