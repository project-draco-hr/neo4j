{
  GraphDatabaseService db=new TestGraphDatabaseFactory().newImpermanentDatabase();
  Monitors monitors=((GraphDatabaseAPI)db).getDependencyResolver().resolveDependency(Monitors.class);
  EideticTransactionMonitor monitor=new EideticTransactionMonitor();
  Transaction tx=db.beginTx();
  db.createNode();
  tx.failure();
  tx.finish();
  assertEquals(1,monitor.getNumberOfStartedTransactions());
  assertEquals(0,monitor.getNumberOfCommittedTransactions());
  assertEquals(1,monitor.getNumberOfRolledbackTransactions());
}
