{
  long recordCount=dynamicRecordsInUse();
  long propCount=propertyRecordsInUse();
  Node node=graphdb.getGraphDatabaseService().createNode();
  node.setProperty("key","value");
  newTx();
  assertEquals(recordCount,dynamicRecordsInUse());
  assertEquals(propCount + 1,propertyRecordsInUse());
  assertEquals("value",node.getProperty("key"));
  node.removeProperty("key");
  commit();
  assertEquals(recordCount,dynamicRecordsInUse());
  assertEquals(propCount,propertyRecordsInUse());
  assertFalse(node.hasProperty("key"));
}
