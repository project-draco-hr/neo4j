{
  List<String> args=new ArrayList<String>(asList("java","-cp",getProperty("java.class.path"),"-Dneo4j.home=" + directory.getAbsolutePath()));
  if (configFile != null) {
    args.add("-D" + ServerInternalSettings.SERVER_CONFIG_FILE_KEY + "="+ configFile.getAbsolutePath());
  }
  args.add(StandaloneClusterClientTestProxy.class.getName());
  for (  Map.Entry<String,String> entry : config.entrySet()) {
    args.add("-" + entry.getKey() + "="+ entry.getValue());
  }
  return getRuntime().exec(args.toArray(new String[args.size()]));
}
