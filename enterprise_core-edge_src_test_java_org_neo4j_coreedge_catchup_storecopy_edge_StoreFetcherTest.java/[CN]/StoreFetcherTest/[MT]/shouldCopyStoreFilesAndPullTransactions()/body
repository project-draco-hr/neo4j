{
  StoreCopyClient storeCopyClient=mock(StoreCopyClient.class);
  TxPullClient txPullClient=mock(TxPullClient.class);
  TransactionLogCatchUpWriter writer=mock(TransactionLogCatchUpWriter.class);
  StoreFetcher fetcher=new StoreFetcher(NullLogProvider.getInstance(),mock(FileSystemAbstraction.class),null,storeCopyClient,txPullClient,factory(writer));
  AdvertisedSocketAddress localhost=address("localhost:1980");
  fetcher.copyStore(localhost,new File("destination"));
  verify(storeCopyClient).copyStoreFiles(eq(localhost),any(StoreFileStreams.class));
  verify(txPullClient).pullTransactions(eq(localhost),anyLong(),any(TxPullResponseListener.class));
}
