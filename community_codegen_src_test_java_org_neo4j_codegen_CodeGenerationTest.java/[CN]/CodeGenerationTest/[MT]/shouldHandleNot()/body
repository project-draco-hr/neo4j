{
  ClassHandle handle;
  try (ClassGenerator simple=generateClass("SimpleClass")){
    try (CodeBlock conditional=simple.generateMethod(boolean.class,"conditional",param(boolean.class,"test"))){
      conditional.returns(not(conditional.load("test")));
    }
     handle=simple.handle();
  }
   MethodHandle conditional=instanceMethod(handle.newInstance(),"conditional",boolean.class);
  assertThat(conditional.invoke(true),equalTo(false));
  assertThat(conditional.invoke(false),equalTo(true));
}
