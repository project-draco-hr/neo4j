{
  createGenerator();
  ClassHandle handle;
  try (ClassGenerator simple=generateClass("SimpleClass")){
    try (CodeBlock block=simple.generateMethod(boolean.class,"compare",param(clazz,"a"),param(clazz,"b"))){
      block.returns(compare.apply(block.load("a"),block.load("b")));
    }
     handle=simple.handle();
  }
   MethodHandle compareFcn=instanceMethod(handle.newInstance(),"compare",clazz,clazz);
  return (boolean)compareFcn.invoke(lhs,rhs);
}
