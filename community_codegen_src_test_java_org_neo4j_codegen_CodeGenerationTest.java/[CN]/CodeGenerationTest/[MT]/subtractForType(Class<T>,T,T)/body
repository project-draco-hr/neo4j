{
  createGenerator();
  ClassHandle handle;
  try (ClassGenerator simple=generateClass("SimpleClass")){
    try (CodeBlock block=simple.generateMethod(clazz,"sub",param(clazz,"a"),param(clazz,"b"))){
      if (clazz == long.class) {
        block.returns(subtractLongs(block.load("a"),block.load("b")));
      }
 else       if (clazz == double.class) {
        block.returns(subtractDoubles(block.load("a"),block.load("b")));
      }
 else {
        fail("adding " + clazz.getSimpleName() + " is not supported");
      }
    }
     handle=simple.handle();
  }
   MethodHandle sub=instanceMethod(handle.newInstance(),"sub",clazz,clazz);
  return (T)sub.invoke(lhs,rhs);
}
