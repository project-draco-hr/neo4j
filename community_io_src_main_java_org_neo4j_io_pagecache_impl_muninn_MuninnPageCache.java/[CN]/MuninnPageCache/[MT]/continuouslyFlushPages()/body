{
  Thread thread=Thread.currentThread();
  flushThread=thread;
  while (!thread.isInterrupted()) {
    long iterationSleepMillis=flushAtIORatio(backgroundFlushIoRatio);
    if (iterationSleepMillis > 0) {
      LockSupport.parkNanos(this,TimeUnit.MILLISECONDS.toNanos(iterationSleepMillis));
      sleepDebtNanos=0;
    }
  }
}
