{
  long parkNanos=TimeUnit.MILLISECONDS.toNanos(10);
  for (; ; ) {
    LockSupport.parkNanos(parkNanos);
    if (Thread.currentThread().isInterrupted() || closed) {
      return 0;
    }
    Object freelistHead=getFreelistHead();
    if (freelistHead instanceof FreePage) {
      int availablePages=((FreePage)freelistHead).count;
      if (availablePages < keepFree) {
        return keepFree - availablePages;
      }
    }
 else     if (freelistHead instanceof FreePageWaiter) {
      return keepFree;
    }
  }
}
