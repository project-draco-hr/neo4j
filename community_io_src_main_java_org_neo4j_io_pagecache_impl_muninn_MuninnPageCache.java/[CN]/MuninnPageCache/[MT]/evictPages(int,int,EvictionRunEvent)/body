{
  while (pageCountToEvict > 0 && !closed) {
    if (clockArm == pages.length) {
      clockArm=0;
    }
    MuninnPage page=pages[clockArm];
    if (page == null) {
      return 0;
    }
    if (page.isLoaded() && page.decrementUsage()) {
      if (page.tryExclusiveLock()) {
        pageCountToEvict--;
        boolean pageEvicted=false;
        try (EvictionEvent evictionEvent=evictionRunEvent.beginEviction()){
          pageEvicted=page.isLoaded() && evictPage(page,evictionEvent);
          if (pageEvicted) {
            Object current;
            Object nextListHead;
            FreePage freePage=null;
            do {
              current=getFreelistHead();
              freePage=freePage == null ? new FreePage(page) : freePage;
              freePage.setNext((FreePage)current);
              nextListHead=freePage;
            }
 while (!compareAndSetFreelistHead(current,nextListHead));
          }
        }
  finally {
          if (!pageEvicted) {
            page.unlockExclusive();
          }
        }
      }
    }
    clockArm++;
  }
  return clockArm;
}
