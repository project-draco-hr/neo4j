{
  startSecondDatabase();
  HighAvailability ha=new Neo4jManager(database.getDependencyResolver().resolveDependency(JmxKernelExtension.class).getSingleManagementBean(Kernel.class)).getHighAvailabilityBean();
  ClusterMemberInfo[] instancesInCluster=ha.getInstancesInCluster();
  assertEquals(2,instancesInCluster.length);
  HighAvailability secondHa=new Neo4jManager(secondDatabase.getDependencyResolver().resolveDependency(JmxKernelExtension.class).getSingleManagementBean(Kernel.class)).getHighAvailabilityBean();
  ClusterMemberInfo[] secondInstancesInCluster=secondHa.getInstancesInCluster();
  assertEquals(2,secondInstancesInCluster.length);
  assertMasterAndSlaveInformation(instancesInCluster);
  assertMasterAndSlaveInformation(secondInstancesInCluster);
}
