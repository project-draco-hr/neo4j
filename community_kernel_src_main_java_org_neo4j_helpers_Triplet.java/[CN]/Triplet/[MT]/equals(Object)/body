{
  if (this == obj)   return true;
  if (obj instanceof Triplet) {
    @SuppressWarnings("rawtypes") Triplet that=(Triplet)obj;
    return equals(this.first,that.first) && equals(this.second,that.second) && equals(this.third,that.third);
  }
  if (obj instanceof Pair) {
    @SuppressWarnings("rawtypes") Pair that=(Pair)obj;
    Object other=that.other();
    if (other instanceof Pair) {
      @SuppressWarnings("rawtypes") Pair pair=(Pair)other;
      return equals(this.first,that.first()) && equals(this.second,pair.first()) && equals(this.third,pair.other());
    }
  }
  return false;
}
