{
  Relationship[] relationships=createRelationshipChain(2);
  Node middleNode=getEndNode(relationships[0]);
  executeCommandExpectingException("rmnode " + middleNode.getId(),"still has relationships");
  assertNodeExists(middleNode);
  Node endNode=getEndNode(relationships[1]);
  executeCommand("rmnode -f " + middleNode.getId(),"deleted");
  assertNodeDoesntExist(middleNode);
  assertRelationshipDoesntExist(relationships[0]);
  assertRelationshipDoesntExist(relationships[1]);
  assertNodeExists(endNode);
  executeCommand("cd -a " + endNode.getId());
  executeCommand("rmnode " + endNode.getId());
  executeCommand("pwd",Pattern.quote("(?)"));
}
