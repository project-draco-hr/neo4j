{
  String nodeOneName="Node ONE";
  String name="name";
  String nodeTwoName="Node TWO";
  String relationshipName="The relationship";
  beginTx();
  Node node=db.createNode();
  node.setProperty(name,nodeOneName);
  Node otherNode=db.createNode();
  otherNode.setProperty(name,nodeTwoName);
  Relationship relationship=node.createRelationshipTo(otherNode,RELATIONSHIP_TYPE);
  relationship.setProperty(name,relationshipName);
  Node strayNode=db.createNode();
  finishTx();
  beginTx();
  executeCommand("cd -a " + node.getId());
  executeCommand("START n = node({self}) RETURN n.name;",nodeOneName);
  executeCommand("cd -r " + relationship.getId());
  executeCommand("START r = relationship({self}) RETURN r.name;",relationshipName);
  executeCommand("cd " + otherNode.getId());
  executeCommand("START n = node({self}) RETURN n.name;",nodeTwoName);
  finishTx();
  executeCommand("cd -a " + strayNode.getId());
  beginTx();
  strayNode.delete();
  finishTx();
  executeCommand("START n = node(" + node.getId() + ") RETURN n.name;",nodeOneName);
}
