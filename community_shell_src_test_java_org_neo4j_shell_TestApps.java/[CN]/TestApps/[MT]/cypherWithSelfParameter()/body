{
  String nodeOneName="Node ONE";
  String name="name";
  String nodeTwoName="Node TWO";
  String relationshipName="The relationship";
  beginTx();
  Node node=db.createNode();
  node.setProperty(name,nodeOneName);
  Node otherNode=db.createNode();
  otherNode.setProperty(name,nodeTwoName);
  Relationship relationship=node.createRelationshipTo(otherNode,RELATIONSHIP_TYPE);
  relationship.setProperty(name,relationshipName);
  Node strayNode=db.createNode();
  finishTx();
  executeCommand("cd -a " + node.getId());
  executeCommand("MATCH n WHERE n = {self} RETURN n.name;",nodeOneName);
  executeCommand("cd -r " + relationship.getId());
  executeCommand("MATCH ()-[r]->() WHERE r = {self} RETURN r.name;",relationshipName);
  executeCommand("cd " + otherNode.getId());
  executeCommand("MATCH n WHERE n = {self} RETURN n.name;",nodeTwoName);
  executeCommand("cd -a " + strayNode.getId());
  beginTx();
  strayNode.delete();
  finishTx();
  executeCommand("MATCH n WHERE id(n) = " + node.getId() + " RETURN n.name;",nodeOneName);
}
