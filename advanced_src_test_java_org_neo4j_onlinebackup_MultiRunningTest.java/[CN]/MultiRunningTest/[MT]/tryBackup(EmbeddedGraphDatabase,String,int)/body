{
  setupBackup(neo,location);
  EmbeddedGraphDatabase bNeo=Util.startNeoInstance(location);
  IndexService bIndexService=new LuceneIndexService(bNeo);
  Transaction bTx=bNeo.beginTx();
  try {
    List<Relationship> rels=new ArrayList<Relationship>();
    for (    Relationship rel : bNeo.getReferenceNode().getRelationships()) {
      rels.add(rel);
    }
    assertEquals(relCount,rels.size());
    Node node=bIndexService.getSingleNode("number",relCount);
    assertEquals(true,node != null);
    assertEquals(node.getId(),(long)(Long)node.getProperty("theId",-1L));
    bTx.success();
  }
  finally {
    bTx.finish();
  }
  Util.stopNeo(bNeo,bIndexService);
}
