{
  FileSystemAbstraction fs=mock(FileSystemAbstraction.class);
  when(fs.fileExists(new File("logical_log.active"))).thenReturn(true);
  when(fs.fileExists(new File("logical_log"))).thenReturn(false);
  when(fs.fileExists(new File("logical_log.1"))).thenReturn(true);
  when(fs.fileExists(new File("logical_log.2"))).thenReturn(true);
  StoreChannel fc=mockedStoreChannel(XaLogicalLogTokens.LOG2);
  when(fs.open(eq(new File("logical_log.active")),anyString())).thenReturn(fc);
  PhysicalLogFiles files=new PhysicalLogFiles(new File("logical_log"),fs);
  assertThat(files.determineState(),is(PhysicalLogFiles.State.DUAL_LOGS_LOG_2_ACTIVE));
}
