{
  MadeUpImplementation serverImplementation=new MadeUpImplementation(storeIdToUse);
  MadeUpServer server=new MadeUpServer(serverImplementation,PORT,INTERNAL_PROTOCOL_VERSION,APPLICATION_PROTOCOL_VERSION);
  MadeUpClient client=new MadeUpClient(PORT,storeIdToUse,INTERNAL_PROTOCOL_VERSION,APPLICATION_PROTOCOL_VERSION);
  String exceptionMessage="The message";
  try {
    client.throwException(exceptionMessage);
    fail("Should have thrown " + MadeUpException.class.getSimpleName());
  }
 catch (  ComException e) {
    assertCause(e,MadeUpException.class,exceptionMessage);
  }
  client.shutdown();
  server.shutdown();
}
