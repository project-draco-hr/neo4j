{
  File rrdDir=new File(directory.directory(),ServerInternalSettings.rrd_store.getDefaultValue());
  assertTrue(rrdDir.mkdirs());
  addProperty(Configurator.RRDB_LOCATION_PROPERTY_KEY,rrdDir.getAbsolutePath());
  TestableRrdFactory factory=createRrdFactory();
  createInvalidRrdFile(new File(rrdDir,"rrd").getAbsolutePath());
  RrdDbWrapper rrdDbAndSampler=factory.createRrdDbAndSampler(db,new NullJobScheduler());
  assertSubdirectoryExists("rrd-invalid",rrdDir);
  rrdDbAndSampler.close();
}
