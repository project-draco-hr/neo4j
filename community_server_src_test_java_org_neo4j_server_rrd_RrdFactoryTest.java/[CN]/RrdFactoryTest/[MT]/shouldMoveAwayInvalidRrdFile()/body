{
  String expected=new File(testDirectory.directory(),"rrd-test").getAbsolutePath();
  config.addProperty(Configurator.RRDB_LOCATION_PROPERTY_KEY,expected);
  TestableRrdFactory factory=createRrdFactory();
  createInvalidRrdFile(expected);
  RrdDb rrdDbAndSampler=factory.createRrdDbAndSampler(db,new NullJobScheduler());
  assertSubdirectoryExists("rrd-test-invalid",factory.directoryUsed);
  rrdDbAndSampler.close();
}
