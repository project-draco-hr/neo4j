{
  final String invalidLogDir=createInvalidDirectory().getAbsolutePath();
  server=ServerBuilder.server().withDefaultDatabaseTuning().withStartupHealthCheckRules(new HTTPLoggingPreparednessRule()).withProperty(Configurator.HTTP_LOGGING,"true").withProperty(Configurator.HTTP_LOG_LOCATION,invalidLogDir).withProperty(Configurator.HTTP_LOG_CONFIG_LOCATION,getClass().getResource("/neo4j-server-test-logback.xml").getFile()).build();
  try {
    server.start();
    fail("should have thrown exception");
  }
 catch (  StartupHealthCheckFailedException e) {
    assertThat(e.getMessage(),containsString(String.format("HTTP log directory [%s] cannot be created",invalidLogDir)));
  }
}
