{
  if (!source.node().equals(target.node())) {
    throw new IllegalArgumentException("The nodes of the head and tail must match");
  }
  Path headPath=source.position(), tailPath=target.position();
  Relationship[] relationships=new Relationship[headPath.length() + tailPath.length()];
  Iterator<Relationship> iter=headPath.relationships().iterator();
  for (int i=0; iter.hasNext(); i++) {
    relationships[i]=iter.next();
  }
  iter=tailPath.relationships().iterator();
  for (int i=relationships.length - 1; iter.hasNext(); i--) {
    relationships[i]=iter.next();
  }
  return new FinalTraversalBranch(tailPath.startNode(),relationships);
}
