{
  SwitchToSlave switchToSlave=newSwitchToSlaveSpy();
  when(fs.fileExists(any(File.class))).thenReturn(true);
  when(updatePuller.tryPullUpdates()).thenReturn(false);
  URI localhost=getLocalhostUri();
  URI uri=switchToSlave.switchToSlave(mock(LifeSupport.class),localhost,localhost,mock(CancellationRequest.class));
  assertNull(uri);
}
