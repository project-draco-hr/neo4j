{
  DependencyResolver resolver=mock(DependencyResolver.class);
  when(resolver.resolveDependency(StoreLockerLifecycleAdapter.class)).thenReturn(mockWithLifecycle(StoreLockerLifecycleAdapter.class));
  when(resolver.resolveDependency(XaDataSourceManager.class)).thenReturn(mockWithLifecycle(XaDataSourceManager.class));
  when(resolver.resolveDependency(TransactionManager.class)).thenReturn(mockWithLifecycle(TransactionManager.class));
  when(resolver.resolveDependency(NodeManager.class)).thenReturn(mockWithLifecycle(NodeManager.class));
  when(resolver.resolveDependency(IndexStore.class)).thenReturn(mockWithLifecycle(IndexStore.class));
  return resolver;
}
