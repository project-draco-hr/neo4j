{
  ConsoleLogger console=mock(ConsoleLogger.class);
  Config config=configMock();
  DependencyResolver resolver=dependencyResolverMock();
  HaIdGeneratorFactory idGeneratorFactory=mock(HaIdGeneratorFactory.class);
  Logging logging=new DevNullLoggingService();
  DelegateInvocationHandler<Master> masterDelegateHandler=mock(DelegateInvocationHandler.class);
  ClusterMemberAvailability clusterMemberAvailability=mock(ClusterMemberAvailability.class);
  RequestContextFactory requestContextFactory=mock(RequestContextFactory.class);
  UpdateableSchemaState updateableSchemaState=mock(UpdateableSchemaState.class);
  MasterClientResolver masterClientResolver=mock(MasterClientResolver.class);
  Monitors monitors=mock(Monitors.class);
  Iterable<KernelExtensionFactory<?>> kernelExtensions=mock(Iterable.class);
  switchToSlave=spy(new SwitchToSlave(console,config,resolver,idGeneratorFactory,logging,masterDelegateHandler,clusterMemberAvailability,requestContextFactory,updateableSchemaState,masterClientResolver,monitors,kernelExtensions));
}
