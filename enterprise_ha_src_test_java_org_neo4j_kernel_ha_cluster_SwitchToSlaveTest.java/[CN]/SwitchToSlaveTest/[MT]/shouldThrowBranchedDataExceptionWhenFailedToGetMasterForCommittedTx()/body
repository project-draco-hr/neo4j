{
  URI masterUri=null;
  Master master=mock(Master.class);
  NeoStoreXaDataSource nioneoDataSource=mock(NeoStoreXaDataSource.class);
  long fakeTxId=1L;
  when(nioneoDataSource.getLastCommittedTxId()).thenReturn(fakeTxId);
  when(nioneoDataSource.getMasterForCommittedTx(fakeTxId)).thenThrow(new IOException());
  try {
    switchToSlave.checkDataConsistencyWithMaster(masterUri,master,nioneoDataSource);
    fail("Should have thrown " + BranchedDataException.class.getSimpleName() + " exception");
  }
 catch (  BranchedDataException e) {
  }
}
