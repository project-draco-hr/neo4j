{
  SwitchToSlave switchToSlave=newSwitchToSlaveSpy();
  when(neoStoreDataSource.getStoreId()).thenReturn(new StoreId(42,42,42,42));
  try {
    switchToSlave.checkDataConsistency(masterClient,neoStoreDataSource,new URI("cluster://localhost?serverId=1"));
    fail("Should have thrown " + MismatchingStoreIdException.class.getSimpleName() + " exception");
  }
 catch (  MismatchingStoreIdException e) {
  }
  verify(switchToSlave).stopServicesAndHandleBranchedStore(any(BranchedDataPolicy.class));
}
