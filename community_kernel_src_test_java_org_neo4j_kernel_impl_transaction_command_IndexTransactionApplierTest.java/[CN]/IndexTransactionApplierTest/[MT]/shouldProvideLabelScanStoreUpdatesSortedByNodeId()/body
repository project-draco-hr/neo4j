{
  IndexingService indexing=mock(IndexingService.class);
  LabelScanWriter writer=new OrderVerifyingLabelScanWriter(10,15,20);
  WorkSync<Provider<LabelScanWriter>,IndexTransactionApplier.LabelUpdateWork> labelScanSync=new WorkSync<>(singletonProvider(writer));
  try (IndexTransactionApplier applier=new IndexTransactionApplier(indexing,NONE,labelScanSync,mock(CacheAccessBackDoor.class))){
    applier.visitNodeCommand(node(15));
    applier.visitNodeCommand(node(20));
    applier.visitNodeCommand(node(10));
    applier.apply();
  }
 }
