{
  AbstractDynamicStore.DynamicRecordCursor recordCursor=mock(AbstractDynamicStore.DynamicRecordCursor.class);
  when(recordCursor.next()).thenReturn(true).thenReturn(false);
  DynamicRecord dynamicRecord=new DynamicRecord(42);
  dynamicRecord.setData(new byte[]{1,1,1,1,1});
  when(recordCursor.get()).thenReturn(dynamicRecord);
  S store=mock(clazz);
  when(store.newDynamicRecordCursor()).thenReturn(mock(AbstractDynamicStore.DynamicRecordCursor.class));
  when(store.getRecordsCursor(anyLong(),anyBoolean(),any(AbstractDynamicStore.DynamicRecordCursor.class))).thenReturn(recordCursor);
  return store;
}
