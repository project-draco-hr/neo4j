{
  if (uri.isAbsolute())   return uri.normalize();
  if (portNo == null)   portNo="80";
  StringBuilder sb=new StringBuilder();
  sb.append("http://localhost");
  if (portNo != "80") {
    sb.append(":");
    sb.append(portNo);
  }
  sb.append("/");
  sb.append(uri.toString());
  try {
    return new URI(sb.toString()).normalize();
  }
 catch (  URISyntaxException e) {
    throw new RuntimeException(e);
  }
}
