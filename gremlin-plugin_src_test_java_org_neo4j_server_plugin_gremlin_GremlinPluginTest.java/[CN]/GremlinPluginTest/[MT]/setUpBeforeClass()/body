{
  json=new OutputFormat(new JsonFormat(),new URI("http://localhost/"),null);
  Transaction tx=null;
  try {
    plugin=new GremlinPlugin();
    neo4j=new ImpermanentGraphDatabase(directory);
    tx=neo4j.beginTx();
    firstNode=neo4j.createNode();
    if (firstNode != null) {
      firstNode.setProperty("name","firstNode");
      firstNode.setProperty("x",10.23245);
      firstNode.setProperty("nodeType","type 1");
      firstNode.setProperty("y",-112.346);
      firstNode.setProperty("altitude",12.34456);
    }
    secondNode=neo4j.createNode();
    if (secondNode != null) {
      secondNode.setProperty("name","secondNode");
      secondNode.setProperty("x",1.23245);
      secondNode.setProperty("nodeType","type 3");
      secondNode.setProperty("y",-12.346);
      secondNode.setProperty("altitude",100.34456);
    }
    thirdNode=neo4j.createNode();
    if (thirdNode != null) {
      thirdNode.setProperty("name","thirdNode");
      thirdNode.setProperty("x",11.23245);
      thirdNode.setProperty("y",-112.346);
      thirdNode.setProperty("nodeType","type 1");
      thirdNode.setProperty("altitude",40.34456);
    }
    firstNode.createRelationshipTo(secondNode,DynamicRelationshipType.withName("nextTo")).setProperty("weight",2.0d);
    firstNode.createRelationshipTo(thirdNode,DynamicRelationshipType.withName("nextTo"));
    tx.success();
  }
 catch (  Exception graphEx) {
    System.err.println("Caught a graph exception with message " + graphEx.getMessage());
  }
 finally {
    tx.finish();
  }
}
