{
  json=new OutputFormat(new JsonFormat(),new URI("http://localhost/"),null);
  Transaction tx=null;
  try {
    curGremlinPluginObj=new GremlinPlugin();
    curGraphDBServiceObj=new EmbeddedGraphDatabase(curGraphDBEmbeddedPath);
    tx=curGraphDBServiceObj.beginTx();
    firstNode=curGraphDBServiceObj.createNode();
    if (firstNode != null) {
      firstNode.setProperty("name","firstNode");
      firstNode.setProperty("x",10.23245);
      firstNode.setProperty("y",-112.346);
      firstNode.setProperty("altitude",12.34456);
    }
    secondNode=curGraphDBServiceObj.createNode();
    if (secondNode != null) {
      secondNode.setProperty("name","secondNode");
      secondNode.setProperty("x",1.23245);
      secondNode.setProperty("y",-12.346);
      secondNode.setProperty("altitude",100.34456);
    }
    Relationship curRelObj=firstNode.createRelationshipTo(secondNode,DynamicRelationshipType.withName("KNOWS"));
    curRelObj.setProperty("NAME","FirstKnowsSecond");
    thirdNode=curGraphDBServiceObj.createNode();
    if (thirdNode != null) {
      thirdNode.setProperty("name","thirdNode");
      thirdNode.setProperty("x",11.23245);
      thirdNode.setProperty("y",-112.346);
      thirdNode.setProperty("altitude",40.34456);
    }
    curRelObj=secondNode.createRelationshipTo(thirdNode,DynamicRelationshipType.withName("KNOWS"));
    curRelObj.setProperty("NAME","SecondKnowsThird");
    curRelObj=thirdNode.createRelationshipTo(firstNode,DynamicRelationshipType.withName("KNOWS"));
    curRelObj.setProperty("NAME","ThirdKnowsFirst");
    tx.success();
  }
 catch (  Exception graphEx) {
    System.err.println("Caught a graph exception with message " + graphEx.getMessage());
  }
 finally {
    tx.finish();
  }
}
