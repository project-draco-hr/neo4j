{
  JaxRsResponse r=null;
  long start=new Date().getTime();
  try {
    do {
      String fullUrl=url + "/db/data/node/" + nodeId;
      r=RestRequest.req().get(fullUrl);
      Thread.sleep(100);
      if (new Date().getTime() - start > timeout) {
        throw new RuntimeException("Waiting for node to exist took longer than " + timeout + "ms.");
      }
    }
 while (r.getStatus() != 200);
  }
 catch (  InterruptedException e) {
    throw new RuntimeException(e);
  }
}
