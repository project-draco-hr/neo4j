{
  JaxRsResponse r=null;
  long start=new Date().getTime();
  try {
    do {
      r=RestRequest.req().get(url + "/db/data/node/" + nodeId);
      Thread.sleep(100);
      if (new Date().getTime() - start > timeout) {
        System.out.println(r.getStatus());
        throw new RuntimeException("Waiting for node to disappear took longer than the timout specified.");
      }
    }
 while (r.getStatus() == 200);
  }
 catch (  InterruptedException e) {
    throw new RuntimeException(e);
  }
}
