{
  ObjectStreamFactory objStream=new ObjectStreamFactory();
  AcceptorInstanceStore acceptorInstances=mock(AcceptorInstanceStore.class);
  Executor executor=mock(Executor.class);
  Timeouts timeouts=mock(Timeouts.class);
  ClusterConfiguration clusterConfig=new ClusterConfiguration("myCluster",NullLogProvider.getInstance());
  ElectionCredentialsProvider electionCredentials=mock(ElectionCredentialsProvider.class);
  MultiPaxosContext ctx=new MultiPaxosContext(new InstanceId(1),Collections.<ElectionRole>emptyList(),clusterConfig,executor,NullLogService.getInstance(),objStream,objStream,acceptorInstances,timeouts,electionCredentials);
  MultiPaxosContext snapshot=ctx.snapshot(NullLogService.getInstance(),timeouts,executor,acceptorInstances,objStream,objStream,electionCredentials);
  assertEquals(ctx,snapshot);
}
