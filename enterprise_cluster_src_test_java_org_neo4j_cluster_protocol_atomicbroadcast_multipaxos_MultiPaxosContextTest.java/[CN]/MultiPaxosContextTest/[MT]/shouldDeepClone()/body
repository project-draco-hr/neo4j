{
  ObjectStreamFactory objStream=new ObjectStreamFactory();
  AcceptorInstanceStore acceptorInstances=mock(AcceptorInstanceStore.class);
  Executor executor=mock(Executor.class);
  Timeouts timeouts=mock(Timeouts.class);
  TestLogging logging=new TestLogging();
  ClusterConfiguration clusterConfig=new ClusterConfiguration("myCluster",StringLogger.DEV_NULL);
  ElectionCredentialsProvider electionCredentials=mock(ElectionCredentialsProvider.class);
  MultiPaxosContext ctx=new MultiPaxosContext(new InstanceId(1),10,Collections.<ElectionRole>emptyList(),clusterConfig,executor,logging,objStream,objStream,acceptorInstances,timeouts,electionCredentials);
  MultiPaxosContext snapshot=ctx.snapshot(logging,timeouts,executor,acceptorInstances,objStream,objStream,electionCredentials);
  assertEquals(ctx,snapshot);
}
