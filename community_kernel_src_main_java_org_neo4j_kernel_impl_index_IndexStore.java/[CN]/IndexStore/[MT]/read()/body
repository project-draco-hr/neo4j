{
  File fileToReadFrom=file.exists() ? file : oldFile;
  if (!fileSystem.fileExists(fileToReadFrom.getAbsolutePath())) {
    return;
  }
  FileChannel channel=null;
  try {
    channel=fileSystem.open(fileToReadFrom.getAbsolutePath(),"r");
    Integer version=tryToReadVersion(channel);
    if (version == null) {
      close(channel);
      channel=fileSystem.open(fileToReadFrom.getAbsolutePath(),"r");
      readMap(channel,nodeConfig,version);
      relConfig.putAll(nodeConfig);
    }
 else     if (version < VERSION) {
      throw new UnsupportedOperationException("" + version);
    }
 else {
      readMap(channel,nodeConfig,readNextInt(channel));
      readMap(channel,relConfig,readNextInt(channel));
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
 finally {
    close(channel);
  }
}
