{
  ReadableClosablePositionAwareChannel channel=state.batchChannel;
  byte groupMode=channel.get();
switch (groupMode) {
case SAME_GROUP:
    return state.previousGroups[slot];
case NEW_GROUP:
  return state.previousGroups[slot]=new Group.Adapter(channel.getInt(),(String)readToken(GROUP_TOKEN,channel));
default :
throw new IllegalArgumentException("Unknown group mode " + groupMode);
}
}
