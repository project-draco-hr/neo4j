{
  sendExecutor.shutdown();
  if (!sendExecutor.awaitTermination(10,TimeUnit.SECONDS)) {
    msgLog.warn("Could not shut down send executor");
  }
  channels.close().awaitUninterruptibly();
  nioChannelFactory.releaseExternalResources();
  clientBootstrap.releaseExternalResources();
  receiveExecutor.shutdown();
  if (!receiveExecutor.awaitTermination(10,TimeUnit.SECONDS)) {
    msgLog.warn("Could not shut down receive executor");
  }
}
