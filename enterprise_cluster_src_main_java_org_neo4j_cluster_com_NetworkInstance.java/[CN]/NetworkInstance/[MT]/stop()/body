{
  channels.close().awaitUninterruptibly();
  nioChannelFactory.releaseExternalResources();
  clientBootstrap.releaseExternalResources();
  executor.shutdownNow();
  if (!executor.awaitTermination(10,TimeUnit.SECONDS)) {
    msgLog.warn("Could not shut down executor");
  }
}
