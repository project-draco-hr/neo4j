{
  ChannelException ex=null;
  for (int checkPort=minPort; checkPort <= maxPort; checkPort++) {
    try {
      InetAddress host;
      String address=config.clusterServer().getHost();
      if (address == null) {
        host=InetAddress.getLocalHost();
      }
 else {
        host=InetAddress.getByName(address);
      }
      InetSocketAddress localAddress=new InetSocketAddress(host,checkPort);
      Channel listenChannel=serverBootstrap.bind(localAddress);
      listeningAt(getURI((InetSocketAddress)listenChannel.getLocalAddress()));
      channels.add(listenChannel);
      return;
    }
 catch (    ChannelException e) {
      ex=e;
    }
  }
  nioChannelFactory.releaseExternalResources();
  throw ex;
}
