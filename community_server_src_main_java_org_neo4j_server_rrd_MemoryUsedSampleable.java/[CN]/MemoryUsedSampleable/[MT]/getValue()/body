{
  try {
    long used=(Long)((CompositeDataSupport)mbeanServer.getAttribute(memoryName,"HeapMemoryUsage")).get("used");
    long max=(Long)((CompositeDataSupport)mbeanServer.getAttribute(memoryName,"HeapMemoryUsage")).get("max");
    return (long)Math.ceil((used / (double)max) * 100);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
