{
  Predicate<Start> filter=machineIdToExcludeOrNull == null ? XaLogicalLog.NO_FILTER : new Predicate<LogEntry.Start>(){
    private final int machineId=machineIdToExcludeOrNull.intValue();
    @Override public boolean accept(    LogEntry.Start item){
      return item.getLocalId() != machineId;
    }
  }
;
  XaDataSourceManager dataSourceManager=graphDb.getXaDataSourceManager();
  try {
    for (    Triplet<String,Long,TxExtractor> tx : IteratorUtil.asIterable(response.transactions())) {
      String resourceName=tx.first();
      XaDataSource dataSource=dataSourceManager.getXaDataSource(resourceName);
      txHandler.accept(tx,dataSource);
      ReadableByteChannel txStream=tx.third().extract();
      try {
        dataSource.applyCommittedTransaction(tx.second(),txStream,filter);
      }
  finally {
        txStream.close();
      }
    }
    txHandler.done();
  }
  finally {
    response.close();
  }
}
