{
  try {
    while (true) {
      byte type=channel.get();
switch (PhysicalRaftLog.RecordType.forValue(type)) {
case APPEND:
        currentRecord.set(RaftLogAppendRecord.read(channel,marshal));
      return true;
case CONTINUATION:
    RaftLogContinuationRecord.read(channel);
  break;
default :
throw new IllegalStateException("Not really sure how we got here. Read type value was " + type);
}
}
}
 catch (ReadPastEndException notEnoughBytes) {
return false;
}
}
