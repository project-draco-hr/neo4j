{
  ImpermanentGraphDatabase db=new ImpermanentGraphDatabase(stringMap("insert_guard","true"));
  db.beginTx();
  db.getGuard().startOperationsCount(MAX_VALUE);
  db.createNode();
  db.createNode();
  db.createNode();
  Guard.OperationsCount ops1=db.getGuard().stop();
  assertEquals(3,ops1.getOpsCount());
  db.getGuard().startOperationsCount(MAX_VALUE);
  Node n0=db.getNodeById(0);
  Node n1=db.getNodeById(1);
  Node n2=db.getNodeById(2);
  Node n3=db.getNodeById(3);
  Guard.OperationsCount ops2=db.getGuard().stop();
  assertEquals(4,ops2.getOpsCount());
  db.getGuard().startOperationsCount(MAX_VALUE);
  n0.createRelationshipTo(n1,REL1);
  Guard.OperationsCount ops3=db.getGuard().stop();
  assertEquals(2,ops3.getOpsCount());
  db.getGuard().startOperationsCount(MAX_VALUE);
  for (  Path position : Traversal.description().breadthFirst().relationships(REL1).traverse(n0)) {
  }
  Guard.OperationsCount ops4=db.getGuard().stop();
  assertEquals(3,ops4.getOpsCount());
}
