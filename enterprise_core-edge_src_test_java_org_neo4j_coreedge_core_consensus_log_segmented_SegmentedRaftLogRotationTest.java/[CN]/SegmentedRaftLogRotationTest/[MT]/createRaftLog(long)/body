{
  LogProvider logProvider=getInstance();
  CoreLogPruningStrategy pruningStrategy=new CoreLogPruningStrategyFactory(raft_log_pruning_strategy.getDefaultValue(),logProvider).newInstance();
  return new SegmentedRaftLog(fileSystem,testDirectory.directory(),rotateAtSize,new DummyRaftableContentSerializer(),logProvider,0,Clocks.fakeClock(),new OnDemandJobScheduler(),pruningStrategy);
}
