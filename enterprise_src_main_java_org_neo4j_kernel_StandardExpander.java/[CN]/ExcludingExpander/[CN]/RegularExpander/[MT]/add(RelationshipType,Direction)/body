{
  Map<String,Direction> newDirections=directions;
  if (direction != Direction.BOTH) {
    newDirections=new HashMap<String,Direction>(directions);
    newDirections.put(type.name(),direction);
  }
  return createNew(append(types,type),newDirections);
}
