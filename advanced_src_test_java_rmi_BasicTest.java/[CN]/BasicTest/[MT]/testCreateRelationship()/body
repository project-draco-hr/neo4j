{
  transactional(new Runnable(){
    public void run(){
      Node start=graphDb.createNode();
      Node end=graphDb.createNode();
      Relationship relationship=start.createRelationshipTo(end,TestType.TEST);
      Assert.assertNotNull(relationship);
      Assert.assertTrue(relationship.isType(TestType.TEST));
      Assert.assertEquals(start,relationship.getStartNode());
      Assert.assertEquals(end,relationship.getEndNode());
      Assert.assertEquals(start,relationship.getOtherNode(end));
      Assert.assertEquals(end,relationship.getOtherNode(start));
      Assert.assertTrue(Arrays.equals(new Node[]{start,end},relationship.getNodes()));
    }
  }
);
}
