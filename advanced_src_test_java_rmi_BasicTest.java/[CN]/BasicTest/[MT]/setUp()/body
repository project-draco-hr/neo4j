{
  boolean rmi=true;
  try {
    LocateRegistry.createRegistry(Registry.REGISTRY_PORT);
  }
 catch (  RemoteException e) {
    e.printStackTrace();
    rmi=false;
  }
  Exception onRegister=null;
  try {
    RmiTransport.register(new LocalGraphDatabase("target/neo"),RMI_RESOURCE);
  }
 catch (  Exception ex) {
    onRegister=ex;
  }
  try {
    graphDb=new RemoteGraphDatabase(RMI_RESOURCE);
  }
 catch (  Exception ex) {
    if (rmi) {
      if (onRegister != null) {
        throw onRegister;
      }
 else {
        throw ex;
      }
    }
 else {
      graphDb=null;
    }
  }
}
