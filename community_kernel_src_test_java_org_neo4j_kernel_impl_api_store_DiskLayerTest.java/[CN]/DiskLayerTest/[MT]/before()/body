{
  db=(GraphDatabaseAPI)new TestGraphDatabaseFactory().newImpermanentDatabase();
  DependencyResolver resolver=db.getDependencyResolver();
  IndexingService indexingService=resolver.resolveDependency(IndexingService.class);
  NeoStore neoStore=resolver.resolveDependency(NeoStoreSupplier.class).get();
  this.disk=new DiskLayer(resolver.resolveDependency(PropertyKeyTokenHolder.class),resolver.resolveDependency(LabelTokenHolder.class),resolver.resolveDependency(RelationshipTypeTokenHolder.class),new SchemaStorage(neoStore.getSchemaStore()),Suppliers.singleton(neoStore),indexingService);
  this.state=new KernelStatement(null,new IndexReaderFactory.Caching(indexingService),resolver.resolveDependency(LabelScanStore.class),null,null,null,disk.acquireStatement());
}
