{
  db=(GraphDatabaseAPI)createGraphDatabase();
  DependencyResolver resolver=db.getDependencyResolver();
  IndexingService indexingService=resolver.resolveDependency(IndexingService.class);
  NeoStores neoStores=resolver.resolveDependency(NeoStoresSupplier.class).get();
  this.disk=new DiskLayer(resolver.resolveDependency(PropertyKeyTokenHolder.class),resolver.resolveDependency(LabelTokenHolder.class),resolver.resolveDependency(RelationshipTypeTokenHolder.class),new SchemaStorage(neoStores.getSchemaStore()),neoStores,indexingService);
  this.state=new KernelStatement(null,new IndexReaderFactory.Caching(indexingService),resolver.resolveDependency(LabelScanStore.class),null,null,null,disk.acquireStatement());
}
