{
  Transaction tx=null;
  try {
    int status=TransactionFactory.getUserTransaction().getStatus();
    if (status == Status.STATUS_NO_TRANSACTION || status == Status.STATUS_MARKED_ROLLBACK) {
      return false;
    }
    Thread currentThread=Thread.currentThread();
    NeoConstraintsEvaluator evaluator=evaluators.get(currentThread);
    if (evaluator == null) {
      tx=TransactionFactory.getTransactionManager().getTransaction();
      evaluator=new NeoConstraintsEvaluator();
      tx.registerSynchronization(evaluator);
      evaluators.put(currentThread,evaluator);
    }
    return evaluator.evaluate(event,data);
  }
 catch (  Throwable t) {
    log.log(Level.SEVERE,"Unable to proccess event " + event,t);
  }
  return false;
}
