{
  EphemeralFileSystemAbstraction fsa=new EphemeralFileSystemAbstraction();
  fsa.mkdir(testDir.directory());
  OnDiskIdAllocationState store=new OnDiskIdAllocationState(fsa,testDir.directory(),100,mock(Supplier.class));
  final int numberOfAllocationsToAppend=3;
  for (int i=1; i <= numberOfAllocationsToAppend; i++) {
    store.firstUnallocated(someType,1024 * i);
    store.logIndex(i);
  }
  assertEquals(numberOfAllocationsToAppend * NUMBER_OF_BYTES_PER_WRITE,fsa.getFileSize(stateFileA()));
}
