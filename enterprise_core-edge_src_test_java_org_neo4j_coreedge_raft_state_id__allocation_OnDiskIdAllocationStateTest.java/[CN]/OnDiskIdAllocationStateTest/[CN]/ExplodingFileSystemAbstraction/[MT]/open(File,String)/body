{
  final StoreChannel mock=mock(StoreChannel.class);
  when(mock.read(any(ByteBuffer.class))).thenReturn(-1);
  doThrow(new IOException("boom!")).when(mock).flush();
  return mock;
}
