{
  if (rel.getFirstPrevRel() == Record.NO_PREV_RELATIONSHIP.intValue()) {
    NodeRecord firstNode=getNodeRecord(rel.getFirstNode());
    if (firstNode == null) {
      firstNode=getNodeStore().getRecord(rel.getFirstNode(),readFromBuffer);
      addNodeRecord(firstNode);
    }
    firstNode.setNextRel(rel.getFirstNextRel());
  }
  if (rel.getSecondPrevRel() == Record.NO_PREV_RELATIONSHIP.intValue()) {
    NodeRecord secondNode=getNodeRecord(rel.getSecondNode());
    if (secondNode == null) {
      secondNode=getNodeStore().getRecord(rel.getSecondNode(),readFromBuffer);
      addNodeRecord(secondNode);
    }
    secondNode.setNextRel(rel.getSecondNextRel());
  }
}
