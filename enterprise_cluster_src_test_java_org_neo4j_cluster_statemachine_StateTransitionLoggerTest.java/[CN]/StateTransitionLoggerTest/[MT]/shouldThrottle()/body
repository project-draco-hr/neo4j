{
  Logging logging=mock(Logging.class);
  StringLogger logger=mock(StringLogger.class);
  when(logging.getMessagesLog(any(Class.class))).thenReturn(logger);
  when(logger.isDebugEnabled()).thenReturn(true);
  StateTransitionLogger stateLogger=new StateTransitionLogger(logging);
  stateLogger.stateTransition(new StateTransition(entered,Message.internal(join),joining));
  stateLogger.stateTransition(new StateTransition(entered,Message.internal(join),joining));
  stateLogger.stateTransition(new StateTransition(joining,Message.internal(join),entered));
  stateLogger.stateTransition(new StateTransition(entered,Message.internal(join),joining));
  verify(logger,times(4)).isDebugEnabled();
  verify(logger,times(2)).debug("ClusterState: entered-[join]->joining");
  verify(logger).debug("ClusterState: joining-[join]->entered");
  verifyNoMoreInteractions(logger);
}
