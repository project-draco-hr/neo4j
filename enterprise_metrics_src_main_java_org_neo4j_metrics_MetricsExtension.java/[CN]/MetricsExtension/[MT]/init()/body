{
  Log logger=logService.getUserLog(getClass());
  final MetricRegistry registry=new MetricRegistry();
  logger.info("Initiating metrics..");
  String prefix=computePrefix(configuration);
  life.add(new CsvOutput(configuration,registry,logger,kernelContext));
  life.add(new GraphiteOutput(configuration,registry,logger,prefix));
  life.add(new GangliaOutput(configuration,registry,logger,prefix));
  Neo4jMetricsFactory factory=new Neo4jMetricsFactory(registry,configuration,monitors,transactionCounters,pageCacheCounters,checkPointerMonitor,logRotationMonitor,idGeneratorFactory);
  life.add(factory.newInstance());
  life.init();
}
