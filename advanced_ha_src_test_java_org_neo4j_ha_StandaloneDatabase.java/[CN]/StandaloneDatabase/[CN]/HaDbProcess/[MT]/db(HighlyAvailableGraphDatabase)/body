{
  if (db != null && graph != null) {
    graph.shutdown();
    throw new IllegalStateException("database has already been started");
  }
  db=new DatabaseReference(){
    @Override HighlyAvailableGraphDatabase graph(){
      if (graph == null)       throw new IllegalStateException("database has been shut down");
      return graph;
    }
    @Override void shutdown(){
      if (graph == null) {
        System.out.println("database has already been shut down");
      }
 else {
        graph.shutdown();
      }
    }
  }
;
}
