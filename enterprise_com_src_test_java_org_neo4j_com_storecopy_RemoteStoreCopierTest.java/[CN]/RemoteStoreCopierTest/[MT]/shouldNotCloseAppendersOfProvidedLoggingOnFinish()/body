{
  String dir=new File(testDir.directory(),"dir").getAbsolutePath();
  Config config=new Config(stringMap(store_dir.name(),dir));
  ConsoleLogger console=new ConsoleLogger(StringLogger.SYSTEM);
  Logging logging=LogbackWeakDependency.tryLoadLogbackService(config,null);
  Monitors monitors=new Monitors();
  monitors.addMonitorListener(StoreCopyMonitor.NONE);
  RemoteStoreCopier copier=spy(new RemoteStoreCopier(config,loadKernelExtensions(),console,logging,fs,monitors));
  when(copier.logConfigFileName()).thenReturn("neo4j-logback.xml");
  Response response=mock(Response.class);
  when(response.transactions()).thenReturn(TransactionStream.EMPTY).getMock();
  RemoteStoreCopier.StoreCopyRequester requester=mock(RemoteStoreCopier.StoreCopyRequester.class);
  when(requester.copyStore(any(StoreWriter.class))).thenReturn(response);
  copier.copyStore(requester,CancellationRequest.NONE);
  LoggerContext context=ReflectionUtil.getPrivateField(logging,"loggerContext",LoggerContext.class);
  List<Appender<ILoggingEvent>> appenders=asList(context.getLogger("org.neo4j").iteratorForAppenders());
  assertThat(appenders,not(empty()));
}
