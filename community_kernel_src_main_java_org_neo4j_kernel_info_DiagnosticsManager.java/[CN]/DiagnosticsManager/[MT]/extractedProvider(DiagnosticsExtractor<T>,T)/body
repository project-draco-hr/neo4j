{
  if (extractor instanceof DiagnosticsExtractor.VisitableDiagnostics<?>) {
    return new ExtractedVisitableDiagnosticsProvider<T>((DiagnosticsExtractor.VisitableDiagnostics<T>)extractor,source);
  }
 else {
    return new ExtractedDiagnosticsProvider<T>(extractor,source);
  }
}
