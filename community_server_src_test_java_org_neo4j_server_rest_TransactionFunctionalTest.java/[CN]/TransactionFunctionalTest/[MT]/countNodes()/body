{
  Transaction transaction=graphdb().beginTx();
  try {
    long count=0;
    Iterator<Node> allNodes=GlobalGraphOperations.at(graphdb()).getAllNodes().iterator();
    while (allNodes.hasNext()) {
      allNodes.next();
      count++;
    }
    return count;
  }
  finally {
    transaction.finish();
  }
}
