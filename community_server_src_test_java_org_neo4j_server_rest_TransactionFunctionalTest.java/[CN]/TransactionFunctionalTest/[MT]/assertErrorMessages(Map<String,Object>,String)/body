{
  Iterator<Map<String,Object>> errors=((List<Map<String,Object>>)response.get("errors")).iterator();
  Iterator<String> expected=iterator(expectedMessages);
  while (expected.hasNext()) {
    assertTrue(errors.hasNext());
    assertThat((String)errors.next().get("message"),equalTo(expected.next()));
  }
  if (errors.hasNext()) {
    Map<String,Object> error=errors.next();
    fail("Expected no more errors, but got " + error.get("message") + " - '"+ error.get("message")+ "'.");
  }
}
