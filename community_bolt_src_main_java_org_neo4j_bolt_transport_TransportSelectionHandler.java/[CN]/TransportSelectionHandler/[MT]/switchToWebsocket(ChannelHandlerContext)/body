{
  ChannelPipeline p=ctx.pipeline();
  p.addLast(new HttpServerCodec(),new HttpObjectAggregator(MAX_WEBSOCKET_HANDSHAKE_SIZE),new WebSocketServerProtocolHandler("/"),new WebSocketFrameTranslator(),new SocketTransportHandler(new SocketTransportHandler.ProtocolChooser(protocolVersions,isEncrypted),logging));
  p.remove(this);
}
