{
  ByteArrayOutputStream snapshot=new ByteArrayOutputStream();
  try {
    fs.dumpZip(snapshot);
    exception.addSnapshot(when + ".zip",snapshot.toByteArray());
  }
 catch (  IOException e) {
    snapshot.reset();
    e.printStackTrace(new PrintStream(snapshot));
    exception.addSnapshot("dump-exception-" + when + ".txt",snapshot.toByteArray());
  }
}
