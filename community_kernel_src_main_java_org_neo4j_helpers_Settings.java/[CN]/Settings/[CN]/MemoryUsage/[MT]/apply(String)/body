{
  if (value.contains("%")) {
    try {
      String digitsOnly=value.replace("%","").trim();
      double percentage=Double.parseDouble(digitsOnly) / 100;
      if (percentage > 0 && percentage <= 1) {
        return Math.round(Math.min(percentage * totalRAM,freeRAM));
      }
    }
 catch (    NumberFormatException e) {
    }
    throw new IllegalArgumentException("Invalid memory fraction, expected a value between 0.0% and 100.0%.");
  }
  return BYTES.apply(value);
}
