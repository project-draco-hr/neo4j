{
  Thread thread=Thread.currentThread();
  R resource=current.remove(thread);
  if (resource != null) {
    boolean dead=false;
synchronized (unused) {
      if (unused.size() < maxUnused) {
        unused.add(resource);
      }
 else {
        dead=true;
      }
    }
    resources.release();
    if (dead)     dispose(resource);
  }
}
