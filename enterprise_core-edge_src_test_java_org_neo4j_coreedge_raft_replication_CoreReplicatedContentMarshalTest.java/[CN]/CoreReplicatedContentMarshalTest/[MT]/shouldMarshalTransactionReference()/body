{
  ByteBuf buffer=Unpooled.buffer();
  PhysicalTransactionRepresentation representation=new PhysicalTransactionRepresentation(Collections.<Command>emptyList());
  representation.setHeader(new byte[]{0},1,1,1,1,1,1);
  ReplicatedContent replicatedTx=ReplicatedTransactionFactory.createImmutableReplicatedTransaction(representation,globalSession,new LocalOperationId(0,0));
  marshal.serialize(replicatedTx,buffer);
  assertThat(marshal.deserialize(buffer),equalTo(replicatedTx));
}
