{
  ByteBuf buffer=Unpooled.buffer();
  ArrayList<Command> commands=new ArrayList<>();
  Command.LabelTokenCommand labelTokenCommand=new Command.LabelTokenCommand();
  LabelTokenRecord before=new LabelTokenRecord(0);
  LabelTokenRecord after=new LabelTokenRecord(0);
  after.setInUse(true);
  after.setCreated();
  after.setNameId(3232);
  labelTokenCommand.init(before,after);
  commands.add(labelTokenCommand);
  ReplicatedContent message=new ReplicatedTokenRequest(TokenType.LABEL,"theLabel",ReplicatedTokenRequestSerializer.createCommandBytes(commands));
  marshal.serialize(message,buffer);
  assertThat(marshal.deserialize(buffer),equalTo(message));
}
