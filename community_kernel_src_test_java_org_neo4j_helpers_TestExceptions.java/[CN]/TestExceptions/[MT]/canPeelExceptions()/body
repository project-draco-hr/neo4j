{
  Throwable expected;
  Throwable exception=new LevelOneException("",new LevelTwoException("",new LevelThreeException("",expected=new LevelThreeException("include",new LevelFourException("")))));
  Throwable peeled=Exceptions.peel(exception,new Predicate<Throwable>(){
    @Override public boolean accept(    Throwable item){
      return !(item instanceof LevelThreeException) || !item.getMessage().contains("include");
    }
  }
);
  assertEquals(expected,peeled);
}
