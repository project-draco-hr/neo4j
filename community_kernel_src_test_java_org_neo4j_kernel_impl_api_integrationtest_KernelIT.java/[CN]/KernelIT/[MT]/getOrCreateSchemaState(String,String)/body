{
  try (Transaction tx=db.beginTx()){
    Statement statement=statementContextSupplier.get();
    String state=statement.readOperations().schemaStateGetOrCreate(key,new Function<String,String>(){
      @Override public String apply(      String s){
        return maybeSetThisState;
      }
    }
);
    tx.success();
    return state;
  }
 }
