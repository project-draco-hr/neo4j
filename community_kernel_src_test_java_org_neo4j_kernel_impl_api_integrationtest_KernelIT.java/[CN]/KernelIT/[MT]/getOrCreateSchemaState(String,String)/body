{
  Transaction tx=db.beginTx();
  SchemaStatement statement=statementContextProvider.schemaStatement();
  String state=statement.schemaStateGetOrCreate(key,new Function<String,String>(){
    @Override public String apply(    String s){
      return maybeSetThisState;
    }
  }
);
  tx.success();
  tx.finish();
  return state;
}
