{
  Transaction tx=db.beginTx();
  Label label=label("labello");
  Node node=db.createNode(label);
  tx.success();
  tx.finish();
  tx=db.beginTx();
  node.delete();
  tx.success();
  tx.finish();
  tx=db.beginTx();
  StatementContext statement=statementContextProvider.getCtxForWriting();
  long labelId=statement.labelGetForName(label.name());
  Iterator<Long> nodes=statement.nodesGetForLabel(labelId);
  Set<Long> nodeSet=asSet(nodes);
  tx.success();
  tx.finish();
  assertThat(nodeSet,equalTo(Collections.<Long>emptySet()));
}
