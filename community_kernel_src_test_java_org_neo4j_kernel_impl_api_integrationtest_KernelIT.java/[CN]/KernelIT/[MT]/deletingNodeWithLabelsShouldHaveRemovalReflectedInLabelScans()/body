{
  Transaction tx=db.beginTx();
  Label label=label("labello");
  Node node=db.createNode(label);
  tx.success();
  tx.close();
  tx=db.beginTx();
  node.delete();
  tx.success();
  tx.close();
  tx=db.beginTx();
  Statement statement=statementContextSupplier.get();
  int labelId=statement.readOperations().labelGetForName(label.name());
  PrimitiveLongIterator nodes=statement.readOperations().nodesGetForLabel(labelId);
  Set<Long> nodeSet=asSet(nodes);
  tx.success();
  tx.close();
  assertThat(nodeSet,equalTo(Collections.<Long>emptySet()));
}
