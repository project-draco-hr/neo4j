{
  Transaction tx=db.beginTx();
  Label label=label("labello");
  Node node=db.createNode(label);
  tx.success();
  tx.finish();
  tx=db.beginTx();
  node.delete();
  tx.success();
  tx.finish();
  tx=db.beginTx();
  StatementOperations context=statementContextProvider.getCtxForWriting().asStatementOperations();
  StatementState statement=statementContextProvider.statementForWriting();
  long labelId=context.labelGetForName(statement,label.name());
  Iterator<Long> nodes=context.nodesGetForLabel(statement,labelId);
  Set<Long> nodeSet=asSet(nodes);
  tx.success();
  tx.finish();
  assertThat(nodeSet,equalTo(Collections.<Long>emptySet()));
}
