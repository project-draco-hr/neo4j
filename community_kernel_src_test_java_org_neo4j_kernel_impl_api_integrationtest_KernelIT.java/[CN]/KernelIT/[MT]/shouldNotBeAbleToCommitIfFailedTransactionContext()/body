{
  Transaction tx=db.beginTx();
  StatementContext statement=statementContextProvider.getCtxForWriting();
  Node node=db.createNode();
  long labelId=statement.labelGetOrCreateForName("labello");
  statement.nodeAddLabel(node.getId(),labelId);
  statement.close();
  tx.failure();
  tx.success();
  tx.finish();
  statement=statementContextProvider.getCtxForReading();
  try {
    statement.nodeHasLabel(node.getId(),labelId);
    fail("should have thrown exception");
  }
 catch (  EntityNotFoundException e) {
  }
}
