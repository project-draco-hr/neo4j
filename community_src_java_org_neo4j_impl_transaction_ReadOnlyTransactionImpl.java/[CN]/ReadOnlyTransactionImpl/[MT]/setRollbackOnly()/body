{
  if (status == Status.STATUS_ACTIVE || status == Status.STATUS_PREPARING || status == Status.STATUS_PREPARED || status == Status.STATUS_MARKED_ROLLBACK || status == Status.STATUS_ROLLING_BACK) {
    status=Status.STATUS_MARKED_ROLLBACK;
  }
 else {
    throw new IllegalStateException("Tx status is: " + txManager.getTxStatusAsString(status));
  }
}
