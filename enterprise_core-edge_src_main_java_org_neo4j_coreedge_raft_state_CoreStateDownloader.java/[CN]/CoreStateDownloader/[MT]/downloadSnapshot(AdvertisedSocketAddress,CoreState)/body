{
  localDatabase.stop();
  try {
    log.info("Downloading snapshot from core server at %s",source);
    localDatabase.copyStoreFrom(source,storeFetcher);
    stateFetcher.copyRaftState(source,receiver);
    localDatabase.start();
  }
 catch (  StoreCopyFailedException e) {
    log.warn("Failed to download snapshot",e);
  }
catch (  IOException e) {
    localDatabase.panic(e);
  }
}
