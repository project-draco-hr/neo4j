{
  NodeRecord node=nodeStore.forceGetRecord(nodeId);
  if (!node.inUse()) {
    throw new EntityNotFoundException(EntityType.NODE,nodeId);
  }
  long firstPropertyId=node.getNextProp();
  if (firstPropertyId == Record.NO_NEXT_PROPERTY.intValue()) {
    throw new PropertyNotFoundException(propertyKeyId,EntityType.NODE,nodeId);
  }
  for (  PropertyRecord propertyRecord : propertyStore.getPropertyRecordChain(firstPropertyId)) {
    PropertyBlock propertyBlock=propertyRecord.getPropertyBlock(propertyKeyId);
    if (propertyBlock != null) {
      return propertyBlock.newPropertyData(propertyStore);
    }
  }
  throw new PropertyNotFoundException(propertyKeyId,EntityType.NODE,nodeId);
}
