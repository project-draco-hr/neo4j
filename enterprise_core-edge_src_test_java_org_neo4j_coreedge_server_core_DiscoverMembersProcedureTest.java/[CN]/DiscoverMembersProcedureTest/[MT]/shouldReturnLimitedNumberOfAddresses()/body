{
  final ReadOnlyTopologyService coreTopologyService=mock(ReadOnlyTopologyService.class);
  final ClusterTopology clusterTopology=mock(ClusterTopology.class);
  when(coreTopologyService.currentTopology()).thenReturn(clusterTopology);
  when(clusterTopology.boltCoreMembers()).thenReturn(addresses(1,2,3));
  when(clusterTopology.edgeMembers()).thenReturn(addresses(4,5,6));
  final DiscoverMembersProcedure proc=new DiscoverMembersProcedure(coreTopologyService,NullLogProvider.getInstance());
  final List<Object[]> members=asList(proc.apply(null,new Object[]{1}));
  assertEquals(1,members.size());
}
