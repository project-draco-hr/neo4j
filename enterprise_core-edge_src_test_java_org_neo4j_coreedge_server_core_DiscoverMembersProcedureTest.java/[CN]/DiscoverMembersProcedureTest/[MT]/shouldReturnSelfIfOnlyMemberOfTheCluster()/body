{
  final CoreTopologyService coreTopologyService=mock(CoreTopologyService.class);
  Map<CoreMember,CoreAddresses> coreMembers=new HashMap<>();
  coreMembers.put(new CoreMember(UUID.randomUUID()),coreAddresses(1));
  final ClusterTopology clusterTopology=new ClusterTopology(false,coreMembers,addresses(4,5,6));
  when(coreTopologyService.currentTopology()).thenReturn(clusterTopology);
  final DiscoverMembersProcedure proc=new DiscoverMembersProcedure(coreTopologyService,NullLogProvider.getInstance());
  final List<Object[]> members=asList(proc.apply(null,new Object[0]));
  assertArrayEquals(members.get(0),new Object[]{coreAddresses(1).getRaftServer().toString()});
}
