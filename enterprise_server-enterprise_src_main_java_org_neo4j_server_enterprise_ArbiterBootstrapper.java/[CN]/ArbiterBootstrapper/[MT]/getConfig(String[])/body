{
  Map<String,String> config=new HashMap<>();
  String configPath=System.getProperty(ServerSettings.SERVER_CONFIG_FILE_KEY);
  if (configPath != null) {
    File configFile=new File(configPath);
    if (configFile.exists()) {
      config.putAll(MapUtil.load(configFile));
    }
 else {
      throw new IllegalArgumentException(configFile + " doesn't exist");
    }
  }
  config.putAll(Args.parse(args).asMap());
  verifyConfig(config);
  return new Config(config);
}
