{
  Class<?> implClass;
  try {
    implClass=getClass().getDeclaredMethod("createMBeans",ManagementData.class).getDeclaringClass();
  }
 catch (  Exception e) {
    implClass=ManagementBeanProvider.class;
  }
  if (implClass != ManagementBeanProvider.class) {
    return createMBeans(management);
  }
 else {
    return Collections.singleton(createMXBean(management));
  }
}
