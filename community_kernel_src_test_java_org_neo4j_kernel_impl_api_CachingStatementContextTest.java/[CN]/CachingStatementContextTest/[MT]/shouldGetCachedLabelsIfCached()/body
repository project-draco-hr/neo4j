{
  long nodeId=3;
  Set<Long> labels=new HashSet<Long>(asList(1L,2L,3L));
  PersistenceCache cache=mock(PersistenceCache.class);
  when(cache.nodeGetLabels(Matchers.eq(nodeId),Matchers.any(CacheLoader.class))).thenReturn(labels);
  EntityReadOperations entityReadOperations=mock(EntityReadOperations.class);
  SchemaReadOperations schemaReadOperations=mock(SchemaReadOperations.class);
  CachingStatementContext context=new CachingStatementContext(entityReadOperations,schemaReadOperations,cache,null);
  Iterator<Long> receivedLabels=context.nodeGetLabels(nodeId);
  assertEquals(labels,addToCollection(receivedLabels,new HashSet<Long>()));
}
