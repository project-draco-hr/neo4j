{
  PageSwapper io=new BufferPageSwapper(ByteBuffer.allocate(TEST_PAGE_SIZE));
  long pageId=12;
  PinnablePage page=table.load(io,pageId,PagedFile.PF_EXCLUSIVE_LOCK);
  monitor.observe(Fault.class);
  CountDownLatch latch=monitor.trap(is(new Evict(io,pageId)));
  page.unpin(PagedFile.PF_EXCLUSIVE_LOCK);
  monitor.observe(Evict.class);
  Thread pinForShared=fork($pinUnpin(page,io,pageId,PagedFile.PF_SHARED_LOCK));
  Thread pinForExclusive=fork($pinUnpin(page,io,pageId,PagedFile.PF_EXCLUSIVE_LOCK));
  awaitThreadState(pinForShared,Thread.State.WAITING);
  awaitThreadState(pinForExclusive,Thread.State.WAITING);
  latch.countDown();
  pinForShared.join();
  pinForExclusive.join();
}
