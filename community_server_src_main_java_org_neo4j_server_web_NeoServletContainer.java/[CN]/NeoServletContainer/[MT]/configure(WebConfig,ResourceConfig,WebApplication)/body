{
  super.configure(wc,rc,wa);
  Set<Object> singletons=rc.getSingletons();
  singletons.add(new RealClockProvider());
  singletons.add(new DatabaseProvider(server.getDatabase()));
  singletons.add(new GraphDatabaseServiceProvider(server.getDatabase().graph));
  singletons.add(new NeoServerProvider(server));
  singletons.add(new ConfigurationProvider(server.getConfiguration()));
  if (server.getDatabase().rrdDb() != null) {
    singletons.add(new RrdDbProvider(server.getDatabase().rrdDb()));
  }
  if (server instanceof NeoServerWithEmbeddedWebServer) {
    singletons.add(new WebServerProvider(((NeoServerWithEmbeddedWebServer)server).getWebServer()));
  }
  RepresentationFormatRepository repository=new RepresentationFormatRepository(server.getExtensionManager());
  singletons.add(new InputFormatProvider(repository));
  singletons.add(new OutputFormatProvider(repository));
  singletons.add(new PluginInvocatorProvider(server.getExtensionManager()));
  for (  final Injectable injectable : injectables) {
    singletons.add(new InjectableWrapper(injectable));
  }
}
