{
  if (s == null) {
    throw new IllegalArgumentException("Null parameter");
  }
  if (status == Status.STATUS_ACTIVE || status == Status.STATUS_PREPARING || status == Status.STATUS_MARKED_ROLLBACK) {
    if (!beforeCompletionRunning) {
      syncHooks.add(s);
    }
 else {
      syncHooksAdded.add(s);
    }
  }
 else   if (status == Status.STATUS_ROLLING_BACK || status == Status.STATUS_ROLLEDBACK) {
    throw new RollbackException("Tx status is: " + txManager.getTxStatusAsString(status));
  }
 else {
    throw new IllegalStateException("Tx status is: " + txManager.getTxStatusAsString(status));
  }
}
