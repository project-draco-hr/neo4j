{
  HighAvailabilityMemberStateMachine stateMachine=mock(HighAvailabilityMemberStateMachine.class);
  when(stateMachine.getCurrentState()).thenReturn(memberState);
  ClusterMember clusterMember=spy(new ClusterMember(new InstanceId(1)));
  when(clusterMember.getHARole()).thenReturn(memberRole);
  ObservedClusterMembers observedClusterMembers=mock(ObservedClusterMembers.class);
  when(observedClusterMembers.getCurrentMember()).thenReturn(clusterMember);
  return new ClusterMembers(observedClusterMembers,stateMachine);
}
