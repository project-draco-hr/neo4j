{
  Set<URI> excluded;
  if (exclude == null || exclude.length == 0) {
    excluded=Collections.emptySet();
  }
 else {
    excluded=new HashSet<URI>(Arrays.asList(exclude));
  }
  List<URI> candidates=new ArrayList<URI>();
  for (  Triplet<ServerManager,URI,File> server : servers) {
    if (server != null && !excluded.contains(server.second())) {
      candidates.add(server.second());
    }
  }
  if (candidates.isEmpty()) {
    throw new IllegalStateException("No servers available");
  }
  return candidates.get(random.nextInt(candidates.size()));
}
