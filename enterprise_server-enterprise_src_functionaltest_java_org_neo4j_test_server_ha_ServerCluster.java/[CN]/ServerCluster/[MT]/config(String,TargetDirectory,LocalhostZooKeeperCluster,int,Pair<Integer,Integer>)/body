{
  File serverDir=targetDir.directory("server-" + ports.other(),true);
  File serverConfig=new File(serverDir,"server.cfg");
  File dbConfig=new File(serverDir,"neo4j.cfg");
  File dbDir=new File(serverDir,"graph-database");
  config(serverConfig,Pair.of(Configurator.DB_MODE_KEY,"ha"),Pair.of(Configurator.DATABASE_LOCATION_PROPERTY_KEY,dbDir.getAbsolutePath()),Pair.of(Configurator.WEBSERVER_PORT_PROPERTY_KEY,ports.other().toString()),Pair.of(Configurator.DB_TUNING_PROPERTY_FILE_KEY,dbConfig.getAbsolutePath()));
  config(dbConfig,Pair.of(HaSettings.cluster_name.name(),name),Pair.of(HaSettings.server.name(),"localhost:" + ports.first()),Pair.of(HaSettings.server_id.name(),Integer.toString(id)),Pair.of(HaSettings.coordinators.name(),keeperCluster.getConnectionString()));
  return Pair.of(serverConfig.getAbsolutePath(),serverDir);
}
