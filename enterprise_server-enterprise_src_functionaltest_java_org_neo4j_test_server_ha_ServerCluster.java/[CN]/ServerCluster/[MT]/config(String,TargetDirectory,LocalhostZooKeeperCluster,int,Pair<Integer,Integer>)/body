{
  File serverDir=targetDir.directory("server-" + ports.other(),true);
  File serverConfig=new File(serverDir,"server.cfg");
  File dbConfig=new File(serverDir,"neo4j.cfg");
  File dbDir=new File(serverDir,"graph-database");
  config(serverConfig,Pair.of(Configurator.DB_MODE_KEY,"ha"),Pair.of(Configurator.DATABASE_LOCATION_PROPERTY_KEY,dbDir.getAbsolutePath()),Pair.of(Configurator.WEBSERVER_PORT_PROPERTY_KEY,ports.other().toString()),Pair.of(Configurator.DB_TUNING_PROPERTY_FILE_KEY,dbConfig.getAbsolutePath()));
  config(dbConfig,Pair.of(HaConfig.CONFIG_KEY_CLUSTER_NAME,name),Pair.of(HaConfig.CONFIG_KEY_SERVER,"localhost:" + ports.first()),Pair.of(HaConfig.CONFIG_KEY_SERVER_ID,Integer.toString(id)),Pair.of(HaConfig.CONFIG_KEY_COORDINATORS,keeperCluster.getConnectionString()));
  return Pair.of(serverConfig.getAbsolutePath(),serverDir);
}
