{
  int pagesInCache=64;
  int pagesKeptInUse=(int)(pagesInCache * ClockSweepPageTable.PAGE_UTILISATION_RATIO);
  StandardPageCache cache=getPageCache(fs,pagesInCache,filePageSize,PageCacheMonitor.NULL);
  StandardPagedFile pagedFile=(StandardPagedFile)cache.map(file,filePageSize);
  try (PageCursor cursor=pagedFile.io(0,PagedFile.PF_EXCLUSIVE_LOCK)){
    for (int i=0; i < 128; i++) {
      cursor.next();
    }
  }
   Thread.sleep(50);
  assertThat(pagedFile.numberOfCachedPages(),allOf(greaterThanOrEqualTo(pagesKeptInUse),lessThanOrEqualTo(pagesInCache)));
  cache.unmap(file);
}
