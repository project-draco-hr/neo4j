{
  buffer.clear();
  buffer.limit(1 + 4);
  buffer.put(LogEntry.TX_PREPARE);
  if (fileChannel.read(buffer) != 4) {
    throw new IllegalStateException("Unable to read prepare entry");
  }
  buffer.flip();
  buffer.position(1);
  int identifier=buffer.getInt();
  FileChannel writeToLog=null;
  if (xidIdentMap.get(identifier) != null) {
    writeToLog=newLog;
  }
  buffer.position(0);
  if (writeToLog != null && writeToLog.write(buffer) != 5) {
    throw new TransactionFailureException("Unable to write prepare entry");
  }
}
