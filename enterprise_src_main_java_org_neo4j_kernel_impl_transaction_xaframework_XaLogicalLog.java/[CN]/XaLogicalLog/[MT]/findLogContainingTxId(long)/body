{
  long version=logVersion;
  long committedTx=previousLogLastCommittedTx;
  while (version >= 0) {
    ReadableByteChannel log=getLogicalLogOrMyself(version);
    ByteBuffer buf=ByteBuffer.allocate(16);
    long[] header=readAndAssertLogHeader(buf,log,version);
    committedTx=header[1];
    log.close();
    if (committedTx < txId) {
      break;
    }
    version--;
  }
  return version;
}
