{
  if (readOnly) {
    return new ReadOnlyNodeManager(logging.getMessagesLog(NodeManager.class),this,relationshipTypeTokenHolder,cacheType,propertyKeyTokenHolder,labelTokenHolder,createNodeLookup(),createRelationshipLookups(),nodeCache,relCache,threadToTransactionBridge,idGeneratorFactory){
      @Override public Node getNodeByIdOrNull(      final long nodeId){
        guard.check();
        return super.getNodeByIdOrNull(nodeId);
      }
      @Override public NodeImpl getNodeForProxy(      final long nodeId){
        guard.check();
        return super.getNodeForProxy(nodeId);
      }
      @Override public RelationshipImpl getRelationshipForProxy(      final long relId){
        guard.check();
        return super.getRelationshipForProxy(relId);
      }
      @Override protected Relationship getRelationshipByIdOrNull(      final long relId){
        guard.check();
        return super.getRelationshipByIdOrNull(relId);
      }
    }
;
  }
  return new NodeManager(logging.getMessagesLog(NodeManager.class),this,relationshipTypeTokenHolder,cacheType,propertyKeyTokenHolder,labelTokenHolder,createNodeLookup(),createRelationshipLookups(),nodeCache,relCache,threadToTransactionBridge,idGeneratorFactory){
    @Override public Node getNodeByIdOrNull(    final long nodeId){
      guard.check();
      return super.getNodeByIdOrNull(nodeId);
    }
    @Override public NodeImpl getNodeForProxy(    final long nodeId){
      guard.check();
      return super.getNodeForProxy(nodeId);
    }
    @Override public RelationshipImpl getRelationshipForProxy(    final long relId){
      guard.check();
      return super.getRelationshipForProxy(relId);
    }
    @Override protected Relationship getRelationshipByIdOrNull(    final long relId){
      guard.check();
      return super.getRelationshipByIdOrNull(relId);
    }
  }
;
}
