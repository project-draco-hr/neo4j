{
  this.net=net;
  for (  Long id : memberIds) {
    RaftTestMember member=RaftTestMember.member(id);
    RaftTestNetwork.Inbound inbound=net.new Inbound(member);
    RaftTestNetwork.Outbound outbound=net.new Outbound(member);
    members.add(member);
    DelayedRenewableTimeoutService timeoutService=createTimeoutService();
    RaftInstance<RaftTestMember> raftInstance=new RaftInstanceBuilder<>(member,memberIds.size(),RaftTestMemberSetBuilder.INSTANCE).electionTimeout(electionTimeout).heartbeatInterval(heartbeatInterval).inbound(inbound).outbound(outbound).timeoutService(timeoutService).raftLog(new InMemoryRaftLog()).stateMachine(stateMachine).build();
    rafts.add(raftInstance);
  }
}
