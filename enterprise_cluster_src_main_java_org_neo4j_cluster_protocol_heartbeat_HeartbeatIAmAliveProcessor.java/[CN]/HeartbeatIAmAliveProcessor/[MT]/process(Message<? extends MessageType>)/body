{
  if (!message.isInternal() && !message.getMessageType().equals(HeartbeatMessage.i_am_alive)) {
    String from=message.getHeader(Message.FROM);
    if (!from.equals(message.getHeader(Message.TO))) {
      InstanceId id=clusterContext.getConfiguration().getServerId(URI.create(from));
      if (id != null && !clusterContext.isMe(id)) {
        output.offer(message.copyHeadersTo(Message.internal(HeartbeatMessage.i_am_alive,new HeartbeatMessage.IAmAliveState(id)),Message.FROM));
      }
    }
  }
  return true;
}
