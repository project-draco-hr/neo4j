{
  String baseReport=super.createReport(prefix);
  StringBuilder report=new StringBuilder(baseReport);
  report.append(prefix + "Object allocations:\n");
  for (  MemoryProfilingReport.ObjectReport objectReport : sortedObjectReports()) {
    report.append(String.format("%s  %12d bytes  %12d allocations: %s\n",prefix,objectReport.getTotalBytes(),objectReport.getTotalObjectsAllocated(),objectReport.getObjectName()));
  }
  System.out.println("Allocation sources:\n");
  for (  MemoryProfilingReport.ObjectReport objectReport : sortedObjectReports()) {
    report.append(prefix + "Allocations of '" + objectReport.getObjectName()+ "'\n");
    for (    MemoryProfilingReport.AllocationReport allocationReport : sortedAllocationSources(objectReport)) {
      report.append(prefix + "  " + allocationReport.getAllocations()+ " allocations from:\n");
      report.append(allocationReport.getStackTrace());
      report.append("\n\n");
    }
  }
  return report.toString();
}
