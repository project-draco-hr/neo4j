{
  if (value instanceof Path) {
    Path path=(Path)value;
    if (path.length() != pathLinks.size()) {
      return false;
    }
    if (pathLinks.isEmpty()) {
      return path.length() == 0 && singleNodePath.matches(path.startNode()) && singleNodePath.matches(path.endNode());
    }
 else {
      Iterator<Relationship> relationships=path.relationships().iterator();
      for (      PathLinkMatcher pathLink : pathLinks) {
        Relationship next=relationships.next();
        if (!pathLink.matches(next)) {
          return false;
        }
      }
      return true;
    }
  }
  return false;
}
