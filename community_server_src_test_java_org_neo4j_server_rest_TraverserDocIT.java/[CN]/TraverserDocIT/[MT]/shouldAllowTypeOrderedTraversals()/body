{
  Node start=getNode("Root");
  String description=createJsonFrom(map("expander","order_by_type","relationships",new Map[]{map("type","eats"),map("type","knows"),map("type","likes")},"prune_evaluator",map("language","builtin","name","none"),"return_filter",map("language","javascript","body","position.length()<2;")));
  @SuppressWarnings("unchecked") List<Map<String,Object>> nodes=(List<Map<String,Object>>)readJson(gen().expectedStatus(200).payload(description).post(getTraverseUriNodes(start)).entity());
  assertThat(nodes.size(),is(5));
  assertThat(getName(nodes.get(0)),is("Root"));
  assertThat(getName(nodes.get(1)),is("Cork"));
  Set<String> knowsNodes=new HashSet<>(Arrays.asList("Johan","Mattias"));
  assertTrue(knowsNodes.remove(getName(nodes.get(2))));
  assertTrue(knowsNodes.remove(getName(nodes.get(3))));
  assertThat(getName(nodes.get(4)),is("Banana"));
}
