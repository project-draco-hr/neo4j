{
  TransactionalActions actions=new TransactionalActions(mess,engine,registry,logger);
  TestResultHandler results=new TestResultHandler();
  actions.findTransaction(txId).commit(failingRequest(new InvalidRequestError("Lolwut")),results);
  assertThat(results.results.size(),equalTo(0));
  assertThat(results.errors.get(0).getErrorCode(),equalTo(INVALID_REQUEST));
  verify(registry).resume(txId);
  verify(registry).finish(txId);
  verify(ctx).rollback();
  verifyNoMoreInteractions(mess,registry,engine,ctx);
  logger.assertNoLoggingOccurred();
}
