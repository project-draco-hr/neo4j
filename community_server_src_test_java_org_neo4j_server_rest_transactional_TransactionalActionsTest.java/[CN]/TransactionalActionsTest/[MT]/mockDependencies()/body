{
  logger=new TestLogger();
  result=mock(ExecutionResult.class);
  engine=mock(ExecutionEngine.class);
  when(engine.execute(anyString(),anyMapOf(String.class,Object.class))).thenReturn(result);
  ctx=mock(TransactionContext.class);
  mess=mock(TransitionalPeriodTransactionMessContainer.class);
  when(mess.newTransactionContext()).thenReturn(ctx);
  registry=mock(TransactionRegistry.class);
  when(registry.begin()).thenReturn(txId);
  when(registry.resume(txId)).thenReturn(ctx);
}
