{
  EphemeralFileSystemAbstraction fsa=new EphemeralFileSystemAbstraction();
  fsa.mkdir(testDir.directory());
  RaftTestGroup raftTestGroup=new RaftTestGroup(1,2,3,4);
  OnDiskRaftMembershipState<RaftTestMember> state=new OnDiskRaftMembershipState<>(fsa,testDir.directory(),10,mock(Supplier.class),new RaftTestMarshal(),NullLogProvider.getInstance());
  state.setVotingMembers(raftTestGroup.getMembers());
  long atLogIndex=123;
  state.logIndex(atLogIndex);
  state.setVotingMembers(new RaftTestGroup(6,7).getMembers());
  OnDiskRaftMembershipState<RaftTestMember> restored=new OnDiskRaftMembershipState<>(fsa,testDir.directory(),10,mock(Supplier.class),new RaftTestMarshal(),NullLogProvider.getInstance());
  assertEquals(raftTestGroup.getMembers(),restored.votingMembers());
  assertEquals(atLogIndex,restored.logIndex());
}
