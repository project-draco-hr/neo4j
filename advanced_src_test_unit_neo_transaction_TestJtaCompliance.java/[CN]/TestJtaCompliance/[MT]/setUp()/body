{
  java.util.Map<String,FakeXAResource> map1=new java.util.HashMap<String,FakeXAResource>();
  map1.put("xa_resource",new FakeXAResource("XAResource1"));
  java.util.Map<String,FakeXAResource> map2=new java.util.HashMap<String,FakeXAResource>();
  map2.put("xa_resource",new FakeXAResource("XAResource2"));
  try {
    xaDsMgr.registerDataSource("fakeRes1",new DummyXaDataSource(map1),"0xDDDDDE".getBytes());
    xaDsMgr.registerDataSource("fakeRes2",new DummyXaDataSource(map2),"0xDDDDDF".getBytes());
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  try {
    tm.commit();
  }
 catch (  Exception e) {
  }
  Transaction tx=null;
  try {
    tx=tm.getTransaction();
  }
 catch (  Exception e) {
    throw new RuntimeException("Unkown state of TM");
  }
  if (tx != null) {
    throw new RuntimeException("We're still in transaction");
  }
}
