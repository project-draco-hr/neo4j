{
  Map<String,Object> command=input.readMap(body);
  if (!command.containsKey(QUERY_KEY)) {
    return output.badRequest(new BadInputException("You have to provide the 'query' parameter."));
  }
  String query=(String)command.get(QUERY_KEY);
  Map<String,Object> params=(Map<String,Object>)(command.containsKey(PARAMS_KEY) ? command.get(PARAMS_KEY) : new HashMap<String,Object>());
  try {
    ExecutionResult result=executionEngine.execute(parser.parse(query),params);
    return output.ok(new CypherResultRepresentation(result));
  }
 catch (  SyntaxException e) {
    return output.badRequest(e);
  }
}
