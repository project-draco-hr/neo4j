{
  ThreadLocalRandom rng=ThreadLocalRandom.current();
  while (!shouldStop.get()) {
    boolean updateCounter=rng.nextBoolean();
    int pf_flags=updateCounter ? PF_SHARED_WRITE_LOCK : PF_SHARED_READ_LOCK;
    performReadOrUpdate(rng,updateCounter,pf_flags);
  }
  return new UpdateResult(threadId,pageCounts);
}
