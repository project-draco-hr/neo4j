{
  IndexReader reader=upToDateReader();
  IndexSearcher searcher=new IndexSearcher(reader);
  try {
    for (    NodePropertyUpdate update : this.updates) {
switch (update.getUpdateMode()) {
case ADDED:
        addFromUpdate(reader,update.getNodeId(),update.getValueAfter());
      break;
case CHANGED:
    changeFromUpdate(reader,update.getNodeId(),update.getValueBefore(),update.getValueAfter());
  break;
case REMOVED:
removeFromUpdate(reader,update.getNodeId(),update.getValueBefore());
break;
}
}
}
  finally {
searcher.close();
}
}
