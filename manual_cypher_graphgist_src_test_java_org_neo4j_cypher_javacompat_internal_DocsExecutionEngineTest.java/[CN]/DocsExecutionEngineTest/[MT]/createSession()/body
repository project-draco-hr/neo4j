{
  InternalTransaction transaction=database.beginTransaction(KernelTransaction.Type.implicit,AccessMode.FULL);
  ThreadToStatementContextBridge bridge=database.getDependencyResolver().resolveDependency(ThreadToStatementContextBridge.class);
  Neo4jTransactionalContext context=new Neo4jTransactionalContext(database,transaction,bridge.get(),new PropertyContainerLocker());
  return QueryEngineProvider.embeddedSession(context);
}
