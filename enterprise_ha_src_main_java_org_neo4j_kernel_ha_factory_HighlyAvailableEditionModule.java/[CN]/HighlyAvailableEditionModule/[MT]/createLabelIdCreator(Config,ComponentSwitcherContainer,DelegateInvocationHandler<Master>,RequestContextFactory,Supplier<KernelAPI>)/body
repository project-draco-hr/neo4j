{
  if (config.get(GraphDatabaseSettings.read_only)) {
    return new ReadOnlyTokenCreator();
  }
  DelegateInvocationHandler<TokenCreator> labelIdCreatorDelegate=new DelegateInvocationHandler<>(TokenCreator.class);
  TokenCreator labelIdCreator=(TokenCreator)newProxyInstance(TokenCreator.class.getClassLoader(),new Class[]{TokenCreator.class},labelIdCreatorDelegate);
  LabelTokenCreatorSwitcher modeSwitcher=new LabelTokenCreatorSwitcher(labelIdCreatorDelegate,masterDelegateInvocationHandler,requestContextFactory,kernelProvider,idGeneratorFactory);
  componentSwitcherContainer.add(modeSwitcher);
  return labelIdCreator;
}
