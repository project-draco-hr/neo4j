{
  DelegateInvocationHandler<Locks> lockManagerDelegate=new DelegateInvocationHandler<>(Locks.class,logging.getInternalLogProvider());
  final Locks lockManager=(Locks)newProxyInstance(Locks.class.getClassLoader(),new Class[]{Locks.class},lockManagerDelegate);
  paxosLife.add(new LockManagerModeSwitcher(highAvailabilityModeSwitcher,lockManagerDelegate,masterDelegateInvocationHandler,requestContextFactory,availabilityGuard,config,new Factory<Locks>(){
    @Override public Locks newInstance(){
      return CommunityEditionModule.createLockManager(config,logging);
    }
  }
));
  return lockManager;
}
