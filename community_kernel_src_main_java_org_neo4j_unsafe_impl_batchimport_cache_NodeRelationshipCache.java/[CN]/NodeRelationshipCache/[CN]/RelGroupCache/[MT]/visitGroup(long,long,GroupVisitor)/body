{
  long index=rebase(relGroupIndex);
  ByteArray array=this.array.at(index);
  long out=all48Bits(array,index,directionOffset(Direction.OUTGOING));
  long in=all48Bits(array,index,directionOffset(Direction.INCOMING));
  long loop=all48Bits(array,index,directionOffset(Direction.BOTH));
  long next=all48Bits(array,index,NEXT_OFFSET);
  long nextId=out == EMPTY && in == EMPTY && loop == EMPTY ? EMPTY : visitor.visit(nodeId,next,out,in,loop);
  array.set6ByteLong(index,NEXT_OFFSET,nextId);
  return nextId;
}
