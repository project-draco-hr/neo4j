{
  long mask=changeMask(denseNodes);
  byte chunkMask=chunkChangeMask(denseNodes);
  for (long nodeId=0; nodeId < highNodeId; ) {
    if (!chunkHasChange(nodeId,chunkMask)) {
      nodeId+=chunkSize;
      continue;
    }
    ByteArray chunk=array.at(nodeId);
    for (int i=0; i < chunkSize && nodeId < highNodeId; i++, nodeId++) {
      if (isDense(chunk,nodeId) == denseNodes && nodeIsChanged(chunk,nodeId,mask)) {
        visitor.change(nodeId,chunk);
      }
    }
  }
}
