{
synchronized (samplerPutAtomicityLock) {
    List<ConstructorCallback<?>> list=samplerMap.get(c);
    if (list == null) {
      CopyOnWriteArrayList<ConstructorCallback<?>> samplerList=new CopyOnWriteArrayList<ConstructorCallback<?>>();
      samplerList.add(sampler);
      samplerMap.put(c,samplerList);
      Instrumentation inst=AllocationRecorder.getInstrumentation();
      Class<?>[] cs=new Class<?>[1];
      cs[0]=c;
      inst.retransformClasses(c);
    }
 else {
      list.add(sampler);
    }
  }
}
