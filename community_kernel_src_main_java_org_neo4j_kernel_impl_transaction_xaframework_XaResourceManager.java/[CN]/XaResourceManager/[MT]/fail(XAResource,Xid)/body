{
  XidStatus xidStatus=xidMap.get(xid);
  if (xidStatus == null) {
    throw new XAException("Unknown xid[" + xid + "]");
  }
  if (xaResourceMap.remove(xaResource) == null) {
    throw new XAException("Resource[" + xaResource + "] not enlisted");
  }
  xidStatus.getTransactionStatus().markAsRollback();
}
