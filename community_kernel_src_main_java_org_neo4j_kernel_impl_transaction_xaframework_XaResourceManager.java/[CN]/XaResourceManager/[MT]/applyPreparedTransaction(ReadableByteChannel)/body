{
  long txId=0;
  LogEntry.Start startEntry=null;
synchronized (this) {
    txId=TxIdGenerator.DEFAULT.generate(dataSource,0);
    startEntry=log.applyTransactionWithoutTxId(transaction,txId,getForceMode());
  }
  txIdGenerator.committed(dataSource,startEntry.getIdentifier(),txId,startEntry.getLocalId());
  return txId;
}
