{
  if (log.scanIsComplete() && recoveredTxCount == 0) {
    msgLog.logMessage("XaResourceManager[" + name + "] checkRecoveryComplete "+ xidMap.size()+ " xids");
    tf.recoveryComplete();
    try {
      for (      TransactionInfo recoveredTx : recoveredDoneRecords) {
        if (!recoveredTx.isOnePhase()) {
          log.commitTwoPhase(recoveredTx.getIdentifier(),recoveredTx.getTxId(),ForceMode.forced);
        }
        log.doneInternal(recoveredTx.getIdentifier());
      }
      recoveredDoneRecords.clear();
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
catch (    XAException e) {
      e.printStackTrace();
    }
    msgLog.logMessage("XaResourceManager[" + name + "] recovery completed.");
  }
}
