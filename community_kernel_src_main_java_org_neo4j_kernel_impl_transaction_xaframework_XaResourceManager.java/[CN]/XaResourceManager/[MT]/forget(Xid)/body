{
  XidStatus status=xidMap.get(xid);
  if (status == null) {
    return null;
  }
  TransactionStatus txStatus=status.getTransactionStatus();
  XaTransaction xaTransaction=txStatus.getTransaction();
  if (!xaTransaction.isReadOnly()) {
    checkStartWritten(txStatus,xaTransaction);
    log.done(xaTransaction.getIdentifier());
  }
  xidMap.remove(xid);
  if (xaTransaction.isRecovered()) {
    oneMoreTransactionRecovered();
  }
  return xaTransaction;
}
