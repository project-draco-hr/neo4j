{
  OutOfMemoryError oom=new OutOfMemoryError();
  when(master.pullUpdates(any(RequestContext.class))).thenThrow(oom).thenReturn(Response.EMPTY);
  updatePuller.pullUpdates();
  logProvider.assertAtLeastOnce(inLog(SlaveUpdatePuller.class).error(org.hamcrest.Matchers.any(String.class),sameInstance(oom)));
  updatePuller.pullUpdates();
}
