{
  buffer.clear();
  buffer.limit(9);
  if (byteChannel.read(buffer) != buffer.limit()) {
    return null;
  }
  buffer.flip();
  int id=buffer.getInt();
  int type=buffer.getInt();
  byte inUseFlag=buffer.get();
  boolean inUse=false;
  if (inUseFlag == Record.IN_USE.byteValue()) {
    inUse=true;
    buffer.clear();
    buffer.limit(12);
    if (byteChannel.read(buffer) != buffer.limit()) {
      return null;
    }
    buffer.flip();
  }
 else   if (inUseFlag != Record.NOT_IN_USE.byteValue()) {
    throw new IOException("Illegal in use flag: " + inUseFlag);
  }
  DynamicRecord record=new DynamicRecord(id);
  record.setInUse(inUse,type);
  if (inUse) {
    record.setPrevBlock(buffer.getInt());
    int nrOfBytes=buffer.getInt();
    record.setNextBlock(buffer.getInt());
    buffer.clear();
    buffer.limit(nrOfBytes);
    if (byteChannel.read(buffer) != buffer.limit()) {
      return null;
    }
    buffer.flip();
    byte data[]=new byte[nrOfBytes];
    buffer.get(data);
    record.setData(data);
  }
  return record;
}
