{
  PendingIdAllocationRequests pendingRequests=new PendingIdAllocationRequests();
  ReplicatedIdAllocationStateMachine stateMachine=new ReplicatedIdAllocationStateMachine(new InMemoryStateStorage<>(new IdAllocationState()),pendingRequests,NullLogProvider.getInstance());
  ReplicatedIdAllocationRequest idAllocationRequest=new ReplicatedIdAllocationRequest(me,someType,0,1024);
  stateMachine.applyCommand(idAllocationRequest,0);
  assertEquals(1024,pendingRequests.firstUnallocated(someType));
  assertEquals(0,pendingRequests.firstUnallocated(someOtherType));
}
