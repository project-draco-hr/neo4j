{
  ReplicatedIdAllocationStateMachine idAllocationStateMachine=new ReplicatedIdAllocationStateMachine(me,new InMemoryStateStorage<>(new IdAllocationState()),NullLogProvider.getInstance());
  ReplicatedIdAllocationRequest idAllocationRequest=new ReplicatedIdAllocationRequest(me,someType,0,1024);
  idAllocationStateMachine.applyCommand(idAllocationRequest,0);
  assertEquals(1024,idAllocationStateMachine.getFirstNotAllocated(someType));
  assertEquals(0,idAllocationStateMachine.getFirstNotAllocated(someOtherType));
}
