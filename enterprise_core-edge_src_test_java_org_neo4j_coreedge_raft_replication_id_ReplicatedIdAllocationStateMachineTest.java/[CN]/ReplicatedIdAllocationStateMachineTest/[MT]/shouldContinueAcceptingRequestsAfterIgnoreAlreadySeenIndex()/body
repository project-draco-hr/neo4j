{
  final long AN_INDEX=24;
  IdAllocationState idAllocationState=new InMemoryIdAllocationState();
  ReplicatedIdAllocationStateMachine stateMachine=new ReplicatedIdAllocationStateMachine(me,idAllocationState,NullLogProvider.getInstance());
  ReplicatedIdAllocationRequest mockRequest=mock(ReplicatedIdAllocationRequest.class);
  when(mockRequest.owner()).thenReturn(someoneElse);
  when(mockRequest.idType()).thenReturn(someType);
  stateMachine.onReplicated(mockRequest,AN_INDEX);
  ReplicatedIdAllocationRequest replicatedMockRequest=mock(ReplicatedIdAllocationRequest.class);
  when(replicatedMockRequest.owner()).thenReturn(someoneElse);
  when(replicatedMockRequest.idType()).thenReturn(someType);
  stateMachine.onReplicated(replicatedMockRequest,AN_INDEX - 3);
  ReplicatedIdAllocationRequest newReplicatedRequest=mock(ReplicatedIdAllocationRequest.class);
  when(newReplicatedRequest.owner()).thenReturn(someoneElse);
  when(newReplicatedRequest.idType()).thenReturn(someType);
  stateMachine.onReplicated(newReplicatedRequest,AN_INDEX + 12);
  verifyZeroInteractions(replicatedMockRequest);
}
