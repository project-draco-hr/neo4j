{
  final long AN_INDEX=24;
  StateStorage<IdAllocationState> stateStorage=new InMemoryStateStorage<>(new IdAllocationState());
  ReplicatedIdAllocationStateMachine stateMachine=new ReplicatedIdAllocationStateMachine(me,stateStorage,NullLogProvider.getInstance());
  ReplicatedIdAllocationRequest mockRequest=mock(ReplicatedIdAllocationRequest.class);
  when(mockRequest.owner()).thenReturn(someoneElse);
  when(mockRequest.idType()).thenReturn(someType);
  stateMachine.applyCommand(mockRequest,AN_INDEX);
  ReplicatedIdAllocationRequest replicatedMockRequest=mock(ReplicatedIdAllocationRequest.class);
  when(replicatedMockRequest.owner()).thenReturn(someoneElse);
  when(replicatedMockRequest.idType()).thenReturn(someType);
  stateMachine.applyCommand(replicatedMockRequest,AN_INDEX - 3);
  ReplicatedIdAllocationRequest newReplicatedRequest=mock(ReplicatedIdAllocationRequest.class);
  when(newReplicatedRequest.owner()).thenReturn(someoneElse);
  when(newReplicatedRequest.idType()).thenReturn(someType);
  stateMachine.applyCommand(newReplicatedRequest,AN_INDEX + 12);
  verifyZeroInteractions(replicatedMockRequest);
}
