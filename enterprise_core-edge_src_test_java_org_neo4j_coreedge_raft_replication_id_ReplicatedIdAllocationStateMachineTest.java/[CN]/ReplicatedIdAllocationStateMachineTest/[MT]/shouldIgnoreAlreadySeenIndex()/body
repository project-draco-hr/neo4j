{
  final long AN_INDEX=24;
  StateStorage<IdAllocationState> stateStorage=new InMemoryStateStorage<>(new IdAllocationState());
  ReplicatedIdAllocationStateMachine stateMachine=new ReplicatedIdAllocationStateMachine(me,stateStorage,NullLogProvider.getInstance());
  ReplicatedIdAllocationRequest mockRequest=mock(ReplicatedIdAllocationRequest.class);
  when(mockRequest.owner()).thenReturn(someoneElse);
  when(mockRequest.idType()).thenReturn(someType);
  stateMachine.applyCommand(mockRequest,AN_INDEX);
  ReplicatedIdAllocationRequest replicatedMockRequest=mock(ReplicatedIdAllocationRequest.class);
  when(replicatedMockRequest.owner()).thenReturn(someoneElse);
  stateMachine.applyCommand(replicatedMockRequest,AN_INDEX - 3);
  ReplicatedIdAllocationRequest anotherReplicatedMockRequest=mock(ReplicatedIdAllocationRequest.class);
  when(anotherReplicatedMockRequest.owner()).thenReturn(someoneElse);
  stateMachine.applyCommand(anotherReplicatedMockRequest,AN_INDEX);
  verifyZeroInteractions(replicatedMockRequest);
  verifyZeroInteractions(anotherReplicatedMockRequest);
}
