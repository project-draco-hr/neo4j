{
  try {
    final StreamingOutput stream=new StreamingOutput(){
      @Override public void write(      final OutputStream output) throws IOException, WebApplicationException {
        try {
          final ServletOutputStream servletOutputStream=new ServletOutputStream(){
            @Override public void write(            int i) throws IOException {
              output.write(i);
            }
          }
;
          new StreamingBatchOperations(webServer).readAndExecuteOperations(uriInfo,httpHeaders,body,servletOutputStream);
          representationWrittenHandler.onRepresentationWritten();
        }
 catch (        Exception e) {
          Log.warn("Error executing batch request ",e);
        }
 finally {
          representationWrittenHandler.onRepresentationFinal();
        }
      }
    }
;
    return Response.ok(stream).type(HttpHeaderUtils.mediaTypeWithCharsetUtf8(MediaType.APPLICATION_JSON_TYPE)).build();
  }
 catch (  Exception e) {
    return output.serverError(e);
  }
}
