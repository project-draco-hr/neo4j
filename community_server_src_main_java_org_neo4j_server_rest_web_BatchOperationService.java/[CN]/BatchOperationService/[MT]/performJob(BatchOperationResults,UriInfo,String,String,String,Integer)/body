{
  InternalJettyServletRequest req=new InternalJettyServletRequest();
  InternalJettyServletResponse res=new InternalJettyServletResponse();
  Map<Integer,String> locations=results.getLocations();
  path=replaceLocationPlaceholders(path,locations);
  body=replaceLocationPlaceholders(body,locations);
  URI targetUri=calculateTargetUri(uriInfo,path);
  req.setup(method,targetUri.toString(),body);
  res.setup();
  webServer.invokeDirectly(targetUri.getPath(),req,res);
  if (is2XXStatusCode(res.getStatus())) {
    results.addOperationResult(path,id,res.getOutputStream().toString(),res.getHeader("Location"));
  }
 else {
    throw new RuntimeException(res.getOutputStream().toString());
  }
}
