{
  Transaction tx=database.getGraph().beginTx();
  try {
    NonStreamingBatchOperations batchOperations=new NonStreamingBatchOperations(webServer);
    BatchOperationResults results=batchOperations.performBatchJobs(uriInfo,httpHeaders,body);
    Response res=Response.ok().entity(results.toJSON()).header(HttpHeaders.CONTENT_ENCODING,"UTF-8").type(MediaType.APPLICATION_JSON).build();
    tx.success();
    return res;
  }
 catch (  Exception e) {
    tx.failure();
    return output.serverError(e);
  }
 finally {
    tx.finish();
  }
}
