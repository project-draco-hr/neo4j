{
  if (removeReferenceNode) {
    removeReferenceNode(graph);
  }
  OutputStream out=new ByteArrayOutputStream();
  GraphStyle graphStyle;
  if (showNodeTitle) {
    graphStyle=AsciiDocStyle.withAutomaticRelationshipTypeColors();
  }
 else {
    graphStyle=AsciiDocSimpleStyle.withAutomaticRelationshipTypeColors();
  }
  GraphvizWriter writer=new GraphvizWriter(graphStyle);
  try {
    writer.emit(out,Walker.fullGraph(graph));
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  String safeTitle=title.replaceAll(ILLEGAL_STRINGS,"");
  return "." + title + "\n[\"dot\", \""+ (safeTitle + "-" + identifier).replace(" ","-")+ ".svg\", \"neoviz\"]\n"+ "----\n"+ out.toString()+ "----\n";
}
