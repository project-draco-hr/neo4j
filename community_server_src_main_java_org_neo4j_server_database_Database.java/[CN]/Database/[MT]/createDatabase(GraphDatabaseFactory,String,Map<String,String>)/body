{
  log.info("Using database at " + databaseStoreDirectory);
  if (databaseProperties == null) {
    databaseProperties=new HashMap<String,String>();
  }
  putIfAbsent(databaseProperties,ShellSettings.remote_shell_enabled.name(),GraphDatabaseSetting.TRUE);
  putIfAbsent(databaseProperties,GraphDatabaseSettings.keep_logical_logs.name(),GraphDatabaseSetting.TRUE);
  databaseProperties.put(GraphDatabaseSettings.udc_source.name(),"server");
  return factory.createDatabase(databaseStoreDirectory,databaseProperties);
}
