{
  if (databaseProperties == null) {
    databaseProperties=new HashMap<String,String>();
  }
  putIfAbsent(databaseProperties,ShellSettings.remote_shell_enabled.name(),Settings.TRUE);
  putIfAbsent(databaseProperties,GraphDatabaseSettings.keep_logical_logs.name(),"7 days");
  try {
    databaseProperties.put(UdcSettings.udc_source.name(),"server");
  }
 catch (  NoClassDefFoundError e) {
  }
  GraphDatabaseAPI db=factory.createDatabase(databaseStoreDirectory,databaseProperties);
  console(db,Database.class).log("Using database at " + databaseStoreDirectory);
  return db;
}
