{
  long current=getRecord(3);
  if ((current + 1) != txId && !isInRecoveryMode()) {
    throw new InvalidRecordException("Could not set tx commit id[" + txId + "] since the current one is["+ current+ "]");
  }
  setRecord(3,txId);
  if (isStarted && lastCommittedTxIdSetter != null && txId != lastCommittedTx) {
    lastCommittedTxIdSetter.setLastCommittedTxId(txId);
  }
  lastCommittedTx=txId;
}
