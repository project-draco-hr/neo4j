{
  int contestedPort=9999;
  try (ServerSocket ignored=new ServerSocket(contestedPort,0,InetAddress.getByName(Jetty9WebServer.DEFAULT_ADDRESS))){
    Logging logging=new BufferingLogging();
    CommunityNeoServer server=CommunityServerBuilder.server().onPort(contestedPort).usingDatabaseDir(folder.cleanDirectory(name.getMethodName()).getAbsolutePath()).onHost(Jetty9WebServer.DEFAULT_ADDRESS).withLogging(logging).build();
    try {
      server.start();
      fail("Should have reported failure to start");
    }
 catch (    ServerStartupException e) {
      assertThat(e.getMessage(),containsString("Starting Neo4j Server failed"));
    }
    assertThat(logging.toString(),containsString(String.format("Failed to start Neo Server")));
    server.stop();
  }
 }
