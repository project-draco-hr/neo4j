{
  LogProvider userLogProvider=FormattedLogProvider.withoutRenderingContext().toOutputStream(System.out);
  JULBridge.resetJUL();
  Logger.getLogger("").setLevel(Level.WARNING);
  JULBridge.forwardTo(userLogProvider);
  JettyLogBridge.setLogProvider(userLogProvider);
  log=userLogProvider.getLog(getClass());
  serverPort="unknown port";
  try {
    config=createConfig(log,configFile,configOverrides);
    serverPort=String.valueOf(config.get(ServerSettings.webserver_port));
    dependencies=dependencies.userLogProvider(userLogProvider);
    life.start();
    checkCompatibility();
    server=createNeoServer(config,dependencies,userLogProvider);
    server.start();
    addShutdownHook();
    return OK;
  }
 catch (  ServerStartupException e) {
    e.describeTo(log);
    return WEB_SERVER_STARTUP_ERROR_CODE;
  }
catch (  TransactionFailureException tfe) {
    String locationMsg=(server == null) ? "" : " Another process may be using database location " + server.getDatabase().getLocation();
    log.error(format("Failed to start Neo Server on port [%s].",serverPort) + locationMsg,tfe);
    return GRAPH_DATABASE_STARTUP_ERROR_CODE;
  }
catch (  Exception e) {
    log.error(format("Failed to start Neo Server on port [%s]",serverPort),e);
    return WEB_SERVER_STARTUP_ERROR_CODE;
  }
}
