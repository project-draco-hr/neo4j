{
  String location="unknown location";
  try {
    if (server != null) {
      server.stop();
    }
    log.log("Successfully shutdown Neo Server on port [%d], database [%s]",configurator.configuration().getInt(Configurator.WEBSERVER_PORT_PROPERTY_KEY,Configurator.DEFAULT_WEBSERVER_PORT),location);
    removeShutdownHook();
    life.shutdown();
    return 0;
  }
 catch (  Exception e) {
    log.error("Failed to cleanly shutdown Neo Server on port [%d], database [%s]. Reason [%s] ",configurator.configuration().getInt(Configurator.WEBSERVER_PORT_PROPERTY_KEY,Configurator.DEFAULT_WEBSERVER_PORT),location,e.getMessage(),e);
    return 1;
  }
}
