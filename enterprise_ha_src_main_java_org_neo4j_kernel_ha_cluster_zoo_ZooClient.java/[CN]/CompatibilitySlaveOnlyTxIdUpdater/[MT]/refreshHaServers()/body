{
  try {
    Set<Integer> visitedChildren=new HashSet<Integer>();
    for (    String child : getZooKeeper(true).getChildren(getRoot() + "/" + HA_SERVERS_CHILD,false)) {
      int id;
      try {
        id=idFromPath(child);
      }
 catch (      NumberFormatException e) {
        continue;
      }
      InstanceId currentInstanceId=new InstanceId(id);
      haServersCache.put(currentInstanceId,readHaServer(currentInstanceId,false));
      visitedChildren.add(id);
    }
    haServersCache.keySet().retainAll(visitedChildren);
  }
 catch (  InterruptedException e) {
    Thread.interrupted();
    throw new ZooKeeperException("Interrupted",e);
  }
}
