{
  try {
    String root=getRoot();
    List<String> children=zooKeeper.getChildren(root,false);
    for (    String child : children) {
      Pair<InstanceId,Integer> parsedChild=parseChild(child);
      if (parsedChild == null) {
        continue;
      }
      if (parsedChild.first().equals(machineId)) {
        zooKeeper.delete(root + "/" + child,-1);
      }
    }
  }
 catch (  KeeperException e) {
    throw new ZooKeeperException("Unable to clean up old child",e);
  }
catch (  InterruptedException e) {
    Thread.interrupted();
    throw new ZooKeeperException("Interrupted.",e);
  }
}
