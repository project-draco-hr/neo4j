{
  long nodeId=1l;
  when(store.nodesGetFromIndexSeek(state,indexDescriptor,value)).then(answerAsPrimitiveLongIteratorFrom(asList(nodeId,2l,3l)));
  when(statement.acquireSingleNodeCursor(nodeId)).thenReturn(asNodeCursor(nodeId,asPropertyCursor(stringProperty(propertyKeyId,value)),asLabelCursor(labelId)));
  txContext.nodeRemoveLabel(state,nodeId,labelId);
  PrimitiveLongIterator result=txContext.nodesGetFromIndexSeek(state,indexDescriptor,value);
  assertThat(asSet(result),equalTo(asSet(2l,3l)));
}
