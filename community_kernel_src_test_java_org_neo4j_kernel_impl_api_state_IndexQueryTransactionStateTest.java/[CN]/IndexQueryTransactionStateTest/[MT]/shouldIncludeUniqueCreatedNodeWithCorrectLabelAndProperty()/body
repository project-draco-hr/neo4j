{
  when(store.nodeGetFromUniqueIndexSeek(state,indexDescriptor,value)).thenReturn(asPrimitiveResourceIterator());
  state.txState().nodeDoReplaceProperty(1l,noNodeProperty(1l,propertyKeyId),stringProperty(propertyKeyId,value));
  txContext.nodeAddLabel(state,asNode(1l,asPropertyCursor(stringProperty(propertyKeyId,value)),Cursors.<LabelItem>empty()),labelId);
  long result=txContext.nodeGetFromUniqueIndexSeek(state,indexDescriptor,value);
  assertThat(result,equalTo(1l));
}
