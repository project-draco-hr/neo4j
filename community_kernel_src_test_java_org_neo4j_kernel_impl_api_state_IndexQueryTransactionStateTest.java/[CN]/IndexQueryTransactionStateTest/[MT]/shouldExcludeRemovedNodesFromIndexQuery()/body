{
  long nodeId=2l;
  when(store.nodesGetFromIndexSeek(state,indexDescriptor,value)).then(answerAsPrimitiveLongIteratorFrom(asList(1l,nodeId,3l)));
  when(statement.acquireSingleNodeCursor(nodeId)).thenReturn(asNodeCursor(nodeId));
  txContext.nodeDelete(state,nodeId);
  PrimitiveLongIterator result=txContext.nodesGetFromIndexSeek(state,indexDescriptor,value);
  assertThat(asSet(result),equalTo(asSet(1l,3l)));
}
