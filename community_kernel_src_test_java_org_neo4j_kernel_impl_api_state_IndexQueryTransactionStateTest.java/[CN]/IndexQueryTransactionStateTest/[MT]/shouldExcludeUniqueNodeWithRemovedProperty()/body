{
  when(store.nodeGetUniqueFromIndexLookup(state,indexDescriptor,value)).thenReturn(asPrimitiveResourceIterator(1l));
  when(store.nodeGetProperty(1l,propertyKeyId)).thenReturn(stringProperty(propertyKeyId,value));
  when(store.nodeHasLabel(1l,labelId)).thenReturn(true);
  when(store.nodeGetLabels(1l)).thenReturn(PrimitiveIntCollections.iterator(labelId));
  txContext.nodeRemoveProperty(state,1l,propertyKeyId);
  long result=txContext.nodeGetUniqueFromIndexLookup(state,indexDescriptor,value);
  assertNoSuchNode(result);
}
