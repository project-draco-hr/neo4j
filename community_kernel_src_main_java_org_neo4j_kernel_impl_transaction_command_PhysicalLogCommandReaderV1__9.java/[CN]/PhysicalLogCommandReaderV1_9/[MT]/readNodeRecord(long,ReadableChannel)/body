{
  byte inUseFlag=channel.get();
  boolean inUse=false;
  if (inUseFlag == Record.IN_USE.byteValue()) {
    inUse=true;
  }
 else   if (inUseFlag != Record.NOT_IN_USE.byteValue()) {
    throw new IOException("Illegal in use flag: " + inUseFlag);
  }
  NodeRecord record;
  if (inUse) {
    record=new NodeRecord(id,false,channel.getLong(),channel.getLong());
  }
 else {
    record=new NodeRecord(id);
  }
  record.setInUse(inUse);
  return record;
}
