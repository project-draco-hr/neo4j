{
  NamedFunction<S,Long> startTransaction=new NamedFunction<S,Long>("start-transaction"){
    @Override public Long apply(    S subject){
      try {
        InternalTransaction tx=neo.startTransactionAsUser(subject);
        barrier.reached();
        neo.getGraph().execute("CREATE (:Test { name: '" + neo.nameOf(subject) + "-node'})");
        tx.success();
        tx.close();
        return 0L;
      }
 catch (      Throwable t) {
        return 1L;
      }
    }
  }
;
  done=threading.execute(startTransaction,subject);
}
