{
  final Node node=createNode("one","Two","three","Four");
  dbRule.getGraphDatabaseService().registerTransactionEventHandler(new TransactionEventHandler.Adapter<Object>(){
    @Override public void afterCommit(    TransactionData data,    Object nothing){
      try (Transaction tx=dbRule.beginTx()){
        for (        String key : node.getPropertyKeys()) {
          node.getProperty(key);
        }
        tx.success();
      }
     }
  }
);
  try (Transaction tx=dbRule.beginTx()){
    dbRule.createNode();
    node.setProperty("five","Six");
    tx.success();
  }
 }
