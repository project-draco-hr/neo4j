{
  TransactionalContext mock=mock(TransactionalContext.class);
  when(mock.accessMode()).thenReturn(WRITE_ONLY);
  QuerySession session=QueryEngineProvider.embeddedSession(mock);
  assertThat(session.toString(),equalTo(String.format("embedded-session\tthread\t%s\t%s",Thread.currentThread().getName(),WRITE_ONLY.name())));
}
