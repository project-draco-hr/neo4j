{
  if (dragging) {
    Element element=node.getElement();
    int newX=event.getX() + element.getOffsetLeft() - dragStartX;
    newX=limit(0,newX,parent.getOffsetWidth() - node.getOffsetWidth());
    int newY=event.getY() + element.getOffsetTop() - dragStartY;
    newY=limit(0,newY,parent.getOffsetHeight() - node.getOffsetHeight());
    Style style=element.getStyle();
    style.setLeft(newX,Unit.PX);
    style.setTop(newY,Unit.PX);
    parent.updateLinesFor(node);
  }
  event.preventDefault();
}
