{
  ArrayMap<Integer,PropertyData> props=rStore.getProperties(rel);
  int count=0;
  for (  int keyId : props.keySet()) {
    int id=props.get(keyId).getId();
    PropertyRecord record=pStore.getRecord(id);
    PropertyData data=new PropertyData(id,getValue(record));
    if (data.getId() == prop1) {
      assertEquals("prop1",MyPropertyIndex.getIndexFor(keyId).getKey());
      assertEquals("-string1",data.getValue());
    }
 else     if (data.getId() == prop2) {
      assertEquals("prop2",MyPropertyIndex.getIndexFor(keyId).getKey());
      assertEquals(new Integer(-1),data.getValue());
    }
 else     if (data.getId() == prop3) {
      assertEquals("prop3",MyPropertyIndex.getIndexFor(keyId).getKey());
      assertEquals(new Boolean(false),data.getValue());
      rStore.removeProperty(rel,prop3);
    }
 else {
      throw new IOException();
    }
    count++;
  }
  assertEquals(3,count);
  assertEquals(2,rStore.getProperties(rel).size());
  RelationshipData relData=rStore.getRelationship(rel);
  assertEquals(firstNode,relData.firstNode());
  assertEquals(secondNode,relData.secondNode());
  assertEquals(relType,relData.relationshipType());
  rStore.deleteRelationship(rel);
  Iterator<RelationshipData> first=nStore.getRelationships(firstNode).iterator();
  first.next();
  Iterator<RelationshipData> second=nStore.getRelationships(secondNode).iterator();
  second.next();
  assertTrue(!first.hasNext());
  assertTrue(!second.hasNext());
}
