{
  while (currentRecieveBuffer == null || currentRecieveIndex >= currentRecieveBuffer.length) {
    currentRecieveIndex=0;
    currentRecieveBuffer=received.poll(30,TimeUnit.SECONDS);
    if (currentRecieveBuffer == null) {
      throw new SocketTimeoutException("Waited 30 seconds for " + remaining + " bytes, "+ ""+ (length - remaining)+ " was recieved: "+ HexPrinter.hex(ByteBuffer.wrap(target),0,length - remaining));
    }
  }
}
