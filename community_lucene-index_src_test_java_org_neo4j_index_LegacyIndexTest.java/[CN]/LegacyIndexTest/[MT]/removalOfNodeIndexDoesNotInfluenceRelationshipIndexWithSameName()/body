{
  String indexName="index";
  createNodeLegacyIndexWithSingleNode(db,indexName);
  createRelationshipLegacyIndexWithSingleRelationship(db,indexName);
  try (Transaction tx=db.beginTx()){
    Relationship relationship=db.createNode().createRelationshipTo(db.createNode(),TYPE);
    Index<Relationship> relationshipIndex=db.index().forRelationships(indexName);
    relationshipIndex.add(relationship,"key","otherValue");
    Index<Node> nodeIndex=db.index().forNodes(indexName);
    nodeIndex.delete();
    tx.success();
  }
   try (Transaction tx=db.beginTx()){
    assertFalse(db.index().existsForNodes(indexName));
    Index<Relationship> relationshipIndex=db.index().forRelationships(indexName);
    assertEquals(2,sizeOf(relationshipIndex));
    tx.success();
  }
 }
