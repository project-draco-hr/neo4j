{
  if (readOnly) {
    throw new IllegalStateException("Index deletion in read only mode is not supported.");
  }
  closeIndex(identifier);
  FileUtils.deleteRecursively(getFileDirectory(baseStorePath,identifier));
  boolean removeFromIndexStore=!recovery || (indexStore.has(identifier.entityType.entityClass(),identifier.indexName));
  if (removeFromIndexStore) {
    indexStore.remove(identifier.entityType.entityClass(),identifier.indexName);
  }
  typeCache.invalidate(identifier);
}
