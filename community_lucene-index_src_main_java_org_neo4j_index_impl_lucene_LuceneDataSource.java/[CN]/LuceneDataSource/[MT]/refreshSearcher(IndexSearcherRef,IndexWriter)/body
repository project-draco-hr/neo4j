{
  try {
synchronized (searcher) {
      IndexReader reader=searcher.getSearcher().getIndexReader();
      IndexReader reopened=IndexReader.openIfChanged(reader,writer,true);
      if (reopened != null) {
        IndexSearcher newSearcher=new IndexSearcher(reopened);
        searcher.detachOrClose();
        return new IndexSearcherRef(searcher.getIdentifier(),newSearcher);
      }
      return searcher;
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
