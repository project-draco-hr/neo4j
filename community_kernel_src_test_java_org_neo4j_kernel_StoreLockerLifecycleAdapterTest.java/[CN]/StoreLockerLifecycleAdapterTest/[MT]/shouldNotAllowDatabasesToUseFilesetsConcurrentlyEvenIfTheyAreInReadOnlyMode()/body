{
  EmbeddedGraphDatabase embeddedGraphDatabase=null;
  try {
    embeddedGraphDatabase=new EmbeddedGraphDatabase(DATABASE_NAME_3);
    new EmbeddedReadOnlyGraphDatabase(DATABASE_NAME_3);
    fail();
  }
 catch (  RuntimeException e) {
    assertThat(e.getCause().getCause().getMessage(),is(DATABASE_LOCKED_ERROR_MESSAGE));
  }
 finally {
    embeddedGraphDatabase.shutdown();
  }
}
