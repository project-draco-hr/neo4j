{
  for (  long relId : element.relationships.keySet()) {
    CowRelElement relElement=element.relationships.get(relId);
    RelationshipProxy rel=nodeManager.newRelationshipProxyById(relId);
    RelationshipImpl relImpl=nodeManager.getRelationshipForProxy(relId,null);
    if (relElement.isDeleted()) {
      if (primitiveElement.createdRelationships.contains(relId)) {
        continue;
      }
    }
    if (relElement.propertyAddMap != null && !relElement.isDeleted()) {
      for (      PropertyData data : relElement.propertyAddMap.values()) {
        String key=nodeManager.getKeyForProperty(data);
        Object oldValue=relImpl.getCommittedPropertyValue(nodeManager,key);
        Object newValue=data.getValue();
        result.assignedProperty(rel,key,newValue,oldValue);
      }
    }
    if (relElement.propertyRemoveMap != null) {
      for (      PropertyData data : relElement.propertyRemoveMap.values()) {
        String key=nodeManager.getKeyForProperty(data);
        Object oldValue=data.getValue();
        if (oldValue != null && !relElement.isDeleted()) {
          relImpl.getCommittedPropertyValue(nodeManager,key);
        }
        result.removedProperty(rel,key,oldValue);
      }
    }
  }
}
