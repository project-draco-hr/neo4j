{
  if (lockElements != null) {
    Collection<LockElement> releaseFailures=null;
    Exception releaseException=null;
    for (    LockElement lockElement : lockElements) {
      try {
        lockElement.releaseIfAcquired(tx);
      }
 catch (      Exception e) {
        releaseException=e;
        if (releaseFailures == null) {
          releaseFailures=new ArrayList<LockElement>();
        }
        releaseFailures.add(lockElement);
      }
    }
    if (releaseException != null) {
      log.warn("Unable to release locks: " + releaseFailures + ". Example of exception:"+ releaseException);
    }
  }
}
