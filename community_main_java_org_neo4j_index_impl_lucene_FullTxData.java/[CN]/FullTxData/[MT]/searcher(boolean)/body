{
  if (this.searcher != null && (!modified || !allowRefreshSearcher)) {
    return this.searcher;
  }
  try {
    IndexReader newReader=this.reader == null ? this.writer.getReader() : this.reader.reopen();
    if (newReader == this.reader) {
      return this.searcher;
    }
    safeClose(reader);
    this.reader=newReader;
    safeClose(searcher);
    searcher=new IndexSearcher(reader);
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
 finally {
    if (allowRefreshSearcher) {
      this.modified=false;
    }
  }
  return this.searcher;
}
