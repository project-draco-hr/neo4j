{
  Node start=data.get().get("Pet0");
  gen.get().addSnippet("graph",createGraphVizWithNodeId("Descendants Example Graph",graphdb(),gen.get().getTitle()));
  gen.get();
  gen.get().addTestSourceSnippets(this.getClass(),"traverser","traverseNodeGlobal");
  final Node target=data.get().get("Principal1");
  TraversalDescription td=Traversal.description().uniqueness(Uniqueness.NODE_PATH).evaluator(new Evaluator(){
    @Override public Evaluation evaluate(    Path path){
      if (path.endNode().equals(target)) {
        return Evaluation.INCLUDE_AND_PRUNE;
      }
      return Evaluation.EXCLUDE_AND_CONTINUE;
    }
  }
);
  Traverser results=td.traverse(start);
  String output="";
  int count=0;
  Transaction transaction=db.beginTx();
  try {
    for (    Path path : results) {
      count++;
      output+=path.toString() + "\n";
    }
  }
  finally {
    transaction.finish();
  }
  gen.get().addSnippet("output",createOutputSnippet(output));
  assertEquals(2,count);
  TraversalDescription nodeGlobalTd=td.uniqueness(Uniqueness.NODE_GLOBAL);
  results=nodeGlobalTd.traverse(start);
  String output2="";
  count=0;
  transaction=db.beginTx();
  try {
    for (    Path path : results) {
      count++;
      output2+=path.toString() + "\n";
    }
  }
  finally {
    transaction.finish();
  }
  gen.get().addSnippet("outNodeGlobal",createOutputSnippet(output2));
  assertEquals(1,count);
}
