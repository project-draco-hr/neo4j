{
  discoveryService.addMembershipListener(this);
  ClusterTopology clusterTopology=discoveryService.currentTopology();
  Set<CoreMember> initialMembers=clusterTopology.coreMembers();
  if (clusterTopology.bootstrappable()) {
    try {
      raftInstance.bootstrapWithInitialMembers(new CoreMemberSet(initialMembers));
    }
 catch (    RaftLogCompactedException e) {
      throw new BootstrapException(e);
    }
  }
  onTopologyChange(clusterTopology);
}
