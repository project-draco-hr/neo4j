{
  while (true) {
    InputRelationship candidate=super.fetchNextOrNull();
    if (candidate == null) {
      return null;
    }
    Object type=candidate.typeAsObject();
    if (type.equals(currentType)) {
      return candidate;
    }
    try {
      Receiver<InputRelationship[],IOException> receiver=minorityRelationshipTypes.test(type) ? minorityReceiver : receivers[typeToId.applyAsInt(type)];
      transport[0]=candidate;
      receiver.receive(transport);
    }
 catch (    IOException e) {
      throw new InputException("Error caching relationship " + candidate,e);
    }
  }
}
