{
  CodePosition codePosition=getCodePositionAfterCall("deleteUser","getUserByName");
  InternalFlatFileRealm realm=new InternalFlatFileRealm(userRepository,roleRepository,passwordPolicy,authenticationStrategy);
  RunResult result=InterleavedRunner.interleave(new DeleteUserInMain(realm),new AddUserToRoleInSecondary(),Arrays.asList(codePosition));
  assertNull("User " + USERNAME + " should be deleted!",userRepository.getUserByName(USERNAME));
  assertTrue(result.getSecondaryException() instanceof IllegalArgumentException);
  assertTrue(result.getSecondaryException().getMessage().equals("User " + USERNAME + " does not exist."));
}
