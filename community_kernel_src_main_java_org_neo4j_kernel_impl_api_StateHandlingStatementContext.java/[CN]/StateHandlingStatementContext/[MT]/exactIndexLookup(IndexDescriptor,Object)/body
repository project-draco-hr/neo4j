{
  DiffSets<Long> diff=state.getNodesWithChangedProperty(index.getPropertyKeyId(),value);
  diff=diff.filterAdded(new HasLabelFilter(index.getLabelId()));
  HasPropertyFilter hasPropertyFilter=new HasPropertyFilter(index.getPropertyKeyId(),value);
  Iterator<Long> addedNodesWithLabel=state.getNodesWithLabelAdded(index.getLabelId()).iterator();
  diff.addAll(Iterables.filter(hasPropertyFilter,addedNodesWithLabel));
  Set<Long> removedNodesWithLabel=state.getNodesWithLabelChanged(index.getLabelId()).getRemoved();
  diff.removeAll(Iterables.filter(hasPropertyFilter,removedNodesWithLabel.iterator()));
  return state.getDeletedNodes().apply(diff.apply(delegate.exactIndexLookup(index,value)));
}
