{
  if (state.hasChanges()) {
    if (state.nodeIsDeletedInThisTx(nodeId)) {
      return false;
    }
    if (state.nodeIsAddedInThisTx(nodeId)) {
      Boolean labelState=state.getLabelState(nodeId,labelId);
      return labelState != null && labelState;
    }
    Boolean labelState=state.getLabelState(nodeId,labelId);
    if (labelState != null) {
      return labelState;
    }
  }
  return delegate.nodeHasLabel(nodeId,labelId);
}
