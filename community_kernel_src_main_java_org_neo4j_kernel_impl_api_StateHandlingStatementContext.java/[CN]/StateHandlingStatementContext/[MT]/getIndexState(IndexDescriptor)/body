{
  DiffSets<IndexDescriptor> diffSet=state.getIndexRuleDiffSetsByLabel(indexRule.getLabelId());
  if (diffSet.isAdded(indexRule)) {
    return InternalIndexState.POPULATING;
  }
  if (diffSet.isRemoved(indexRule)) {
    throw new IndexNotFoundKernelException(String.format("Index for label id %d on property id %d has been " + "dropped in this transaction.",indexRule.getLabelId(),indexRule.getPropertyKeyId()));
  }
  return delegate.getIndexState(indexRule);
}
