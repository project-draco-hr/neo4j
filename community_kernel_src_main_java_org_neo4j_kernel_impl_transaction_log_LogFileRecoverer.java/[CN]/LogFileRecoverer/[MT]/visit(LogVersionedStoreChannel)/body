{
  ReadableVersionableLogChannel recoveredDataChannel=new ReadAheadLogChannel(channel,NO_MORE_CHANNELS,DEFAULT_READ_AHEAD_SIZE);
  try (PhysicalTransactionCursor<ReadableVersionableLogChannel> physicalTransactionCursor=new PhysicalTransactionCursor<>(recoveredDataChannel,logEntryReader)){
    while (physicalTransactionCursor.next() && !visitor.visit(physicalTransactionCursor.get())) {
    }
    long lastKnownGoodPosition=physicalTransactionCursor.lastKnownGoodPosition();
    if (channel.position() > lastKnownGoodPosition) {
      channel.truncate(lastKnownGoodPosition);
    }
  }
   visitor.close();
  return true;
}
