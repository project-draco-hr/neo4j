{
  long[] labelIds=createLabels(100);
  NodeRecord node=inUse(new NodeRecord(42,NONE,NONE));
  add(node);
  DynamicRecord labelsRecord1=inUse(array(new DynamicRecord(1)));
  DynamicRecord labelsRecord2=inUse(array(new DynamicRecord(2)));
  Collection<DynamicRecord> labelRecords=asList(labelsRecord1,labelsRecord2);
  DynamicArrayStore.allocateFromNumbers(labelIds,labelRecords.iterator(),new PreAllocatedRecords(52));
  assertDynamicRecordChain(labelsRecord1,labelsRecord2);
  node.setLabelField(DynamicNodeLabels.dynamicPointer(labelRecords),labelRecords);
  labelsRecord2.setNextBlock(1l);
  addNodeDynamicLabels(labelsRecord1);
  addNodeDynamicLabels(labelsRecord2);
  ConsistencyReport.NodeConsistencyReport report=check(node);
  verify(report).cyclicDynamicLabelRecords(labelsRecord2);
}
