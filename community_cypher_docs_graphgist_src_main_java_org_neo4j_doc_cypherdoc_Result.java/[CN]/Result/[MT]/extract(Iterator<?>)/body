{
  while (source.hasNext()) {
    Object item=source.next();
    if (item instanceof Node) {
      Node node=(Node)item;
      nodeIds.add(node.getId());
    }
 else     if (item instanceof Relationship) {
      Relationship relationship=(Relationship)item;
      relationshipIds.add(relationship.getId());
      nodeIds.add(relationship.getStartNode().getId());
      nodeIds.add(relationship.getEndNode().getId());
    }
 else     if (item instanceof Path) {
      Path path=(Path)item;
      for (      Node node : path.nodes()) {
        nodeIds.add(node.getId());
      }
      for (      Relationship relationship : path.relationships()) {
        relationshipIds.add(relationship.getId());
      }
    }
 else     if (item instanceof Map<?,?>) {
      extract(((Map<?,?>)item).values().iterator());
    }
 else     if (item instanceof Iterable<?>) {
      extract(((Iterable<?>)item).iterator());
    }
  }
}
