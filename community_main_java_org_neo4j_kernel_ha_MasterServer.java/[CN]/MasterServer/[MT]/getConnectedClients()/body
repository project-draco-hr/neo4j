{
  Collection<Integer> clients=null;
synchronized (channelsPerClient) {
    clients=new ArrayList<Integer>(channelsPerClient.keySet());
  }
  Map<Integer,Collection<Integer>> txs=((MasterImpl)realMaster).getOngoingTransactions();
  Collection<Pair<Integer,Collection<Integer>>> result=new ArrayList<Pair<Integer,Collection<Integer>>>();
  for (  Integer id : clients) {
    Collection<Integer> ongoingTxs=txs.get(id);
    result.add(new Pair<Integer,Collection<Integer>>(id,ongoingTxs != null ? ongoingTxs : Collections.<Integer>emptyList()));
  }
  return result;
}
