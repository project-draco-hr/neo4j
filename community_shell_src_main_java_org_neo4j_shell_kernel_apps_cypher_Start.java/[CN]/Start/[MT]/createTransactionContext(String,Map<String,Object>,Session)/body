{
  DependencyResolver dependencyResolver=getDependencyResolver();
  GraphDatabaseQueryService graph=dependencyResolver.resolveDependency(GraphDatabaseQueryService.class);
  TransactionalContextFactory contextFactory=new Neo4jTransactionalContextFactory(graph,new PropertyContainerLocker());
  InternalTransaction transaction=graph.beginTransaction(KernelTransaction.Type.implicit,AccessMode.Static.FULL);
  return contextFactory.newContext(ShellQuerySession.describe(session),transaction,queryText,queryParameters);
}
