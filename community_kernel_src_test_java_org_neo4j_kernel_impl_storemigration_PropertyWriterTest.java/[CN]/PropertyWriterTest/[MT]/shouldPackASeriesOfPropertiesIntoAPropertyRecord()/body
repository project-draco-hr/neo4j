{
  HashMap config=defaultConfig();
  File outputDir=new File("target/outputDatabase");
  FileUtils.deleteRecursively(outputDir);
  assertTrue(outputDir.mkdirs());
  File propertyStoreFile=new File(outputDir,"neostore.propertystore.db");
  PropertyStore.createStore(propertyStoreFile.getPath(),config);
  PropertyStore propertyStore=new PropertyStore(propertyStoreFile.getPath(),config);
  assertEquals(0,propertyStore.getHighId());
  PropertyWriter propertyWriter=new PropertyWriter(propertyStore);
  ArrayList<Pair<Integer,Object>> properties=new ArrayList<Pair<Integer,Object>>();
  properties.add(Pair.of(0,(Object)1234));
  properties.add(Pair.of(1,(Object)5678));
  long propertyRecordId=propertyWriter.writeProperties(properties);
  assertEquals(1,propertyStore.getHighId());
  assertEquals(0,propertyRecordId);
  List<PropertyBlock> propertyBlocks=new ArrayList(propertyStore.getRecord(propertyRecordId).getPropertyBlocks());
  assertEquals(0,propertyBlocks.get(0).getKeyIndexId());
  assertEquals(1234,propertyBlocks.get(0).getSingleValueInt());
  assertEquals(1,propertyBlocks.get(1).getKeyIndexId());
  assertEquals(5678,propertyBlocks.get(1).getSingleValueInt());
  propertyStore.close();
}
