{
  ShellServerExtension shell=(ShellServerExtension)Service.load(KernelExtension.class,"shell");
  if (shell == null)   throw new UnsupportedOperationException("Shell server not found");
  ShellServer server=shell.getShellServer(graph.getKernelData());
  if (server == null)   throw new IllegalStateException("Shell server null");
  try {
    output=new CollectingOutput();
    client=new SameJvmClient(server,output);
  }
 catch (  RemoteException e) {
    throw new RuntimeException("Unable to start shell client",e);
  }
}
