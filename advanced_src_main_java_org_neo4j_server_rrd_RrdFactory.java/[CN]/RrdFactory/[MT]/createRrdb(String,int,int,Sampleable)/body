{
  if (!new File(inDirectory).exists()) {
    RrdDef rrdDef=new RrdDef(inDirectory,stepSize);
    rrdDef.setVersion(2);
    for (    Sampleable sampleable : sampleables) {
      rrdDef.addDatasource(sampleable.getName(),DsType.GAUGE,stepSize,0,Long.MAX_VALUE);
    }
    rrdDef.addArchive(ConsolFun.AVERAGE,0.5,1,stepsPerArchive);
    rrdDef.addArchive(ConsolFun.AVERAGE,0.2,10,stepsPerArchive);
    rrdDef.addArchive(ConsolFun.AVERAGE,0.2,50,stepsPerArchive);
    rrdDef.addArchive(ConsolFun.AVERAGE,0.2,300,stepsPerArchive);
    rrdDef.addArchive(ConsolFun.AVERAGE,0.2,1300,stepsPerArchive);
    rrdDef.addArchive(ConsolFun.AVERAGE,0.2,15000,stepsPerArchive * 5);
    return new RrdDb(rrdDef);
  }
 else {
    return new RrdDb(inDirectory);
  }
}
