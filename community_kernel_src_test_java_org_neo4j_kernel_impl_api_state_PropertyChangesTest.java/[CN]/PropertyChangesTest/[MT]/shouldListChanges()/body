{
  PropertyChanges changes=new PropertyChanges();
  changes.changeProperty(1L,2,"from","to");
  changes.addProperty(1L,3,"from");
  changes.removeProperty(2L,2,"to");
  assertThat(changes.changesForProperty(2,"to"),isDiffSets(asSet(1L),asSet(2L)));
  assertThat(changes.changesForProperty(3,"from"),isDiffSets(asSet(1L),null));
  assertThat(changes.changesForProperty(2,"from"),isDiffSets(null,asSet(1L)));
}
