{
  PropertyChanges changes=new PropertyChanges();
  changes.changeProperty(1l,2,"from","to");
  changes.addProperty(1l,3,"from");
  changes.removeProperty(2l,2,"to");
  assertThat(changes.changesForProperty(2,"to"),isDiffSets(asSet(1l),asSet(2l)));
  assertThat(changes.changesForProperty(3,"from"),isDiffSets(asSet(1l),null));
  assertThat(changes.changesForProperty(2,"from"),isDiffSets(null,asSet(1l)));
}
