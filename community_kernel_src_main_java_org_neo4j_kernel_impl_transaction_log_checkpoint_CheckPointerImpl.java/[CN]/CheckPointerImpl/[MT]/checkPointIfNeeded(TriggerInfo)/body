{
  lock.lock();
  try {
    if (threshold.isCheckPointingNeeded(transactionIdStore.getLastClosedTransactionId(),info)) {
      try (LogCheckPointEvent event=tracer.beginCheckPoint()){
        return doCheckPoint(info,event);
      }
     }
    return -1;
  }
  finally {
    lock.unlock();
  }
}
