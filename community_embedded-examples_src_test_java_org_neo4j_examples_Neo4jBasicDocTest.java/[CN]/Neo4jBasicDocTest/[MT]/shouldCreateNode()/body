{
  Transaction tx=graphDb.beginTx();
  Node n=null;
  try {
    n=graphDb.createNode();
    n.setProperty("name","Nancy");
    tx.success();
  }
 catch (  Exception e) {
    tx.failure();
  }
 finally {
    tx.finish();
  }
  assertThat(n.getId(),is(greaterThan(0L)));
  Transaction transaction=graphDb.beginTx();
  Node foundNode=graphDb.getNodeById(n.getId());
  assertThat(foundNode.getId(),is(n.getId()));
  assertThat((String)foundNode.getProperty("name"),is("Nancy"));
  transaction.finish();
}
