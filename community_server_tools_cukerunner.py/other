from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer
import subprocess
import os, cgi
FEATURES_FOLDER = 'src/features'
SCENARIO_TEMPLATE = '\n<li>\n  %(name)s <input type="submit" name="action:%(feature)s:%(lineno)d" value="Run" />\n</li>\n'
FEATURE_TEMPLATE = '\n<li>\n  <h3>%(name)s <input type="submit" name="action:%(feature)s" value="Run" /></h3>\n  <ul class="scenarios">\n    %(scenarios)s\n  </ul>\n</li>\n'
PAGE_TEMPLATE = '\n<!DOCTYPE html>\n<html>\n  <head><title>Cucumber test runner</title></head>\n  <body>\n    <form action="" method="POST">\n      <p><input type="checkbox" name="external-server" %(external_checkbox)s /> run with external server</p>\n      <p><input type="submit" name="action:%(features_folder)s" value="Run all" /></p>\n      <ul id="features">\n        %(features)s\n      </ul>\n    </form>\n    <textarea>%(console_output)s</textarea>\n  </body>\n</html>\n'
if (__name__ == '__main__'):
    try:
        s = HTTPServer(('', 8666), Handler)
        print 'Starting server at http://localhost:8666/'
        s.serve_forever()
    except Exception as e:
        print e
        s.socket.close()
