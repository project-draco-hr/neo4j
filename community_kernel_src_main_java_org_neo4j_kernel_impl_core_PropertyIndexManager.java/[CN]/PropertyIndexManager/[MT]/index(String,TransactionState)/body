{
  PropertyIndex[] existing=null;
  if (key != null) {
    existing=indexMap.get(key);
    if (state != null) {
      PropertyIndex[] fullList;
      PropertyIndex added=state.getIndex(key);
      if (added != null) {
        if (existing != null) {
          fullList=new PropertyIndex[existing.length + 1];
          arraycopy(existing,0,fullList,0,existing.length);
        }
 else         fullList=new PropertyIndex[1];
        fullList[fullList.length - 1]=added;
        return fullList;
      }
    }
  }
  if (existing == null) {
    existing=EMPTY_PROPERTY_INDEXES;
  }
  return existing;
}
