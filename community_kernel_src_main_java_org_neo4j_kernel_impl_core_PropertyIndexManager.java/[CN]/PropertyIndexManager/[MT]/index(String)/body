{
  List<PropertyIndex> list=null;
  if (key != null) {
    list=indexMap.get(key);
    Transaction tx=getTransaction();
    if (tx != null) {
      TxCommitHook hook=txCommitHooks.get(getTransaction());
      if (hook != null) {
        PropertyIndex index=hook.getIndex(key);
        if (index != null) {
          List<PropertyIndex> added=new ArrayList<PropertyIndex>();
          if (list != null) {
            added.addAll(list);
          }
          added.add(index);
          return added;
        }
      }
    }
  }
  if (list == null) {
    list=Collections.emptyList();
  }
  return list;
}
