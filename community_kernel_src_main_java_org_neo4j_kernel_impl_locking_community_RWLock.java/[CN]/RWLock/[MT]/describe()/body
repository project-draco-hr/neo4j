{
  StringBuilder sb=new StringBuilder(this.toString());
  sb.append(" Total lock count: readCount=" + totalReadCount + " writeCount="+ totalWriteCount+ " for "+ resource+ "\n").append("Waiting list:" + "\n");
  Iterator<WaitElement> wElements=waitingThreadList.iterator();
  while (wElements.hasNext()) {
    WaitElement we=wElements.next();
    sb.append("[" + we.waitingThread + "("+ we.element.readCount+ "r,"+ we.element.writeCount+ "w),"+ we.lockType+ "]\n");
    if (wElements.hasNext()) {
      sb.append(",");
    }
  }
  sb.append("Locking transactions:\n");
  Iterator<TxLockElement> lElements=txLockElementMap.values().iterator();
  while (lElements.hasNext()) {
    TxLockElement tle=lElements.next();
    sb.append("" + tle.tx + "("+ tle.readCount+ "r,"+ tle.writeCount+ "w)\n");
  }
  return sb.toString();
}
