{
  if (insertionsCount <= 0) {
    return;
  }
  if (totalNumberOfDocumentsExceededLuceneCapacity(insertionsCount)) {
    writer.forceMergeDeletes();
    if (totalNumberOfDocumentsExceededLuceneCapacity(insertionsCount)) {
      writer.forceMerge(1);
      if (totalNumberOfDocumentsExceededLuceneCapacity(insertionsCount)) {
        throw new IndexCapacityExceededException(insertionsCount,writer.maxDoc(),maxDocLimit());
      }
    }
  }
  reservedDocs.addAndGet(insertionsCount);
}
