{
  if (!life.isRunning()) {
    return;
  }
  LogRotationControl logRotationControl=transactionLogModule.logRotationControl();
  logRotationControl.awaitAllTransactionsClosed();
synchronized (transactionLogModule.logFile()) {
    logRotationControl.awaitAllTransactionsClosed();
    logRotationControl.forceEverything();
    neoStoreModule.neoStore().incrementAndGetVersion();
    life.shutdown();
  }
  neoStoreModule.neoStore().close();
  msgLog.info("NeoStore closed");
}
