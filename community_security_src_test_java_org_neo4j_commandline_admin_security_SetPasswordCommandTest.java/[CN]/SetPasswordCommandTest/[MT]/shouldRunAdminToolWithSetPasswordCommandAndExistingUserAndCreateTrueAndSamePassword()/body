{
  createTestUser("neo4j","neo4j");
  assertUserRequiresPasswordChange("neo4j");
  Path homeDir=testDir.graphDbDir().toPath();
  Path configDir=testDir.directory("conf").toPath();
  OutsideWorld out=mock(OutsideWorld.class);
  AdminTool tool=new AdminTool(CommandLocator.fromServiceLocator(),out,true);
  tool.execute(homeDir,configDir,"set-password","--create=true","neo4j","abc");
  verify(out).stdOutLine("Changed password for user 'neo4j'");
  verify(out,times(0)).stdErrLine(anyString());
  verify(out).exit(0);
  assertUserDoesNotRequirePasswordChange("neo4j");
  reset(out);
  tool.execute(homeDir,configDir,"set-password","--create=true","neo4j","abc");
  verify(out,times(0)).stdOutLine(anyString());
  verify(out).stdErrLine("command failed: Failed to set password for 'neo4j': Old password and new password cannot be the same.");
  verify(out).exit(1);
}
