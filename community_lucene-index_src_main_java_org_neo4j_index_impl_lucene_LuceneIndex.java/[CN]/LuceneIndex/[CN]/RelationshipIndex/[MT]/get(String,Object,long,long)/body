{
  BooleanQuery query=new BooleanQuery();
  if (key != null && valueOrNull != null) {
    query.add(type.get(key,valueOrNull),Occur.MUST);
  }
  addIfAssigned(query,startNode,KEY_START_NODE_ID);
  addIfAssigned(query,endNode,KEY_END_NODE_ID);
  return query(query,null,null,null);
}
