{
  IndexManager index=graphDb.index();
  Index<Node> movies=index.forNodes("movies");
  Node theMatrix=movies.get("title","The Matrix").getSingle();
  movies.remove(theMatrix);
  Node node=movies.get("title","The Matrix").getSingle();
  assertEquals(null,node);
  rollbackTx();
  movies.remove(theMatrix,"title");
  node=movies.get("title","The Matrix").getSingle();
  assertEquals(null,node);
  node=movies.get("title","Matrix").getSingle();
  assertEquals(null,node);
  node=movies.get("year",1999).getSingle();
  assertEquals(theMatrix,node);
  rollbackTx();
  movies.remove(theMatrix,"title","Matrix");
  node=movies.get("title","Matrix").getSingle();
  assertEquals(null,node);
  node=movies.get("title","The Matrix").getSingle();
  assertEquals(theMatrix,node);
  node=movies.get("year",1999).getSingle();
  assertEquals(theMatrix,node);
}
