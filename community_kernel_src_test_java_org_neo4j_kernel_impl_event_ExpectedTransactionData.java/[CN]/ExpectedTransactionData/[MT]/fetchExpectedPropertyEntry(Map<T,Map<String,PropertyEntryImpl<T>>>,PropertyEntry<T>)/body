{
  Map<String,PropertyEntryImpl<T>> innerMap=map.get(entry.entity());
  assertNotNull("Unexpected entity " + entry,innerMap);
  PropertyEntryImpl<T> expectedEntry=innerMap.remove(entry.key());
  assertNotNull("Unexpacted property entry " + entry,expectedEntry);
  if (innerMap.isEmpty()) {
    map.remove(entry.entity());
  }
  return expectedEntry;
}
