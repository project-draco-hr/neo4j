{
  return new ChannelInitializer<SocketChannel>(){
    @Override public void initChannel(    SocketChannel ch) throws Exception {
      ch.config().setAllocator(PooledByteBufAllocator.DEFAULT);
      if (sslCtx != null) {
        ch.pipeline().addLast(sslCtx.newHandler(ch.alloc()));
      }
      ch.pipeline().addLast(new SocketTransportHandler(new SocketTransportHandler.ProtocolChooser(protocolVersions),logging));
    }
  }
;
}
