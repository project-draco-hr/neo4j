{
  newTransaction();
  db.createNode(label("Foo")).setProperty("name","foo");
  long foo=statement.labelGetForName(getState(),"Foo");
  long name=statement.propertyKeyGetForName(getState(),"name");
  try {
    statement.uniquenessConstraintCreate(getState(),foo,name);
    fail("expected exception");
  }
 catch (  CreateConstraintFailureException e) {
    assertEquals(new UniquenessConstraint(foo,name),e.constraint());
    assertThat(e.getCause(),instanceOf(SchemaAndDataModificationInSameTransactionException.class));
  }
}
