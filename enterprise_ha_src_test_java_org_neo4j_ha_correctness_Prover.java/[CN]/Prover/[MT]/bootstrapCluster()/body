{
  Logging logging=new TestLogging();
  ClusterConfiguration config=new ClusterConfiguration("default",logging.getMessagesLog(ClusterConfiguration.class),"cluster://localhost:5001","cluster://localhost:5002","cluster://localhost:5003");
  ClusterState state=new ClusterState(asList(newClusterInstance(new InstanceId(1),new URI("cluster://localhost:5001"),config,logging),newClusterInstance(new InstanceId(2),new URI("cluster://localhost:5002"),config,logging),newClusterInstance(new InstanceId(3),new URI("cluster://localhost:5003"),config,logging)),emptySetOf(ClusterAction.class));
  state=state.performAction(new MessageDeliveryAction(Message.to(ClusterMessage.create,new URI("cluster://localhost:5003"),"defaultcluster").setHeader(Message.CONVERSATION_ID,"-1").setHeader(Message.FROM,"cluster://localhost:5003")));
  state=state.performAction(new MessageDeliveryAction(Message.to(ClusterMessage.join,new URI("cluster://localhost:5002"),new Object[]{"defaultcluster",new URI[]{new URI("cluster://localhost:5003")}}).setHeader(Message.CONVERSATION_ID,"-1").setHeader(Message.FROM,"cluster://localhost:5002")));
  state=state.performAction(new MessageDeliveryAction(Message.to(ClusterMessage.join,new URI("cluster://localhost:5001"),new Object[]{"defaultcluster",new URI[]{new URI("cluster://localhost:5003")}}).setHeader(Message.CONVERSATION_ID,"-1").setHeader(Message.FROM,"cluster://localhost:5001")));
  unexploredKnownStates.add(state);
  db.newState(state);
}
