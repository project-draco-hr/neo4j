{
  for (  String filename : filenames) {
    File file=mock(File.class);
    String[] fileNameParts=filename.split(File.separator);
    when(file.getName()).thenReturn(fileNameParts[fileNameParts.length - 1]);
    when(file.isFile()).thenReturn(!isDirectories);
    when(file.isDirectory()).thenReturn(isDirectories);
    when(file.exists()).thenReturn(true);
    when(file.getPath()).thenReturn(filename);
    files.add(file);
  }
}
