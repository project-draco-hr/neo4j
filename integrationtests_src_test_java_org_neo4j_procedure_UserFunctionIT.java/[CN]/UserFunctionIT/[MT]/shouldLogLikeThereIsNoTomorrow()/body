{
  AssertableLogProvider logProvider=new AssertableLogProvider();
  db.shutdown();
  db=new TestGraphDatabaseFactory().setInternalLogProvider(logProvider).setUserLogProvider(logProvider).newImpermanentDatabaseBuilder().setConfig(GraphDatabaseSettings.plugin_dir,plugins.getRoot().getAbsolutePath()).newGraphDatabase();
  try (Transaction ignore=db.beginTx()){
    Result res=db.execute("RETURN org.neo4j.procedure.logAround()");
    while (res.hasNext()) {
      res.next();
    }
  }
   AssertableLogProvider.LogMatcherBuilder match=inLog(Procedures.class);
  logProvider.assertAtLeastOnce(match.debug("1"),match.info("2"),match.warn("3"),match.error("4"));
}
