{
  if (record.inUse()) {
    byte inUse=Record.IN_USE.byteValue();
    buffer.putLong(record.getId()).putInt(record.getType()).put(inUse).putLong(record.getPrevBlock()).putInt(record.getLength()).putLong(record.getNextBlock());
    if (!record.isLight()) {
      if (!record.isCharData()) {
        byte[] data=record.getData();
        buffer.put(data);
      }
 else {
        char[] chars=record.getDataAsChar();
        buffer.put(chars);
      }
    }
  }
 else {
    byte inUse=Record.NOT_IN_USE.byteValue();
    buffer.putLong(record.getId()).putInt(record.getType()).put(inUse);
  }
}
