{
  VersionIndexRanges ranges=new VersionIndexRanges();
  assertEquals(OUT_OF_RANGE,ranges.versionForIndex(0));
  assertEquals(OUT_OF_RANGE,ranges.versionForIndex(1));
  ranges.add(0,-1);
  assertEquals(0,ranges.versionForIndex(0).version);
  assertEquals(0,ranges.versionForIndex(Long.MAX_VALUE).version);
  ranges.add(1,24);
  assertEquals(0,ranges.versionForIndex(0).version);
  assertEquals(0,ranges.versionForIndex(24).version);
  assertEquals(1,ranges.versionForIndex(25).version);
  assertEquals(1,ranges.versionForIndex(Long.MAX_VALUE).version);
  ranges.add(2,68);
  assertEquals(0,ranges.versionForIndex(0).version);
  assertEquals(0,ranges.versionForIndex(24).version);
  assertEquals(1,ranges.versionForIndex(25).version);
  assertEquals(1,ranges.versionForIndex(68).version);
  assertEquals(2,ranges.versionForIndex(69).version);
  assertEquals(2,ranges.versionForIndex(Long.MAX_VALUE).version);
  ranges.add(3,48);
  assertEquals(0,ranges.versionForIndex(0).version);
  assertEquals(0,ranges.versionForIndex(24).version);
  assertEquals(1,ranges.versionForIndex(25).version);
  assertEquals(1,ranges.versionForIndex(48).version);
  assertEquals(3,ranges.versionForIndex(49).version);
  assertEquals(3,ranges.versionForIndex(69).version);
  assertEquals(3,ranges.versionForIndex(Long.MAX_VALUE).version);
  ranges.add(4,62);
  assertEquals(0,ranges.versionForIndex(0).version);
  assertEquals(0,ranges.versionForIndex(24).version);
  assertEquals(1,ranges.versionForIndex(25).version);
  assertEquals(1,ranges.versionForIndex(48).version);
  assertEquals(3,ranges.versionForIndex(49).version);
  assertEquals(3,ranges.versionForIndex(62).version);
  assertEquals(4,ranges.versionForIndex(63).version);
  assertEquals(4,ranges.versionForIndex(69).version);
  assertEquals(4,ranges.versionForIndex(Long.MAX_VALUE).version);
  ranges.add(5,2);
  assertEquals(0,ranges.versionForIndex(0).version);
  assertEquals(5,ranges.versionForIndex(24).version);
  assertEquals(5,ranges.versionForIndex(25).version);
  assertEquals(5,ranges.versionForIndex(48).version);
  assertEquals(5,ranges.versionForIndex(49).version);
  assertEquals(5,ranges.versionForIndex(62).version);
  assertEquals(5,ranges.versionForIndex(63).version);
  assertEquals(5,ranges.versionForIndex(69).version);
  assertEquals(5,ranges.versionForIndex(Long.MAX_VALUE).version);
}
