{
  ConsistencyCheck consistency=diffs.apply(new ConsistencyCheck(diffs){
    protected void report(    AbstractBaseRecord record,    AbstractBaseRecord referred,    String message){
      logInconsistency(record + " " + referred+ " // "+ message);
    }
    protected void report(    AbstractBaseRecord record,    String message){
      logInconsistency(record + " // " + message);
    }
  }
);
  try {
    consistency.checkResult();
  }
 catch (  AssertionError e) {
    msgLog.logMessage("Cannot apply log " + logId() + ", "+ e.getMessage());
    throw e;
  }
}
