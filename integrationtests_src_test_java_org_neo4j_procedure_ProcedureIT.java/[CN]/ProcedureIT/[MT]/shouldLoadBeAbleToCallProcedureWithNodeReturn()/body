{
  new JarBuilder().createJarFor(plugins.newFile("myProcedures.jar"),ClassWithProcedures.class);
  GraphDatabaseService db=new TestGraphDatabaseFactory().newImpermanentDatabaseBuilder().setConfig(GraphDatabaseSettings.plugin_dir,plugins.getRoot().getAbsolutePath()).newGraphDatabase();
  try (Transaction ignore=db.beginTx()){
    Result res=db.execute("CALL org.neo4j.procedure.node(42)");
    Node node=(Node)res.next().get("node");
    assertThat(node.getId(),equalTo(42L));
    assertFalse(res.hasNext());
  }
 }
