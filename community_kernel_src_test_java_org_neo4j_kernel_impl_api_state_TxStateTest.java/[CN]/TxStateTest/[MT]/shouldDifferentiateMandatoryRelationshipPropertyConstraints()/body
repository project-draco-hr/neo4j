{
  MandatoryRelationshipPropertyConstraint constraint1=new MandatoryRelationshipPropertyConstraint(1,11);
  MandatoryRelationshipPropertyConstraint constraint2=new MandatoryRelationshipPropertyConstraint(1,22);
  MandatoryRelationshipPropertyConstraint constraint3=new MandatoryRelationshipPropertyConstraint(3,33);
  state.constraintDoAdd(constraint1);
  state.constraintDoAdd(constraint2);
  state.constraintDoAdd(constraint3);
  assertEquals(asSet(constraint1,constraint2),state.constraintsChangesForRelationshipType(1).getAdded());
  assertEquals(singleton(constraint1),state.constraintsChangesForRelationshipTypeAndProperty(1,11).getAdded());
  assertEquals(singleton(constraint2),state.constraintsChangesForRelationshipTypeAndProperty(1,22).getAdded());
  assertEquals(singleton(constraint3),state.constraintsChangesForRelationshipType(3).getAdded());
  assertEquals(singleton(constraint3),state.constraintsChangesForRelationshipTypeAndProperty(3,33).getAdded());
}
