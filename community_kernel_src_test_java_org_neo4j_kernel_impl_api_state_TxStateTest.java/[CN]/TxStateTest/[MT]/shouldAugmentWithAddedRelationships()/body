{
  int startNode=1, endNode=2, relType=0;
  long relId=state.relationshipDoCreate(relType,startNode,endNode);
  long otherRel=relId + 1;
  assertTrue(state.hasChanges());
  assertThat(state.augmentRelationships(startNode,OUTGOING,asPrimitiveIterator(otherRel)),containsLongs(relId,otherRel));
  assertThat(state.augmentRelationships(startNode,BOTH,asPrimitiveIterator(otherRel)),containsLongs(relId,otherRel));
  assertThat(state.augmentRelationships(endNode,INCOMING,asPrimitiveIterator(otherRel)),containsLongs(relId,otherRel));
  assertThat(state.augmentRelationships(endNode,BOTH,asPrimitiveIterator(otherRel)),containsLongs(relId,otherRel));
}
