{
  int startNode=1, endNode=2, relType=0;
  long relId=10;
  state.relationshipDoCreate(relId,relType,startNode,endNode);
  long otherRel=relId + 1;
  assertTrue(state.hasChanges());
  assertThat(state.augmentRelationships(startNode,OUTGOING,iterator(otherRel)),containsLongs(relId,otherRel));
  assertThat(state.augmentRelationships(startNode,BOTH,iterator(otherRel)),containsLongs(relId,otherRel));
  assertThat(state.augmentRelationships(endNode,INCOMING,iterator(otherRel)),containsLongs(relId,otherRel));
  assertThat(state.augmentRelationships(endNode,BOTH,iterator(otherRel)),containsLongs(relId,otherRel));
  assertThat(state.addedRelationships(endNode,new int[]{relType},BOTH),containsLongs(relId));
  assertThat(state.addedRelationships(endNode,new int[]{relType + 1},BOTH),containsLongs());
}
