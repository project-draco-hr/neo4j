{
synchronized (channelsPerClient) {
    for (    Map.Entry<Integer,Collection<Channel>> entry : channelsPerClient.entrySet()) {
      if (!entry.getValue().isEmpty() && !pruneDeadChannels(entry.getValue())) {
        System.out.println("Rolling back dead transaction from client " + entry.getKey() + " since it went down");
        realMaster.rollbackOngoingTransactions(new SlaveContext(entry.getKey(),new Pair[0]));
      }
    }
  }
}
