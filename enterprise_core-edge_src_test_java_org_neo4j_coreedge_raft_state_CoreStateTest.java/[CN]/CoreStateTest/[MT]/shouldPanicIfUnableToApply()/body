{
  doThrow(IllegalStateException.class).when(commandDispatcher).dispatch(any(ReplicatedTransaction.class),anyLong(),anyCallback());
  coreState.setStateMachine(coreStateMachines);
  coreState.start();
  raftLog.append(new RaftLogEntry(0,operation(nullTx)));
  assertEquals(true,dbHealth.isHealthy());
  coreState.notifyCommitted(0);
  applier.sync(false);
  assertEquals(false,dbHealth.isHealthy());
}
