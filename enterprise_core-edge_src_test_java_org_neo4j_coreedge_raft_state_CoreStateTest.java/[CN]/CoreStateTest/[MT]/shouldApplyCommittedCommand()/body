{
  RaftLogCommitIndexMonitor listener=mock(RaftLogCommitIndexMonitor.class);
  monitors.addMonitorListener(listener);
  coreState.setStateMachine(txStateMachine);
  coreState.start();
  raftLog.append(new RaftLogEntry(0,operation(nullTx)));
  raftLog.append(new RaftLogEntry(0,operation(nullTx)));
  raftLog.append(new RaftLogEntry(0,operation(nullTx)));
  coreState.notifyCommitted(2);
  applier.sync(false);
  verify(txStateMachine).dispatch(nullTx,0);
  verify(txStateMachine).dispatch(nullTx,1);
  verify(txStateMachine).dispatch(nullTx,2);
  verify(listener).commitIndex(2);
}
