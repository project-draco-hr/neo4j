{
  RaftLogCommitIndexMonitor listener=mock(RaftLogCommitIndexMonitor.class);
  monitors.addMonitorListener(listener);
  coreState.setStateMachine(txStateMachine);
  coreState.start();
  raftLog.append(new RaftLogEntry(0,operation(nullTx)));
  raftLog.append(new RaftLogEntry(0,operation(nullTx)));
  raftLog.append(new RaftLogEntry(0,operation(nullTx)));
  coreState.notifyCommitted(2);
  applier.sync(false);
  verify(txStateMachine).dispatch(eq(nullTx),eq(0L),anyCallback());
  verify(txStateMachine).dispatch(eq(nullTx),eq(1L),anyCallback());
  verify(txStateMachine).dispatch(eq(nullTx),eq(2L),anyCallback());
  verify(listener).commitIndex(2);
}
