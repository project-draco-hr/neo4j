{
  if (buf.remaining() >= amount) {
    return;
  }
  int newSize=buf.capacity() + Math.max(Math.min(this.buf.capacity(),1024 * 1000),amount);
  int oldPosition=this.buf.position();
  ByteBuffer buf=ByteBuffer.allocate(newSize);
  this.buf.position(0);
  buf.put(this.buf);
  this.buf=buf;
  this.buf.position(oldPosition);
}
