{
  long label=0, propertyKey=7;
  IndexDescriptor rule=new IndexDescriptor(label,propertyKey,false);
  StatementContext inner=Mockito.mock(StatementContext.class);
  DataIntegrityValidatingStatementContext ctx=new DataIntegrityValidatingStatementContext(inner);
  when(inner.getIndexRules(rule.getLabelId())).thenAnswer(withIterator(rule));
  try {
    ctx.addIndexRule(label,propertyKey,false);
    fail("Should have thrown exception.");
  }
 catch (  ConstraintViolationKernelException e) {
  }
  verify(inner,never()).addIndexRule(anyLong(),anyLong(),anyBoolean());
}
