{
  readySet=new CountDownLatch(contestants.size());
  for (  Contestant contestant : contestants) {
    contestant.start();
  }
  readySet.await();
  go.countDown();
  int errorCount=0;
  long maxWaitTimeMillis=MILLISECONDS.convert(maxWaitTime,unit);
  long waitedSoFar=0;
  for (  Contestant contestant : contestants) {
    if (maxWaitTime == 0) {
      contestant.join();
    }
 else {
      if (waitedSoFar >= maxWaitTimeMillis) {
        throw new TimeoutException("Didn't complete after " + maxWaitTime + " "+ unit);
      }
      long time=currentTimeMillis();
      contestant.join(maxWaitTimeMillis - waitedSoFar);
      waitedSoFar+=(currentTimeMillis() - time);
    }
    if (contestant.error != null) {
      errorCount++;
    }
  }
  if (errorCount > 1) {
    Throwable errors=new Throwable("Multiple errors found");
    for (    Contestant contestant : contestants) {
      if (contestant.error != null) {
        errors.addSuppressed(contestant.error);
      }
    }
    throw errors;
  }
  if (errorCount == 1) {
    for (    Contestant contestant : contestants) {
      if (contestant.error != null) {
        throw contestant.error;
      }
    }
  }
}
