{
  try {
    if (config.get(gangliaEnabled)) {
      final HostnamePort hostnamePort=config.get(gangliaServer);
      final GMetric ganglia=new GMetric(hostnamePort.getHost(),hostnamePort.getPort(),GMetric.UDPAddressingMode.MULTICAST,1);
      gangliaReporter=GangliaReporter.forRegistry(registry).prefixedWith(prefix).convertRatesTo(TimeUnit.SECONDS).convertDurationsTo(TimeUnit.MILLISECONDS).filter(MetricFilter.ALL).build(ganglia);
      gangliaReporter.start(config.get(gangliaInterval),TimeUnit.MILLISECONDS);
      logger.info("Sending metrics to Ganglia server at " + hostnamePort);
    }
  }
 catch (  IOException e) {
    logger.error("Could not start Ganglia output",e);
  }
}
