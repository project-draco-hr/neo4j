{
  Pair<Node,Node> nodes=db.executeAndCommit(aPairOfNodes());
  Relationship relationship=db.executeAndCommit(relate(nodes));
  db.executeAndCommit(propertyWrite(Node.class,nodes.first(),"key1","value1"));
  db.executeAndCommit(propertyWrite(Relationship.class,relationship,"key1","value1"));
  for (  Function<GraphDatabaseService,?> operation : new Function[]{propertyRead(Node.class,nodes.first(),"key1"),propertyRead(Relationship.class,relationship,"key1")}) {
    db.executeAndRollback(succeedAfterSchemaOperation(operation));
  }
}
