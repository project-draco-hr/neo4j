{
  return new Function<GraphDatabaseService,Void>(){
    @Override public Void apply(    GraphDatabaseService graphDb){
      graphDb.schema().indexFor(label("Label1")).on("key1").create();
      try {
        function.apply(graphDb);
        fail("expected exception");
      }
 catch (      Exception e) {
        assertEquals("Cannot perform data updates in a transaction that has performed schema updates.",e.getMessage());
      }
      return null;
    }
  }
;
}
