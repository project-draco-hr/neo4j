{
  String key1="kvkey1";
  String key2="kvkey2";
  String value1="value1";
  String value2="value2";
  String indexName="kvrel";
  long relationship=helper.createRelationship("some type");
  helper.setRelationshipProperties(relationship,MapUtil.map(key1,value1,key1,value2,key2,value1,key2,value2));
  helper.addRelationshipToIndex(indexName,key1,value1,relationship);
  helper.addRelationshipToIndex(indexName,key1,value2,relationship);
  helper.addRelationshipToIndex(indexName,key2,value1,relationship);
  helper.addRelationshipToIndex(indexName,key2,value2,relationship);
  assertEquals(1,helper.getIndexedRelationships(indexName,key1,value1).size());
  assertEquals(1,helper.getIndexedRelationships(indexName,key1,value2).size());
  assertEquals(1,helper.getIndexedRelationships(indexName,key2,value1).size());
  assertEquals(1,helper.getIndexedRelationships(indexName,key2,value2).size());
  CLIENT.resource(functionalTestHelper.relationshipIndexUri() + indexName + "/"+ key1+ "/"+ value1+ "/"+ relationship).delete(ClientResponse.class);
  assertEquals(0,helper.getIndexedRelationships(indexName,key1,value1).size());
  assertEquals(1,helper.getIndexedRelationships(indexName,key1,value2).size());
  assertEquals(1,helper.getIndexedRelationships(indexName,key2,value1).size());
  assertEquals(1,helper.getIndexedRelationships(indexName,key2,value2).size());
  CLIENT.resource(functionalTestHelper.relationshipIndexUri() + indexName + "/"+ key2+ "/"+ relationship).delete(ClientResponse.class);
  assertEquals(0,helper.getIndexedRelationships(indexName,key1,value1).size());
  assertEquals(1,helper.getIndexedRelationships(indexName,key1,value2).size());
  assertEquals(0,helper.getIndexedRelationships(indexName,key2,value1).size());
  assertEquals(0,helper.getIndexedRelationships(indexName,key2,value2).size());
  CLIENT.resource(functionalTestHelper.relationshipIndexUri() + indexName + "/"+ relationship).delete(ClientResponse.class);
  assertEquals(0,helper.getIndexedRelationships(indexName,key1,value1).size());
  assertEquals(0,helper.getIndexedRelationships(indexName,key1,value2).size());
  assertEquals(0,helper.getIndexedRelationships(indexName,key2,value1).size());
  assertEquals(0,helper.getIndexedRelationships(indexName,key2,value2).size());
}
