{
  Channel outputChannel=mock(Channel.class);
  ByteBufAllocator allocator=mock(ByteBufAllocator.class);
  ByteBuf buffer=mock(ByteBuf.class);
  when(outputChannel.alloc()).thenReturn(allocator);
  when(allocator.buffer(anyInt(),anyInt())).thenReturn(buffer);
  Session session=mock(Session.class);
  BoltProtocolV1 protocol=new BoltProtocolV1(session,outputChannel,NullLogService.getInstance());
  protocol.close();
  verify(session).close();
  verify(buffer).release();
}
