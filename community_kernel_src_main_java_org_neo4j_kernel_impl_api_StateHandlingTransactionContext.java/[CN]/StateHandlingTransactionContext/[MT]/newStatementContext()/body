{
  StatementContextParts parts=delegate.newStatementContext();
  CachingStatementContext cachingContext=new CachingStatementContext(parts.entityReadOperations(),parts.schemaReadOperations(),persistenceCache,schemaCache);
  parts.replace(null,null,cachingContext,null,cachingContext,null,null,null);
  AuxiliaryStoreOperations auxStoreOperations=parts.resolve(AuxiliaryStoreOperations.class);
  auxStoreOperations=new LegacyAutoIndexAuxStoreOps(auxStoreOperations,propertyKeyTokenHolder,nodeManager.getNodePropertyTrackers(),nodeManager.getRelationshipPropertyTrackers(),nodeManager);
  StateHandlingStatementContext stateHandlingContext=new StateHandlingStatementContext(parts.entityReadOperations(),parts.schemaReadOperations(),auxStoreOperations,state,constraintIndexCreator);
  parts.replace(null,null,stateHandlingContext,stateHandlingContext,stateHandlingContext,stateHandlingContext,new SchemaStateConcern(schemaState),null);
  return parts;
}
