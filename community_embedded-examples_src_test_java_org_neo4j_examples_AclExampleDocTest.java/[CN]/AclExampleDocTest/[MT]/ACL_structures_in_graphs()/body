{
  data.get();
  String query="start root=node:node_auto_index(name = 'FileRoot') match root-[:contains*0..]->(parentDir)-[:leaf]->file return file";
  gen.get().addSnippet("query1",createCypherSnippet(query));
  String result=engine.execute(query).dumpToString();
  assertTrue(result.contains("File1"));
  gen.get().addSnippet("result1",createQueryResultSnippet(result));
  query="start root=node:node_auto_index(name = 'FileRoot') match root-[:contains*0..]->()-[:leaf]->file<-[:owns]-user return file, user";
  gen.get().addSnippet("query2",createCypherSnippet(query));
  result=engine.execute(query).dumpToString();
  assertTrue(result.contains("File1"));
  assertTrue(result.contains("User1"));
  assertTrue(result.contains("User2"));
  assertTrue(result.contains("File2"));
  assertFalse(result.contains("Admin1"));
  assertFalse(result.contains("Admin2"));
  gen.get().addSnippet("result2",createQueryResultSnippet(result));
  query="START file=node:node_auto_index('name:File*') " + "MATCH " + "file<-[:leaf]-()<-[:contains*0..]-dir<-[?:canRead]-role-[:member]->readUser "+ "RETURN file.name, dir.name, role.name, readUser.name";
  gen.get().addSnippet("query3",createCypherSnippet(query));
  result=engine.execute(query).dumpToString();
  assertTrue(result.contains("File1"));
  assertTrue(result.contains("File2"));
  assertTrue(result.contains("Admin1"));
  assertTrue(result.contains("Admin2"));
  gen.get().addSnippet("result3",createQueryResultSnippet(result));
}
