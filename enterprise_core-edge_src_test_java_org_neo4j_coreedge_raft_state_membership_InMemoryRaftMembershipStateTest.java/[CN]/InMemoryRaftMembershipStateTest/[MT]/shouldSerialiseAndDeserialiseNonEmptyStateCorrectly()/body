{
  InMemoryRaftMembershipState<RaftTestMember> state=new InMemoryRaftMembershipState<>();
  InMemoryRaftMembershipState.InMemoryRaftMembershipStateChannelMarshal<RaftTestMember> serializer=new InMemoryRaftMembershipState.InMemoryRaftMembershipStateChannelMarshal<>(new RaftTestMarshal());
  RaftTestGroup coreMembers=new RaftTestGroup(1,2,3,4);
  state.setVotingMembers(coreMembers.getMembers());
  InMemoryClosableChannel channel=new InMemoryClosableChannel();
  serializer.marshal(state,channel);
  final InMemoryRaftMembershipState recovered=serializer.unmarshal(channel);
  assertEquals(state.votingMembers(),recovered.votingMembers());
}
