{
  try (StoreChannel storeChannel=fileSystem.open(file,"r")){
    final ReadableChannel channel=new ReadAheadChannel<>(storeChannel);
    STATE result=marshal.startState();
    STATE lastRead;
    while ((lastRead=marshal.unmarshal(channel)) != null) {
      result=lastRead;
    }
    fileSystem.open(file,"r").close();
    return result;
  }
 }
