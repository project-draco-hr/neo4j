{
  try (StoreChannel storeChannel=fileSystem.open(file,"r")){
    final ReadableChannel channel=new ReadAheadChannel<>(storeChannel);
    STATE result=marshal.startState();
    STATE lastRead;
    try {
      while ((lastRead=marshal.unmarshal(channel)) != null) {
        result=lastRead;
      }
    }
 catch (    EndOfStreamException e) {
    }
    fileSystem.open(file,"r").close();
    return result;
  }
 }
