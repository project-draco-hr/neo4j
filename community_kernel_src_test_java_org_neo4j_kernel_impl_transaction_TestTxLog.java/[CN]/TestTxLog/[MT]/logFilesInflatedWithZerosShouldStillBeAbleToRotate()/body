{
  File logFile=tmpFile();
  File rotationTarget=tmpFile();
  zeroPad(logFile,fs,TxLog.SCAN_WINDOW_SIZE / 2);
  TxLog log=new TxLog(logFile,fs,new Monitors());
  writeStartRecords(log,2000,0);
  log.force();
  log.switchToLogFile(rotationTarget);
  assertThat(log.getRecordCount(),is(2000));
}
