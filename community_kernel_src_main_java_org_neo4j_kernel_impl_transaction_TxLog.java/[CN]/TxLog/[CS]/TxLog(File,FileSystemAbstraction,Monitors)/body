{
  this.bufferMonitor=monitors.newMonitor(ByteCounterMonitor.class,getClass());
  if (fileName == null) {
    throw new IllegalArgumentException("Null filename");
  }
  this.fileSystem=fileSystem;
  FileChannel fileChannel=fileSystem.open(fileName,"rw");
  fileChannel.position(fileChannel.size());
  logBuffer=new DirectMappedLogBuffer(fileChannel,bufferMonitor);
  this.name=fileName;
  recreateActiveTransactionState();
}
