{
  if (!buffer.hasRemaining()) {
    return 0;
  }
  byte globalId[]=new byte[buffer.get()];
  if (buffer.remaining() < globalId.length) {
    return 0;
  }
  buffer.get(globalId);
  Xid xid=new XidImpl(globalId,new byte[0]);
  if (!recordMap.containsKey(xid)) {
    throw new IOException("Committing xid[" + xid + "] mark found but no record list found in map");
  }
  List<Record> recordList=recordMap.get(xid);
  recordList.add(new Record(MARK_COMMIT,globalId,null,seqNr));
  recordMap.put(xid,recordList);
  return 2 + globalId.length;
}
