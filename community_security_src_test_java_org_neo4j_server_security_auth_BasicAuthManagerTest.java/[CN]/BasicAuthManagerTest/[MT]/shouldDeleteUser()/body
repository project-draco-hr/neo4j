{
  final InMemoryUserRepository users=new InMemoryUserRepository();
  final User user=new User.Builder("jake",Credential.forPassword("abc123")).withRequiredPasswordChange(true).build();
  users.create(user);
  final BasicAuthManager manager=new BasicAuthManager(users,mock(PasswordPolicy.class),mock(AuthenticationStrategy.class));
  manager.start();
  manager.deleteUser("jake");
  assertNull(users.findByName("jake"));
}
