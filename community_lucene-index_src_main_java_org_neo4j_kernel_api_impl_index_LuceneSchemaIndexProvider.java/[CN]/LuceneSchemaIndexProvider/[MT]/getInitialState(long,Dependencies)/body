{
  try {
    Directory directory=directoryFactory.open(dir(dependencies.getRootDirectory(),indexId));
    if (!IndexReader.indexExists(directory))     return InternalIndexState.NON_EXISTENT;
    Map<String,String> commitData=IndexReader.getCommitUserData(directory);
    return ONLINE.equals(commitData.get(KEY_STATUS)) ? InternalIndexState.ONLINE : InternalIndexState.POPULATING;
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
