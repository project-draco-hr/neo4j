{
  NeoStores neoStores=neoStoresRule.open(GraphDatabaseSettings.dense_node_threshold.name(),"49");
  TransactionRecordState tx=newTransactionRecordState(neoStores);
  long nodeId=neoStores.getNodeStore().nextId();
  int typeA=0;
  tx.nodeCreate(nodeId);
  tx.createRelationshipTypeToken("A",typeA);
  createRelationships(neoStores,tx,nodeId,typeA,OUTGOING,24);
  createRelationships(neoStores,tx,nodeId,typeA,INCOMING,25);
  assertFalse(recordChangeSet.getNodeRecords().getOrLoad(nodeId,null).forReadingData().isDense());
  createRelationships(neoStores,tx,nodeId,typeA,INCOMING,1);
  assertTrue(recordChangeSet.getNodeRecords().getOrLoad(nodeId,null).forReadingData().isDense());
  assertDenseRelationshipCounts(recordChangeSet,nodeId,typeA,24,26);
}
