{
  NeoStores neoStores=neoStoresRule.open();
  TransactionRecordState recordState=new TransactionRecordState(neoStores,integrityValidator,newContext(neoStores));
  final long indexId=neoStores.getSchemaStore().nextId();
  final long constraintId=neoStores.getSchemaStore().nextId();
  recordState.createSchemaRule(uniquenessConstraintRule(constraintId,1,1,indexId));
  recordState.extractCommands(new ArrayList<Command>());
  verify(integrityValidator).validateSchemaRule(any());
}
