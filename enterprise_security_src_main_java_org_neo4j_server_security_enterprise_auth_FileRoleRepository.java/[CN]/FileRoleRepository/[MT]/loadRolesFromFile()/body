{
  byte[] fileBytes=Files.readAllBytes(roleFile);
  List<RoleRecord> loadedRoles;
  try {
    loadedRoles=serialization.deserializeRoles(fileBytes);
  }
 catch (  RoleSerialization.FormatException e) {
    log.error("Failed to read role file \"%s\" (%s)",roleFile.toAbsolutePath(),e.getMessage());
    throw new IllegalStateException("Failed to read role file: " + roleFile);
  }
  roles=loadedRoles;
  for (  RoleRecord role : roles) {
    rolesByName.put(role.name(),role);
    populateUserMap(role);
  }
}
