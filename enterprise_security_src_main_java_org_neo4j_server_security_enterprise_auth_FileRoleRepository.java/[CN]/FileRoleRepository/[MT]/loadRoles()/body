{
  if (fileSystem.fileExists(roleFile)) {
    List<RoleRecord> loadedRoles;
    try {
      lastLoaded=fileSystem.lastModifiedTime(roleFile);
      loadedRoles=serialization.loadRecordsFromFile(fileSystem,roleFile);
    }
 catch (    FormatException e) {
      log.error("Failed to read role file \"%s\" (%s)",roleFile.getAbsolutePath(),e.getMessage());
      throw new IllegalStateException("Failed to read role file '" + roleFile + "'.");
    }
    clear();
    roles=loadedRoles;
    for (    RoleRecord role : roles) {
      rolesByName.put(role.name(),role);
      populateUserMap(role);
    }
  }
}
