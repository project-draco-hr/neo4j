{
  if (value instanceof Relationship) {
    Relationship real=(Relationship)value;
    boolean matches=relMatcher.matches(real);
    if (outgoing) {
      matches&=leftNode.matches(real.getStartNode());
      matches&=rightNode.matches(real.getEndNode());
    }
 else {
      matches&=leftNode.matches(real.getEndNode());
      matches&=rightNode.matches(real.getStartNode());
    }
    return matches;
  }
  return false;
}
