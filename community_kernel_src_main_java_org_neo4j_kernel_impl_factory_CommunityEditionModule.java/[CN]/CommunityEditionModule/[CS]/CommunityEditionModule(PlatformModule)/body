{
  org.neo4j.kernel.impl.util.Dependencies deps=platformModule.dependencies;
  Config config=platformModule.config;
  LogService logging=platformModule.logging;
  FileSystemAbstraction fileSystem=platformModule.fileSystem;
  PageCache pageCache=platformModule.pageCache;
  File storeDir=platformModule.storeDir;
  DataSourceManager dataSourceManager=platformModule.dataSourceManager;
  LifeSupport life=platformModule.life;
  GraphDatabaseFacade graphDatabaseFacade=platformModule.graphDatabaseFacade;
  lockManager=deps.satisfyDependency(createLockManager(config,logging));
  idGeneratorFactory=deps.satisfyDependency(createIdGeneratorFactory());
  propertyKeyTokenHolder=life.add(deps.satisfyDependency(new PropertyKeyTokenHolder(createPropertyKeyCreator(config,dataSourceManager,idGeneratorFactory))));
  labelTokenHolder=life.add(deps.satisfyDependency(new LabelTokenHolder(createLabelIdCreator(config,dataSourceManager,idGeneratorFactory))));
  relationshipTypeTokenHolder=life.add(deps.satisfyDependency(new RelationshipTypeTokenHolder(createRelationshipTypeCreator(config,dataSourceManager,idGeneratorFactory))));
  life.add(deps.satisfyDependency(createKernelData(fileSystem,pageCache,storeDir,config,graphDatabaseFacade)));
  commitProcessFactory=createCommitProcessFactory();
  headerInformationFactory=createHeaderInformationFactory();
  schemaWriteGuard=createSchemaWriteGuard();
  transactionStartTimeout=config.get(GraphDatabaseSettings.transaction_start_timeout);
  upgradeConfiguration=new ConfigMapUpgradeConfiguration(config);
  registerRecovery(config.get(GraphDatabaseFacadeFactory.Configuration.editionName),life,deps);
  publishEditionInfo(deps.resolveDependency(UsageData.class));
}
