{
  return new StoreWriter(){
    private int totalFiles;
    @Override public int write(    String path,    ReadableByteChannel data,    ByteBuffer temporaryBuffer,    boolean hasData) throws IOException {
      console.log("Copying " + path);
      int written=actual.write(path,data,temporaryBuffer,hasData);
      console.log("Copied  " + path + " "+ bytes(written));
      totalFiles++;
      return written;
    }
    @Override public void done(){
      actual.done();
      console.log("Done, copied " + totalFiles + " files");
    }
  }
;
}
