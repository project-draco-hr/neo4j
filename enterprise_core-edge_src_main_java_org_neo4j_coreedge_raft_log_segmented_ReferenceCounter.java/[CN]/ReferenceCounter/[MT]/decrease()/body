{
  while (true) {
    int pre=count.get();
    if (pre <= 0) {
      throw new IllegalStateException("Illegal count: " + pre);
    }
 else     if (count.compareAndSet(pre,pre - 1)) {
      return;
    }
  }
}
