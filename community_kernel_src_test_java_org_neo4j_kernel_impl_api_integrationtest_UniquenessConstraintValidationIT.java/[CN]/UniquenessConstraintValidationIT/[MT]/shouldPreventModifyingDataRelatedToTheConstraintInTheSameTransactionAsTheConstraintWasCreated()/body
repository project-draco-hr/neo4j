{
  newTransaction();
  db.schema().constraintFor(label("Label1")).unique().on("key1").create();
  try {
    db.createNode(label("Label1")).setProperty("key1","value1");
    fail("expected exception");
  }
 catch (  ConstraintViolationException e) {
    assertThat(e.getMessage(),containsString("Unable to validate constraint."));
    assertThat(e.getCause(),instanceOf(UnableToValidateConstraintKernelException.class));
    assertThat(grandCause(e),instanceOf(SchemaAndDataModificationInSameTransactionException.class));
  }
}
