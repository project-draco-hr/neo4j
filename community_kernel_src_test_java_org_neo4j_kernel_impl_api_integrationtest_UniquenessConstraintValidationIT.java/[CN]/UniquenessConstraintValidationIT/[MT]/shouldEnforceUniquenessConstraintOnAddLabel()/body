{
  constrainedNode("Label1","key1","value1");
  newTransaction();
  Node node=db.createNode();
  node.setProperty("key1","value1");
  try {
    node.addLabel(label("Label1"));
    fail("should have thrown exception");
  }
 catch (  ConstraintViolationException e) {
    assertThat(e.getMessage(),containsString("\"key1\"=[value1]"));
  }
}
