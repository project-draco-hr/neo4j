{
  createConstraint("Person","id");
  Node ourNode;
{
    dataWriteOperationsInNewTransaction();
    ourNode=db.createNode(label("Person"));
    ourNode.setProperty("id",1);
    db.createNode(label("Item")).setProperty("id",2);
    commit();
  }
  DataWriteOperations statement=dataWriteOperationsInNewTransaction();
  IndexDescriptor idx=statement.uniqueIndexGetForLabelAndPropertyKey(statement.labelGetForName("Person"),statement.propertyKeyGetForName("id"));
  db.createNode(label("Item")).setProperty("id",2);
  assertThat(statement.nodeGetUniqueFromIndexLookup(idx,1),equalTo(ourNode.getId()));
}
