{
  int bytesWanted=dst.limit();
  int bytesRead=0;
  while (bytesWanted > 0) {
    int bytesReadThisTime=readAsMuchAsPossible(dst,bytesWanted);
    if (bytesReadThisTime == 0) {
      break;
    }
    bytesRead+=bytesReadThisTime;
    bytesWanted-=bytesReadThisTime;
  }
  return bytesRead == 0 && !moreBlocks ? -1 : bytesRead;
}
