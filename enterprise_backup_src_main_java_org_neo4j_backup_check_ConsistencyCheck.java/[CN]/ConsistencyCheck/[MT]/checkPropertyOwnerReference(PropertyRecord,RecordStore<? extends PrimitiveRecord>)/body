{
  boolean fail=false;
  PrimitiveRecord entity=store.forceGetRecord(property.getNodeId());
  if (!entity.inUse())   fail|=inconsistent(property,entity,"owning record not in use");
 else   if (entity.getNextProp() != property.getId())   fail|=inconsistent(property,entity,"owning record does not reference back");
  if (store instanceof DiffRecordStore<?>) {
    DiffRecordStore<? extends PrimitiveRecord> diffs=(DiffRecordStore<? extends PrimitiveRecord>)store;
    PrimitiveRecord old=diffs.forceGetRaw(entity.getId());
    if (old.inUse() && !Record.NO_NEXT_PROPERTY.value(old.getNextProp()))     if (old.getNextProp() != property.getId())     if (!((DiffRecordStore<?>)props).isModified(old.getNextProp()))     fail|=inconsistent(property,entity,"overwriting used property record");
  }
  return fail;
}
