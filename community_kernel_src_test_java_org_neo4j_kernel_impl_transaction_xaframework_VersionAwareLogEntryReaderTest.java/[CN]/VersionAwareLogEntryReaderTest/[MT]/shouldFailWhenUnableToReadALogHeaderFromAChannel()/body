{
  final ByteBuffer buffer=ByteBuffer.allocate(LOG_HEADER_SIZE);
  final ReadableByteChannel channel=mock(ReadableByteChannel.class);
  when(channel.read(buffer)).thenReturn(1);
  try {
    readLogHeader(buffer,channel,true);
    fail("should have thrown");
  }
 catch (  IOException ex) {
    assertEquals("Unable to read log version and last committed tx",ex.getMessage());
  }
}
