{
  clusterContext.getLogger(getClass()).info("Doing elections for role " + role);
  elections.put(role,new Election(new WinnerStrategy(){
    @Override public InstanceId pickWinner(    Collection<Vote> voteList){
      List<Vote> filteredVoteList=Iterables.toList(Iterables.filter(new Predicate<Vote>(){
        @Override public boolean accept(        Vote item){
          return !(item.getCredentials() instanceof NotElectableElectionCredentials);
        }
      }
,voteList));
      Collections.sort(filteredVoteList);
      Collections.reverse(filteredVoteList);
      clusterContext.getLogger(getClass()).debug("Elections ended up with list " + filteredVoteList);
      for (      Vote vote : filteredVoteList) {
        return vote.getSuggestedNode();
      }
      return null;
    }
  }
));
}
