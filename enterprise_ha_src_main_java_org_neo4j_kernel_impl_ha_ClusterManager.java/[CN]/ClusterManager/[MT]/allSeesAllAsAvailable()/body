{
  return new Predicate<ManagedCluster>(){
    @Override public boolean accept(    ManagedCluster cluster){
      if (!allSeesAllAsJoined().accept(cluster)) {
        return false;
      }
      for (      HighlyAvailableGraphDatabase database : cluster.getAllMembers()) {
        ClusterMembers members=database.getDependencyResolver().resolveDependency(ClusterMembers.class);
        for (        ClusterMember clusterMember : members.getMembers()) {
          if (clusterMember.getHARole().equals(HighAvailabilityModeSwitcher.UNKNOWN)) {
            return false;
          }
        }
      }
      for (      HighlyAvailableGraphDatabase database : cluster.getAllMembers()) {
        StringLogger logger=database.getDependencyResolver().resolveDependency(StringLogger.class);
        logger.debug(this.toString());
      }
      return true;
    }
    @Override public String toString(){
      return "All instances should see all others as available";
    }
  }
;
}
