{
  AuthManager manager=mock(AuthManager.class);
  BasicAuthentication authentication=new BasicAuthentication(manager,mock(LogProvider.class));
  when(manager.authenticate(anyString(),anyString())).thenReturn(AuthenticationResult.SUCCESS);
  authentication.authenticate(map("scheme","basic","principal","bob","credentials","secret","new-credentials","secret2"));
}
