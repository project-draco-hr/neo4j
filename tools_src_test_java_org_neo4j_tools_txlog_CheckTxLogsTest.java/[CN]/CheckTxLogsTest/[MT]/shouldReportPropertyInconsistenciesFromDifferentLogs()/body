{
  File log1=logFile(1);
  File log2=logFile(2);
  File log3=logFile(3);
  writeTxContent(log1,0,new Command.NodeCommand(new NodeRecord(42,false,false,-1,-1,1),new NodeRecord(42,true,false,42,-1,1)),new Command.PropertyCommand(propertyRecord(5,true,-1,-1,777),propertyRecord(5,true,-1,-1,777)),new Command.NodeCommand(new NodeRecord(1,true,true,2,-1,1),new NodeRecord(1,true,false,-1,-1,1)));
  writeTxContent(log2,0,new Command.PropertyCommand(propertyRecord(24,false,-1,-1),propertyRecord(24,true,-1,-1,777)));
  writeTxContent(log3,0,new Command.PropertyCommand(propertyRecord(24,false,-1,-1),propertyRecord(24,true,-1,-1,777)),new Command.NodeCommand(new NodeRecord(42,true,true,42,-1,1),new NodeRecord(42,true,true,42,10,1)),new Command.PropertyCommand(propertyRecord(5,true,-1,-1,777,888),propertyRecord(5,true,-1,9,777,888,999)));
  CapturingInconsistenciesHandler handler=new CapturingInconsistenciesHandler();
  CheckTxLogs checker=new CheckTxLogs(fsRule.get());
  checker.scan(new File[]{log1,log2,log3},handler,PROPERTY);
  assertEquals(2,handler.recordInconsistencies.size());
  PropertyRecord seenRecord1=(PropertyRecord)handler.recordInconsistencies.get(0).committed.record();
  PropertyRecord currentRecord1=(PropertyRecord)handler.recordInconsistencies.get(0).current.record();
  assertEquals(24,seenRecord1.getId());
  assertTrue(seenRecord1.inUse());
  assertEquals(24,currentRecord1.getId());
  assertFalse(currentRecord1.inUse());
  PropertyRecord seenRecord2=(PropertyRecord)handler.recordInconsistencies.get(1).committed.record();
  PropertyRecord currentRecord2=(PropertyRecord)handler.recordInconsistencies.get(1).current.record();
  assertEquals(5,seenRecord2.getId());
  assertEquals(777,seenRecord2.getPropertyBlock(0).getSingleValueInt());
  assertEquals(5,currentRecord2.getId());
  assertEquals(777,currentRecord2.getPropertyBlock(0).getSingleValueInt());
  assertEquals(888,currentRecord2.getPropertyBlock(1).getSingleValueInt());
}
