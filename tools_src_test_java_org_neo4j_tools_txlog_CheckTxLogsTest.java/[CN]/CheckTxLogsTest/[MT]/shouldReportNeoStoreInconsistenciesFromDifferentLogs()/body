{
  File log1=logFile(1);
  File log2=logFile(2);
  File log3=logFile(3);
  writeTxContent(log1,new Command.NeoStoreCommand().init(new NeoStoreRecord(),createNeoStoreRecord(42)),new Command.PropertyCommand().init(propertyRecord(5,false,-1,-1),propertyRecord(5,true,-1,-1,777)),new Command.NeoStoreCommand().init(createNeoStoreRecord(42),createNeoStoreRecord(21)));
  writeTxContent(log2,new Command.NeoStoreCommand().init(createNeoStoreRecord(12),createNeoStoreRecord(21)));
  writeTxContent(log3,new Command.NeoStoreCommand().init(createNeoStoreRecord(13),createNeoStoreRecord(21)));
  CapturingInconsistenciesHandler handler=new CapturingInconsistenciesHandler();
  CheckTxLogs checker=new CheckTxLogs(fsRule.get());
  checker.scan(new File[]{log1,log2,log3},handler,NEO_STORE);
  assertEquals(2,handler.inconsistencies.size());
  NeoStoreRecord seenRecord1=(NeoStoreRecord)handler.inconsistencies.get(0).committed.record();
  NeoStoreRecord currentRecord1=(NeoStoreRecord)handler.inconsistencies.get(0).current.record();
  assertEquals(21,seenRecord1.getNextProp());
  assertEquals(12,currentRecord1.getNextProp());
  NeoStoreRecord seenRecord2=(NeoStoreRecord)handler.inconsistencies.get(1).committed.record();
  NeoStoreRecord currentRecord2=(NeoStoreRecord)handler.inconsistencies.get(1).current.record();
  assertEquals(21,seenRecord2.getNextProp());
  assertEquals(13,currentRecord2.getNextProp());
}
