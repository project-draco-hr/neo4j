{
  File log=logFile(1);
  writeTxContent(log,0,new Command.RelationshipGroupCommand(new RelationshipGroupRecord(42,-1,-1,-1,-1,-1,-1,false),new RelationshipGroupRecord(42,1,2,3,4,5,6,true)),new Command.PropertyCommand(propertyRecord(5,false,-1,-1),propertyRecord(5,true,-1,-1,777)),new Command.RelationshipGroupCommand(new RelationshipGroupRecord(21,1,2,3,4,5,7,true),new RelationshipGroupRecord(21,-1,-1,-1,-1,-1,-1,false)));
  writeTxContent(log,0,new Command.RelationshipGroupCommand(new RelationshipGroupRecord(53,1,2,3,4,5,6,true),new RelationshipGroupRecord(53,1,2,30,4,14,6,true)),new Command.RelationshipGroupCommand(new RelationshipGroupRecord(42,1,2,3,9,5,6,true),new RelationshipGroupRecord(42,1,2,3,4,5,6,true)));
  CapturingInconsistenciesHandler handler=new CapturingInconsistenciesHandler();
  CheckTxLogs checker=new CheckTxLogs(fsRule.get());
  checker.scan(new File[]{log},handler,RELATIONSHIP_GROUP);
  assertEquals(1,handler.recordInconsistencies.size());
  RelationshipGroupRecord seenRecord=(RelationshipGroupRecord)handler.recordInconsistencies.get(0).committed.record();
  RelationshipGroupRecord currentRecord=(RelationshipGroupRecord)handler.recordInconsistencies.get(0).current.record();
  assertEquals(42,seenRecord.getId());
  assertEquals(4,seenRecord.getFirstLoop());
  assertEquals(42,currentRecord.getId());
  assertEquals(9,currentRecord.getFirstLoop());
}
