{
  File configFile=storeDirectory.file("nonexistent_file");
  String[] args={storeDirectory.directory().getPath(),"-config",configFile.getPath()};
  ConsistencyCheckService service=mock(ConsistencyCheckService.class);
  PrintStream systemOut=mock(PrintStream.class);
  ConsistencyCheckTool ConsistencyCheckTool=newConsistencyCheckToolWith(service,systemOut);
  try {
    ConsistencyCheckTool.run(args);
    fail("should have thrown exception");
  }
 catch (  ConsistencyCheckTool.ToolFailureException e) {
    assertThat(e.getMessage(),containsString("Could not read configuration file"));
    assertThat(e.getCause(),instanceOf(IOException.class));
  }
  verifyZeroInteractions(service);
}
