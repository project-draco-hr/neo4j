{
  if (pagedFile.getRefCount() == 0) {
    throw new IllegalStateException("File has been unmapped");
  }
  if (nextPageId > lastPageId) {
    if ((pf_flags & PagedFile.PF_NO_GROW) != 0) {
      return false;
    }
 else {
      pagedFile.increaseLastPageIdTo(nextPageId);
    }
  }
  unpinCurrentPage();
  pin(nextPageId);
  currentPageId=nextPageId;
  nextPageId++;
  return true;
}
