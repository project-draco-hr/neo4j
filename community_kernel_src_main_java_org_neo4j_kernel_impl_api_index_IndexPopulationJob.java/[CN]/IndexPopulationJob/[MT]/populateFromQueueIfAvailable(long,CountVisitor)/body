{
  if (!queue.isEmpty()) {
    try (IndexUpdater updater=new CountingIndexUpdater(populator.newPopulatingUpdater(storeView),countVisitor)){
      do {
        NodePropertyUpdate update=queue.poll();
        if (update.getNodeId() <= highestIndexedNodeId) {
          updater.process(update);
        }
      }
 while (!queue.isEmpty());
    }
   }
}
