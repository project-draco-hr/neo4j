{
  if (!queue.isEmpty()) {
    try (IndexUpdater updater=new CountingIndexUpdater(Long.MAX_VALUE,populator.newPopulatingUpdater(storeView),countVisitor)){
      do {
        NodePropertyUpdate update=queue.poll();
        if (update.getNodeId() <= currentlyIndexedNodeId) {
          updater.process(update);
        }
      }
 while (!queue.isEmpty());
    }
   }
}
