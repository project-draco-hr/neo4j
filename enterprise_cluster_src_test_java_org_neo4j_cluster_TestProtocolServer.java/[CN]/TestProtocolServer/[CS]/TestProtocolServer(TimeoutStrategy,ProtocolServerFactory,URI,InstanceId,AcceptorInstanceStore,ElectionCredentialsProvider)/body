{
  this.serverUri=serverUri;
  this.receiver=new TestMessageSource();
  this.sender=new TestMessageSender();
  stateMachineExecutor=new DelayedDirectExecutor(DefaultLogging.createDefaultLogging(Collections.<String,String>emptyMap()));
  server=factory.newProtocolServer(instanceId,timeoutStrategy,receiver,sender,acceptorInstanceStore,electionCredentialsProvider,stateMachineExecutor,new ObjectStreamFactory(),new ObjectStreamFactory());
  server.listeningAt(serverUri);
}
