{
  when(engine.executeQuery(anyString(),anyMap(),any(QuerySession.class))).thenReturn(mock(Result.class));
  when(ctx.hasTransaction()).thenReturn(false);
  CypherStatementRunner cypherRunner=new CypherStatementRunner(engine);
  cypherRunner.run(ctx,"<query>",EMPTY_MAP);
  verify(ctx).createSession(any(GraphDatabaseQueryService.class),any(PropertyContainerLocker.class));
  verify(ctx).hasTransaction();
  verify(ctx).beginImplicitTransaction();
  verify(engine).queryService();
  verify(engine).executeQuery(eq("<query>"),eq(EMPTY_MAP),any(QuerySession.class));
  verifyNoMoreInteractions(engine,ctx);
}
