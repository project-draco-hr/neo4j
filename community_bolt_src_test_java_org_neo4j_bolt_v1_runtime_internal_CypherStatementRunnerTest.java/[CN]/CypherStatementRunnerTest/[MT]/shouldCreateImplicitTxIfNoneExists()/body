{
  when(engine.executeQuery(anyString(),anyMap(),any(BoltQuerySession.class))).thenReturn(mock(Result.class));
  when(engine.isPeriodicCommit(anyString())).thenReturn(false);
  when(ctx.hasTransaction()).thenReturn(false);
  CypherStatementRunner cypherRunner=new CypherStatementRunner(engine);
  cypherRunner.run(ctx,"<query>",EMPTY_MAP);
  verify(ctx).hasTransaction();
  verify(engine).isPeriodicCommit("<query>");
  verify(ctx).beginImplicitTransaction();
  verify(engine).executeQuery(eq("<query>"),eq(EMPTY_MAP),any(BoltQuerySession.class));
  verifyNoMoreInteractions(engine,ctx);
}
