{
  when(db.execute(anyString(),anyMap())).thenReturn(mock(Result.class));
  when(engine.isPeriodicCommit(anyString())).thenReturn(true);
  when(ctx.hasTransaction()).thenReturn(false);
  CypherStatementRunner cypherRunner=new CypherStatementRunner(db,engine);
  cypherRunner.run(ctx,"<query>",EMPTY_MAP);
  verify(ctx).hasTransaction();
  verify(engine).isPeriodicCommit("<query>");
  verify(db).execute("<query>",EMPTY_MAP);
  verifyNoMoreInteractions(db,engine,ctx);
}
