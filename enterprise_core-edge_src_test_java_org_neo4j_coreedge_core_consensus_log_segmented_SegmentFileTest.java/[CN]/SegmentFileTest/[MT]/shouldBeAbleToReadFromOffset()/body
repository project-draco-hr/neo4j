{
  try (SegmentFile segment=create(fsRule.get(),fileNames.getForVersion(0),readerPool,0,contentMarshal,logProvider,segmentHeader)){
    segment.write(0,entry1);
    segment.write(1,entry2);
    segment.write(2,entry3);
    segment.write(3,entry4);
    segment.flush();
    IOCursor<EntryRecord> cursor=segment.getCursor(2);
    assertTrue(cursor.next());
    assertEquals(entry3,cursor.get().logEntry());
    cursor.close();
  }
 }
