{
  try (Transaction tx=graphDb.beginTx()){
    Node root=graphDb.createNode();
    Lock first=tx.acquireReadLock(root);
    LockInfo lock=getSingleLock();
    assertEquals("read count",1,lock.getReadCount());
    assertEquals("write count",1,lock.getWriteCount());
    tx.acquireReadLock(root);
    lock=getSingleLock();
    assertEquals("read count",2,lock.getReadCount());
    assertEquals("write count",1,lock.getWriteCount());
    tx.acquireWriteLock(root);
    lock=getSingleLock();
    assertEquals("read count",2,lock.getReadCount());
    assertEquals("write count",2,lock.getWriteCount());
    first.release();
    lock=getSingleLock();
    assertEquals("read count",1,lock.getReadCount());
    assertEquals("write count",2,lock.getWriteCount());
  }
   List<LockInfo> locks=lockManager.getLocks();
  assertEquals("unexpected lock count",0,locks.size());
}
