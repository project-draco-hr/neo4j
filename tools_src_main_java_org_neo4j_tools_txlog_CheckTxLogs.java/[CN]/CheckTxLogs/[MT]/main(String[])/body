{
  Args arguments=Args.withFlags(HELP_FLAG).parse(args);
  PrintStream printStream=System.out;
  if (arguments.getBoolean(HELP_FLAG)) {
    printUsageAndExit(printStream);
  }
  CheckType<?,?>[] checkTypes=parseChecks(arguments);
  File dir=parseDir(printStream,arguments);
  File[] logs=txLogsIn(dir);
  printStream.println("Found " + logs.length + " log files to verify");
  CheckTxLogs tool=new CheckTxLogs(printStream,new DefaultFileSystemAbstraction());
  if (!tool.scan(logs,new PrintingInconsistenciesHandler(printStream),checkTypes)) {
    System.exit(1);
  }
}
