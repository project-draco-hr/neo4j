{
  Args arguments=Args.withFlags(HELP_FLAG).parse(args);
  PrintStream printStream=System.out;
  if (arguments.getBoolean(HELP_FLAG)) {
    printUsageAndExit(printStream);
  }
  CheckType<?,?>[] checkTypes=parseChecks(arguments);
  File dir=parseDir(printStream,arguments);
  FileSystemAbstraction fs=new DefaultFileSystemAbstraction();
  PhysicalLogFiles logFiles=new PhysicalLogFiles(dir,fs);
  int numberOfLogFilesFound=(int)(logFiles.getHighestLogVersion() - logFiles.getLowestLogVersion() + 1);
  System.out.println("Found " + numberOfLogFilesFound + " log files to verify");
  CheckTxLogs tool=new CheckTxLogs(System.out,fs);
  if (!tool.scan(dir,new PrintingInconsistenciesHandler(printStream),checkTypes)) {
    System.exit(1);
  }
}
