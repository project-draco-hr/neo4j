{
  if (value == null) {
    return "<null>";
  }
  if (value instanceof String) {
    return "\"" + value + "\"";
  }
  if (value instanceof Node) {
    return value.toString() + props((PropertyContainer)value);
  }
  if (value instanceof Relationship) {
    Relationship rel=(Relationship)value;
    return ":" + rel.getType().name() + "["+ rel.getId()+ "] "+ props(rel);
  }
  if (value instanceof Iterable) {
    return formatIterator(((Iterable)value).iterator());
  }
  if (value.getClass().isArray()) {
    return formatArray(value);
  }
  return value.toString();
}
