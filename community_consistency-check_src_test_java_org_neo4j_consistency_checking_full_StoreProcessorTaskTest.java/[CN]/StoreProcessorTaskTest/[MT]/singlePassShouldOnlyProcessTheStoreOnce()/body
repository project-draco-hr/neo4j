{
  StoreProcessor singlePassProcessor=mock(StoreProcessor.class);
  when(singlePassProcessor.getStage()).thenReturn(Stage.SEQUENTIAL_FORWARD);
  NodeStore store=mock(NodeStore.class);
  when(store.getStorageFileName()).thenReturn(new File("node-store"));
  StoreProcessorTask<NodeRecord> task=new StoreProcessorTask<>("nodes",Statistics.NONE,1,store,null,"nodes",ProgressMonitorFactory.NONE.multipleParts("check"),CacheAccess.EMPTY,singlePassProcessor,QueueDistribution.ROUND_ROBIN);
  task.run();
  verify(singlePassProcessor).applyFiltered(same(store),any(ProgressListener.class));
}
