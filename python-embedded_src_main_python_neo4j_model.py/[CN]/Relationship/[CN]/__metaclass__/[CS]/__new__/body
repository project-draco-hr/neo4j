def __new__(Relationship, name, bases, body):
    Relationship = type.__new__(Relationship, name, bases, body)
    for (attr, value) in body.items():
        if isinstance(value, Factory):
            setattr(Relationship, attr, value.create(Relationship, attr))
    return Relationship
