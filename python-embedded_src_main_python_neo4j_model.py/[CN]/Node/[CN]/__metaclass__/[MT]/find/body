def find(Node, graphdb, **query):
    lookup = []
    filters = []
    for key in query:
        attribute = getattr(Node, key.split('__', 1)[0])
        if (attribute is None):
            raise AttributeError(("'%s' has no property matching '%s'" % (Node.__name__, key)))
        attribute.query(key, query[key], lookup, filters)
    hits = Node._index(graphdb).query(' AND '.join(lookup))
    return lookup_results(Node, hits, filters)
