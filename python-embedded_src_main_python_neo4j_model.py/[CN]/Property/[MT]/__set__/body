def __set__(self, obj, value):
    entity = get_entity(obj)
    value = self.set(value)
    entity[self.__name] = value
    if self.__index:
        graphdb = entity.getGraphDatabase()
        self.__index(graphdb).add(entity, self.__index_key, value)
