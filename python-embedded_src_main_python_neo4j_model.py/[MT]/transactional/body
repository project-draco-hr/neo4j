def transactional(method):

    def transactional(self, *args, **kwargs):
        tx = get_entity(self).getGraphDatabase().beginTx()
        try:
            result = method(self, *args, **kwargs)
            tx.success()
            return result
        finally:
            tx.finish()
    return transactional
