{
  checkIfShutdown();
  TransactionContext result=new StoreTransactionContext(transactionManager,propertyKeyTokenHolder,labelTokenHolder,nodeManager,neoStore,indexService);
  result=new StateHandlingTransactionContext(result,new SchemaStorage(neoStore.getSchemaStore()),newTxState(),providerMap,persistenceCache,schemaCache,persistenceManager,schemaState,new ConstraintIndexCreator(new Transactor(transactionManager),indexService));
  result=new PropertyOperationTranslation.TransactionContext(result);
  result=new ConstraintValidatingTransactionContext(result);
  result=new LockingTransactionContext(result,lockManager,transactionManager);
  if (highlyAvailableInstance) {
    result=new UniquenessConstraintStoppingTransactionContext(result);
  }
  result=new ReferenceCountingTransactionContext(result);
  return result;
}
