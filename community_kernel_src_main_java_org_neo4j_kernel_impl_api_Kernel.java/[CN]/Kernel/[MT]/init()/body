{
  final AtomicInteger recoveredCount=new AtomicInteger();
  transactionStore.open(new Visitor<TransactionRepresentation,IOException>(){
    @Override public boolean visit(    TransactionRepresentation transaction) throws IOException {
      try {
        commitProcess.commit(transaction);
        recoveredCount.incrementAndGet();
        return true;
      }
 catch (      TransactionFailureException e) {
        throw new IOException("Unable to recover transaction " + transaction,e);
      }
    }
  }
);
  startupStatistics.setNumberOfRecoveredTransactions(recoveredCount.get());
  indexService.startIndexes();
}
