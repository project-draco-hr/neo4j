{
  for (; ; ) {
    Object pageRef=addressTranslationTable.get(pageId);
    if (pageRef == null) {
      addressTranslationTable.putIfAbsent(pageId,NULL);
    }
 else     if (pageRef == NULL) {
      CountDownLatch latch=new CountDownLatch(1);
      if (addressTranslationTable.replace(pageId,pageRef,latch)) {
        PinnablePage page=table.load(pageIO,pageId,lock);
        addressTranslationTable.put(pageId,page);
        latch.countDown();
        return;
      }
    }
 else     if (pageRef instanceof CountDownLatch) {
      try {
        ((CountDownLatch)pageRef).await();
      }
 catch (      InterruptedException e) {
        Thread.interrupted();
        throw new IOException("Interrupted while waiting for page load.",e);
      }
    }
 else {
      PinnablePage page=(PinnablePage)pageRef;
      if (page.pin(pageIO,pageId,lock)) {
        return;
      }
      addressTranslationTable.replace(pageId,page,NULL);
    }
  }
}
