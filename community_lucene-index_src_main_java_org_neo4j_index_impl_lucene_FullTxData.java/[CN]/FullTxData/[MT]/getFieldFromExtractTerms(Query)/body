{
  Set<Term> terms=new HashSet<Term>();
  try {
    query.extractTerms(terms);
  }
 catch (  UnsupportedOperationException e) {
    try {
      query.rewrite(reader).extractTerms(terms);
    }
 catch (    IOException ioe) {
      throw new UnsupportedOperationException(ioe);
    }
catch (    UnsupportedOperationException ue) {
    }
  }
  return terms.isEmpty() ? null : terms.iterator().next().field();
}
