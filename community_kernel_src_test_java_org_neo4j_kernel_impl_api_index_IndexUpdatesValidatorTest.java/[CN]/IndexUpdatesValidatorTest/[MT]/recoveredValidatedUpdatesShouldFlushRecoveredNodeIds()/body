{
  long nodeId1=42;
  long nodeId2=4242;
  long nodeId3=424242;
  PrimitiveLongSet expectedRecoveredNodeIds=PrimitiveLongCollections.setOf(nodeId1,nodeId2,nodeId3);
  IndexUpdatesValidator validator=newIndexUpdatesValidatorWithMockedDependencies();
  TransactionRepresentation tx=new PhysicalTransactionRepresentation(asList(nodeAddRandomLabelsCommand(nodeId1),nodeAddRandomLabelsCommand(nodeId2),nodeAddRandomLabelsCommand(nodeId3)));
  ValidatedIndexUpdates updates=validator.validate(tx,RECOVERY);
  verifyZeroInteractions(indexingService);
  updates.flush();
  verify(indexingService).addRecoveredNodeIds(expectedRecoveredNodeIds);
}
