{
  if (cache == null || ratio >= 1 || ratio <= 0 || minSize < 0) {
    throw new IllegalArgumentException(" cache=" + cache + " ratio ="+ ratio+ " minSize="+ minSize);
  }
  if (cache instanceof ReferenceCache<?,?>) {
    referenceCaches.add((ReferenceCache<?,?>)cache);
    return;
  }
  for (  AdaptiveCacheElement element : caches) {
    if (element.getCache() == cache) {
      log.fine("Cache[" + cache.getName() + "] already registered.");
      return;
    }
  }
  AdaptiveCacheElement element=new AdaptiveCacheElement(cache,ratio,minSize);
  caches.add(element);
  cache.setAdaptiveStatus(true);
  log.fine("Cache[" + cache.getName() + "] threshold="+ ratio+ "minSize="+ minSize+ " registered.");
}
