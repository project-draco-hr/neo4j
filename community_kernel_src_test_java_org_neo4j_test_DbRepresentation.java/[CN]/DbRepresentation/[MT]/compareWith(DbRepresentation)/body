{
  Collection<String> diffList=new ArrayList<>();
  DiffReport diff=new CollectionDiffReport(diffList);
  for (  NodeRep node : nodes.values()) {
    NodeRep otherNode=other.nodes.get(node.id);
    if (otherNode == null) {
      diff.add("I have node " + node.id + " which other don't");
      continue;
    }
    node.compareWith(otherNode,diff);
  }
  for (  Long id : other.nodes.keySet()) {
    if (!nodes.containsKey(id))     diff.add("Other has node " + id + " which I don't");
  }
  return diffList;
}
