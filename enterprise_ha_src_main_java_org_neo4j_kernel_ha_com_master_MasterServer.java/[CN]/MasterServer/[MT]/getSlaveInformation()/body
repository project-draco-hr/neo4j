{
  Set<Integer> machineIds=new HashSet<>();
  Map<Channel,RequestContext> channels=getConnectedSlaveChannels();
synchronized (channels) {
    for (    RequestContext context : channels.values()) {
      machineIds.add(context.machineId());
    }
  }
  Map<Integer,Collection<RequestContext>> ongoingTransactions=((MasterImpl)getRequestTarget()).getOngoingTransactions();
  for (  Integer machineId : machineIds) {
    if (!ongoingTransactions.containsKey(machineId)) {
      ongoingTransactions.put(machineId,Collections.<RequestContext>emptyList());
    }
  }
  return new TreeMap<>(ongoingTransactions);
}
