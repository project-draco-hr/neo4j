{
  Transaction tx=graphDb.beginTx();
  try {
    Node personNode=p.getUnderlyingNode();
    StatusUpdate oldStatus;
    if (p.getStatus().iterator().hasNext()) {
      oldStatus=p.getStatus().iterator().next();
    }
 else {
      oldStatus=null;
    }
    Node newStatus=createNewStatusNode(text,personNode);
    if (oldStatus != null) {
      personNode.getSingleRelationship(STATUS,Direction.OUTGOING).delete();
      newStatus.createRelationshipTo(oldStatus.getUnderlyingNode(),NEXT);
    }
    personNode.createRelationshipTo(newStatus,STATUS);
    tx.success();
  }
  finally {
    tx.finish();
  }
}
