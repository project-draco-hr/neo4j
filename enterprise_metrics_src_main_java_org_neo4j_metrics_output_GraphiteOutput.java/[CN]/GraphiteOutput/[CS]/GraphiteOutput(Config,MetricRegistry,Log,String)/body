{
  if (config.get(graphiteEnabled)) {
    HostnamePort hostnamePort=config.get(graphiteServer);
    final InetSocketAddress graphiteServerAddress=new InetSocketAddress(hostnamePort.getHost(),hostnamePort.getPort());
    final Graphite graphite=new Graphite(graphiteServerAddress);
    graphiteReporter=GraphiteReporter.forRegistry(registry).prefixedWith(prefix).convertRatesTo(TimeUnit.SECONDS).convertDurationsTo(TimeUnit.MILLISECONDS).filter(MetricFilter.ALL).build(graphite);
    graphiteReporter.start(config.get(graphiteInterval),TimeUnit.MILLISECONDS);
    logger.info("Sending metrics to Graphite server at " + hostnamePort);
  }
}
