{
  if (config.get(graphiteEnabled)) {
    final Graphite graphite=new Graphite(new InetSocketAddress(config.get(graphiteServer).getHost(),config.get(graphiteServer).getPort()));
    graphiteReporter=GraphiteReporter.forRegistry(registry).prefixedWith(prefix).convertRatesTo(TimeUnit.SECONDS).convertDurationsTo(TimeUnit.MILLISECONDS).filter(MetricFilter.ALL).build(graphite);
    graphiteReporter.start(config.get(graphiteInterval),TimeUnit.MILLISECONDS);
    logger.info("Sending metrics to Graphite server at " + config.get(graphiteServer));
  }
}
