{
  int labelId=5;
  String propertyKey="name";
  Transaction tx=db.beginTx();
  StatementContext statement=statementContextProvider.getCtxForWriting();
  statement.addIndexRule(labelId,propertyKey);
  tx.success();
  tx.finish();
  tx=db.beginTx();
  statement=statementContextProvider.getCtxForWriting();
  String propertyKey2="age";
  statement.addIndexRule(labelId,propertyKey2);
  Set<String> indexRulesInTx=asSet(statement.getIndexRules(labelId));
  tx.success();
  tx.finish();
  assertEquals(asSet(propertyKey,propertyKey2),indexRulesInTx);
}
