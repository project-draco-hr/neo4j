{
  final String filename="neostore.nodestore.db";
  final String version="v0.9.5";
  changeVersionNumber(fileSystem,new File(workingDirectory,filename),version);
  final UpgradableDatabase upgradableDatabase=new UpgradableDatabase(new StoreVersionCheck(fileSystem));
  try {
    upgradableDatabase.checkUpgradeable(workingDirectory);
    fail("should not have been able to upgrade");
  }
 catch (  StoreUpgrader.UnexpectedUpgradingStoreVersionException e) {
    final String expected="'" + filename + "' has a store version number that we cannot upgrade from. "+ "Expected '"+ Legacy21Store.LEGACY_VERSION+ "' but file is version 'NodeStore "+ version+ "'.";
    assertThat(e.getMessage(),is(expected));
  }
}
