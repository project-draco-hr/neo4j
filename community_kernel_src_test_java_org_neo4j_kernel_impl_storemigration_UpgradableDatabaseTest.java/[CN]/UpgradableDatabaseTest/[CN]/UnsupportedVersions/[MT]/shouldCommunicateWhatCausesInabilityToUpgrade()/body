{
  final UpgradableDatabase upgradableDatabase=new UpgradableDatabase(fileSystem,new StoreVersionCheck(pageCacheRule.getPageCache(fileSystem)),new LegacyStoreVersionCheck(fileSystem));
  try {
    upgradableDatabase.checkUpgradeable(workingDirectory);
    fail("should not have been able to upgrade");
  }
 catch (  StoreUpgrader.UnexpectedUpgradingStoreVersionException e) {
    assertThat(e.getMessage(),containsString(neostoreFilename));
    assertThat(e.getMessage(),containsString("has a store version number that we cannot upgrade from. Expected '" + Legacy23Store.LEGACY_VERSION + "' but file is version '"+ version+ "'."));
  }
}
