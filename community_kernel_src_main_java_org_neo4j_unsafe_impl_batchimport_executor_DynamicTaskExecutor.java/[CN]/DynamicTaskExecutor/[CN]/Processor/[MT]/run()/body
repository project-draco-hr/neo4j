{
  final LOCAL threadLocalState=initialLocalState.get();
  while (!abortQueued && !shutDown) {
    Task<LOCAL> task=queue.poll();
    if (task != null) {
      try {
        task.run(threadLocalState);
      }
 catch (      Throwable e) {
        panic=e;
        shutdown(TaskExecutor.SF_ABORT_QUEUED);
        throw launderedException(e);
      }
    }
 else {
      if (shutDown) {
        break;
      }
      parkAWhile();
    }
  }
}
