{
  PatternNode pNode=labelToNode.get(label);
  if (pNode == null) {
    throw new RuntimeException("No node for label '" + label + "'");
  }
  Node node=this.match.getNodeFor(pNode);
  String propertyKey=labelToProperty.get(label);
  if (propertyKey == null) {
    throw new RuntimeException("No property key for label '" + label + "'");
  }
  Object rawValue=node.getProperty(propertyKey,null);
  if (rawValue == null) {
    return new String[0];
  }
  Collection<Object> values=ArrayPropertyUtil.propertyValueToCollection(rawValue);
  String[] result=new String[values.size()];
  int counter=0;
  for (  Object value : values) {
    result[counter++]=(String)value;
  }
  return result;
}
