{
  int contestedPort=9999;
  ServerSocket socket=new ServerSocket(contestedPort);
  InMemoryAppender appender=new InMemoryAppender(NeoEmbeddedJettyServer.log);
  server=ServerBuilder.server().withPassingStartupHealthcheck().onPort(contestedPort).withRandomDatabaseDir().build();
  server.start();
  assertThat(appender.toString(),containsString(String.format("ERROR - Failed to start Neo Server on port [%s]",server.getWebServerPort())));
  socket.close();
}
