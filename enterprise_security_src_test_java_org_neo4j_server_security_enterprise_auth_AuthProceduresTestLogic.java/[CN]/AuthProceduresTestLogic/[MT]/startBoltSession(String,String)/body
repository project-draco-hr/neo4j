{
  Connection boltConnection=new SocketConnection();
  HostnamePort address=new HostnamePort("localhost:7687");
  Map<String,Object> authToken=map("principal",username,"credentials",password,"scheme","basic");
  boltConnection.connect(address).send(TransportTestUtil.acceptedVersions(1,0,0,0)).send(TransportTestUtil.chunk(init("TestClient/1.1",authToken)));
  assertThat(boltConnection,eventuallyRecieves(new byte[]{0,0,0,1}));
  assertThat(boltConnection,eventuallyRecieves(msgSuccess()));
  return boltConnection;
}
