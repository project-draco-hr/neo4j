{
  monitor.tableGrowing(oldTable.capacity(),oldTable.size());
  Table<VALUE> newTable=oldTable.grow();
  long nullKey=oldTable.nullKey();
  int capacity=oldTable.capacity();
  for (int i=0; i < capacity; i++) {
    long key=oldTable.key(i);
    if (key != nullKey) {
      VALUE putResult=put(newTable,monitor,DEFAULT_HASHING,key,oldTable.value(i),resizeMonitor);
      if (putResult != null) {
        throw new IllegalStateException("Couldn't add " + key + " when growing table");
      }
    }
  }
  monitor.tableGrew(oldTable.capacity(),newTable.capacity(),newTable.size());
  resizeMonitor.tableGrew(newTable);
  oldTable.close();
  return newTable;
}
