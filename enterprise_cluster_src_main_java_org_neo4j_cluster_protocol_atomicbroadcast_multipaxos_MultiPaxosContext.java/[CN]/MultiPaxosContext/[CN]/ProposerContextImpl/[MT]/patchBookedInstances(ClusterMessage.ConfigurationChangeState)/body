{
  if (value.getJoin() != null) {
    for (    InstanceId instanceId : bookedInstances.keySet()) {
      PaxosInstance instance=paxosInstances.getPaxosInstance(instanceId);
      if (instance.getAcceptors() != null) {
        instance.getAcceptors().remove(configuration.getMembers().get(value.getJoin()));
        getLogger(ProposerContext.class).debug("For booked instance " + instance + " removed gone "+ "member "+ configuration.getMembers().get(value.getJoin())+ " added joining member "+ value.getJoinUri());
        if (!instance.getAcceptors().contains(value.getJoinUri())) {
          instance.getAcceptors().add(value.getJoinUri());
        }
      }
    }
  }
 else   if (value.getLeave() != null) {
    for (    InstanceId instanceId : bookedInstances.keySet()) {
      PaxosInstance instance=paxosInstances.getPaxosInstance(instanceId);
      if (instance.getAcceptors() != null) {
        getLogger(ProposerContext.class).debug("For booked instance " + instance + " removed "+ "leaving member "+ value.getLeave()+ " (at URI "+ configuration.getMembers().get(value.getLeave())+ ")");
        instance.getAcceptors().remove(configuration.getMembers().get(value.getLeave()));
      }
    }
  }
}
