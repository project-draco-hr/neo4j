{
  BoltStateMachine machine=newMachine(READY);
  machine.run("RETURN 1",null,nullResponseHandler());
  BoltResponseRecorder recorder=new BoltResponseRecorder(){
    @Override public void onRecords(    BoltResult result,    boolean pull) throws Exception {
      throw new RuntimeException("I've been expecting you, Mr Bond.");
    }
  }
;
  machine.pullAll(recorder);
  assertThat(recorder.nextResponse(),failedWithStatus(Status.General.UnknownError));
  assertThat(machine,inState(FAILED));
}
