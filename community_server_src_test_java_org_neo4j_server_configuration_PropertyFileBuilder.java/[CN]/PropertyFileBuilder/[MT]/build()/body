{
  File temporaryConfigFile=createTempPropertyFile();
  String dbDir=ServerTestUtils.createTempDir().getAbsolutePath();
  String rrdbDir=ServerTestUtils.createTempDir().getAbsolutePath();
  writePropertyToFile(Configurator.DATABASE_LOCATION_PROPERTY_KEY,dbDir,temporaryConfigFile);
  if (portNo != null) {
    writePropertyToFile(Configurator.WEBSERVER_PORT_PROPERTY_KEY,portNo,temporaryConfigFile);
  }
  writePropertyToFile(Configurator.RRDB_LOCATION_PROPERTY_KEY,rrdbDir,temporaryConfigFile);
  writePropertyToFile(Configurator.MANAGEMENT_PATH_PROPERTY_KEY,webAdminUri,temporaryConfigFile);
  writePropertyToFile(Configurator.REST_API_PATH_PROPERTY_KEY,webAdminDataUri,temporaryConfigFile);
  if (dbTuningPropertyFile != null) {
    writePropertyToFile(Configurator.DB_TUNING_PROPERTY_FILE_KEY,dbTuningPropertyFile,temporaryConfigFile);
  }
  for (  Tuple t : nameValuePairs) {
    writePropertyToFile(t.name,t.value,temporaryConfigFile);
  }
  return temporaryConfigFile;
}
