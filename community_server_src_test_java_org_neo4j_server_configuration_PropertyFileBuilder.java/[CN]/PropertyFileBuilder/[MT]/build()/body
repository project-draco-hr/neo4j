{
  File temporaryConfigFile=createTempPropertyFile();
  String dbDir=ServerTestUtils.createTempDir().getAbsolutePath();
  String rrdbDir=ServerTestUtils.createTempDir().getAbsolutePath();
  Map<String,String> properties=MapUtil.stringMap(Configurator.DATABASE_LOCATION_PROPERTY_KEY,dbDir,Configurator.RRDB_LOCATION_PROPERTY_KEY,rrdbDir,Configurator.MANAGEMENT_PATH_PROPERTY_KEY,webAdminUri,Configurator.REST_API_PATH_PROPERTY_KEY,webAdminDataUri);
  if (portNo != null)   properties.put(Configurator.WEBSERVER_PORT_PROPERTY_KEY,portNo);
  if (dbTuningPropertyFile != null)   properties.put(Configurator.DB_TUNING_PROPERTY_FILE_KEY,dbTuningPropertyFile);
  for (  Tuple t : nameValuePairs)   properties.put(t.name,t.value);
  ServerTestUtils.writePropertiesToFile(properties,temporaryConfigFile);
  return temporaryConfigFile;
}
