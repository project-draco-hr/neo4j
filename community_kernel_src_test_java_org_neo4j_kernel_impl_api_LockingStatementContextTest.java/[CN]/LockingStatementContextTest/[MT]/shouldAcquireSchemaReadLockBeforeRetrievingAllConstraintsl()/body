{
  StatementContext delegate=mock(StatementContext.class);
  LockHolder lockHolder=mock(LockHolder.class);
  @SuppressWarnings("unchecked") Iterator<UniquenessConstraint> constraints=mock(Iterator.class);
  when(delegate.getConstraints()).thenReturn(constraints);
  LockingStatementContext context=new LockingStatementContext(delegate,lockHolder);
  Iterator<UniquenessConstraint> result=context.getConstraints();
  assertEquals(constraints,result);
  InOrder order=inOrder(lockHolder,delegate);
  order.verify(lockHolder).acquireSchemaReadLock();
  order.verify(delegate).getConstraints();
  verifyNoMoreInteractions(lockHolder,delegate);
  context.close();
}
