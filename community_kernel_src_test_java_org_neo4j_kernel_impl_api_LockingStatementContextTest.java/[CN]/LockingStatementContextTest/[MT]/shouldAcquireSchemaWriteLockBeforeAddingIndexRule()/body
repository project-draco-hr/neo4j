{
  StatementContext delegate=mock(StatementContext.class);
  LockHolder lockHolder=mock(LockHolder.class);
  IndexDescriptor rule=mock(IndexDescriptor.class);
  when(delegate.addIndexRule(123,456,false)).thenReturn(rule);
  LockingStatementContext context=new LockingStatementContext(delegate,lockHolder);
  IndexDescriptor result=context.addIndexRule(123,456,false);
  assertSame(rule,result);
  InOrder order=inOrder(lockHolder,delegate);
  order.verify(lockHolder).acquireSchemaWriteLock();
  order.verify(delegate).addIndexRule(123,456,false);
  verifyNoMoreInteractions(lockHolder,delegate);
}
