{
  for (  GraphDatabaseService db : cluster.getAllMembers()) {
    if (expectedNodeCount != nodeCount(db)) {
      for (int i=0; i < 100; i++) {
        try {
          Thread.sleep(1000);
        }
 catch (        InterruptedException e) {
          throw new RuntimeException(e);
        }
        int count=nodeCount(db);
        if (expectedNodeCount == count)         break;
        try {
          cluster.sync();
        }
 catch (        InterruptedException e) {
          throw new RuntimeException(e);
        }
      }
    }
    assertEquals(expectedNodeCount,nodeCount(db));
  }
}
