{
  this.servers=new Triplet[ports.length];
  SubProcess<ServerManager,String> process=new ServerProcess(testName);
  try {
    for (int i=0; i < ports.length; i++) {
      Pair<String,File> config=config(testName,targetDir,keeperCluster,i,ports[i]);
      servers[i]=awaitStartup(Pair.of(process.start(config.first()),config.other()))[0];
    }
  }
 catch (  Throwable e) {
    for (    Pair<URI,File> UGLY_CODE_DUE_TO_ISSUES_IN_HA : shutdown((Class)Pair.class,servers)) {
      if (UGLY_CODE_DUE_TO_ISSUES_IN_HA != null)       TargetDirectory.recursiveDelete(UGLY_CODE_DUE_TO_ISSUES_IN_HA.other());
    }
    if (e instanceof Error)     throw (Error)e;
    if (e instanceof RuntimeException)     throw (RuntimeException)e;
    throw new RuntimeException("Cluster startup failed",e);
  }
  System.out.println("Started " + this);
}
