{
  if (params == null || params.isEmpty())   return Collections.emptyMap();
  try {
    return new JsonFormat().readMap(params);
  }
 catch (  BadInputException e) {
    throw new RuntimeException("Error parsing JSON parameter map",e);
  }
}
