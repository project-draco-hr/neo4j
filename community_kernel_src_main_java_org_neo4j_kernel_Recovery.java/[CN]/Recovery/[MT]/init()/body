{
  long recoveryVersion=spi.getCurrentLogVersion();
  try (LogVersionedStoreChannel toRecover=spi.getLogFile(recoveryVersion)){
    if (LogRecoveryCheck.recoveryRequired(toRecover)) {
      spi.recoveryRequired();
      monitor.recoveryRequired(toRecover.getVersion());
      spi.getRecoverer().visit(toRecover);
      recoveredLog=true;
      monitor.logRecovered();
      spi.forceEverything();
    }
  }
 }
