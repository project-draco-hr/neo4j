{
  try {
    ByteStore store=ByteStore.createStore("testDynamicStore.db",30);
    int blockId=store.nextBlockId();
    Collection<DynamicRecord> records=store.allocateRecords(blockId,new byte[10]);
    for (    DynamicRecord record : records) {
      store.updateRecord(record);
    }
    store.close();
    try {
      store.allocateRecords(blockId,new byte[10]);
      fail("Closed store should throw exception");
    }
 catch (    IOException e) {
    }
    try {
      store.getBytes(0);
      fail("Closed store should throw exception");
    }
 catch (    IOException e) {
    }
    try {
      store.getLightRecords(0,null);
      fail("Closed store should throw exception");
    }
 catch (    IOException e) {
    }
  }
 catch (  IOException e) {
    e.printStackTrace();
    fail("" + e);
  }
 finally {
    File file=new File("testDynamicStore.db");
    if (file.exists()) {
      file.delete();
    }
    file=new File("testDynamicStore.db.id");
    if (file.exists()) {
      file.delete();
    }
  }
}
