{
  dbWithNoCache();
  int propertyKeyId;
  long nodeId;
  String value="Bozo the Clown is a clown character very popular in the United States, peaking in the 1960s";
{
    DataWriteOperations statement=dataWriteOperationsInNewTransaction();
    Node node=db.createNode();
    propertyKeyId=statement.propertyKeyGetOrCreateForName("clown");
    nodeId=node.getId();
    statement.nodeSetProperty(nodeId,stringProperty(propertyKeyId,value));
    assertTrue(statement.nodeGetProperty(nodeId,propertyKeyId).getClass().getSimpleName().equals("StringProperty"));
    commit();
  }
{
    DataWriteOperations statement=dataWriteOperationsInNewTransaction();
    assertTrue(statement.nodeGetProperty(nodeId,propertyKeyId).getClass().getSimpleName().equals("LazyStringProperty"));
    assertEquals(value,statement.nodeGetProperty(nodeId,propertyKeyId).value());
    assertEquals(value.hashCode(),statement.nodeGetProperty(nodeId,propertyKeyId).hashCode());
    assertTrue(statement.nodeGetProperty(nodeId,propertyKeyId).valueEquals(value));
  }
}
