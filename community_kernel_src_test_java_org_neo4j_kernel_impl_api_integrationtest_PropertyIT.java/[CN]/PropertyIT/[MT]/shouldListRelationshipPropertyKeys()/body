{
  newTransaction();
  Relationship rel=db.createNode().createRelationshipTo(db.createNode(),DynamicRelationshipType.withName("Lol"));
  rel.setProperty("prop","value");
  assertThat(asSet(statement.relationshipGetPropertyKeys(rel.getId())),equalTo(asSet(statement.propertyKeyGetForName("prop"))));
  commit();
  newTransaction();
  assertThat(asSet(statement.relationshipGetPropertyKeys(rel.getId())),equalTo(asSet(statement.propertyKeyGetForName("prop"))));
  commit();
  newTransaction();
  rel.removeProperty("prop");
  assertThat(asSet(statement.relationshipGetPropertyKeys(rel.getId())),equalTo(Collections.<Long>emptySet()));
  commit();
  newTransaction();
  assertThat(asSet(statement.relationshipGetPropertyKeys(rel.getId())),equalTo(Collections.<Long>emptySet()));
  commit();
}
