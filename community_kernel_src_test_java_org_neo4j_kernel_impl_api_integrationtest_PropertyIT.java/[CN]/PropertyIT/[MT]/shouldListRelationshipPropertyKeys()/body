{
  newTransaction();
  Relationship rel=db.createNode().createRelationshipTo(db.createNode(),DynamicRelationshipType.withName("Lol"));
  rel.setProperty("prop","value");
  Set<Long> actualKeys=asSet(statement.relationshipGetPropertyKeys(getState(),rel.getId()));
  assertThat(actualKeys,equalTo(asSet(statement.propertyKeyGetForName(getState(),"prop"))));
  commit();
  newTransaction();
  actualKeys=asSet(statement.relationshipGetPropertyKeys(getState(),rel.getId()));
  assertThat(actualKeys,equalTo(asSet(statement.propertyKeyGetForName(getState(),"prop"))));
  commit();
  newTransaction();
  rel.removeProperty("prop");
  actualKeys=asSet(statement.relationshipGetPropertyKeys(getState(),rel.getId()));
  assertThat(actualKeys,equalTo(Collections.<Long>emptySet()));
  commit();
  newTransaction();
  actualKeys=asSet(statement.relationshipGetPropertyKeys(getState(),rel.getId()));
  assertThat(actualKeys,equalTo(Collections.<Long>emptySet()));
  commit();
}
