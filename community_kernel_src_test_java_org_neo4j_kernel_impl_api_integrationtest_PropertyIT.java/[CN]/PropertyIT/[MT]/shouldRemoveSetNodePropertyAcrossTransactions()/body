{
  newTransaction();
  Node node=db.createNode();
  long propertyKeyId=statement.propertyKeyGetOrCreateForName(getState(),"clown");
  long nodeId=node.getId();
  statement.nodeSetProperty(getState(),nodeId,Property.stringProperty(propertyKeyId,"bozo"));
  commit();
  newTransaction();
  Object previous=statement.nodeRemoveProperty(getState(),nodeId,propertyKeyId).value();
  assertEquals("bozo",previous);
  assertFalse("node should not have property",statement.nodeHasProperty(getState(),nodeId,propertyKeyId));
  commit();
  newTransaction();
  assertFalse(statement.nodeHasProperty(getState(),nodeId,propertyKeyId));
}
