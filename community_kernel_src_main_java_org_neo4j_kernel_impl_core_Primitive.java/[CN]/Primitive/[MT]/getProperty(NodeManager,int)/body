{
  TransactionState tx=nodeManager.getTransactionState();
  ArrayMap<Integer,PropertyData> skipMap=null, addMap=null;
  if (tx.hasChanges()) {
    skipMap=tx.getCowPropertyRemoveMap(this);
    addMap=tx.getCowPropertyAddMap(this);
  }
  ensureFullProperties(nodeManager);
  if (skipMap != null && skipMap.get(key) != null) {
    throw newPropertyNotFoundException("No property with id " + key + " exists on "+ this);
  }
  if (addMap != null) {
    PropertyData property=addMap.get(key);
    if (property != null) {
      return getPropertyValue(nodeManager,property);
    }
  }
  PropertyData property=getPropertyForIndex(key);
  if (property != null) {
    return getPropertyValue(nodeManager,property);
  }
  throw newPropertyNotFoundException("No property with id " + key + " exists on "+ this);
}
