{
  if (nodeManager.hasAllPropertyIndexes()) {
    return null;
  }
  if (addMap != null) {
    for (    int keyId : addMap.keySet()) {
      if (!nodeManager.hasIndexFor(keyId)) {
        PropertyIndex indexToCheck=nodeManager.getIndexFor(keyId);
        if (indexToCheck.getKey().equals(key)) {
          if (skipMap != null && skipMap.get(keyId) != null) {
            throw newPropertyNotFoundException(key);
          }
          PropertyData property=addMap.get(indexToCheck.getKeyId());
          if (property != null) {
            return property;
          }
        }
      }
    }
  }
  for (  PropertyData property : properties) {
    int keyId=property.getIndex();
    if (!nodeManager.hasIndexFor(keyId)) {
      PropertyIndex indexToCheck=nodeManager.getIndexFor(keyId);
      if (indexToCheck.getKey().equals(key)) {
        if (skipMap != null && skipMap.get(keyId) != null) {
          throw newPropertyNotFoundException(key);
        }
        if (property != null) {
          return property;
        }
      }
    }
  }
  return null;
}
