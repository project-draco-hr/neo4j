{
  TraversalBranch branch=this;
  int hashCode=1;
  while (branch.length() > 0) {
    Relationship relationship=branch.lastRelationship();
    hashCode=31 * hashCode + relationship.hashCode();
    branch=branch.parent();
  }
  if (hashCode == 1) {
    hashCode=endNode().hashCode();
  }
  return hashCode;
}
