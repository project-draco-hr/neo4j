{
  Map<String,Object> args;
  try {
    args=input.readMap(data);
  }
 catch (  BadInputException e) {
    return output.badRequest(e);
  }
  if (!args.containsKey("command")) {
    return Response.status(Status.BAD_REQUEST).entity("Expected command argument not present.").build();
  }
  ScriptSession scriptSession=getSession(args);
  log.info(scriptSession.toString());
  String result=scriptSession.evaluate((String)args.get("command"));
  return output.ok(ValueRepresentation.string(result));
}
