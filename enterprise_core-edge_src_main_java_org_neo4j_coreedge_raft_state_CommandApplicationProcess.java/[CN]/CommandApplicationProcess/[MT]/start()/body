{
  lastFlushed=lastApplied=lastFlushedStorage.getInitialState();
  log.info(format("Restoring last applied index to %d",lastApplied));
  sessionTracker.start();
  long lastPossiblyApplying=max(coreStateMachines.getLastAppliedIndex(),sessionTracker.getLastAppliedIndex());
  if (lastPossiblyApplying > lastApplied) {
    log.info("Recovering up to: " + lastPossiblyApplying);
    submitApplyJob(lastPossiblyApplying);
    applier.sync(false);
  }
}
