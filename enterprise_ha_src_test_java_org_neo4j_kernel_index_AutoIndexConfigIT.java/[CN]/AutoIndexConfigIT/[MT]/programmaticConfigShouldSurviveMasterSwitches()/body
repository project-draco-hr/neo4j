{
  String propertyToIndex="programmatic-property";
  ManagedCluster cluster=clusterRule.startCluster();
  HighlyAvailableGraphDatabase slave=cluster.getAnySlave();
  AutoIndexer<Node> originalAutoIndex=slave.index().getNodeAutoIndexer();
  originalAutoIndex.setEnabled(true);
  originalAutoIndex.startAutoIndexingProperty(propertyToIndex);
  cluster.shutdown(cluster.getMaster());
  cluster.await(masterAvailable());
  AutoIndexer<Node> newAutoIndex=slave.index().getNodeAutoIndexer();
  assertThat(newAutoIndex.isEnabled(),is(true));
  assertThat(newAutoIndex.getAutoIndexedProperties(),hasItem(propertyToIndex));
}
