{
  int rotateAtSize=100;
  PhysicalRaftLog log=createRaftLog(rotateAtSize,new PhysicalRaftLogFile.Monitor.Adapter());
  StringBuilder builder=new StringBuilder();
  for (int i=0; i < rotateAtSize - 40; i++) {
    builder.append("i");
  }
  ReplicatedString stringThatGetsTheSizeToAlmost100Bytes=new ReplicatedString(builder.toString());
  int term=0;
  log.append(new RaftLogEntry(term,stringThatGetsTheSizeToAlmost100Bytes));
  long indexToRestoreTo=log.append(new RaftLogEntry(term,ReplicatedInteger.valueOf(1)));
  life.remove(log);
  log=createRaftLog(rotateAtSize,new PhysicalRaftLogFile.Monitor.Adapter());
  assertEquals(indexToRestoreTo,log.appendIndex());
  assertEquals(term,log.readEntryTerm(indexToRestoreTo));
}
