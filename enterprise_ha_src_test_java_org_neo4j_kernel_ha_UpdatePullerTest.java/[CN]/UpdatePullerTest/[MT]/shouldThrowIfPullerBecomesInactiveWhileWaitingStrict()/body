{
  Condition condition=mock(Condition.class);
  updatePuller.unpause();
  when(condition.evaluate(anyInt(),anyInt())).thenAnswer(new Answer<Boolean>(){
    @Override public Boolean answer(    InvocationOnMock invocation) throws Throwable {
      updatePuller.pause();
      return false;
    }
  }
);
  try {
    updatePuller.await(condition,true);
    fail("Should have thrown");
  }
 catch (  IllegalStateException e) {
    verify(condition,times(1)).evaluate(anyInt(),anyInt());
  }
}
