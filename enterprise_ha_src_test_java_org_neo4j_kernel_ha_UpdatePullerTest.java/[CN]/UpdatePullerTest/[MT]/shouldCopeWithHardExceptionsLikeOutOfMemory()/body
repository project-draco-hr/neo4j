{
  OutOfMemoryError oom=new OutOfMemoryError();
  when(master.pullUpdates(any(RequestContext.class))).thenThrow(oom).thenReturn(Response.EMPTY);
  updatePuller.unpause();
  updatePuller.await(NEXT_TICKET,true);
  logProvider.assertAtLeastOnce(inLog(UpdatePuller.class).error(org.hamcrest.Matchers.any(String.class),sameInstance(oom)));
  updatePuller.await(NEXT_TICKET,true);
}
