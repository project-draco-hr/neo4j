{
  when(master.pullUpdates(any(RequestContext.class))).thenThrow(OutOfMemoryError.class).thenReturn(Response.EMPTY);
  updatePuller.unpause();
  updatePuller.await(NEXT_TICKET,true);
  assertTrue(logging.hasSeenError(OutOfMemoryError.class));
  updatePuller.await(NEXT_TICKET,true);
}
