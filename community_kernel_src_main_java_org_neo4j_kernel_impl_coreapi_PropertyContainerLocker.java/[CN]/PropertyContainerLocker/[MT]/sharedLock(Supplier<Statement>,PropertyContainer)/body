{
  Statement statement=stmtProvider.get();
  if (container instanceof Node) {
    statement.readOperations().acquireShared(ResourceTypes.NODE,((Node)container).getId());
    return new CoreAPILock(stmtProvider,ResourceTypes.NODE,((Node)container).getId()){
      @Override void release(      Statement statement,      ResourceType type,      long resourceId){
        statement.readOperations().releaseShared(type,resourceId);
      }
    }
;
  }
 else   if (container instanceof Relationship) {
    statement.readOperations().acquireShared(ResourceTypes.RELATIONSHIP,((Relationship)container).getId());
    return new CoreAPILock(stmtProvider,ResourceTypes.RELATIONSHIP,((Relationship)container).getId()){
      @Override void release(      Statement statement,      ResourceType type,      long resourceId){
        statement.readOperations().releaseShared(type,resourceId);
      }
    }
;
  }
 else {
    throw new UnsupportedOperationException("Only relationships and nodes can be locked.");
  }
}
