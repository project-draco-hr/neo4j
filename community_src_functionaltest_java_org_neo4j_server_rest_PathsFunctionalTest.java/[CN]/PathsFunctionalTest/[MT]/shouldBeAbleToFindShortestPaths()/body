{
  Client client=Client.create();
  String json="{\"to\":\"" + NeoServer.server().restApiUri() + "node/"+ nodes[1]+ "\", \"max depth\":3, \"relationships\":{\"type\":\"to\", \"direction\":\"out\"}, \"algorithm\":\"shortestPath\"}";
  WebResource resource=client.resource(NeoServer.server().restApiUri() + "node/" + nodes[0]+ "/paths");
  ClientResponse response=resource.type(MediaType.APPLICATION_JSON).accept(MediaType.APPLICATION_JSON).entity(json).post(ClientResponse.class);
  assertEquals(200,response.getStatus());
  assertEquals(MediaType.APPLICATION_JSON_TYPE,response.getType());
  String entity=response.getEntity(String.class);
  Collection<?> result=(Collection<?>)JsonHelper.jsonToSingleValue(entity);
  assertEquals(2,result.size());
  for (  Object representation : result) {
    Map<?,?> path=(Map<?,?>)representation;
    assertTrue(path.get("start").toString().endsWith("/node/" + nodes[0]));
    assertTrue(path.get("end").toString().endsWith("/node/" + nodes[1]));
    assertEquals(2,path.get("length"));
  }
  resource=client.resource(NeoServer.server().restApiUri() + "node/" + nodes[0]+ "/path");
  response=resource.type(MediaType.APPLICATION_JSON).accept(MediaType.APPLICATION_JSON).entity(json).post(ClientResponse.class);
  assertEquals(200,response.getStatus());
  Map<?,?> path=(Map<?,?>)JsonHelper.jsonToMap(response.getEntity(String.class));
  assertTrue(path.get("start").toString().endsWith("/node/" + nodes[0]));
  assertTrue(path.get("end").toString().endsWith("/node/" + nodes[1]));
  assertEquals(2,path.get("length"));
  String noHitsJson="{\"to\":\"" + NeoServer.server().restApiUri() + "node/"+ nodes[1]+ "\", \"max depth\":3, \"relationships\":{\"type\":\"to\", \"direction\":\"in\"}, \"algorithm\":\"shortestPath\"}";
  resource=client.resource(NeoServer.server().restApiUri() + "node/" + nodes[0]+ "/path");
  response=resource.type(MediaType.APPLICATION_JSON).accept(MediaType.APPLICATION_JSON).entity(noHitsJson).post(ClientResponse.class);
  assertEquals(404,response.getStatus());
  String noHitsSingleJson="{\"to\":\"" + NeoServer.server().restApiUri() + "node/"+ nodes[1]+ "\", \"max depth\":3, \"relationships\":{\"type\":\"to\", \"direction\":\"in\"}, \"algorithm\":\"shortestPath\", \"single\":true}";
  resource=client.resource(NeoServer.server().restApiUri() + "node/" + nodes[0]+ "/paths");
  response=resource.type(MediaType.APPLICATION_JSON).accept(MediaType.APPLICATION_JSON).entity(noHitsSingleJson).post(ClientResponse.class);
  assertEquals(204,response.getStatus());
}
