{
  DefaultFileSystemAbstraction fileSystem=new DefaultFileSystemAbstraction();
  Monitors monitors=new Monitors();
  compareLogStreams(LogExtractor.from(fileSystem,new XaCommandReaderFactory(){
    @Override public XaCommandReader newInstance(    ByteBuffer scratch){
      return new PhysicalLogNeoXaCommandReader(scratch);
    }
  }
,new XaCommandWriterFactory(){
    @Override public XaCommandWriter newInstance(){
      return new PhysicalLogNeoXaCommandWriter();
    }
  }
,new LogEntryWriterv1(),new File(args[0]),monitors.newMonitor(ByteCounterMonitor.class,CompareTxStreams.class,"logExtractor1")),LogExtractor.from(fileSystem,new XaCommandReaderFactory(){
    @Override public XaCommandReader newInstance(    ByteBuffer scratch){
      return new PhysicalLogNeoXaCommandReader(scratch);
    }
  }
,new XaCommandWriterFactory(){
    @Override public XaCommandWriter newInstance(){
      return new PhysicalLogNeoXaCommandWriter();
    }
  }
,new LogEntryWriterv1(),new File(args[1]),monitors.newMonitor(ByteCounterMonitor.class,CompareTxStreams.class,"logExtractor1")));
}
