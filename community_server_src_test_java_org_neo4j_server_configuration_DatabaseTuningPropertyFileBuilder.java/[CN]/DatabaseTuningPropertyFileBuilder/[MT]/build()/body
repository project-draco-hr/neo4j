{
  File temporaryConfigFile=new File(parentDirectory,"neo4j.properties");
  Map<String,String> properties=MapUtil.stringMap("neostore.relationshipstore.db.mapped_memory","50M","neostore.propertystore.db.mapped_memory","90M","neostore.propertystore.db.strings.mapped_memory","130M","neostore.propertystore.db.arrays.mapped_memory","150M");
  if (mappedMemory == null) {
    properties.put("neostore.nodestore.db.mapped_memory","25M");
  }
 else {
    properties.put("neostore.nodestore.db.mapped_memory",mappedMemory);
  }
  if (kernelId != null) {
    properties.put(GraphDatabaseSettings.forced_kernel_id.name(),kernelId);
  }
  writePropertiesToFile(properties,temporaryConfigFile);
  return temporaryConfigFile;
}
