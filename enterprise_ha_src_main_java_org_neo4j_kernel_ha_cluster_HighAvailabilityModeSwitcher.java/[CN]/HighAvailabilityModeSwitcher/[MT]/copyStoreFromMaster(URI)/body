{
  LifeSupport life=new LifeSupport();
  try {
    console.log("ServerId " + config.get(ClusterSettings.server_id) + ", stopping services..");
    stopServicesAndHandleBranchedStore(BranchedDataPolicy.keep_none);
    MasterClient20 copyMaster=new MasterClient20(masterUri,logging,null,config);
    console.log("ServerId " + config.get(ClusterSettings.server_id) + ", setting up temp master client");
    life.add(copyMaster);
    life.start();
    console.log("Copying store from master");
    new SlaveStoreWriter(config,kernelExtensions,console).copyStore(copyMaster);
    console.log("Starting services again");
    startServicesAgain();
    console.log("Finished copying store from master");
    return true;
  }
 catch (  Throwable e) {
    msgLog.logMessage("Failed to copy store from master",e);
  }
 finally {
    life.stop();
  }
  return false;
}
