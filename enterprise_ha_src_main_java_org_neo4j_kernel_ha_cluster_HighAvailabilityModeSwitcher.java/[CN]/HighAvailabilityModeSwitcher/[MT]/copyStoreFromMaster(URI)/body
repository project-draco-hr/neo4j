{
  LifeSupport life=new LifeSupport();
  try {
    stopServicesAndHandleBranchedStore(BranchedDataPolicy.keep_none);
    MasterClient20 copyMaster=new MasterClient20(masterUri,logging,null,config);
    life.add(copyMaster);
    life.start();
    console.log("Copying store from master");
    new SlaveStoreWriter(config,kernelExtensions,console).copyStore(copyMaster);
    startServicesAgain();
    console.log("Finished copying store from master");
  }
  finally {
    life.stop();
  }
}
