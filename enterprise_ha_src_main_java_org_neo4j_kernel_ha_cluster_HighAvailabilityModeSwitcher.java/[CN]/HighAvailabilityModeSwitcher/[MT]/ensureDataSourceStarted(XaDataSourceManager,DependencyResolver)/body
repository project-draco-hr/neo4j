{
  NeoStoreXaDataSource nioneoDataSource=(NeoStoreXaDataSource)xaDataSourceManager.getXaDataSource(NeoStoreXaDataSource.DEFAULT_DATA_SOURCE_NAME);
  if (nioneoDataSource == null) {
    nioneoDataSource=new NeoStoreXaDataSource(config,resolver.resolveDependency(StoreFactory.class),resolver.resolveDependency(StringLogger.class),resolver.resolveDependency(XaFactory.class),resolver.resolveDependency(TransactionStateFactory.class),resolver.resolveDependency(TransactionInterceptorProviders.class),resolver.resolveDependency(JobScheduler.class),logging,updateableSchemaState,new NonTransactionalTokenNameLookup(resolver.resolveDependency(LabelTokenHolder.class),resolver.resolveDependency(PropertyKeyTokenHolder.class)),resolver,resolver.resolveDependency(AbstractTransactionManager.class),resolver.resolveDependency(PropertyKeyTokenHolder.class),resolver.resolveDependency(LabelTokenHolder.class),resolver.resolveDependency(RelationshipTypeTokenHolder.class),resolver.resolveDependency(PersistenceManager.class),resolver.resolveDependency(LockManager.class),(SchemaWriteGuard)graphDb);
    xaDataSourceManager.registerDataSource(nioneoDataSource);
    resolver.resolveDependency(NodeManager.class).start();
  }
  return nioneoDataSource;
}
