{
  if (modeSwitcherFuture != null) {
    this.cancellationHandle.cancel();
    try {
      modeSwitcherFuture.get();
    }
 catch (    UnableToCopyStoreFromOldMasterException|InconsistentlyUpgradedClusterException|UnavailableMembersException e) {
      throw e;
    }
catch (    Exception e) {
      msgLog.warn("Got exception from cancelled task",e);
    }
  }
  this.cancellationHandle=cancellationHandle;
  modeSwitcherFuture=modeSwitcherExecutor.submit(switcher);
}
