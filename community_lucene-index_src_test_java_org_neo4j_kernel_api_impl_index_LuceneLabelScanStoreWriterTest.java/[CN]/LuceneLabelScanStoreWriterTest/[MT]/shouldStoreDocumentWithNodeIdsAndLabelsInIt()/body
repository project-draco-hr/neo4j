{
  int nodeId=1;
  int label1=201;
  int label2=202;
  StubStorageService storage=new StubStorageService();
  SimpleLuceneLabelScanWriter writer=new SimpleLuceneLabelScanWriter(null,FORMAT,mock(Lock.class));
  writer.write(NodeLabelUpdate.labelChanges(nodeId,new long[]{},new long[]{label1,label2}));
  writer.close();
  long range=FORMAT.bitmapFormat().rangeOf(nodeId);
  Document document=storage.getDocument(new Term(RANGE,valueOf(range)));
  assertTrue(FORMAT.bitmapFormat().hasLabel(parseLong(document.get(valueOf(label1))),nodeId));
  assertTrue(FORMAT.bitmapFormat().hasLabel(parseLong(document.get(valueOf(label2))),nodeId));
}
