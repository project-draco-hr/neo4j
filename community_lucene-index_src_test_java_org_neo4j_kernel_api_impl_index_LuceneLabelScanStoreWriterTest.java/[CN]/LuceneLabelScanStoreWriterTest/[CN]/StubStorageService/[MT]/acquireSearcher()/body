{
  return new IndexSearcher(new IndexReaderStub(false)){
    private final Map<Integer,Document> docIds=new HashMap<>();
    @Override public void search(    Query query,    Collector results) throws IOException {
      Document document=storage.get(((TermQuery)query).getTerm());
      if (document == null) {
        return;
      }
      final int docId=new Random().nextInt();
      docIds.put(docId,document);
      try {
        LeafCollector leafCollector=results.getLeafCollector(leafContexts.get(0));
        Scorer scorer=new ConstantScoreScorer(null,10f,new OneDocIdIterator(docId));
        leafCollector.setScorer(scorer);
        leafCollector.collect(docId);
      }
 catch (      CollectionTerminatedException swallow) {
      }
    }
    @Override public TopDocs search(    Query query,    int n){
      Document document=storage.get(((TermQuery)query).getTerm());
      if (document == null) {
        return new TopDocs(0,new ScoreDoc[0],0);
      }
      int docId=new Random().nextInt();
      docIds.put(docId,document);
      int score=10;
      return new TopDocs(1,new ScoreDoc[]{new ScoreDoc(docId,score)},score);
    }
    @Override public Document doc(    int docID){
      return docIds.get(docID);
    }
  }
;
}
