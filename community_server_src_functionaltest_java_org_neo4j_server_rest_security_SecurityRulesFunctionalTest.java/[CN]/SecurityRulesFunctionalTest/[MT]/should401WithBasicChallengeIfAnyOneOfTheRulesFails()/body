{
  server=ServerBuilder.server().withDefaultDatabaseTuning().withSecurityRules(PermanentlyPassingSecurityRule.class.getCanonicalName(),PermanentlyFailingSecurityRule.class.getCanonicalName()).build();
  server.start();
  functionalTestHelper=new FunctionalTestHelper(server);
  JaxRsResponse response=gen.get().expectedStatus(401).expectedHeader("WWW-Authenticate").post(functionalTestHelper.nodeUri()).response();
  assertThat(response.getHeaders().getFirst("WWW-Authenticate"),containsString(PermanentlyFailingSecurityRule.REALM));
}
