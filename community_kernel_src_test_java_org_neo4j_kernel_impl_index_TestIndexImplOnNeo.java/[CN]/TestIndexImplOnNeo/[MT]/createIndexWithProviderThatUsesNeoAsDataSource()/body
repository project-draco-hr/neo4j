{
  String indexName="inneo";
  assertFalse(db.index().existsForNodes(indexName));
  Map<String,String> config=stringMap(PROVIDER,"test-dummy-neo-index","config1","A value","another config","Another value");
  Index<Node> index=db.index().forNodes(indexName,config);
  assertTrue(db.index().existsForNodes(indexName));
  assertEquals(config,db.index().getConfiguration(index));
  assertEquals(db.getReferenceNode(),index.get("key","refnode").getSingle());
  assertEquals(0,count((Iterable<Node>)index.get("key","something else")));
  restartDb();
  assertTrue(db.index().existsForNodes(indexName));
  assertEquals(config,db.index().getConfiguration(index));
}
