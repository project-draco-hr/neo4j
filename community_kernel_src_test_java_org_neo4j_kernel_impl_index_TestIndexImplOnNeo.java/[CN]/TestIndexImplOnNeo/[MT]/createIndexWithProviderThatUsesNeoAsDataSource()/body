{
  String indexName="inneo";
  assertFalse(hasIndexWithName(indexName));
  Map<String,String> config=stringMap(PROVIDER,"test-dummy-neo-index","config1","A value","another config","Another value");
  Index<Node> index=index(indexName,config);
  assertTrue(hasIndexWithName(indexName));
  assertEquals(config,indexConfiguration(index));
  Transaction transaction=db.beginTx();
  assertEquals(db.getReferenceNode(),index.get("key","refnode").getSingle());
  transaction.finish();
  assertEquals(0,count((Iterable<Node>)index.get("key","something else")));
  restartDb();
  assertTrue(hasIndexWithName(indexName));
  assertEquals(config,indexConfiguration(index));
}
