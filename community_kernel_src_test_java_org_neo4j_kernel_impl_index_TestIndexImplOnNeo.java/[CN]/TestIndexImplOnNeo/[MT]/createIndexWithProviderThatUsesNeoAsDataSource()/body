{
  String indexName="inneo";
  assertFalse(indexExists(indexName));
  Map<String,String> config=stringMap(PROVIDER,"test-dummy-neo-index","config1","A value","another config","Another value");
  Transaction transaction=db.beginTx();
  Index<Node> index;
  try {
    index=db.index().forNodes(indexName,config);
    transaction.success();
  }
  finally {
    transaction.finish();
  }
  assertTrue(indexExists(indexName));
  assertEquals(config,db.index().getConfiguration(index));
  assertEquals(0,count((Iterable<Node>)index.get("key","something else")));
  restartDb();
  assertTrue(indexExists(indexName));
  assertEquals(config,db.index().getConfiguration(index));
}
