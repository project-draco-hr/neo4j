{
  if (parentDirectory == null) {
    parentDirectory=createTempDir();
  }
  File temporaryConfigFile=new File(parentDirectory,"neo4j.properties");
  if (mappedMemory == null) {
    writePropertyToFile("neostore.nodestore.db.mapped_memory","25M",temporaryConfigFile);
  }
 else {
    writePropertyToFile("neostore.nodestore.db.mapped_memory",mappedMemory,temporaryConfigFile);
  }
  writePropertyToFile("neostore.relationshipstore.db.mapped_memory","50M",temporaryConfigFile);
  writePropertyToFile("neostore.propertystore.db.mapped_memory","90M",temporaryConfigFile);
  writePropertyToFile("neostore.propertystore.db.strings.mapped_memory","130M",temporaryConfigFile);
  writePropertyToFile("neostore.propertystore.db.arrays.mapped_memory","150M",temporaryConfigFile);
  return temporaryConfigFile;
}
