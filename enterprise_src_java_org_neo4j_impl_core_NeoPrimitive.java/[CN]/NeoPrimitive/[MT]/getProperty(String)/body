{
  if (key == null) {
    throw new IllegalArgumentException("null key");
  }
  nodeManager.acquireLock(this,LockType.READ);
  try {
    for (    PropertyIndex index : nodeManager.index(key)) {
      Property property=null;
      if (propertyMap != null) {
        property=propertyMap.get(index.getKeyId());
      }
      if (property != null) {
        return getPropertyValue(property);
      }
      if (ensureFullProperties()) {
        property=propertyMap.get(index.getKeyId());
        if (property != null) {
          return getPropertyValue(property);
        }
      }
    }
    if (!nodeManager.hasAllPropertyIndexes()) {
      ensureFullProperties();
      for (      int keyId : propertyMap.keySet()) {
        if (!nodeManager.hasIndexFor(keyId)) {
          PropertyIndex indexToCheck=nodeManager.getIndexFor(keyId);
          if (indexToCheck.getKey().equals(key)) {
            Property property=propertyMap.get(indexToCheck.getKeyId());
            return getPropertyValue(property);
          }
        }
      }
    }
  }
  finally {
    nodeManager.releaseLock(this,LockType.READ);
  }
  throw new NotFoundException("" + key + " property not found.");
}
