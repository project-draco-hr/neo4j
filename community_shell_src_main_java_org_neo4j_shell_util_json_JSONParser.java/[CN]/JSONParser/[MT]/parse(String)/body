{
  try {
    final String input=json.trim();
    if (input.isEmpty()) {
      return null;
    }
    if (input.charAt(0) == '{') {
      return new JSONObject(input).toMap();
    }
    if (input.charAt(0) == '[') {
      return new JSONArray(input).toList();
    }
    final Object value=JSONObject.stringToValue(input);
    if (value.equals(null)) {
      return null;
    }
    return value;
  }
 catch (  JSONException e) {
    throw new ShellException("Could not parse value " + json + " "+ e.getMessage());
  }
}
