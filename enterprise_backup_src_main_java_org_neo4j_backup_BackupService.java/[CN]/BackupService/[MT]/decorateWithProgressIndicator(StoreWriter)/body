{
  return new StoreWriter(){
    private final ProgressIndicator progress=new ProgressIndicator.UnknownEndProgress(1,"Files copied");
    private int totalFiles;
    @Override public void write(    String path,    ReadableByteChannel data,    ByteBuffer temporaryBuffer,    boolean hasData) throws IOException {
      actual.write(path,data,temporaryBuffer,hasData);
      progress.update(true,1);
      totalFiles++;
    }
    @Override public void done(){
      actual.done();
      progress.done(totalFiles);
    }
  }
;
}
