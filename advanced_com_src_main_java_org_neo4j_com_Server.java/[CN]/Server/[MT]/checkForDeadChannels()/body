{
synchronized (connectedSlaveChannels) {
    Collection<Channel> channelsToRemove=new ArrayList<Channel>();
    for (    Map.Entry<Channel,SlaveContext> entry : connectedSlaveChannels.entrySet()) {
      if (!channelIsOpen(entry.getKey())) {
        msgLog.logMessage("Found dead channel " + entry.getKey() + ", "+ entry.getValue());
        finishOffConnection(entry.getKey(),entry.getValue());
        msgLog.logMessage("Removed " + entry.getKey() + ", "+ entry.getValue());
        channelsToRemove.add(entry.getKey());
      }
    }
    for (    Channel channel : channelsToRemove) {
      connectedSlaveChannels.remove(channel);
      channelBuffers.remove(channel);
      partialRequests.remove(channel);
    }
  }
}
