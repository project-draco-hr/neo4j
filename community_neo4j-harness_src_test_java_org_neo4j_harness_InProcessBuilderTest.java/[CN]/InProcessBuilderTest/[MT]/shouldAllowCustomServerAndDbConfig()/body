{
  trustAllSSLCerts();
  try (ServerControls server=newInProcessBuilder(testDir.directory()).withConfig(Configurator.WEBSERVER_HTTPS_ENABLED_PROPERTY_KEY,"true").withConfig(Configurator.WEBSERVER_HTTPS_CERT_PATH_PROPERTY_KEY,testDir.file("cert").getAbsolutePath()).withConfig(Configurator.WEBSERVER_KEYSTORE_PATH_PROPERTY_KEY,testDir.file("keystore").getAbsolutePath()).withConfig(Configurator.WEBSERVER_HTTPS_KEY_PATH_PROPERTY_KEY,testDir.file("key").getAbsolutePath()).withConfig(GraphDatabaseSettings.dense_node_threshold,"20").newServer()){
    assertThat(HTTP.GET(server.httpsURI().toString()).status(),equalTo(200));
    assertDBConfig(server,"20",GraphDatabaseSettings.dense_node_threshold.name());
  }
 }
