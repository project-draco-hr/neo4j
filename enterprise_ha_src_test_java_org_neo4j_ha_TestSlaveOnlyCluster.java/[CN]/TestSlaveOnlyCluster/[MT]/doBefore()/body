{
  zoo=LocalhostZooKeeperCluster.singleton().clearDataAndVerifyConnection();
  master=new HighlyAvailableGraphDatabase(dir.directory("master",true).getAbsolutePath(),stringMap(HaSettings.server_id.name(),"0",HaSettings.server.name(),"localhost:" + 6666,HaSettings.coordinators.name(),zoo.getConnectionString(),HaSettings.pull_interval.name(),0 + "ms"));
  for (int i=0; i < slaves.length; i++) {
    slaves[i]=new HighlyAvailableGraphDatabase(dir.directory("" + i + 1,true).getAbsolutePath(),stringMap(HaSettings.server_id.name(),"" + (i + 1),HaSettings.server.name(),"localhost:" + (6667 + i),HaSettings.coordinators.name(),zoo.getConnectionString(),HaSettings.pull_interval.name(),0 + "ms",HaSettings.slave_coordinator_update_mode.name(),HaSettings.SlaveUpdateModeSetting.none));
  }
}
