{
  if (error == ErrorState.TX_MANAGER_NOT_OK) {
    try {
synchronized (dataSourceManager) {
        new Exception("handling panic").printStackTrace();
        txManager.stop();
        dataSourceManager.stop();
        dataSourceManager.start();
        txManager.start();
        txManager.doRecovery();
        new Exception("handled panic").printStackTrace();
      }
    }
 catch (    Throwable t) {
      throw new RuntimeException("error while handling kernel panic for TX_MANAGER_NOT_OK",t);
    }
  }
}
