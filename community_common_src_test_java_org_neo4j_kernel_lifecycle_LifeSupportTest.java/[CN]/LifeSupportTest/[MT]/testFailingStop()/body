{
  LifeSupport lifeSupport=newLifeSupport();
  LifecycleMock instance1=new LifecycleMock(null,null,null,null);
  lifeSupport.add(instance1);
  Exception stopThrowable=new Exception();
  LifecycleMock instance2=new LifecycleMock(null,null,stopThrowable,null);
  lifeSupport.add(instance2);
  LifecycleMock instance3=new LifecycleMock(null,null,null,null);
  lifeSupport.add(instance3);
  lifeSupport.start();
  try {
    lifeSupport.stop();
    fail();
  }
 catch (  LifecycleException throwable) {
    assertEquals(stopThrowable,throwable.getCause());
  }
  assertEquals(LifecycleStatus.STOPPED,lifeSupport.getStatus());
  assertEquals(LifecycleStatus.STOPPED,instance1.getStatus());
  assertEquals(LifecycleStatus.STOPPED,instance2.getStatus());
  assertEquals(LifecycleStatus.STOPPED,instance3.getStatus());
}
