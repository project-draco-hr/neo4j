{
  haDbs=haDbs != null ? haDbs : new ArrayList<GraphDatabaseService>();
  File slavePath=dbPath(machineId);
  PlaceHolderGraphDatabaseService placeHolderDb=new PlaceHolderGraphDatabaseService(slavePath.getAbsolutePath());
  Broker broker=makeSlaveBroker(master,0,machineId,placeHolderDb,config);
  Map<String,String> cfg=new HashMap<String,String>(config);
  cfg.put(HaConfig.CONFIG_KEY_SERVER_ID,Integer.toString(machineId));
  cfg.put(Config.KEEP_LOGICAL_LOGS,"true");
  addDefaultReadTimeout(cfg);
  HighlyAvailableGraphDatabase db=new HighlyAvailableGraphDatabase(new HAGraphDb(slavePath.getAbsolutePath(),cfg,wrapBrokerAndSetPlaceHolderDb(placeHolderDb,broker),makeMasterClusterClientFromBroker(broker)));
  placeHolderDb.setDb(db);
  haDbs.set(machineId - 1,db);
}
