{
  haDbs=haDbs != null ? haDbs : new ArrayList<GraphDatabaseSPI>();
  File slavePath=dbPath(machineId);
  final Map<String,String> cfg=new HashMap<String,String>(config);
  cfg.put(HaConfig.CONFIG_KEY_SERVER_ID,Integer.toString(machineId));
  cfg.put(Config.KEEP_LOGICAL_LOGS,"true");
  addDefaultReadTimeout(cfg);
  HighlyAvailableGraphDatabase haGraphDb=new HighlyAvailableGraphDatabase(slavePath.getAbsolutePath(),cfg){
    @Override protected Broker createBroker(){
      return makeSlaveBroker(master,0,machineId,this,cfg);
    }
    @Override protected ClusterClient createClusterClient(){
      return makeMasterClusterClientFromBroker(getBroker());
    }
  }
;
  haDbs.set(machineId - 1,haGraphDb);
}
