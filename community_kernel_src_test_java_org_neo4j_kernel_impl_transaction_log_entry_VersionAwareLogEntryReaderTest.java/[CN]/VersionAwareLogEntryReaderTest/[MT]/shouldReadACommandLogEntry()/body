{
  LogEntryVersion version=LogEntryVersion.CURRENT;
  Command.NodeCommand nodeCommand=new Command.NodeCommand();
  nodeCommand.init(new NodeRecord(11),new NodeRecord(11));
  final LogEntryCommand command=new LogEntryCommand(version,nodeCommand);
  final InMemoryLogChannel channel=new InMemoryLogChannel();
  channel.put(version.byteCode());
  channel.put(LogEntryByteCodes.COMMAND);
  new CommandWriter(channel).visitNodeCommand(nodeCommand);
  final LogEntry logEntry=logEntryReader.readLogEntry(channel);
  assertEquals(command,logEntry);
}
