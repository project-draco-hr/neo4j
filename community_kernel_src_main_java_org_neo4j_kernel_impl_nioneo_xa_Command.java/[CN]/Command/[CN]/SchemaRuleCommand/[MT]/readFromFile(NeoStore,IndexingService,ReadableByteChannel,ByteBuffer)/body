{
  Collection<DynamicRecord> records=new ArrayList<DynamicRecord>();
  readDynamicRecords(byteChannel,buffer,records,COLLECTION_DYNAMIC_RECORD_ADDER);
  if (!readAndFlip(byteChannel,buffer,1))   throw new IllegalStateException("Missing SchemaRule.isCreated flag in deserialization");
  byte isCreated=buffer.get();
  if (1 == isCreated) {
    for (    DynamicRecord record : records) {
      record.setCreated();
    }
  }
  SchemaRule rule=null;
  if (first(records).inUse()) {
    ByteBuffer deserialized=AbstractDynamicStore.concatData(records,new byte[100]);
    rule=SchemaRule.Kind.deserialize(first(records).getId(),deserialized);
  }
  return new SchemaRuleCommand(neoStore != null ? neoStore.getSchemaStore() : null,indexes,records,rule);
}
