{
  if (!block.inUse()) {
    buffer.put((byte)0);
  }
 else {
    buffer.put((byte)1);
  }
  byte blockSize=(byte)block.getSize();
  if (blockSize <= 0) {
    throw new IllegalStateException(blockSize + " for PropertyBlock " + block+ " is not a valid value for block size of a PropertyBlock in use");
  }
  buffer.put(blockSize);
  for (  long value : block.getValueBlocks()) {
    buffer.putLong(value);
  }
  if (block.isLight()) {
    buffer.putInt(0);
  }
 else {
    buffer.putInt(block.getValueRecords().size());
    for (    DynamicRecord record : block.getValueRecords()) {
      writeDynamicRecord(buffer,record);
    }
  }
}
