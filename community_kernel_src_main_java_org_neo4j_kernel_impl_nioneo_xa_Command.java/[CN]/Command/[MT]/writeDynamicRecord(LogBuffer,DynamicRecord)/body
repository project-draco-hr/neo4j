{
  if (record.inUse()) {
    byte inUse=Record.IN_USE.byteValue();
    buffer.putLong(record.getId()).putInt(record.getType()).put(inUse).putInt(record.getLength()).putLong(record.getNextBlock());
    if (!record.isLight()) {
      byte[] data=record.getData();
      buffer.put(data);
    }
 else {
      buffer.put((byte)1);
    }
  }
 else {
    byte inUse=Record.NOT_IN_USE.byteValue();
    buffer.putLong(record.getId()).putInt(record.getType()).put(inUse);
  }
}
