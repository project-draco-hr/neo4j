{
  JavaCompiler compiler=ToolProvider.getSystemJavaCompiler();
  JavaFileManager manager=new InMemFileManager();
  DiagnosticCollector<JavaFileObject> diagnosticsCollector=new DiagnosticCollector<>();
  Iterable<? extends JavaFileObject> sources=Arrays.asList(new InMemSource(className,classBody));
  CompilationTask task=compiler.getTask(null,manager,diagnosticsCollector,null,null,sources);
  task.call();
  Class<?> clazz=manager.getClassLoader(null).loadClass("org.neo4j.cypher.internal." + className);
  return (ExecutablePlan)clazz.newInstance();
}
