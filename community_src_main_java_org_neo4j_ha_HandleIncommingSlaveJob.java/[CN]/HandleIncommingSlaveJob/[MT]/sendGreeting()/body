{
  if (retries > 20) {
    close();
  }
  log("Send greeting");
  connection.write();
  if (!buffer.hasRemaining()) {
    releaseWriteBuffer();
    setNoRequeue();
    setChainJob(new HandleSlaveConnection(connection,master,slaveVersion));
    return true;
  }
  retries++;
  return false;
}
