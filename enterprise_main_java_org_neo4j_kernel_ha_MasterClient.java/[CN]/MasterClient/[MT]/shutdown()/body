{
synchronized (channels) {
    for (    Channel channel : unusedChannels) {
      new Exception("close unused channel in shutdown " + channel).printStackTrace();
      channel.close();
    }
    for (    Channel channel : channels.values()) {
      new Exception("close channel in shutdown " + channel).printStackTrace();
      channel.close();
    }
  }
}
