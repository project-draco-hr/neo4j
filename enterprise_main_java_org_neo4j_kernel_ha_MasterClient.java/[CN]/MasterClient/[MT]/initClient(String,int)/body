{
  ExecutorService executor=Executors.newCachedThreadPool();
  ClientBootstrap bootstrap=new ClientBootstrap(new NioClientSocketChannelFactory(executor,executor));
  BlockingReadHandler<ChannelBuffer> blockingReadHandler=new BlockingReadHandler<ChannelBuffer>();
  bootstrap.setPipelineFactory(new ClientPipelineFactory(blockingReadHandler));
  ChannelFuture channelFuture=bootstrap.connect(new InetSocketAddress(hostNameOrIp,port));
  Client client=new Client(blockingReadHandler,channelFuture);
  try {
    channelFuture.await();
    System.out.println("Client connected to " + hostNameOrIp + ":"+ port);
  }
 catch (  InterruptedException e) {
    Thread.interrupted();
  }
  return client;
}
