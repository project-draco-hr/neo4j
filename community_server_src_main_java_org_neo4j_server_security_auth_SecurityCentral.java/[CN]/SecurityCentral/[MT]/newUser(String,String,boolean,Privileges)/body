{
  try {
    assertValidName(name);
    User user=new User.Builder().withName(name).withToken(newToken()).withCredentials(authentication.createPasswordCredential(initialPassword)).withRequiredPasswordChange(requirePasswordChange).withPrivileges(privileges).build();
    users.save(user);
    return user;
  }
 catch (  IllegalTokenException e) {
    throw new ThisShouldNotHappenError("Jake","There is no token set at this point.",e);
  }
}
