{
  try {
    String token=newToken();
    setToken(name,token);
    return token;
  }
 catch (  IllegalTokenException e) {
    return regenerateToken(name);
  }
}
