{
  assertValidToken(token);
  User user=users.findByName(name);
  if (user != null) {
    user=user.augment().withToken(token).build();
    try {
      users.save(user);
    }
 catch (    IllegalUsernameException e) {
      throw new ThisShouldNotHappenError("Jake","Username has already been accepted, we are modifying the token only.");
    }
  }
}
