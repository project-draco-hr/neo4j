{
  for (  NodePropertyConstraint constraint : new NodePropertyConstraint[]{new UniquenessConstraint(labelId,propertyKeyId),new MandatoryNodePropertyConstraint(labelId,propertyKeyId)}) {
{
      SchemaWriteOperations statement=schemaWriteOperationsInNewTransaction();
      try {
        statement.constraintDrop(constraint);
        fail("Should not have dropped constraint");
      }
 catch (      DropConstraintFailureException e) {
        assertThat(e.getCause(),instanceOf(NoSuchConstraintException.class));
      }
      commit();
    }
{
      ReadOperations statement=readOperationsInNewTransaction();
      assertEquals(emptySetOf(IndexDescriptor.class),asSet(statement.uniqueIndexesGetAll()));
      commit();
    }
  }
}
