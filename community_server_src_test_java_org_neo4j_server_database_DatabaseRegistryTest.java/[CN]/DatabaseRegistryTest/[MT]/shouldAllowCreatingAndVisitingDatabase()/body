{
  final AtomicReference<Database> dbProvidedToVisitor=new AtomicReference<>();
  registry.visit("northwind",new DatabaseRegistry.Visitor(){
    @Override public void visit(    Database db){
      dbProvidedToVisitor.set(db);
    }
  }
);
  assertThat(dbProvidedToVisitor.get(),equalTo(database));
  verify(database).init();
  verify(database).start();
}
