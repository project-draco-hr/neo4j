{
  Collection<DynamicRecord> allRecords=oldKeyStore.getRecords(oldKeyId,null);
  Iterator<DynamicRecord> records=allRecords.iterator();
  List<byte[]> byteList=new LinkedList<byte[]>();
  int recordToFind=oldKeyId;
  while (recordToFind != Record.NO_NEXT_BLOCK.intValue() && records.hasNext()) {
    DynamicRecord record=records.next();
    if (record.inUse() && record.getId() == recordToFind) {
      if (record.isLight()) {
        oldKeyStore.makeHeavy(record,null);
      }
      byteList.add(record.getData());
      recordToFind=record.getNextBlock();
      records=allRecords.iterator();
    }
  }
  int totalLength=0;
  for (  byte[] array : byteList) {
    totalLength+=array.length;
  }
  byte[] byteArrayStr=new byte[totalLength];
  int position=0;
  for (  byte[] array : byteList) {
    System.arraycopy(array,0,byteArrayStr,position,array.length);
    position+=array.length;
  }
  return new String(byteArrayStr);
}
