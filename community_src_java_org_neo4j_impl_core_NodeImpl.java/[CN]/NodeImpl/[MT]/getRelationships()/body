{
  acquireLock(this,LockType.READ);
  try {
    ensureFullRelationships();
    if (relationshipMap == null) {
      return Collections.emptyList();
    }
    List<Relationship> allRelationships=new LinkedList<Relationship>();
    Iterator<ArrayIntSet> values=relationshipMap.values().iterator();
    while (values.hasNext()) {
      ArrayIntSet relTypeSet=values.next();
      for (      int relId : relTypeSet.values()) {
        allRelationships.add(new RelationshipProxy(relId));
      }
    }
    return allRelationships;
  }
  finally {
    releaseLock(this,LockType.READ);
  }
}
