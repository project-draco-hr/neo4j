{
  ArrayIntSet relationshipSet=null;
  if (relationshipMap != null) {
    relationshipSet=relationshipMap.get(type.name());
  }
  if (relationshipSet != null) {
    if (!relationshipSet.remove(relId)) {
      if (ensureFullRelationships()) {
        relationshipSet.remove(relId);
      }
    }
    if (relationshipSet.size() == 0) {
      relationshipMap.remove(type.name());
    }
  }
 else {
    if (ensureFullRelationships()) {
      removeRelationship(type,relId);
    }
  }
}
