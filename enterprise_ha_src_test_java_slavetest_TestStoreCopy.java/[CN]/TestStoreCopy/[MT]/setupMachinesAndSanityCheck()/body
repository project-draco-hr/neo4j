{
  slaveDir=TargetDirectory.forTest(TestStoreCopy.class).directory("slave-sandboxed",true);
  sandboxed=new File(slaveDir,SlaveStoreWriter.COPY_FROM_MASTER_TEMP);
  master=(HighlyAvailableGraphDatabase)new HighlyAvailableGraphDatabaseFactory().newHighlyAvailableDatabaseBuilder(TargetDirectory.forTest(TestStoreCopy.class).directory("master-sandboxed",true).getAbsolutePath()).setConfig(ClusterSettings.cluster_server,"localhost").setConfig(HaSettings.server_id,"1").newGraphDatabase();
  Transaction masterTx=master.beginTx();
  Node n=master.createNode();
  n.setProperty("foo","bar");
  nodeId=n.getId();
  masterTx.success();
  masterTx.finish();
  startSlave();
  Transaction tx=slave.beginTx();
  tx.success();
  tx.finish();
  Assert.assertEquals("bar",slave.getNodeById(nodeId).getProperty("foo"));
}
