{
  slave.shutdown();
  Transaction secondMasterTx=master.beginTx();
  Node n=master.getNodeById(nodeId);
  n.setProperty("foo2","bar2");
  secondMasterTx.success();
  secondMasterTx.finish();
  File sandboxed=new File(slaveDir,HighlyAvailableGraphDatabase.COPY_FROM_MASTER_TEMP);
  FileUtils.moveToDirectory(new File(slaveDir,"neostore"),sandboxed,false);
  FileUtils.moveToDirectory(new File(slaveDir,"neostore.propertystore.db"),sandboxed,false);
  Assert.assertEquals(3,sandboxed.listFiles().length);
  slave=(HighlyAvailableGraphDatabase)new EnterpriseGraphDatabaseFactory().newHighlyAvailableDatabaseBuilder(slaveDir.getAbsolutePath()).setConfig(HaSettings.coordinators,zoo.getConnectionString()).setConfig(HaSettings.server_id,"2").newGraphDatabase();
  Assert.assertEquals("bar",slave.getNodeById(nodeId).getProperty("foo"));
  Assert.assertEquals("bar2",slave.getNodeById(nodeId).getProperty("foo2"));
}
