{
  this.cf=cf;
  this.tf=tf;
  TxIdFactory txIdFactory=config != null ? (TxIdFactory)config.get(TxIdFactory.class) : TxIdFactory.DEFAULT;
  rm=new XaResourceManager(dataSource,tf,txIdFactory,logicalLog);
  log=new XaLogicalLog(logicalLog,rm,cf,tf,config);
  rm.setLogicalLog(log);
  tf.setLogicalLog(log);
}
