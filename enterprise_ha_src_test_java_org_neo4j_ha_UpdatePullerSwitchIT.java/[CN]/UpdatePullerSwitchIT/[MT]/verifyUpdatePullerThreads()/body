{
  InstanceId masterId=managedCluster.getMaster().getDependencyResolver().resolveDependency(Config.class).get(ClusterSettings.server_id);
  InstanceId slaveId=managedCluster.getAnySlave().getDependencyResolver().resolveDependency(Config.class).get(ClusterSettings.server_id);
  Map<Thread,StackTraceElement[]> allStackTraces=Thread.getAllStackTraces();
  Set<Thread> threads=allStackTraces.keySet();
  assertNull("Master should not have any puller threads",findThreadWithPrefix(threads,SlaveUpdatePuller.UPDATE_PULLER_THREAD_PREFIX + masterId));
  assertNotNull("Slave should have active puller thread",findThreadWithPrefix(threads,SlaveUpdatePuller.UPDATE_PULLER_THREAD_PREFIX + slaveId));
}
