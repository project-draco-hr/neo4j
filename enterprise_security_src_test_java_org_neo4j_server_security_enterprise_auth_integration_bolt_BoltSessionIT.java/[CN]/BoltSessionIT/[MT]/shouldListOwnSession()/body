{
  client.connect(address).send(TransportTestUtil.acceptedVersions(1,0,0,0)).send(TransportTestUtil.chunk(init("TestClient/1.1",map("principal","neo4j","credentials","neo4j","new_credentials","secret","scheme","basic"))));
  assertThat(client,eventuallyRecieves(new byte[]{0,0,0,1}));
  assertThat(client,eventuallyRecieves(msgSuccess()));
  client.send(TransportTestUtil.chunk(run("CALL dbms.listSessions() YIELD username, sessionCount"),pullAll()));
  assertThat(client,eventuallyRecieves(msgSuccess(map("fields",asList("username","sessionCount"))),msgRecord(eqRecord(equalTo("neo4j"),equalTo(1L))),msgSuccess()));
}
