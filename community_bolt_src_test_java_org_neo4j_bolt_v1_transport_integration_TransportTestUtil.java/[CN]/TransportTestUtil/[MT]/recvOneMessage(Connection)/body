{
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  while (true) {
    int size=recvChunkHeader(conn);
    if (size > 0) {
      byte[] recv=conn.recv(size);
      baos.write(recv);
    }
 else {
      return message(baos.toByteArray());
    }
  }
}
