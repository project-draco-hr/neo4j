{
  TransactionTimeSpanPruneStrategy pruner=new TransactionTimeSpanPruneStrategy(null,1,TimeUnit.DAYS);
  LogPruneStrategies.Threshold threshold=pruner.newThreshold();
  LogExtractor.LogLoader logLoader=mock(LogExtractor.LogLoader.class);
  when(logLoader.getFirstStartRecordTimestamp(anyLong())).thenThrow(new IllegalLogFormatException(3,5));
  try {
    threshold.reached(null,1,logLoader);
    fail("Should've thrown exception");
  }
 catch (  RuntimeException e) {
    assertThat(e.getMessage(),equalTo("Unable to read database logs, because it contains logs from a newer " + "version of Neo4j."));
  }
}
