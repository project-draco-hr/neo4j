{
  Transaction tx;
  StatementContext statement;
  tx=db.beginTx();
  statement=statementContextProvider.getCtxForWriting();
  String state=statement.getOrCreateFromSchemaState(key,new Function<String,String>(){
    @Override public String apply(    String s){
      return maybeSetThisState;
    }
  }
);
  tx.success();
  tx.finish();
  return state;
}
