{
  final long startNodeId=helper.createNode();
  final long endNodeId=helper.createNode();
  final String relationshiptype="tested-together";
  final long relationshipId=helper.createRelationship(relationshiptype,startNodeId,endNodeId);
  final String key="key";
  final String value="value with   spaces  in it";
  final String indexName=indexes.newInstance();
  helper.createRelationshipIndex(indexName);
  JaxRsResponse response=httpPostIndexRelationshipNameKeyValue(indexName,relationshipId,key,value);
  assertEquals(Status.CREATED.getStatusCode(),response.getStatus());
  URI location=response.getLocation();
  response.close();
  response=httpGetIndexRelationshipNameKeyValue(indexName,key,URIHelper.encode(value));
  assertEquals(Status.OK.getStatusCode(),response.getStatus());
  String responseEntity=response.getEntity();
  Collection<?> hits=(Collection<?>)JsonHelper.readJson(responseEntity);
  assertEquals(1,hits.size());
  response.close();
  CLIENT.resource(location).delete();
  response=httpGetIndexRelationshipNameKeyValue(indexName,key,URIHelper.encode(value));
  assertEquals(200,response.getStatus());
  responseEntity=response.getEntity();
  hits=(Collection<?>)JsonHelper.readJson(responseEntity);
  assertEquals(0,hits.size());
  response.close();
}
