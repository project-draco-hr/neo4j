{
  final long startNode=helper.createNode();
  final long endNode=helper.createNode();
  final String key="key_get";
  final String value="value";
  final String relationshipName1="related-to";
  final String relationshipName2="dislikes";
  String jsonString=jsonRelationshipCreationSpecification(relationshipName1,endNode,key,value);
  JaxRsResponse createRelationshipResponse=httpPostCreateRelationship(startNode,jsonString);
  assertEquals(201,createRelationshipResponse.getStatus());
  String relationshipLocation1=createRelationshipResponse.getLocation().toString();
  jsonString=jsonRelationshipCreationSpecification(relationshipName2,endNode,key,value);
  createRelationshipResponse=httpPostCreateRelationship(startNode,jsonString);
  assertEquals(201,createRelationshipResponse.getStatus());
  String relationshipLocation2=createRelationshipResponse.getHeaders().get(HttpHeaders.LOCATION).get(0);
  String indexName=indexes.newInstance();
  JaxRsResponse indexCreationResponse=httpPostIndexRelationshipRoot("{\"name\":\"" + indexName + "\"}");
  assertEquals(201,indexCreationResponse.getStatus());
  JaxRsResponse indexedRelationshipResponse=httpPostIndexRelationshipNameKeyValue(indexName,functionalTestHelper.getRelationshipIdFromUri(relationshipLocation1),key,value);
  String indexLocation1=indexedRelationshipResponse.getHeaders().get(HttpHeaders.LOCATION).get(0);
  indexedRelationshipResponse=httpPostIndexRelationshipNameKeyValue(indexName,functionalTestHelper.getRelationshipIdFromUri(relationshipLocation2),key,value);
  String indexLocation2=indexedRelationshipResponse.getHeaders().get(HttpHeaders.LOCATION).get(0);
  Map<String,String> uriToName=new HashMap<>();
  uriToName.put(indexLocation1.toString(),relationshipName1);
  uriToName.put(indexLocation2.toString(),relationshipName2);
  JaxRsResponse response=RestRequest.req().get(functionalTestHelper.indexRelationshipUri(indexName,key,value));
  assertEquals(200,response.getStatus());
  Collection<?> items=(Collection<?>)JsonHelper.readJson(response.getEntity());
  int counter=0;
  for (  Object item : items) {
    Map<?,?> map=(Map<?,?>)item;
    assertNotNull(map.get("self"));
    String indexedUri=(String)map.get("indexed");
    assertEquals(uriToName.get(indexedUri),map.get("type"));
    counter++;
  }
  assertEquals(2,counter);
  response.close();
}
