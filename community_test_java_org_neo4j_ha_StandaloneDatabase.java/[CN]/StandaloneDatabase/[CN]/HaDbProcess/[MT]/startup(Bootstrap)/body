{
  System.setOut(new TimestampStream(System.out));
  System.setErr(new TimestampStream(System.err));
  if (db != null)   throw new IllegalStateException("already started");
  System.out.println("About to start");
  HighlyAvailableGraphDatabase graph=null;
  try {
    graph=bootstrap.start();
  }
  finally {
    System.out.println(graph != null ? "startup completed successfully" : "startup failed");
    if (!db(graph) && graph != null) {
      graph.shutdown();
      throw new IllegalStateException("already started");
    }
  }
}
