{
  this.kpe=kpe;
  this.storeDir=storeDir;
  this.inputParams=inputParams;
  this.idGeneratorFactory=idGeneratorFactory;
  this.relTypeCreator=relTypeCreator;
  this.txIdFactory=txIdFactory;
  this.params=getDefaultParams();
  this.txModule=txModule;
  this.lockManager=lockManager;
  this.lockReleaser=lockReleaser;
  this.idGeneratorModule=new IdGeneratorModule(new IdGenerator());
  this.readOnly=Boolean.parseBoolean((String)params.get(READ_ONLY));
  this.backupSlave=Boolean.parseBoolean((String)params.get(BACKUP_SLAVE));
  this.syncHookFactory=txSyncHookFactory;
  this.persistenceModule=new PersistenceModule();
  this.cacheManager=new AdaptiveCacheManager();
  graphDbModule=new GraphDbModule(graphDb,cacheManager,lockManager,txModule.getTxManager(),idGeneratorModule.getIdGenerator(),readOnly);
  params.put(IdGeneratorFactory.class,idGeneratorFactory);
  params.put(TxIdFactory.class,txIdFactory);
}
