{
  super(management);
  DataSourceManager dataSourceManager=management.resolveDependency(DataSourceManager.class);
  dataSourceManager.addListener(new DataSourceManager.Listener(){
    @Override public void registered(    NeoStoreXaDataSource ds){
      logFile=ds.getDependencyResolver().resolveDependency(LogFile.class);
      storePath=resolvePath(ds);
    }
    @Override public void unregistered(    NeoStoreXaDataSource ds){
      logFile=null;
      storePath=null;
    }
    private File resolvePath(    NeoStoreXaDataSource ds){
      try {
        return new File(ds.getStoreDir()).getCanonicalFile().getAbsoluteFile();
      }
 catch (      IOException e) {
        return new File(ds.getStoreDir()).getAbsoluteFile();
      }
    }
  }
);
}
