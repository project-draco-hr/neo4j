{
  InMemoryLogBuffer buffer=new InMemoryLogBuffer();
  TransactionWriter writer=new TransactionWriter(buffer,1,-1);
  NodeRecord node=new NodeRecord(0,false,-1,-1);
  node.setLabelField(0,Collections.<DynamicRecord>emptyList());
  RelationshipRecord relationship=new RelationshipRecord(0,1,1,6);
  writer.start(1,1,0);
  writer.create(node);
  writer.update(relationship);
  writer.delete(propertyRecordWithOneIntProperty(3,10,45),new PropertyRecord(3));
  writer.prepare();
  writer.commit(false,17);
  writer.done();
  TransactionReader.Visitor visitor=visited(buffer);
  InOrder order=inOrder(visitor);
  order.verify(visitor).visitStart(eq(1),any(byte[].class),eq(1),eq(1),anyLong());
  order.verify(visitor).visitUpdateNode(eq(1),argThat(matchesRecord(node)));
  order.verify(visitor).visitUpdateRelationship(eq(1),argThat(matchesRecord(relationship)));
  order.verify(visitor).visitDeleteProperty(eq(1),eq(3l));
  order.verify(visitor).visitPrepare(eq(1),anyLong());
  order.verify(visitor).visitCommit(eq(1),eq(false),eq(17l),anyLong());
  order.verify(visitor).visitDone(eq(1));
  verifyNoMoreInteractions(visitor);
}
