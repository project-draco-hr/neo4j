{
  FileSystemAbstraction fileSystem=fs.get();
  File storeDir=new File("target/test-data/set-version");
  new TestGraphDatabaseFactory().setFileSystem(fileSystem).newImpermanentDatabase(storeDir.getAbsolutePath()).shutdown();
  assertEquals(1,NeoStore.setRecord(fileSystem,new File(storeDir,NeoStore.DEFAULT_NAME).getAbsoluteFile(),Position.LOG_VERSION,10));
  assertEquals(10,NeoStore.setRecord(fileSystem,new File(storeDir,NeoStore.DEFAULT_NAME).getAbsoluteFile(),Position.LOG_VERSION,12));
  Monitors monitors=new Monitors();
  Config config=new Config(new HashMap<String,String>(),GraphDatabaseSettings.class);
  StoreFactory sf=new StoreFactory(configForStoreDir(config,storeDir),new DefaultIdGeneratorFactory(),pageCache,fileSystem,NullLogProvider.getInstance(),monitors);
  NeoStore neoStore=sf.newNeoStore(false);
  assertEquals(12,neoStore.getCurrentLogVersion());
  neoStore.close();
}
