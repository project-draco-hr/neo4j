{
  final Iterable<RelationshipSpecification> spec;
  if (types == null) {
    spec=engine.getAllRelationships(id,node.id,dir);
  }
 else {
    String[] typeNames=new String[types.length];
    for (int i=0; i < types.length; i++) {
      typeNames[i]=types[i].name();
    }
    spec=engine.getRelationships(id,node.id,dir,typeNames);
  }
  return new ConversionIterable<RelationshipSpecification,Relationship>(spec){
    @Override Relationship convert(    RelationshipSpecification source){
      return getRelationship(source.relationshipId,source);
    }
  }
;
}
