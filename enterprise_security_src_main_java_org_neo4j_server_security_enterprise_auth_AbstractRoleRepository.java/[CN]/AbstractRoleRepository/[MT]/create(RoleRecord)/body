{
  if (!isValidRoleName(role.name())) {
    throw new IllegalArgumentException("'" + role.name() + "' is not a valid role name.");
  }
synchronized (this) {
    for (    RoleRecord other : roles) {
      if (other.name().equals(role.name())) {
        throw new IllegalArgumentException("The specified role '" + role.name() + "' already exists.");
      }
    }
    roles.add(role);
    saveRoles();
    rolesByName.put(role.name(),role);
    populateUserMap(role);
  }
}
