{
  LifeSupport modeSwitchersLife=mock(LifeSupport.class);
  when(modeSwitchersLife.getLifecycleInstances()).thenReturn(Iterables.<Lifecycle>empty());
  HighlyAvailableCommitProcessFactory factory=new HighlyAvailableCommitProcessFactory(modeSwitchersLife,mock(Master.class),mock(TransactionPropagator.class),mock(RequestContextFactory.class),mock(HighAvailabilityModeSwitcher.class));
  TransactionCommitProcess commitProcess=factory.create(mock(TransactionAppender.class),mock(TransactionRepresentationStoreApplier.class),mock(NeoStoreInjectedTransactionValidator.class),mock(IndexUpdatesValidator.class),new Config());
  assertThat(commitProcess,not(instanceOf(ReadOnlyTransactionCommitProcess.class)));
  assertThat(Proxy.getInvocationHandler(commitProcess),instanceOf(DelegateInvocationHandler.class));
}
