{
  NonIndexedConflictResolver resolver=new NonIndexedConflictResolver(propertyKeyTokenStore,propertyStore);
  List<DuplicateCluster> clusterListA=new ArrayList<>();
  long propertyIdA=addDuplicateCluster(nodeIdA,clusterListA);
  List<DuplicateCluster> clusterListB=new ArrayList<>();
  long propertyIdB=addDuplicateCluster(nodeIdB,clusterListB);
  resolver.visited(0,clusterListA);
  resolver.visited(0,clusterListB);
  Token duplicateTokenA=findTokenFor(propertyKeyTokenStore,"__DUPLICATE_keyA_1");
  assertNotNull(duplicateTokenA);
  Set<Integer> propertyKeyIdsA=collectPropertyKeyIds(propertyIdA);
  assertThat(propertyKeyIdsA,contains(tokenA.id(),duplicateTokenA.id()));
  Set<Integer> propertyKeyIdsB=collectPropertyKeyIds(propertyIdB);
  assertThat(propertyKeyIdsB,contains(tokenA.id(),duplicateTokenA.id()));
}
