{
  String chosenLower, chosenUpper;
  boolean includeChosenLower, includeChosenUpper;
  if (lower == null) {
    chosenLower=null;
    includeChosenLower=true;
  }
 else {
    chosenLower=NumericUtils.doubleToPrefixCoded(lower.doubleValue());
    includeChosenLower=includeLower;
  }
  if (upper == null) {
    chosenUpper=null;
    includeChosenUpper=true;
  }
 else {
    chosenUpper=NumericUtils.doubleToPrefixCoded(upper.doubleValue());
    includeChosenUpper=upperInclusive;
  }
  return new TermRangeQuery(ValueEncoding.Number.key(),chosenLower,chosenUpper,includeChosenLower,includeChosenUpper);
}
