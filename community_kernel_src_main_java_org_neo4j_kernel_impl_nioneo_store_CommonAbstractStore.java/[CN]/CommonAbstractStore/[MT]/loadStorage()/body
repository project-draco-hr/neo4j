{
  try {
    verifyCorrectTypeDescriptorAndVersion();
    readAndVerifyBlockSize();
    verifyFileSizeAndTruncate();
  }
 catch (  IOException e) {
    throw new UnderlyingStorageException("Unable to load storage " + getStorageFileName(),e);
  }
  loadIdGenerator();
  setWindowPool(new PersistenceWindowPool(getStorageFileName(),getEffectiveRecordSize(),getFileChannel(),calculateMappedMemory(getConfig(),storageFileName),getIfMemoryMapped(),isReadOnly() && !isBackupSlave()));
}
