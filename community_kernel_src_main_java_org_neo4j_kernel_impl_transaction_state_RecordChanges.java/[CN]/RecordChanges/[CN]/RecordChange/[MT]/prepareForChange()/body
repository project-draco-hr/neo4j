{
  ensureHasBeforeRecordImage();
  if (!this.changed) {
    RecordChange<KEY,RECORD,ADDITIONAL> previous=this.allChanges.put(key,this);
    if (previous == null || !previous.changed) {
      changeCounter.increment();
    }
    this.changed=true;
  }
  return this.record;
}
