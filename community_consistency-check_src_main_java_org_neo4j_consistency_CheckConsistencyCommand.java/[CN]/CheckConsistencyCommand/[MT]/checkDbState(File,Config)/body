{
  try (PageCache pageCache=StandalonePageCacheFactory.createPageCache(this.fileSystemAbstraction,additionalConfiguration)){
    if (new RecoveryRequiredChecker(this.fileSystemAbstraction,pageCache).isRecoveryRequiredAt(storeDir)) {
      throw new CommandFailed(Strings.joinAsLines("Active logical log detected, this might be a source of inconsistencies.","Please recover database before running the consistency check.","To perform recovery please start database and perform clean shutdown."));
    }
  }
 catch (  IOException e) {
    outsideWorld.stdErrLine("Failure when checking for recovery state: '%s', continuing as normal.%n" + e.getMessage());
  }
}
