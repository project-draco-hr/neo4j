{
  if (!IndexReader.indexExists(directory))   return false;
  IndexReader reader=null;
  try {
    reader=IndexReader.open(directory);
    Map<String,String> userData=reader.getIndexCommit().getUserData();
    return ONLINE.equals(userData.get(KEY_STATUS));
  }
  finally {
    if (reader != null) {
      reader.close();
    }
  }
}
