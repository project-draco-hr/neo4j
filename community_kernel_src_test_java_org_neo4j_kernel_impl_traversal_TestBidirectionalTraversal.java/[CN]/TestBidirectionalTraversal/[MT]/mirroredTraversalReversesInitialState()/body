{
  createGraph("a TO b","b TO c","c TO d");
  BranchCollisionPolicy collisionPolicy=new BranchCollisionPolicy(){
    @Override public BranchCollisionDetector create(    Evaluator evaluator){
      return new StandardBranchCollisionDetector(null,null){
        @Override protected boolean includePath(        Path path,        TraversalBranch startPath,        TraversalBranch endPath){
          assertEquals(0,startPath.state());
          assertEquals(10,endPath.state());
          return true;
        }
      }
;
    }
    @Override public BranchCollisionDetector create(    Evaluator evaluator,    Predicate<Path> pathPredicate){
      return create(evaluator);
    }
  }
;
  count(bidirectionalTraversal().mirroredSides(traversal(NODE_PATH).expand(PathExpanders.<Integer>forType(to),new InitialBranchState.State<>(0,10))).collisionPolicy(collisionPolicy).traverse(getNodeWithName("a"),getNodeWithName("d")));
}
