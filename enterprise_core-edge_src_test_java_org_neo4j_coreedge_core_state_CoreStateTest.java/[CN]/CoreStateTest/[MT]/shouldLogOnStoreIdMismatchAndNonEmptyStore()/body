{
  StoreId localStoreId=new StoreId(1,2,3,4);
  StoreId otherStoreId=new StoreId(5,6,7,8);
  LocalDatabase localDatabase=mock(LocalDatabase.class);
  when(localDatabase.isEmpty()).thenReturn(false);
  when(localDatabase.storeId()).thenReturn(localStoreId);
  AssertableLogProvider logProvider=new AssertableLogProvider();
  CommandApplicationProcess applicationProcess=mock(CommandApplicationProcess.class);
  CoreState coreState=new CoreState(null,localDatabase,logProvider,null,null,applicationProcess);
  RaftMessages.NewEntry.Request message=new RaftMessages.NewEntry.Request(CURRENT_VERSION,member(0),null);
  coreState.handle(new RaftMessages.StoreIdAwareMessage(otherStoreId,message));
  verifyZeroInteractions(applicationProcess);
  logProvider.assertContainsLogCallContaining("Discarding message");
}
