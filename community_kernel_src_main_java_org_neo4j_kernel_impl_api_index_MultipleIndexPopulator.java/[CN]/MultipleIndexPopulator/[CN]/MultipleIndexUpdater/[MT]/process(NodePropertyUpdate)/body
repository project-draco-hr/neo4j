{
  Iterator<Map.Entry<IndexDescriptor,IndexUpdater>> entries=updaters.entrySet().iterator();
  while (entries.hasNext()) {
    Map.Entry<IndexDescriptor,IndexUpdater> entry=entries.next();
    IndexDescriptor descriptor=entry.getKey();
    IndexUpdater updater=entry.getValue();
    IndexPopulation populator=multipleIndexPopulator.getPopulation(descriptor);
    if (populator.isApplicable(update)) {
      try {
        updater.process(update);
      }
 catch (      Throwable t) {
        try {
          updater.close();
        }
 catch (        Throwable ce) {
          log.error(format("Failed to close index updater: [%s]",updater),ce);
        }
        entries.remove();
        multipleIndexPopulator.fail(descriptor,t);
      }
    }
  }
}
