{
  Iterator<Map.Entry<IndexPopulation,IndexUpdater>> iterator=populationsWithUpdaters.entrySet().iterator();
  while (iterator.hasNext()) {
    Map.Entry<IndexPopulation,IndexUpdater> entry=iterator.next();
    IndexPopulation population=entry.getKey();
    IndexUpdater updater=entry.getValue();
    if (population.isApplicable(update)) {
      try {
        updater.process(update);
      }
 catch (      Throwable t) {
        try {
          updater.close();
        }
 catch (        Throwable ce) {
          log.error(format("Failed to close index updater: [%s]",updater),ce);
        }
        iterator.remove();
        multipleIndexPopulator.fail(population,t);
      }
    }
  }
}
