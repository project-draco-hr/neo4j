{
  try {
    Object cls=constructor.invoke();
    for (    FieldInjections.FieldSetter setter : fieldSetters) {
      setter.apply(ctx,cls);
    }
    Object[] args=new Object[signature.inputSignature().size() + 1];
    args[0]=cls;
    System.arraycopy(input,0,args,1,input.length);
    Object rs=procedureMethod.invokeWithArguments(args);
    if (rs != null) {
      return new MappingIterator(((Stream<?>)rs).iterator());
    }
 else {
      return asRawIterator(emptyIterator());
    }
  }
 catch (  Throwable throwable) {
    String message=throwable.getMessage();
    if (message == null) {
      message=String.format("`%s` was thrown when invoking the procedure.",throwable.getClass().getName());
    }
    throw new ProcedureException(Status.Procedure.CallFailed,throwable,"Failed to invoke procedure `%s`: %s",signature.name(),message);
  }
}
