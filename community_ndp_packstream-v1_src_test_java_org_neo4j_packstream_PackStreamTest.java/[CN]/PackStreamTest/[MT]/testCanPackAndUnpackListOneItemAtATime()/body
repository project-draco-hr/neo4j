{
  Machine machine=new Machine();
  PackStream.Packer packer=machine.packer();
  packer.packListHeader(3);
  packer.pack(12);
  packer.pack(13);
  packer.pack(14);
  packer.flush();
  PackValue value=newUnpacker(machine.output()).unpack();
  assertThat(value.isList(),equalTo(true));
  List<PackValue> list=value.listValue();
  assertThat(list.size(),equalTo(3));
  assertThat(list.get(0).isInteger(),equalTo(true));
  assertThat(list.get(1).isInteger(),equalTo(true));
  assertThat(list.get(2).isInteger(),equalTo(true));
  assertThat(list.get(0).intValue(),equalTo(12));
  assertThat(list.get(1).intValue(),equalTo(13));
  assertThat(list.get(2).intValue(),equalTo(14));
}
