{
  Machine machine=new Machine();
  PackStream.Packer packer=machine.packer();
  packer.packListHeader(3);
  packer.flush();
  packer.pack("eins");
  packer.flush();
  packer.pack("zwei");
  packer.flush();
  packer.pack("drei");
  packer.flush();
  PackValue value=newUnpacker(machine.output()).unpack();
  assertThat(value.isList(),equalTo(true));
  List<PackValue> list=value.listValue();
  assertThat(list.size(),equalTo(3));
  assertThat(list.get(0).isText(),equalTo(true));
  assertThat(list.get(1).isText(),equalTo(true));
  assertThat(list.get(2).isText(),equalTo(true));
  assertThat(list.get(0).stringValue(),equalTo("eins"));
  assertThat(list.get(1).stringValue(),equalTo("zwei"));
  assertThat(list.get(2).stringValue(),equalTo("drei"));
}
