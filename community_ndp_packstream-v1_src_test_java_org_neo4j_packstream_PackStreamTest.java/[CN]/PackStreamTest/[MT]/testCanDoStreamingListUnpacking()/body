{
  Machine machine=new Machine();
  PackStream.Packer packer=machine.packer();
  packer.pack(asList(1,2,3,asList(4,5)));
  packer.flush();
  PackStream.Unpacker unpacker=newUnpacker(machine.output());
  long size=unpacker.unpackListHeader();
  long a=unpacker.unpackLong();
  long b=unpacker.unpackLong();
  long c=unpacker.unpackLong();
  long innerSize=unpacker.unpackListHeader();
  long d=unpacker.unpackLong();
  long e=unpacker.unpackLong();
  assertEquals(4,size);
  assertEquals(2,innerSize);
  assertEquals(1,a);
  assertEquals(2,b);
  assertEquals(3,c);
  assertEquals(4,d);
  assertEquals(5,e);
}
