{
  Machine machine=new Machine();
  for (int i=0; i < 32; i++) {
    double n=Math.pow(2,i) - 0.5;
    machine.reset();
    machine.packer().pack(n);
    machine.packer().flush();
    PackValue value=newUnpacker(machine.output()).unpack();
    assertThat(value.isFloat(),equalTo(true));
    assertThat(value.doubleValue(),equalTo(n));
  }
}
