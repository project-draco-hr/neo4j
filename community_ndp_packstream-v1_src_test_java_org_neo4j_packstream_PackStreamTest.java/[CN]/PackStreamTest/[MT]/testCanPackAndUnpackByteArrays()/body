{
  Machine machine=new Machine(17000000);
  for (int i=0; i < 24; i++) {
    byte[] array=new byte[(int)Math.pow(2,i)];
    machine.reset();
    machine.packer().pack(array);
    machine.packer().flush();
    byte[] value=newUnpacker(machine.output()).unpackBytes();
    assertThat(value,equalTo(array));
  }
}
