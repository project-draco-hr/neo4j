{
  Machine machine=new Machine();
  for (int i=0; i < 32; i++) {
    long n=(long)Math.pow(2,i);
    machine.reset();
    machine.packer().pack(n);
    machine.packer().flush();
    PackValue value=newUnpacker(machine.output()).unpack();
    assertThat(value.isInteger(),equalTo(true));
    assertThat(value.longValue(),equalTo(n));
  }
}
