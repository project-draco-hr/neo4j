{
  Machine machine=new Machine();
  for (int i=0; i < 32; i++) {
    long n=(long)Math.pow(2,i);
    machine.reset();
    machine.packer().pack(n);
    machine.packer().flush();
    long value=newUnpacker(machine.output()).unpackLong();
    assertThat(value,equalTo(n));
  }
}
