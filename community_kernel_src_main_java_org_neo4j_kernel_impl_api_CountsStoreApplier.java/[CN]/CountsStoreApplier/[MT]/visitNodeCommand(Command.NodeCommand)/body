{
  NodeRecord before=command.getBefore(), after=command.getAfter();
  if (!before.inUse() && after.inUse()) {
    nodesDelta++;
  }
 else   if (before.inUse() && !after.inUse()) {
    nodesDelta--;
  }
  if (before.getLabelField() != after.getLabelField() || fieldPointsToDynamicRecordOfLabels(before.getLabelField())) {
    long[] labelsBefore=labels(before);
    long[] labelsAfter=labels(after);
    for (PrimitiveLongIterator added=diff(labelsBefore,labelsAfter); added.hasNext(); ) {
      label(added.next()).increment();
    }
    for (PrimitiveLongIterator removed=diff(labelsAfter,labelsBefore); removed.hasNext(); ) {
      label(removed.next()).decrement();
    }
  }
  return false;
}
