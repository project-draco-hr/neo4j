{
  boolean alreadyExisting=source.normalSet.contains(value);
  String addition="set.add( " + value + "L );";
  if (includeChecks) {
    out.println(format("boolean existedBefore = set.contains( %dL );",value));
    out.println(format("boolean added = %s",addition));
    out.println(format("boolean existsAfter = set.contains( %dL );",value));
    out.println(format("assert%s( \"%s\", existedBefore );",capitilize(alreadyExisting),value + " should " + (alreadyExisting ? "" : "not ")+ "exist before adding here"));
    out.println(format("assert%s( \"%s\", added );",capitilize(!alreadyExisting),value + " should " + (!alreadyExisting ? "" : "not ")+ "be reported as added here"));
    out.println(format("assertTrue( \"%s\", existsAfter );",value + " should exist"));
  }
 else {
    out.println(addition);
  }
}
