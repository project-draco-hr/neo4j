{
  out.ensure(8).putLong(1).ensure(8).putLong(2).ensure(8).putLong(3);
  out.messageBoundaryHook().run();
  out.flush();
  assertThat(writtenData.limit(),equalTo(32));
  assertThat(HexPrinter.hex(writtenData,0,32),equalTo("00 08 00 00 00 00 00 00    00 01 00 08 00 00 00 00    " + "00 00 00 02 00 08 00 00    00 00 00 00 00 03 00 00"));
}
