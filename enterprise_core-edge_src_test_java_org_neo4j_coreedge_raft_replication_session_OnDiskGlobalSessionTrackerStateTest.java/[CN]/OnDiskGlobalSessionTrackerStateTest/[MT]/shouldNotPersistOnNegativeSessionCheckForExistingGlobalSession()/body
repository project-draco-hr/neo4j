{
  FileSystemAbstraction fsa=new EphemeralFileSystemAbstraction();
  OnDiskGlobalSessionTrackerState<RaftTestMember> state=new OnDiskGlobalSessionTrackerState<>(fsa,testDir.directory(),new RaftTestMemberMarshal(),10,mock(Supplier.class));
  File fileName=new File(testDir.directory(),OnDiskGlobalSessionTrackerState.FILENAME + "a");
  GlobalSession<RaftTestMember> globalSession=new GlobalSession<>(randomUUID(),member(1));
  state.validateAndTrackOperationAtLogIndex(globalSession,new LocalOperationId(1,0),0);
  long initialFileSize=fsa.getFileSize(fileName);
  assertThat(initialFileSize,greaterThan(0L));
  state.validateAndTrackOperationAtLogIndex(globalSession,new LocalOperationId(2,4),1);
  assertThat(fsa.getFileSize(fileName),equalTo(initialFileSize));
}
