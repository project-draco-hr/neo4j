{
  Object relationshipsDescription=description.get("relationships");
  if (relationshipsDescription != null) {
    Collection<Object> pairDescriptions;
    if (relationshipsDescription instanceof Collection) {
      pairDescriptions=(Collection<Object>)relationshipsDescription;
    }
 else {
      pairDescriptions=Arrays.asList(relationshipsDescription);
    }
    for (    Object pairDescription : pairDescriptions) {
      Map map=(Map)pairDescription;
      String name=(String)map.get("type");
      RelationshipType type=DynamicRelationshipType.withName(name);
      String directionName=(String)map.get("direction");
      result=directionName == null ? result.relationships(type) : result.relationships(type,stringToEnum(directionName,RelationshipDirection.class,true).internal);
    }
  }
  return result;
}
