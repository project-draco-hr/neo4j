{
  Logger log=Logger.getLogger("org.neo4j.impl.persistence.BusinessLayerMonitor");
  log.setLevel(level1);
  log=Logger.getLogger("org.neo4j.impl.core.NeoConstraints");
  log.setLevel(level2);
  UserTransaction ut=TransactionFactory.getUserTransaction();
  try {
    if (ut.getStatus() == Status.STATUS_ACTIVE) {
      ut.commit();
    }
 else     if (ut.getStatus() == Status.STATUS_MARKED_ROLLBACK) {
      ut.rollback();
    }
 else     if (ut.getStatus() == Status.STATUS_NO_TRANSACTION) {
    }
 else {
      System.out.println("ARGH.");
      fail("Unkown transaction status[" + ut.getStatus() + "].");
    }
  }
 catch (  Exception e) {
    fail("Failed to end transaciton, " + e);
  }
}
