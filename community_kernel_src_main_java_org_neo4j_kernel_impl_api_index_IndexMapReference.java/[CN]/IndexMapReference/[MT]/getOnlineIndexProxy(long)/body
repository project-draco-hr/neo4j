{
  IndexProxy proxy=getIndexProxy(indexId);
switch (proxy.getState()) {
case ONLINE:
    return proxy;
default :
  throw new IndexNotFoundKernelException("Expected index with id " + indexId + " to be online.");
}
}
