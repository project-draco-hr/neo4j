{
  String propertyKey=UUID.randomUUID().toString();
  String propertyValue=UUID.randomUUID().toString();
  AtomicBoolean start=new AtomicBoolean(false);
  int readerDelay=ThreadLocalRandom.current().nextInt(MAX_READER_DELAY_MS);
  Writer writer=new Writer(db,propertyKey,propertyValue,start);
  Reader reader=new Reader(db,propertyKey,propertyValue,start,readerDelay);
  ExecutorService executor=Executors.newFixedThreadPool(2);
  Future<?> readResult;
  Future<?> writeResult;
  try {
    writeResult=executor.submit(writer);
    readResult=executor.submit(reader);
    start.set(true);
  }
  finally {
    executor.shutdown();
    executor.awaitTermination(20,TimeUnit.SECONDS);
  }
  assertNull(writeResult.get());
  assertNull(readResult.get());
}
