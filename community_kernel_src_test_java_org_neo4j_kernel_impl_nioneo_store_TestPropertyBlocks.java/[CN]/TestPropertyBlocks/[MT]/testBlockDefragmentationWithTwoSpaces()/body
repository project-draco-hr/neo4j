{
  Assume.assumeTrue(PropertyType.getPayloadSizeLongs() > 2);
  Node node=getGraphDb().createNode();
  long inUseBefore=propertyRecordsInUse();
  int stuffedIntegers=0;
  for (; stuffedIntegers < PropertyType.getPayloadSizeLongs(); stuffedIntegers++) {
    node.setProperty("int" + stuffedIntegers,stuffedIntegers);
  }
  assertEquals(stuffedIntegers,PropertyType.getPayloadSizeLongs());
  newTransaction();
  clearCache();
  assertEquals(inUseBefore + 1,propertyRecordsInUse());
  node.removeProperty("int0");
  node.removeProperty("int2");
  newTransaction();
  clearCache();
  node.setProperty("theDouble",1.0);
  newTransaction();
  clearCache();
  assertEquals(inUseBefore + 1,propertyRecordsInUse());
  assertNull(node.getProperty("int0",null));
  assertEquals(1,node.getProperty("int1"));
  assertNull(node.getProperty("int2",null));
  for (int i=3; i < stuffedIntegers; i++) {
    assertEquals(i,node.getProperty("int" + i));
  }
  assertEquals(1.0,node.getProperty("theDouble"));
}
