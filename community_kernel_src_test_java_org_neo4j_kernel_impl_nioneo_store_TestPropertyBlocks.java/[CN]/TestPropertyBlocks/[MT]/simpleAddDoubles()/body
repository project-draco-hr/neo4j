{
  long inUseBefore=propertyRecordsInUse();
  Node node=getGraphDb().createNode();
  for (int i=0; i < PropertyType.getPayloadSizeLongs() / 2; i++) {
    node.setProperty("prop" + i,i * -1.0);
    assertEquals(i * -1.0,node.getProperty("prop" + i));
  }
  newTransaction();
  clearCache();
  assertEquals(inUseBefore + 1,propertyRecordsInUse());
  for (int i=0; i < PropertyType.getPayloadSizeLongs() / 2; i++) {
    assertEquals(i * -1.0,node.getProperty("prop" + i));
  }
  for (int i=0; i < PropertyType.getPayloadSizeLongs() / 2; i++) {
    assertEquals(i * -1.0,node.removeProperty("prop" + i));
    assertFalse(node.hasProperty("prop" + i));
  }
  commit();
  assertEquals(inUseBefore,propertyRecordsInUse());
}
