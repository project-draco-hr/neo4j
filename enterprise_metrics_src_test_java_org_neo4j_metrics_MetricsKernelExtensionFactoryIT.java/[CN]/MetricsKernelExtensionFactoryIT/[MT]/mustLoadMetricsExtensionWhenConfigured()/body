{
  addNodes(1000);
  cluster.stop();
  File metricsFile=new File(outputPath,TransactionMetrics.TX_COMMITTED + ".csv");
  try (BufferedReader reader=new BufferedReader(new FileReader(metricsFile))){
    String[] headers=reader.readLine().split(",");
    assertThat(headers[0],is("t"));
    assertThat(headers[1],is("value"));
    int committedTransactions=0;
    String line;
    while ((line=reader.readLine()) != null) {
      String[] fields=line.split(",");
      int newCommittedTransactions=Integer.parseInt(fields[1]);
      assertThat(newCommittedTransactions,greaterThanOrEqualTo(committedTransactions));
      committedTransactions=newCommittedTransactions;
    }
  }
 }
