{
  final StampedLock lock=new StampedLock();
  long s=lock.writeLock();
  Thread t=newStartedThread(new CheckedRunnable(){
    public void realRun(){
      long ws=lock.tryWriteLock();
      assertTrue(ws == 0L);
    }
  }
);
  awaitTermination(t);
  releaseWriteLock(lock,s);
}
