{
  Long[] nodeIds={12L,34L,567L};
  IndexReader indexReader=mock(IndexReader.class);
  when(indexReader.isDeleted(anyInt())).thenReturn(false);
  LuceneAllEntriesIndexAccessorReader reader=new LuceneAllEntriesIndexAccessorReader(new SearcherManagerStub(new SearcherStub(indexReader,nodeIds)),new LuceneDocumentStructure());
  Iterator<Long> iterator=reader.iterator();
  Collection<Long> actualNodeIds=IteratorUtil.asCollection(iterator);
  for (int i=0; i < nodeIds.length; i++) {
    assertThat(actualNodeIds,hasItem(nodeIds[i]));
  }
}
