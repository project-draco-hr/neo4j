{
  PropertyContainerState state=new PropertyContainerState(1);
  state.addProperty(stringProperty(1,"Hello"));
  state.addProperty(stringProperty(2,"Hello"));
  state.removeProperty(3);
  Iterator<DefinedProperty> props=state.augmentProperties(IteratorUtil.iterator(stringProperty(1,"ShouldBeReplaced"),stringProperty(3,"ShouldBeRemoved"),stringProperty(4,"ShouldShowUp")));
  assertThat(IteratorUtil.asList(props),equalTo(asList(stringProperty(4,"ShouldShowUp"),stringProperty(1,"Hello"),stringProperty(2,"Hello"))));
}
