{
  GraphDatabaseService graphDb=newBatchGraphDatabase();
  Node startNode=graphDb.createNode();
  for (int i=0; i < 5; i++) {
    Node endNode=graphDb.createNode();
    startNode.createRelationshipTo(endNode,relTypeArray[i]);
  }
  for (int i=0; i < 5; i++) {
    assertTrue(format("Expected a relationship of type %s on node %s",relTypeArray[i],startNode),startNode.getSingleRelationship(relTypeArray[i],Direction.OUTGOING) != null);
  }
  for (int i=0; i < 5; i++) {
    Iterator<Relationship> relItr=startNode.getRelationships(relTypeArray[i],Direction.OUTGOING).iterator();
    relItr.next();
    assertTrue(!relItr.hasNext());
  }
  for (int i=0; i < 5; i++) {
    Iterator<Relationship> relItr=startNode.getRelationships(relTypeArray[i]).iterator();
    relItr.next();
    assertTrue(!relItr.hasNext());
  }
  graphDb.shutdown();
}
