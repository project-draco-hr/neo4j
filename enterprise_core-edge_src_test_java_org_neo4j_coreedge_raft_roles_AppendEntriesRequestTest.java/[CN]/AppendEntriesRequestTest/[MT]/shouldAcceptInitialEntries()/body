{
  RaftState state=raftState().myself(myself).build();
  long leaderTerm=state.term() + leaderTermDifference;
  RaftLogEntry logEntry1=new RaftLogEntry(leaderTerm,content());
  RaftLogEntry logEntry2=new RaftLogEntry(leaderTerm,content());
  Outcome outcome=role.handler.handle(appendEntriesRequest().from(leader).leaderTerm(leaderTerm).prevLogIndex(-1).prevLogTerm(-1).logEntry(logEntry1).logEntry(logEntry2).build(),state,log());
  assertTrue(((Response)messageFor(outcome,leader)).success());
  assertThat(outcome.getLogCommands(),hasItem(new BatchAppendLogEntries(0,0,new RaftLogEntry[]{logEntry1,logEntry2})));
}
