{
  Label zeroDimension=new Label();
  super.visitInsn(Opcodes.DUP);
  super.visitLdcInsn(1);
  for (int i=0; i < dimCount; ++i) {
    super.visitInsn(Opcodes.SWAP);
    super.visitInsn(Opcodes.DUP_X1);
    super.visitInsn(Opcodes.ARRAYLENGTH);
    Label nonZeroDimension=new Label();
    super.visitInsn(Opcodes.DUP);
    super.visitJumpInsn(Opcodes.IFNE,nonZeroDimension);
    super.visitInsn(Opcodes.POP);
    super.visitJumpInsn(Opcodes.GOTO,zeroDimension);
    super.visitLabel(nonZeroDimension);
    super.visitInsn(Opcodes.IMUL);
    if (i < dimCount - 1) {
      super.visitInsn(Opcodes.SWAP);
      super.visitInsn(Opcodes.ICONST_0);
      super.visitInsn(Opcodes.AALOAD);
      super.visitInsn(Opcodes.SWAP);
    }
  }
  super.visitLabel(zeroDimension);
  super.visitInsn(Opcodes.SWAP);
  super.visitInsn(Opcodes.POP);
  super.visitInsn(Opcodes.SWAP);
  invokeRecordAllocation(typeName);
}
