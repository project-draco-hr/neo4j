{
  Label beginScopeLabel=new Label();
  Label endScopeLabel=new Label();
  int dimsArrayIndex=newLocal("[I",beginScopeLabel,endScopeLabel);
  int counterIndex=newLocal("I",beginScopeLabel,endScopeLabel);
  int productIndex=newLocal("I",beginScopeLabel,endScopeLabel);
  Label loopLabel=new Label();
  Label endLabel=new Label();
  super.visitLabel(beginScopeLabel);
  super.visitVarInsn(Opcodes.ASTORE,dimsArrayIndex);
  super.visitInsn(Opcodes.ICONST_0);
  super.visitVarInsn(Opcodes.ISTORE,counterIndex);
  super.visitInsn(Opcodes.ICONST_1);
  super.visitVarInsn(Opcodes.ISTORE,productIndex);
  super.visitLabel(loopLabel);
  super.visitVarInsn(Opcodes.ILOAD,counterIndex);
  super.visitVarInsn(Opcodes.ALOAD,dimsArrayIndex);
  super.visitInsn(Opcodes.ARRAYLENGTH);
  super.visitJumpInsn(Opcodes.IF_ICMPGE,endLabel);
  super.visitVarInsn(Opcodes.ALOAD,dimsArrayIndex);
  super.visitVarInsn(Opcodes.ILOAD,counterIndex);
  super.visitInsn(Opcodes.IALOAD);
  super.visitInsn(Opcodes.DUP);
  Label nonZeroDimension=new Label();
  super.visitJumpInsn(Opcodes.IFNE,nonZeroDimension);
  super.visitInsn(Opcodes.POP);
  super.visitInsn(Opcodes.ICONST_1);
  super.visitLabel(nonZeroDimension);
  super.visitVarInsn(Opcodes.ILOAD,productIndex);
  super.visitInsn(Opcodes.IMUL);
  super.visitVarInsn(Opcodes.ISTORE,productIndex);
  super.visitIincInsn(counterIndex,1);
  super.visitJumpInsn(Opcodes.GOTO,loopLabel);
  super.visitLabel(endLabel);
  super.visitVarInsn(Opcodes.ALOAD,dimsArrayIndex);
  super.visitVarInsn(Opcodes.ILOAD,productIndex);
  super.visitLabel(endScopeLabel);
}
