{
  ControlledTimeoutService timeouts=new ControlledTimeoutService();
  Outbound<RaftTestMember> outbound=mock(Outbound.class);
  RaftInstance<RaftTestMember> raft=new RaftInstanceBuilder<>(myself,3,RaftTestMemberSetBuilder.INSTANCE).outbound(outbound).timeoutService(timeouts).build();
  raft.bootstrapWithInitialMembers(new RaftTestGroup(asSet(myself,member1,member2)));
  raft.handle(voteRequest().from(member1).candidate(member1).term(1).build());
  raft.handle(voteRequest().from(member1).candidate(member1).term(1).build());
  verify(outbound,times(2)).send(member1,voteResponse().term(1).grant().build());
}
