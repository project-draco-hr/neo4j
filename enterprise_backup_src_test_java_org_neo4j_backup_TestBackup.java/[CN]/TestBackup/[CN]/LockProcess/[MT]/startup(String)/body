{
  GraphDatabaseService db=null;
  try {
    db=new EmbeddedGraphDatabase(path);
  }
 catch (  RuntimeException ex) {
    if (DATABASE_LOCKED_ERROR_MESSAGE.equals(ex.getCause().getCause().getMessage())) {
      state=ex;
      return;
    }
  }
  state=new Object();
  if (db != null) {
    db.shutdown();
  }
}
