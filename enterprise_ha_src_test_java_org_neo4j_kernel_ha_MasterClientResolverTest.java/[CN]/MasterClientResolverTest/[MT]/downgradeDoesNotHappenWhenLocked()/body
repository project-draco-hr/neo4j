{
  MasterClientResolver resolver=new MasterClientResolver(StringLogger.SYSTEM,0,0,0);
  resolver.getFor(3,2);
  resolver.enableDowngradeBarrier();
  resolver.getFor(2,2);
  MasterClient currentClient=resolver.instantiate("",0,null);
  assertEquals("locking should not allow downgrade",MasterClient17.class,currentClient.getClass());
  currentClient.shutdown();
}
