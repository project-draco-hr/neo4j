{
  resolver.enableDowngradeBarrier();
  resolver.getFor(3,2);
  MasterClient currentClient=resolver.instantiate("",0,null);
  assertEquals(MasterClient17.class,currentClient.getClass());
  currentClient.shutdown();
  currentClient=resolver.instantiate("",0,null);
  resolver.getFor(2,2);
  assertEquals("locking should not allow downgrade",MasterClient17.class,currentClient.getClass());
  currentClient.shutdown();
}
