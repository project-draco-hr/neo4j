{
  try {
    if (pushBackActive) {
      if (readBuffer.limit() < pushBackData.length) {
        readBuffer.put(pushBackData,0,readBuffer.limit());
        int length=pushBackData.length - readBuffer.limit();
        byte[] restData=new byte[length];
        System.arraycopy(pushBackData,readBuffer.limit(),restData,0,length);
        pushBackData=restData;
        return readBuffer.position();
      }
      pushBackActive=false;
      readBuffer.put(pushBackData);
      pushBackData=null;
    }
    channel.read(readBuffer);
    return readBuffer.position();
  }
 catch (  IOException e) {
    throw new SocketException(toString() + " error reading",e);
  }
}
