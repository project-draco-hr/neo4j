{
  writer=mock(IndexWriter.class);
  snapshotPolicy=mock(SnapshotDeletionPolicy.class);
  luceneSnapshot=mock(IndexCommit.class);
  IndexWriterConfig config=new IndexWriterConfig(null);
  when(writer.getConfig().getIndexDeletionPolicy()).thenReturn(snapshotPolicy);
  when(snapshotPolicy.snapshot()).thenReturn(luceneSnapshot);
}
