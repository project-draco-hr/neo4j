{
  File targetFolder=testDir.directory();
  try (ServerControls server=newInProcessBuilder(targetFolder).withFixture(new Function<GraphDatabaseService,Void>(){
    @Override public Void apply(    GraphDatabaseService graphDatabaseService) throws RuntimeException {
      try (Transaction tx=graphDatabaseService.beginTx()){
        graphDatabaseService.createNode(DynamicLabel.label("User"));
        tx.success();
      }
       return null;
    }
  }
).newServer()){
    HTTP.Response response=HTTP.POST(server.httpURI().toString() + "db/data/transaction/commit",quotedJson("{'statements':[{'statement':'MATCH (n:User) RETURN n'}]}"));
    assertThat(response.get("results").get(0).get("data").size(),equalTo(1));
  }
 }
