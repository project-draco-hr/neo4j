{
  msgLog.debug("Shutting down NetworkSender");
  for (  ExecutorService executorService : senderExecutors.values()) {
    executorService.shutdown();
  }
  for (  Map.Entry<URI,ExecutorService> entry : senderExecutors.entrySet()) {
    URI targetAddress=entry.getKey();
    ExecutorService executorService=entry.getValue();
    if (!executorService.awaitTermination(50,TimeUnit.SECONDS)) {
      msgLog.warn("Could not shut down send executor towards: " + targetAddress);
    }
  }
  senderExecutors.clear();
  channels.close().awaitUninterruptibly();
  clientBootstrap.releaseExternalResources();
  msgLog.debug("Shutting down NetworkSender for " + toString(config) + " complete");
}
