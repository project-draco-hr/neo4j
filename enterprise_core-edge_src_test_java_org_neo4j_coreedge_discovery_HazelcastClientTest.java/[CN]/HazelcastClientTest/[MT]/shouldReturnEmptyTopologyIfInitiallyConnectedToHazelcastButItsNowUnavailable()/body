{
  HazelcastConnector connector=mock(HazelcastConnector.class);
  HazelcastClient client=new HazelcastClient(connector,NullLogProvider.getInstance());
  HazelcastInstance hazelcastInstance=mock(HazelcastInstance.class);
  when(connector.connectToHazelcast()).thenReturn(hazelcastInstance);
  when(hazelcastInstance.getSet(anyString())).thenReturn(new HazelcastSet());
  when(hazelcastInstance.getCluster()).thenThrow(new HazelcastInstanceNotActiveException());
  ClusterTopology topology=client.currentTopology();
  assertEquals(0,topology.coreMembers().size());
}
