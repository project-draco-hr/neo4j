{
  HazelcastConnector connector=mock(HazelcastConnector.class);
  HazelcastClient client=new HazelcastClient(connector,NullLogProvider.getInstance());
  HazelcastInstance hazelcastInstance=mock(HazelcastInstance.class);
  when(connector.connectToHazelcast()).thenReturn(hazelcastInstance);
  com.hazelcast.core.Cluster cluster=mock(Cluster.class);
  when(hazelcastInstance.getCluster()).thenReturn(cluster);
  final ISet<Object> set=new HazelcastSet();
  when(hazelcastInstance.getSet(anyString())).thenReturn(set);
  Set<Member> members=asSet(makeMember(1),makeMember(2));
  when(cluster.getMembers()).thenReturn(members);
  client.currentTopology();
  client.registerEdgeServer(new AdvertisedSocketAddress("localhost:7000"));
  assertEquals(1,client.currentTopology().edgeMemberAddresses().size());
}
