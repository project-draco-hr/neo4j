{
  String[] args=new String[]{"-full","-from","single://localhost","-to","my_backup"};
  BackupService service=mock(BackupService.class);
  PrintStream systemOut=mock(PrintStream.class);
  new BackupTool(service,systemOut).run(args);
  ArgumentCaptor<Config> config=ArgumentCaptor.forClass(Config.class);
  verify(service).doFullBackup(anyString(),anyInt(),anyString(),anyBoolean(),config.capture());
  assertFalse(config.getValue().get(ConsistencyCheckSettings.consistency_check_property_owners));
  assertEquals(TaskExecutionOrder.MULTI_PASS,config.getValue().get(ConsistencyCheckSettings.consistency_check_execution_order));
  assertEquals(WindowPoolImplementation.SCAN_RESISTANT,config.getValue().get(ConsistencyCheckSettings.consistency_check_window_pool_implementation));
}
