{
  String[] args=new String[]{"-host","localhost","-to","my_backup","-consistency-checker","legacy"};
  BackupService service=mock(BackupService.class);
  PrintStream systemOut=mock(PrintStream.class);
  new BackupTool(service,systemOut).run(args);
  verify(service).doIncrementalBackupOrFallbackToFull(anyString(),anyInt(),any(File.class),eq(ConsistencyCheck.LEGACY),any(Config.class),anyLong(),anyBoolean());
}
