{
  String[] args=new String[]{"-full","-from","single://localhost","-to","my_backup"};
  BackupService service=mock(BackupService.class);
  when(service.directoryContainsDb(anyString())).thenReturn(true);
  PrintStream systemOut=mock(PrintStream.class);
  new BackupTool(service,systemOut).run(args);
  verify(service).doIncrementalBackupOrFallbackToFull(eq("localhost"),eq(BackupServer.DEFAULT_PORT),eq("my_backup"),eq(true),any(Config.class));
  verify(systemOut).println("Performing backup from 'single://localhost'");
  verify(systemOut).println("Done");
}
