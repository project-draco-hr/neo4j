{
  final Collection<File> files=new ArrayList<File>();
  final Collection<SnapshotDeletionPolicy> snapshots=new ArrayList<SnapshotDeletionPolicy>();
  for (  Map.Entry<IndexIdentifier,Triplet<IndexWriter,AtomicBoolean,SnapshotDeletionPolicy>> writer : indexWriters.entrySet()) {
    SnapshotDeletionPolicy deletionPolicy=writer.getValue().third();
    File indexDirectory=getFileDirectory(baseStorePath,writer.getKey());
    for (    String fileName : deletionPolicy.snapshot().getFileNames()) {
      files.add(new File(indexDirectory,fileName));
    }
    snapshots.add(deletionPolicy);
  }
  files.add(providerStore.getFile());
  return new ClosableIterable<File>(){
    public Iterator<File> iterator(){
      return files.iterator();
    }
    public void close(){
      for (      SnapshotDeletionPolicy deletionPolicy : snapshots) {
        deletionPolicy.release();
      }
    }
  }
;
}
