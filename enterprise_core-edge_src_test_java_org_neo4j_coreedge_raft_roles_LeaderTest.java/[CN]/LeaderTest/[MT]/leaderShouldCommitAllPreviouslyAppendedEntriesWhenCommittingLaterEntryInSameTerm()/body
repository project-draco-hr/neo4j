{
  InMemoryRaftLog raftLog=new InMemoryRaftLog();
  raftLog.append(new RaftLogEntry(0,new ReplicatedString("first!")));
  raftLog.append(new RaftLogEntry(0,new ReplicatedString("second")));
  raftLog.append(new RaftLogEntry(0,new ReplicatedString("third")));
  RaftState<RaftTestMember> state=raftState().votingMembers(myself,member1,member2).term(0).entryLog(raftLog).messagesSentToFollower(member1,raftLog.appendIndex() + 1).messagesSentToFollower(member2,raftLog.appendIndex() + 1).build();
  Leader leader=new Leader();
  Outcome<RaftTestMember> outcome=leader.handle(new AppendEntries.Response<>(member1,0,true,2,2),state,log());
  state.update(outcome);
  assertEquals(2,raftLog.commitIndex());
}
