{
  transaction=neo.beginTx();
  System.out.println("Generating graph");
  nodes=new long[numberOfNodes];
  ProgressBar progressBar=new ProgressBar(numberOfNodes);
  for (int n=0; n < numberOfNodes; ++n) {
    nodes[n]=neo.createNode().getId();
    renewTransaction();
    progressBar.Print();
  }
  progressBar=new ProgressBar(numberOfRelationships);
  for (int n=0; n < numberOfRelationships; ++n) {
    Node n1=getRandomNode(null);
    Node n2=getRandomNode(n1);
    Relationship relationship=n1.createRelationshipTo(n2,relationshipType);
    relationship.setProperty("cost",random.nextDouble());
    renewTransaction();
    progressBar.Print();
  }
  transaction.success();
  transaction.finish();
}
