{
  Thread currentThread=Thread.currentThread();
  if (resourceMap.containsKey(resource)) {
    List<Thread> lockingThreadList=resourceMap.get(resource);
    if (lockingThreadList.contains(currentThread)) {
      throw new RuntimeException("Thread already in locking list");
    }
    lockingThreadList.add(currentThread);
  }
 else {
    List<Thread> lockingThreadList=new LinkedList<Thread>();
    lockingThreadList.add(currentThread);
    resourceMap.put(resource,lockingThreadList);
  }
}
