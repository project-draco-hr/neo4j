{
  acquireLock(this,LockType.WRITE);
  try {
    EventManager em=EventManager.getManager();
    EventData eventData=new EventData(new NodeOpData(this,id));
    if (!em.generateProActiveEvent(Event.NODE_DELETE,eventData)) {
      setRollbackOnly();
      throw new DeleteException("Generate pro-active event failed, " + "unable to delete " + this);
    }
    nodeRelPhase=NodePhase.EMPTY_REL;
    nodePropPhase=NodePhase.EMPTY_PROPERTY;
    relationshipMap=new ArrayMap<String,ArrayIntSet>();
    propertyMap=new ArrayMap<Integer,Property>(9,false,true);
    nodeManager.removeNodeFromCache(id);
    em.generateReActiveEvent(Event.NODE_DELETE,eventData);
  }
  finally {
    releaseLock(this,LockType.WRITE);
  }
}
