{
  acquireLock(this,LockType.READ);
  try {
    ensureFullRelationships();
    if (relationshipMap == null) {
      return Collections.emptyList();
    }
    ArrayIntSet relationshipSet=relationshipMap.get(type.name());
    if (relationshipSet == null) {
      return Collections.emptyList();
    }
    List<Relationship> rels=new LinkedList<Relationship>();
    Iterator<Integer> values=relationshipSet.iterator();
    while (values.hasNext()) {
      rels.add(new RelationshipProxy(values.next()));
    }
    return rels;
  }
  finally {
    releaseLock(this,LockType.READ);
  }
}
