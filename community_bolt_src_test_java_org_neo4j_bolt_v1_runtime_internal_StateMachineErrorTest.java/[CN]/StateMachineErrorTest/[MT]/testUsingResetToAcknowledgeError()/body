{
  RecordingCallback<StatementMetadata,Object> messages=new RecordingCallback<>();
  RecordingCallback<Void,Object> failures=new RecordingCallback<>();
  SessionStateMachine machine=newIdleMachine();
  machine.commitTransaction();
  machine.reset(failures);
  assertThat(failures.next(),SessionMatchers.success());
  machine.run("src/test",EMPTY_PARAMS,messages);
  assertThat(messages.next(),SessionMatchers.success());
}
