{
  StringBuffer buffer=new StringBuffer();
  StringLogger delegate=StringLogger.wrap(buffer);
  FakeClock fakeClock=new FakeClock();
  StringLogger cappedLogger=StringLogger.cappedLogger(delegate,CappedOperation.<String>time(fakeClock,1,TimeUnit.MILLISECONDS));
  fakeClock.forward(1,TimeUnit.MILLISECONDS);
  cappedLogger.info("f1rst");
  cappedLogger.info("s3cond");
  fakeClock.forward(1,TimeUnit.MILLISECONDS);
  cappedLogger.info("th1rd");
  String output=buffer.toString();
  assertThat(output,containsString("f1rst"));
  assertThat(output,containsString("th1rd"));
  assertThat(output,not(containsString("s3cond")));
}
