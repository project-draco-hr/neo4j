{
  StoreFactory factory=new StoreFactory(config,new DefaultIdGeneratorFactory(),windowPoolFactory(config,logger),new DefaultFileSystemAbstraction(),new DefaultLastCommittedTxIdSetter(),logger,new DefaultTxHook());
  NeoStore neoStore=factory.newNeoStore(new File(storeDir,NeoStore.DEFAULT_NAME).getAbsolutePath());
  try {
    StoreAccess store=new StoreAccess(neoStore);
    new FullCheck(config.get(consistency_check_property_owners),executionMode(config),progressFactory).execute(store,logger);
  }
  finally {
    neoStore.close();
  }
}
