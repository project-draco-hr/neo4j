{
  long end=System.currentTimeMillis() + 10000;
  String attr;
  while (System.currentTimeMillis() < end) {
    try {
      attr=this.getAttribute(attributeName);
      if ((attr == null && expectedValue == null) || (attr != null && attr.matches(expectedValue))) {
        return;
      }
    }
 catch (    NoSuchElementException e) {
    }
    try {
      Thread.sleep(13);
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
  }
  throw new RuntimeException("Element did not become visible within a reasonable time.");
}
