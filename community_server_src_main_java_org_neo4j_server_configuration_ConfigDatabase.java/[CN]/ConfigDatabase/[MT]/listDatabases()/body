{
  final List<DatabaseDefinition> dbs=new ArrayList<>();
  databases.visit(CONFIG_DB,new DatabaseRegistry.Visitor(){
    @Override public void visit(    Database db){
      try (Transaction ignore=db.getGraph().beginTx()){
        for (        Map<String,Object> row : db.executionEngine().execute("MATCH (db:Database)-[:CONFIGURED_BY]->(cfg) RETURN db.key, db.provider, db.mode, cfg")) {
          dbs.add(new DatabaseDefinition((String)row.get("db.key"),(String)row.get("db.provider"),Mode.fromString((String)row.get("db.mode")),new Config(toStringMap((Node)row.get("cfg")))));
        }
      }
     }
  }
);
  return dbs;
}
