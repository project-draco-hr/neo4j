{
  FakeClock clock=new FakeClock();
  TestableMonitor first=new TestableMonitor(clock,100,MILLISECONDS);
  TestableMonitor other=new TestableMonitor(clock,250,MILLISECONDS);
  MultiExecutionMonitor multiMonitor=new MultiExecutionMonitor(clock,first,other);
  StageExecution execution=mock(StageExecution.class);
  when(execution.stillExecuting()).thenReturn(true);
  OtherThreadExecutor<Void> t2=cleanup.add(new OtherThreadExecutor<Void>("T2",null));
  Future<Object> future=t2.executeDontWait(monitor(clock,multiMonitor,execution));
  clock.forward(110,MILLISECONDS);
  awaitChecks(first,1,other,0);
  clock.forward(100,MILLISECONDS);
  awaitChecks(first,2,other,0);
  clock.forward(45,MILLISECONDS);
  awaitChecks(first,2,other,1);
  when(execution.stillExecuting()).thenReturn(false);
  future.get();
}
