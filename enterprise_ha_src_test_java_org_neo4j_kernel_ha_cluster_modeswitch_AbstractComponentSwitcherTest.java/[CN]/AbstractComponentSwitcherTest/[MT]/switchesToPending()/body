{
  DelegateInvocationHandler<Component> delegate=new DelegateInvocationHandler<>(Component.class);
  TestComponentSwitcher switcher=new TestComponentSwitcher(delegate);
  switcher.switchToPending();
  try {
    delegateClass(delegate);
    fail("Exception expected");
  }
 catch (  Throwable throwable) {
    assertThat(throwable,instanceOf(TransactionFailureException.class));
  }
}
