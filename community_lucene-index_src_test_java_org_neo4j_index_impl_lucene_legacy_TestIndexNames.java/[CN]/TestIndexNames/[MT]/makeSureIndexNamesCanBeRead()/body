{
  beginTx();
  assertEquals(0,graphDb.index().nodeIndexNames().length);
  String name1="my-index-1";
  Index<Node> nodeIndex1=graphDb.index().forNodes(name1);
  assertContains(Arrays.asList(graphDb.index().nodeIndexNames()),name1);
  String name2="my-index-2";
  graphDb.index().forNodes(name2);
  assertContains(Arrays.asList(graphDb.index().nodeIndexNames()),name1,name2);
  graphDb.index().forRelationships(name1);
  assertContains(Arrays.asList(graphDb.index().nodeIndexNames()),name1,name2);
  assertContains(Arrays.asList(graphDb.index().relationshipIndexNames()),name1);
  finishTx(true);
  restartTx();
  assertContains(Arrays.asList(graphDb.index().nodeIndexNames()),name1,name2);
  assertContains(Arrays.asList(graphDb.index().relationshipIndexNames()),name1);
  nodeIndex1.delete();
  assertContains(Arrays.asList(graphDb.index().nodeIndexNames()),name1,name2);
  assertContains(Arrays.asList(graphDb.index().relationshipIndexNames()),name1);
  finishTx(true);
  beginTx();
  assertContains(Arrays.asList(graphDb.index().nodeIndexNames()),name2);
  assertContains(Arrays.asList(graphDb.index().relationshipIndexNames()),name1);
  finishTx(false);
}
