{
  MetaDataOperations oldMetaDataOperations=statement.metaOperations();
  InternalTransaction oldTransaction=transaction;
  KernelTransaction oldKernelTx=txBridge.getKernelTransactionBoundToThisThread(true);
  txBridge.unbindTransactionFromCurrentThread();
  transaction=graph.beginTransaction(transactionType,mode);
  statement=txBridge.get();
  statement.metaOperations().registerExecutingQuery(executingQuery);
  KernelTransaction kernelTx=txBridge.getKernelTransactionBoundToThisThread(true);
  txBridge.unbindTransactionFromCurrentThread();
  txBridge.bindTransactionToCurrentThread(oldKernelTx);
  oldMetaDataOperations.unregisterExecutingQuery(executingQuery);
  oldTransaction.success();
  oldTransaction.close();
  txBridge.bindTransactionToCurrentThread(kernelTx);
}
