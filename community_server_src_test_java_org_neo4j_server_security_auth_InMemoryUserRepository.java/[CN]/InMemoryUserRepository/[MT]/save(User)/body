{
  if (user.hasToken()) {
    for (    User other : users.values()) {
      if (other.tokenEquals(user.token()) && !other.name().equals(user.name())) {
        throw new IllegalTokenException("Unable to set token, because the chosen token is already in use.");
      }
    }
  }
  users.put(user.name(),user);
}
