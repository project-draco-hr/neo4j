{
  Args arguments=new Args(args);
  String storeDir=determineStoreDirectory(arguments);
  Config tuningConfiguration=readTuningConfiguration(storeDir,arguments);
  attemptRecoveryOrCheckStateOfLogicalLogs(arguments,storeDir);
  try {
    consistencyCheckService.runFullConsistencyCheck(storeDir,tuningConfiguration,ProgressMonitorFactory.textual(System.err),StringLogger.SYSTEM);
  }
 catch (  ConsistencyCheckIncompleteException e) {
    throw new ToolFailureException("Check aborted due to exception",e);
  }
}
