{
  localDatabase.start();
  MemberId memberId=findCoreMemberToCopyFrom();
  if (localDatabase.isEmpty()) {
    log.info("Local database is empty, attempting to replace with copy from core server %s",memberId);
    log.info("Stopping local database before copy.");
    localDatabase.stop();
    log.info("Finding store id of core server %s",memberId);
    StoreId storeId=storeFetcher.storeId(memberId);
    log.info("Copying store from core server %s",memberId);
    localDatabase.bringUpToDateOrReplaceStoreFrom(memberId,storeId,storeFetcher);
    log.info("Restarting local database after copy.",memberId);
    localDatabase.start();
  }
 else {
    log.info("Already have store with StoreId %s. Checking that it matches the StoreId of %s",localDatabase.storeId(),memberId);
    localDatabase.ensureSameStoreId(memberId,storeFetcher);
  }
  txPulling.start();
}
