{
  StatementContext context=statementCtxProvider.getCtxForReading();
  try {
    long labelId=context.getLabelId(label);
    final Iterator<Long> nodeIds=context.getNodesWithLabel(labelId);
    return withResource(map(new Function<Long,Node>(){
      @Override public Node apply(      Long nodeId){
        return nodeManager.getNodeById(nodeId);
      }
    }
,nodeIds),context);
  }
 catch (  LabelNotFoundKernelException e) {
    context.close();
    return emptyIterator();
  }
}
