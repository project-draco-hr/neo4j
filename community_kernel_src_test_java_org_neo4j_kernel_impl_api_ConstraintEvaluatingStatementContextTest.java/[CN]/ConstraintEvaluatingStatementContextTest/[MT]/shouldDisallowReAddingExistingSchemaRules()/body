{
  long id=3, label=0, propertyKey=7;
  IndexRule rule=new IndexRule(id,label,POPULATING,new long[]{propertyKey});
  StatementContext inner=Mockito.mock(StatementContext.class);
  ConstraintEvaluatingStatementContext ctx=new ConstraintEvaluatingStatementContext(inner);
  when(inner.getIndexedProperties(rule.getLabel())).thenReturn(asList(propertyKey));
  try {
    ctx.addIndexRule(label,propertyKey);
    fail("Should have thrown exception.");
  }
 catch (  ConstraintViolationKernelException e) {
  }
  verify(inner,never()).addIndexRule(anyLong(),anyLong());
}
