{
  OutputCollector output=new OutputCollector();
  shellServer.interpretLine(command,shellClient.session(),output);
  for (  String lineThatMustExist : theseLinesMustExistRegEx) {
    boolean negative=lineThatMustExist.startsWith("!");
    lineThatMustExist=negative ? lineThatMustExist.substring(1) : lineThatMustExist;
    Pattern pattern=compile(lineThatMustExist);
    boolean found=false;
    for (    String line : output) {
      if (pattern.matcher(line).find()) {
        found=true;
        break;
      }
    }
    assertTrue("Was expecting a line matching '" + lineThatMustExist + "', but didn't find any from out of "+ asCollection(output),found != negative);
  }
}
