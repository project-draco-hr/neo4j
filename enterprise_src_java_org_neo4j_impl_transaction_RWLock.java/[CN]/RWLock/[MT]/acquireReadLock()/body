{
  Thread currentThread=Thread.currentThread();
  ThreadLockElement tle=null;
  if (threadLockElementMap.containsKey(currentThread)) {
    tle=threadLockElementMap.get(currentThread);
  }
 else {
    tle=new ThreadLockElement(currentThread);
  }
  try {
    while (writeCount > tle.writeCount) {
      ragManager.checkWaitOn(this);
      waitingThreadList.addFirst(new WaitElement(tle,LockType.READ));
      try {
        wait();
      }
 catch (      InterruptedException e) {
      }
      ragManager.stopWaitOn(this);
    }
    if (tle.readCount == 0 && tle.writeCount == 0) {
      ragManager.lockAcquired(this);
    }
    readCount++;
    tle.readCount++;
    threadLockElementMap.put(currentThread,tle);
  }
  finally {
    marked--;
  }
}
