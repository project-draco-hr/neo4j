{
  TransactionRepresentation[] transactionRepresentation=new TransactionRepresentation[1];
  KernelTransactions registry=newKernelTransactions(newRememberingCommitProcess(transactionRepresentation),newMockContextSupplierWithChanges());
  KernelTransaction transaction=registry.newInstance();
  transaction.success();
  transaction.close();
  byte[] additionalHeader=transactionRepresentation[0].additionalHeader();
  assertNotNull(additionalHeader);
  assertTrue(additionalHeader.length > 0);
}
