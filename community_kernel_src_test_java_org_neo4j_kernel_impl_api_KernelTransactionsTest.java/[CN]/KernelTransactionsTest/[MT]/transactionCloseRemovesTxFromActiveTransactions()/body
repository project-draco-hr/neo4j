{
  KernelTransactions kernelTransactions=newKernelTransactions();
  KernelTransaction tx1=kernelTransactions.newInstance();
  KernelTransaction tx2=kernelTransactions.newInstance();
  KernelTransaction tx3=kernelTransactions.newInstance();
  kernelTransactions.transactionClosed(tx1);
  kernelTransactions.transactionClosed(tx3);
  assertEquals(asSet(tx2),kernelTransactions.activeTransactions());
}
