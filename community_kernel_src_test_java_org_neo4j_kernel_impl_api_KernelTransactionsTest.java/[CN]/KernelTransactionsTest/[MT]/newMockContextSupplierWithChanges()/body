{
  return new MockContextSupplier(){
    @Override @SuppressWarnings("unchecked") protected NeoStoreTransactionContext create(){
      NeoStoreTransactionContext context=super.create();
      when(context.hasChanges()).thenReturn(true);
      RecordAccess<Long,NodeRecord,Void> recordChanges=mock(RecordAccess.class);
      when(recordChanges.changeSize()).thenReturn(1);
      RecordProxy<Long,NodeRecord,Void> recordChange=mock(RecordProxy.class);
      when(recordChange.forReadingLinkage()).thenReturn(new NodeRecord(1,false,1,1));
      when(recordChanges.changes()).thenReturn(Iterables.option(recordChange));
      when(context.getNodeRecords()).thenReturn(recordChanges);
      return context;
    }
  }
;
}
