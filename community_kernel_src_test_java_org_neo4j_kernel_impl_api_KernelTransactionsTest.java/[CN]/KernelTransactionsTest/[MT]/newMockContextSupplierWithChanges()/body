{
  return new MockContextSupplier(){
    @Override @SuppressWarnings("unchecked") protected NeoStoreTransactionContext create(){
      NeoStoreTransactionContext context=super.create();
      RecordChanges<Long,NodeRecord,Void> recordChanges=mock(RecordChanges.class);
      when(recordChanges.changeSize()).thenReturn(1);
      RecordChange<Long,NodeRecord,Void> recordChange=mock(RecordChange.class);
      when(recordChange.forReadingLinkage()).thenReturn(new NodeRecord(1,false,1,1));
      when(recordChanges.changes()).thenReturn(Iterables.option(recordChange));
      when(context.getNodeRecords()).thenReturn(recordChanges);
      return context;
    }
  }
;
}
