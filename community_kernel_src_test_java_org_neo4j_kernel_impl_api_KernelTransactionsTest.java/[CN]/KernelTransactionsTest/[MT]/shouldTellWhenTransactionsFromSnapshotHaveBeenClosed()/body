{
  KernelTransactions transactions=newKernelTransactions();
  KernelTransaction a=transactions.newInstance(KernelTransaction.Type.implicit,AccessMode.Static.NONE);
  KernelTransaction b=transactions.newInstance(KernelTransaction.Type.implicit,AccessMode.Static.NONE);
  KernelTransaction c=transactions.newInstance(KernelTransaction.Type.implicit,AccessMode.Static.NONE);
  KernelTransactionsSnapshot snapshot=transactions.get();
  assertFalse(snapshot.allClosed());
  a.close();
  assertFalse(snapshot.allClosed());
  c.close();
  KernelTransaction d=transactions.newInstance(KernelTransaction.Type.implicit,AccessMode.Static.NONE);
  assertFalse(snapshot.allClosed());
  b.close();
  assertTrue(snapshot.allClosed());
}
