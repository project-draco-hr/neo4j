{
  TransactionCommitProcess commitProcess=mock(TransactionCommitProcess.class);
  when(commitProcess.commit(any(TransactionRepresentation.class),any(LockGroup.class),any(CommitEvent.class),any(TransactionApplicationMode.class))).then(new Answer<Long>(){
    @Override public Long answer(    InvocationOnMock invocation) throws Throwable {
      slot[0]=((TransactionRepresentation)invocation.getArguments()[0]);
      return 1L;
    }
  }
);
  return commitProcess;
}
