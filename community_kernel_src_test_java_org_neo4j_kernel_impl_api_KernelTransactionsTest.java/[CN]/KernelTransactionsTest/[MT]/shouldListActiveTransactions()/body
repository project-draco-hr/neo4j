{
  KernelTransactions registry=newKernelTransactions();
  KernelTransaction first=registry.newInstance(KernelTransaction.Type.implicit,AccessMode.NONE);
  KernelTransaction second=registry.newInstance(KernelTransaction.Type.implicit,AccessMode.NONE);
  KernelTransaction third=registry.newInstance(KernelTransaction.Type.implicit,AccessMode.NONE);
  first.close();
  assertThat(Iterables.asUniqueSet(registry.activeTransactions()),equalTo(asSet(second,third)));
}
