{
  KernelTransactions registry=newTestKernelTransactions();
  KernelTransaction first=registry.newInstance(KernelTransaction.Type.implicit,AccessMode.Static.NONE);
  KernelTransaction second=registry.newInstance(KernelTransaction.Type.implicit,AccessMode.Static.NONE);
  KernelTransaction third=registry.newInstance(KernelTransaction.Type.implicit,AccessMode.Static.NONE);
  first.close();
  assertThat(registry.activeTransactions(),equalTo(asSet(newHandle(second),newHandle(third))));
}
