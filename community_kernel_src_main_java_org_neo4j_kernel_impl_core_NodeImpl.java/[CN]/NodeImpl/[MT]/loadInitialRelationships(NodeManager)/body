{
  Map<Long,RelationshipImpl> map=null;
synchronized (this) {
    if (relationshipMap == null) {
      this.relChainPosition=nodeManager.getRelationshipChainPosition(this);
      ArrayMap<String,DirectionedRelIdArray> tmpRelMap=new ArrayMap<String,DirectionedRelIdArray>();
      map=getMoreRelationships(nodeManager,tmpRelMap);
      this.relationshipMap=tmpRelMap;
    }
  }
  if (map != null) {
    nodeManager.putAllInRelCache(map);
  }
}
