{
  Triplet<ArrayMap<String,RelIdArray>,List<RelationshipImpl>,Long> rels=null;
synchronized (this) {
    if (relationships == null) {
      relChainPosition=nodeManager.getRelationshipChainPosition(this);
      ArrayMap<String,RelIdArray> tmpRelMap=new ArrayMap<String,RelIdArray>();
      rels=getMoreRelationships(nodeManager,tmpRelMap);
      int sizeBefore=size();
      this.relationships=toRelIdArray(tmpRelMap);
      updateSize(sizeBefore,size(),nodeManager);
      if (rels != null) {
        setRelChainPosition(rels.third());
      }
    }
  }
  if (rels != null) {
    nodeManager.putAllInRelCache(rels.second());
  }
}
