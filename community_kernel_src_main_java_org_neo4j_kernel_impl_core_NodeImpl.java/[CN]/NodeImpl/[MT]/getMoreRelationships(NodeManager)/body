{
  Pair<ArrayMap<String,DirectionedRelIdArray>,Map<Long,RelationshipImpl>> pair;
synchronized (this) {
    if (!relChainPosition.hasMore()) {
      return false;
    }
    pair=nodeManager.getMoreRelationships(this);
    ArrayMap<String,DirectionedRelIdArray> addMap=pair.first();
    if (addMap.size() == 0) {
      return false;
    }
    for (    String type : addMap.keySet()) {
      DirectionedRelIdArray addRels=addMap.get(type);
      DirectionedRelIdArray srcRels=relationshipMap.get(type);
      if (srcRels == null) {
        relationshipMap.put(type,addRels);
      }
 else {
        srcRels.addAll(addRels);
      }
    }
  }
  nodeManager.putAllInRelCache(pair.other());
  return true;
}
