{
  if (cmd.isIdempotent()) {
    int retries=0;
    RuntimeException exception=null;
    while (retries < maxRetries) {
      retries++;
      try {
        return cmd.run(sh,vagrantPath);
      }
 catch (      VagrantCommandException e) {
        exception=e;
      }
    }
    throw new RuntimeException("Command failed, retried " + retries + " times. Giving up.",exception);
  }
 else {
    return cmd.run(sh,vagrantPath);
  }
}
