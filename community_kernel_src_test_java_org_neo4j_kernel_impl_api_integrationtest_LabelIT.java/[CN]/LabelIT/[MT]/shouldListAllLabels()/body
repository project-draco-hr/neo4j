{
  int label1Id;
  int label2Id;
{
    TokenWriteOperations statement=tokenWriteOperationsInNewTransaction();
    label1Id=statement.labelGetOrCreateForName("label1");
    label2Id=statement.labelGetOrCreateForName("label2");
    Iterator<Token> labelIdsBeforeCommit=statement.labelsGetAllTokens();
    assertThat(asCollection(labelIdsBeforeCommit),hasItems(new Token("label1",label1Id),new Token("label2",label2Id)));
    commit();
  }
{
    DataWriteOperations statement=dataWriteOperationsInNewTransaction();
    Iterator<Token> labelIdsAfterCommit=statement.labelsGetAllTokens();
    assertThat(asCollection(labelIdsAfterCommit),hasItems(new Token("label1",label1Id),new Token("label2",label2Id)));
  }
}
