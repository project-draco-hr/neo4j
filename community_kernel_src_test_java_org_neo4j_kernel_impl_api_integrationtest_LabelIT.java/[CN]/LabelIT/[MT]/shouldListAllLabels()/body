{
  long label1Id;
  long label2Id;
{
    DataWriteOperations statement=dataWriteOperationsInNewTransaction();
    label1Id=statement.labelGetOrCreateForName("label1");
    label2Id=statement.labelGetOrCreateForName("label2");
    Iterator<Token> labelIdsBeforeCommit=statement.labelsGetAllTokens();
    assertThat(asCollection(labelIdsBeforeCommit),hasItems(new Token("label1",(int)label1Id),new Token("label2",(int)label2Id)));
    commit();
  }
{
    DataWriteOperations statement=dataWriteOperationsInNewTransaction();
    Iterator<Token> labelIdsAfterCommit=statement.labelsGetAllTokens();
    assertThat(asCollection(labelIdsAfterCommit),hasItems(new Token("label1",(int)label1Id),new Token("label2",(int)label2Id)));
  }
}
