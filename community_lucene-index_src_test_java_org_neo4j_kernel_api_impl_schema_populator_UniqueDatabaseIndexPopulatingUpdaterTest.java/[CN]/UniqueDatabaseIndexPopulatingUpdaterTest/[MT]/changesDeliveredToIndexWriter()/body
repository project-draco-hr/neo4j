{
  LuceneIndexWriter writer=mock(LuceneIndexWriter.class);
  UniqueLuceneIndexPopulatingUpdater updater=newUpdater(writer);
  updater.process(change(1,PROPERTY_KEY,"before1",new long[]{1},"after1",new long[]{1}));
  updater.process(change(2,PROPERTY_KEY,"before2",new long[]{1},"after2",new long[]{1}));
  verify(writer).updateDocument(newTermForChangeOrRemove(1),documentRepresentingProperty(1,"after1"));
  verify(writer).updateDocument(newTermForChangeOrRemove(2),documentRepresentingProperty(2,"after2"));
}
